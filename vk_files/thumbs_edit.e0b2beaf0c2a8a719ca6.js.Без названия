(()=>{"use strict";var e,t,i,n,o,s,a={437683:(e,t,i)=>{i.d(t,{NO_POST_ID:()=>o,THUMB_TYPE_ALBUM:()=>l,THUMB_TYPE_DOC:()=>s,THUMB_TYPE_MARKET_ALBUM:()=>h,THUMB_TYPE_PHOTO:()=>a,THUMB_TYPE_VIDEO:()=>r,addThumbsInData:()=>v,deleteThumbInData:()=>m,getThumbByIndex:()=>g,getThumbsMediaItems:()=>_,isValidThumbType:()=>d,moveThumbsInData:()=>p});var n=i(839470);const o="no_post_id",s="doc",a="photo",r="video",l="album",h="market_album";function d(e){const t=[s,a,r];return(0,n.partConfigEnabled)("attachments_primary_mode_web_feature")||t.push(l,h),!!~t.indexOf(e.toString())}const c=([e,,t])=>e===s?"editable"in t&&function(e){return e.editable&&"gif"!==e.ext}(t):d(e);var u;const _=e=>{var t;return null!=(u=null==(t=e)?void 0:t.filter(c))?u:[]};const p=(e,t,i)=>{const n=_(i),o=i.map((e=>d(e[0])?void 0:e)),s=n[e];return n.splice(e,1),n.splice(t,0,s),o.map((e=>e||n.shift()))},g=(e,t)=>_(t)[e],m=(e,t)=>{const i=g(e,t);return t.filter((e=>e!==i))},v=(e,t)=>{const[i,n]=e,o=t.findIndex((([e,t])=>e===i&&t===n));return o<0?t.push(e):t[o]=e,t}},772161:(e,t,i)=>{var n,o,s,a=i(658589);(null==(o=window.vk)||null==(n=o.pe)?void 0:n.static_manager_dynamic_imports)&&(null==(s=window.vk)?void 0:s.stDomain)&&(i.p=window.vk.stDomain+"/dist/"),window.ThumbsEdit=a.ThumbsEdit;try{window.stManager.done(window.jsc("web/thumbs_edit.js"))}catch(e){}},233167:(e,t,i)=>{function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M9.5 4.5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zM3 9.5a6.5 6.5 0 1 1 11.6 4.04l3.18 3.18a.75.75 0 1 1-1.06 1.06l-3.18-3.18A6.5 6.5 0 0 1 3 9.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"search_20"}}i.d(t,{getIcon20Search:()=>n})},549503:(e,t,i)=>{function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M7.5 7.75a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM5.11 6A2.5 2.5 0 0 1 9.9 6h6.36a.75.75 0 0 1 0 1.5H9.89a2.5 2.5 0 0 1-4.78 0H3.75a.75.75 0 0 1 0-1.5zm7.39 8.25a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2.39-1.75a2.5 2.5 0 0 0-4.78 0H3.75a.75.75 0 0 0 0 1.5h6.36a2.5 2.5 0 0 0 4.78 0h1.36a.75.75 0 0 0 0-1.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"sliders_outline_20"}}i.d(t,{getIcon20SlidersOutline:()=>n})},731234:(e,t,i)=>{i.d(t,{THUMBS_CONTAINER_DEFAULT_RATIO:()=>l,THUMBS_MESH_GAP:()=>_,THUMB_DRAG_ANIMATION_DURATION:()=>u,THUMB_TYPE_ALBUM:()=>r.THUMB_TYPE_ALBUM,THUMB_TYPE_DOC:()=>r.THUMB_TYPE_DOC,THUMB_TYPE_MARKET_ALBUM:()=>r.THUMB_TYPE_MARKET_ALBUM,THUMB_TYPE_PHOTO:()=>r.THUMB_TYPE_PHOTO,THUMB_TYPE_VIDEO:()=>r.THUMB_TYPE_VIDEO,compute:()=>b,convert:()=>C,crop:()=>M,getRatio:()=>E,getSize:()=>w,isValidThumbType:()=>r.isValidThumbType,move:()=>T,processThumbs:()=>f,scale:()=>y});var n=i(434788),o=i(664988),s=i(722082),a=i(404145),r=i(437683);(0,a.isMvk)()||function(){const e=()=>+new Date;window.vkExpand=window.vkExpand||"VK"+e(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{}}();const l=1.5,h=1,d=1.777,c=1.5,u=(0,a.isMvk)()?200:120,_=5,p=6,g=3,m=(0,a.isMvk)()?604:537,v=(0,a.isMvk)()?360:343;function f(e,t,i,n){const s=function(e){let t=0;return(0,o.each)(e,((e,i)=>{t+=i})),t},l=function(e,t,i){return(t-(e.length-1)*i)/s(e)};let h=(n=x(n)?n:{}).wide,d=[],c=0,u=[],f=[];(0,o.each)(i,((e,t)=>{(0,r.isValidThumbType)(t.type)&&(u[u.length]=t[t.type]),t.type===r.THUMB_TYPE_VIDEO&&d.push(c),c++}));let w="",T=[],y=u.length;(0,o.each)(u,((i,n)=>{let o=E(n,e,t);w+=o>1.2?"w":o<.8?"v":"q",T[T.length]=o}));let M,C,O=T.length>0?s(T)/T.length:1,U=_;(0,a.isMvk)()&&(U=window.innerWidth>=480?p:g);let A=U;n.force?(M=e,C=t):(h?(M=m,C=v):e>=381?(M=381,C=1==y?361:237):(M=337,C=1==y?320:214),e<M&&(M=e,C=t),(0,a.isMvk)()&&(M=Math.min(m,window.innerWidth),C=Math.min(v,M)));let I=M/C,H=0,P=0;if(1==y){let e={lastColumn:1,lastRow:1,single:1};u[0].thumb?(H=279,P=185):T[0]>=1*I?(H=M,P=Math.min(H/T[0],C)):(P=C,H=Math.min(P*T[0],M));let t=b(u[0],H,P,e);!t.unsized&&(t.image.width<H&&t.image.height<=C||t.image.height<P&&t.image.width<=M)&&(H=t.image.width,P=t.image.height,t=b(u[0],H,P,e)),f[0]=t}else if(2==y){let e,t;switch(w){case"ww":if(O>1.4*I&&T[1]-T[0]<.2){t=M,e=Math.min(t/T[0],t/T[1],(C-A)/2),f[0]=b(u[0],t,e,{lastColumn:1}),f[1]=b(u[1],t,e,{lastColumn:1,lastRow:1}),H=M,P=2*e+A;break}case"vv":case"qv":case"vq":case"qq":t=(M-U)/2,e=Math.min(t/T[0],t/T[1],C),f[0]=b(u[0],t,e,{lastRow:1}),f[1]=b(u[1],t,e,{lastRow:1,lastColumn:1}),H=M,P=e;break;default:let i=(0,o.intval)((M-U)/T[1]/(1/T[0]+1/T[1])),n=M-i-U;e=Math.min(C,i/T[0],n/T[1]),f[0]=b(u[0],i,e,{lastRow:1}),f[1]=b(u[1],n,e,{lastColumn:1,lastRow:1}),H=M,P=e}}else if(3==y)if((T[0]>1.2*I||O>1.5*I)&&"www"==w){let e,t=M,i=Math.min(t/T[0],.66*(C-A));if(f[0]=b(u[0],t,i,{lastColumn:1}),"www"==w){let t=(0,o.intval)(M-U)/2;e=Math.min(C-i-A,t/T[1],t/T[2]),f[1]=b(u[1],t,e,{lastRow:1}),f[2]=b(u[2],M-t-U,e,{lastColumn:1,lastRow:1})}else{let t=(0,o.intval)((M-U)/T[2]/(1/T[1]+1/T[2])),n=M-t-U;e=Math.min(C-i-A,t/T[2],n/T[1]),f[1]=b(u[1],t,e,{lastRow:1}),f[2]=b(u[2],t,e,{lastRow:1,lastColumn:1})}H=M,P=i+e+A}else{let e=C,t=(0,o.intval)(Math.min(e*T[0],.75*(M-U)));f[0]=b(u[0],t,e,{lastRow:1});let i=T[1]*(C-A)/(T[2]+T[1]),n=C-i-A,s=Math.min(M-t-U,(0,o.intval)(i*T[2]),(0,o.intval)(n*T[1]));f[1]=b(u[1],s,n,{lastColumn:1}),f[2]=b(u[2],s,i,{lastColumn:1,lastRow:1}),H=t+s+U,P=C}else if(4==y)if((T[0]>1.2*I||O>1.5*I)&&"wwww"==w){let e=M,t=Math.min(e/T[0],.66*(C-A));f[0]=b(u[0],e,t,{lastColumn:1});let i=(M-2*U)/(T[1]+T[2]+T[3]),n=(0,o.intval)(i*T[1]),s=(0,o.intval)(i*T[2]),a=e-n-s-2*U;i=Math.min(C-t-A,i),f[1]=b(u[1],n,i,{lastRow:1}),f[2]=b(u[2],s,i,{lastRow:1}),f[3]=b(u[3],a,i,{lastColumn:1,lastRow:1}),H=M,P=t+i+A}else{let e=C,t=Math.min(e*T[0],.66*(M-U)),i=(C-2*A)/(1/T[1]+1/T[2]+1/T[3]),n=(0,o.intval)(i/T[1]),s=(0,o.intval)(i/T[2]),a=e-n-s-2*A;i=Math.min(M-t-U,i),t+i+U<M&&e*T[0]>t&&(t=Math.min(e*T[0],M-U-i)),f[0]=b(u[0],t,e,{lastRow:1}),f[1]=b(u[1],i,n,{lastColumn:1}),f[2]=b(u[2],i,s,{lastColumn:1}),f[3]=b(u[3],i,a,{lastColumn:1,lastRow:1}),H=t+i+U,P=C}else{let e=[],t=0;O>(d.length?1.3:1.1)?(0,o.each)(T,((t,i)=>{e[e.length]=Math.max(1,i)})):(0,o.each)(T,((i,n)=>{~d.indexOf(t)?e[e.length]=n:e[e.length]=Math.min(1,n),t++}));let i,n,a,r={};for(r[y+""]=[l(e,M,U)],i=1;i<=y-1;i++)n=y-i,r[i+","+n]=[l(e.slice(0,i),M,U),l(e.slice(i),M,U)];for(i=1;i<=y-2;i++)for(n=1;n<=y-i-1;n++)a=y-i-n,r[i+","+n+","+a]=[l(e.slice(0,i),M,U),l(e.slice(i,i+n),M,U),l(e.slice(i+n),M,U)];let h,c=null,_=0;for(let e in r)if(r.hasOwnProperty(e)){let t=r[e],i=s(t)+A*(t.length-1),n=Math.abs(i-C);if(~e.indexOf(",")){let t=e.split(",");for(let e=0;e<t.length;e++)t[e]=(0,o.intval)(t[e]);(t[0]>t[1]||t[2]&&t[1]>t[2])&&(n+=50,n*=1.5)}(null===c||n<_)&&(c=e,_=n,h=i)}let p=B(u),g=B(e),m=c.split(","),v=r[c],w=m.length-1;for(let e=0;e<m.length;e++){let t=parseInt(m[e]),i=p.splice(0,t),n=v.shift(),s=i.length-1,a={};w==e&&(a.lastRow=!0);let r=M;for(let e=0;e<i.length;e++){let t,l=i[e],h=g.shift(),d=a;s==e?(t=Math.ceil(r),d.lastColumn=!0):(t=(0,o.intval)(h*n),r-=t+U),f[f.length]=b(l,t,n,d)}}H=M,P=h}return{width:(0,o.intval)(H),height:(0,o.intval)(P),thumbs:f}}function b(e,t,i,n){const a={id:e.id,width:(0,o.intval)(t),height:(0,o.intval)(i),lastColumn:n.lastColumn,lastRow:n.lastRow,single:n.single,image:w(e,t,i,n.single),unsized:e.unsized,type:e.type,orig:e};return e.title&&void 0!==e.size?Object.assign(a,{title:e.title,size:e.size}):e.title&&void 0!==e.msize?Object.assign(a,{title:e.title,msize:e.msize}):e.type===r.THUMB_TYPE_VIDEO&&e.name&&Object.assign(a,{name:e.name}),"number"==typeof e.duration&&(e.duration=(0,s.formatTime)(e.duration)),a.unsized?a.ratio=h:a.ratio=a.image.width/a.image.height,a}function w(e,t,i,n){if(!e)return{};t=(0,o.intval)(t),i=(0,o.intval)(i);const s=window.devicePixelRatio||1;let a;if(e.type===r.THUMB_TYPE_VIDEO||e.type===r.THUMB_TYPE_DOC){(e.vid?["x","y","l","s","m"]:["o","z","y","x","m","s","temp"]).forEach((n=>{e.sizes[n]&&(!a||t*s<=e.sizes[n][1]&&i*s<=e.sizes[n][2])&&(a=e.sizes[n])}))}else{const o=e.thumb?e.thumb.sizes:e.sizes,r=o.x||o[o.length-1],l=r?(r[1]||1)/(r[2]||1):h;let d=0;l>t/i?(d=i,l>1&&(d*=l)):(d=t,l<1&&(d/=l)),i*=s,t*=s;let c=!n&&o.o,u="";u=o.temp?"temp":d<75?"s":d<130?"m":c&&o.o&&o.o[1]>=t&&o.o[2]>=i?"o":c&&o.p&&o.p[1]>=t&&o.p[2]>=i?"p":c&&o.q&&o.q[1]>=t&&o.q[2]>=i?"q":c&&o.r&&o.r[1]>=t&&o.r[2]>=i?"r":"x",a=o[u]||[]}return a[1]=(0,o.intval)(a[1]),a[2]=(0,o.intval)(a[2]),a[1]&&a[2]||(e.unsized=!0),{src:a[0],width:a[1],height:a[2]}}function T(e,t,i){if(i>=e.length){let t=i-e.length;for(;1+t--;)e.push(void 0)}return e.splice(i,0,e.splice(t,1)[0]),e}function y(e,t,i,n){i=(0,o.intval)(i),n=(0,o.intval)(n)||i;let s=e,a=t;return e>=t&&e>i?(s=(0,o.intval)(i),a=(0,o.intval)(t/(e/i))):e<t&&t>n&&(a=(0,o.intval)(n),s=(0,o.intval)(e/(t/n))),[s,a]}function M(e,t,i){let n=t,s=i,a=0,l=0;if(!e.vid&&e.image.width&&e.image.height){const r=e.image.width/e.image.height;r<t/i?(e.single&&e.image.width<t&&(t=e.image.width,i=Math.min(i,e.image.height)),n=t,s=n/r,s>i&&(l=-(0,o.intval)((s-i)/2))):(e.single&&e.image.height<i&&(i=e.image.height,t=Math.min(t,e.image.width)),s=i,n=s*r,n>t&&(a=-(0,o.intval)((n-t)/2)))}return{width:n,height:s,marginLeft:a,marginTop:e.orig&&(e.type===r.THUMB_TYPE_MARKET_ALBUM||e.type===r.THUMB_TYPE_ALBUM)&&e.single?0:l}}function E(e,t,i){let n;switch(e.type){case r.THUMB_TYPE_DOC:n=e.ratio;break;case r.THUMB_TYPE_VIDEO:n=e.ratio||d;break;case r.THUMB_TYPE_ALBUM:case r.THUMB_TYPE_MARKET_ALBUM:n=c;break;default:if(e.sizes&&e.sizes.x){const[,t,i]=e.sizes.x;t&&i&&(n=t/i)}if(e.sizes&&e.sizes.temp){const[,t,i]=e.sizes.temp;t&&i&&(n=t/i)}}return n||h}function C(e,t,i,o){const[s,a]=t.split("_"),l=(0,n._)({owner_id:s,ownerId:s,itemId:a,type:e,remove:i.remove,click:i.click,temp:"temp"in i.sizes},o);switch(e){case r.THUMB_TYPE_DOC:l.data={sizes:i.sizes,ratio:i.ratio,label:i.label,href:i.href},l.doc=l.data;break;case r.THUMB_TYPE_PHOTO:l.data={pid:a,sizes:i.sizes,restrictionBlur:i.restrictionBlur,restrictionGeo:i.restrictionGeo,photoId:i.photoId},l.photo=l.data;break;case r.THUMB_TYPE_VIDEO:l.data={vid:a,duration:i.duration,platform:i.platform,play_icon:i.play_icon,preview:i.preview,active_live:i.active_live,restriction:i.restriction,ratio:i.ratio,sizes:i.sizes,name:i.name},l.video=l.data;break;case r.THUMB_TYPE_ALBUM:l.data={aid:a,title:i.title,size:i.size,thumb:{sizes:i.sizes},restrictionBlur:i.restrictionBlur,restrictionGeo:i.restrictionGeo,photoId:i.photoId},l.album=l.data;break;case r.THUMB_TYPE_MARKET_ALBUM:l.data={type:r.THUMB_TYPE_MARKET_ALBUM,aid:a,title:i.title,msize:i.msize,thumb:{sizes:i.sizes}},l.market_album=l.data}return l.data.type=e,l.data.id=l.temp?`${e}temp_${s}`:`${e}${l.ownerId}_${l.itemId}`,l}function B(e,t){const i=x(e)||void 0===e.length?{}:[];for(const n in e)(!/webkit/i.test(_ua)||"layerX"!=n&&"layerY"!=n&&"webkitMovementX"!=n&&"webkitMovementY"!=n)&&(t&&"object"==typeof e[n]&&"prototype"!==n&&null!==e[n]?i[n]=B(e[n]):i[n]=e[n]);return i}const x=e=>"[object Object]"===Object.prototype.toString.call(e)},658589:(e,t,i)=>{i.d(t,{ThumbsEdit:()=>m});var n=i(95432),o=i(301230),s=i(29271),a=i(893106),r=i(953908),l=i(82161),h=i(549503),d=i(233167),c=i(795558),u=i(664988),_=i(731234),p=i(320422),g=i(839470);const m={cache:function(){return cur._thEdCache||(cur._thEdCache={}),cur._thEdCache},loaded:function(){return cur._thEdLoaded||(cur._thEdLoaded={}),cur._thEdLoaded},cur:function(){return cur._thEdCur||(cur._thEdCur={}),cur._thEdCur},getMedias:function(e){const t=[];if(!(e=(0,c.ge)(e)))return t;return(this.cache()[e.id]?this.cache()[e.id].previews:[]).forEach((e=>{this.isValidThumbType(e.type)&&t.push([e.type,`${e.ownerId}_${e.itemId}`])})),t},init:function(e,t,i){if(!(e=(0,c.ge)(e)))return;(i="boolean"==typeof i?{wide:i}:(0,l.clone)(i)||{}).width&&i.height?i.force=!0:(i.width=e.parentNode.offsetWidth,i.height=Math.round(i.width/_.THUMBS_CONTAINER_DEFAULT_RATIO));const n=[];t.forEach((e=>{this.isValidThumbType(e.type)&&n.push(e)})),(0,c.domData)(e,"te-inited",1),this.cache()[e.id]={previews:n,opts:i,wide:i.wide,height:0,thumbs:[]};const o=this.cur().timer;o&&clearTimeout(o),n.length?this.cur().timer=setTimeout((()=>{const t=this.processThumbs(i.width,i.height,n,i);this.cache()[e.id].thumbs=t.thumbs,this.cache()[e.id].height=t.height;const o=(0,c.cf)();t.thumbs.forEach(((t,i)=>{o.appendChild(this.createThumbEl(e.id,t,i))})),(0,c.val)(e,""),(0,c.toggleClass)(e,"wide",i.wide),(0,c.setStyle)(e,{width:t.width,height:t.height}),e.appendChild(o),(0,c.show)(e),(0,u.isFunction)(i.onUpdate)&&i.onUpdate()}),0):((0,c.hide)(e),(0,c.val)(e,""))},getParentTooltipCls:function(e){return(0,c.gpeByClass)("_im_text_input",e)?"_im_text_input":"thumb_wrap"},loadAndDisplayImage:function(e,t){if(!e||!t||!t.oldImage)return;const i=new Image,n=t.image,o=t.oldImage;if(this.loaded()[n.src]&&e.src!==n.src)return e.src=n.src,void delete t.oldImage;const s=()=>{e.src===o.src&&(e.src=n.src,delete t.oldImage,this.loaded()[n.src]=!0),(0,r.removeEvent)(i,"load",s)};(0,r.addEvent)(i,"load",s),i.src=n.src},createThumbEl:function(e,t,i){if(!t||!this.isValidThumbType(t.type))return;const o=t.oldImage||t.image,a=this.crop(t,t.width,t.height);let m,v="draggable_thumb _draggable clear_fix"+(t.unsized?" unsized"+(t.single?" unsized_single":""):""),f=`thumb_wrap fl_l thumb_${t.type}_wrap`;switch(t.lastColumn&&(f+=" last_column"),t.lastRow&&(f+=" last_row"),t.height<50&&(f+=" thumb_no_controls"),t.type){case _.THUMB_TYPE_ALBUM:case _.THUMB_TYPE_MARKET_ALBUM:t.orig.restrictionGeo||t.image.src.match(/^\/images\//)&&(f+=" page_album_nocover"),(t.title||t.thumb)&&(m=`\n            <div class="page_album_title">\n              <div class="page_album_size">${t.msize||t.size}</div>\n              <div class="page_album_title_text">${t.title}</div>\n            </div>\n          `),t.orig.restrictionBlur&&(v+=" PostPhotoRestriction--blur"),t.orig.restrictionGeo&&(v+=" PostPhotoRestriction--geo");break;case _.THUMB_TYPE_PHOTO:const i=(0,g.getTestGroup)("experiment_posting_photo_editor_attach");t.orig.restrictionBlur&&(v+=" PostPhotoRestriction--blur"),t.orig.restrictionGeo&&(v+=" PostPhotoRestriction--geo");const o=(0,n.isPhotoeditor3Available)()&&!vk.widget&&!t.orig.restrictionGeo,a=this.cache()[e],r=!(a&&a.opts&&a.opts.nocl);m=(()=>{const e=(0,h.getIcon20SlidersOutline)().icon,n=s.getLang("global_photo_attach_edit"),a=(0,d.getIcon20Search)().icon,l=t.width>=70&&t.height>=50,c=t.width>=28&&t.height>=50,u=t.width>=110&&t.height>=54,_=t.width>=109&&t.height>=78,p=t.width>=77&&t.height>=36;if(!r)return"";switch(i){case 3:case 4:if(!l&&!c)return"";if(o)return`<div class="new_photo_thumb_btns_container_b">\n                            <div class="new_photo_thumb_btns_wrapper_b">\n                                <div class="new_photo_thumb_btns_editor _photo_thumb_btn_editor" id="ui_btn_pe">${c?e:""} ${l?n:""}</div>\n                            </div>\n                        </div>`;break;case 5:case 6:return u||_||p?u?`<div class="new_photo_thumb_btns_container_c">\n                          <div class="new_photo_thumb_btns_wrapper_c">\n                              <div class="new_photo_thumb_btns_editor _photo_thumb_btn_show" id="ui_btn_show">${a}</div>\n                          </div>\n                          ${o?` <div class="new_photo_thumb_btns_wrapper_c">\n                                      <div class="new_photo_thumb_btns_editor _photo_thumb_btn_editor" id="ui_btn_pe">\n                                          ${e} ${n}\n                                      </div>\n                                  </div>\n                                `:""}\n                        </div>\n                      `:`<div class="new_photo_thumb_btns_container_c">\n                        ${o?` <div class="new_photo_thumb_btns_wrapper_c">\n                                    <div class="new_photo_thumb_btns_editor _photo_thumb_btn_editor" id="ui_btn_pe">\n                                        ${p?e:""} ${_?n:""}\n                                    </div>\n                                </div>\n                              `:""}\n              </div>\n            `:"";default:return`<div class="photo_thumb_btns_container">\n                        <div class="photo_thumb_btns_overlay">\n                            <div class="photo_thumb_btns">\n                                <div class="photo_thumb_btn_show _photo_thumb_btn_show" id="ui_btn_show"></div>\n                                    ${o?'<div class="photo_thumb_btn_editor _photo_thumb_btn_editor" id="ui_btn_pe"></div>':""}\n                            </div>\n                        </div>\n                    </div>`}})();break;case _.THUMB_TYPE_DOC:m=`\n          ${t.orig.label}\n          <a href="${t.orig.href}" class="post_doc_thumb_link" target="_blank" rel="noopener"></a>\n        `;break;case _.THUMB_TYPE_VIDEO:m=t.orig.preview}let b="";t.orig.photoId&&(b=`data-photo-id="${(0,l.clean)(t.orig.photoId)}"`);const w=vk.widget?(0,l.clean)((0,u.unclean)(o.src)):(0,l.clean)(o.src),T=t.unsized||t.orig.preview?"":`\n      <img class="preview _preview" src="${w}" width="${Math.round(a.width)}" height="${Math.round(a.height)}" style="margin:${a.marginTop}px 0 0 ${a.marginLeft}px;"/>\n    `,y=`\n      <div index="${i}" attachment="${t.id}" ${b} class="${f}"${t.name?` aria-label="${(0,l.clean)(t.name)}"`:""} style="width: ${(0,l.intval)(t.width)}px;height: ${(0,l.intval)(t.height)}px;">\n        <div class="${v}" ${t.unsized?` style="background-image:url(${(0,l.clean)(o.src)})"`:""}>\n          ${T}\n          ${m}\n          ${t.type!==_.THUMB_TYPE_VIDEO?'<div class="overlay _overlay"></div>':""}\n          <div class="ui_thumb_x_button _close_btn" role="link" aria-label="${(0,l.clean)(s.getLang("dont_attach"))}">\n            <div class="ui_thumb_x"></div>\n          </div>\n        </div>\n      </div>\n    `,M=(0,c.se)(y),E=M.querySelector("._preview"),C=M.querySelector("._draggable"),B=M.querySelector("._close_btn"),x=M.querySelector(".video_postpone_publish_date"),O=M.querySelector(".video_thumb_label"),U=M.querySelector(".video_postpone_icon");if(x&&(O&&(0,l.intval)(t.width)<180&&(O.style.display="none"),U&&(0,l.intval)(t.width)<100&&(U.style.display="none")),t.oldImage&&E&&this.loadAndDisplayImage(E,t),(0,r.addEvent)(C,"click",(e=>{if(this.cur().updating||(0,c.domClosest)("_close_btn",e.target))(0,r.cancelEvent)(e);else{const t=(0,c.gpeByClass)("thumb_wrap",e.target),i=this.cache()[t.parentNode.id].previews[t.getAttribute("index")].click;cur.openEditor=(0,c.hasClass)(e.target,"_photo_thumb_btn_editor"),(0,u.isFunction)(i)&&i(e)}})),(0,r.addEvent)(C,"mousedown touchstart",(e=>this.startDrag(e))),(0,r.addEvent)(B,"click",(e=>{const t=(0,c.gpeByClass)("thumb_wrap",e.target);(0,c.hide)((0,c.geByClass1)("_draggable",t)),this.removeMedia(t.parentNode.id,t.getAttribute("index"))})),(0,r.addEvent)(B,"mouseover",(()=>(0,p.showTooltip)(B,{text:s.getLang("dont_attach"),shift:[11,8],black:1}))),t.type===_.THUMB_TYPE_PHOTO){const e=(0,c.geByClass1)("_photo_thumb_btn_show",M);e&&(0,r.addEvent)(e,"mouseover",(()=>(0,p.showTooltip)(e,{text:s.getLang("global_photo_attach_show"),shift:[10,8],black:1,appendParentCls:this.getParentTooltipCls(C)})));const t=(0,c.geByClass1)("_photo_thumb_btn_editor",M);t&&(0,r.addEvent)(t,"mouseover",(()=>(0,p.showTooltip)(t,{text:s.getLang("global_pe_edit"),shift:[9,8],black:1,appendParentCls:this.getParentTooltipCls(C)})))}return M},getCoords:function(e,t){const i=[];return t=t||(0,c.getXY)(e),Array.from(e.childNodes).forEach((e=>{if(!(0,c.hasClass)(e,"thumb_wrap"))return;const n=(0,c.getXY)(e);i[i.length]={id:e.getAttribute("attachment"),x:(0,l.intval)(n[0]-t[0]),y:(0,l.intval)(n[1]-t[1]),width:(0,l.intval)(e.offsetWidth),height:(0,l.intval)(e.offsetHeight),index:(0,l.intval)(e.getAttribute("index")),node:e}})),i},startDrag:function(e){const t=e.touches&&1==e.touches.length,i=null==e.button||0!=e.button&&!(1==e.button&&o.browser.msie8);if((0,c.hasClass)(e.target,"_photo_thumb_btn_show")||(0,c.hasClass)(e.target,"_photo_thumb_btn_editor"))return(0,r.cancelEvent)(e);if(i&&!t||(0,c.domClosest)("_close_btn",e.target)||this.cur().updating)return;const n=(0,c.hasClass)(e.target,"draggable_thumb")?e.target:(0,c.gpeByClass)("draggable_thumb",e.target),s=(0,c.gpeByClass)("editable_thumbs",n),a=this.cache()[s.id];return!a||(a.previews||[]).length<2?void 0:(this.cur().el=n,this.cur().dragHandler=e=>this.drag(e),this.cur().dropHandler=e=>this.drop(e),(0,r.addEvent)(window,"mousemove touchmove",this.cur().dragHandler),(0,r.addEvent)(window,"mouseup touchend touchcancel",this.cur().dropHandler),t||(0,r.cancelEvent)(e))},drag:function(e){const t=this.cur().el;if(e.touches&&e.touches.length>1)return this.drop();let i=o.browser.android?e.touches[0].pageX+(e.pageX||0):e.pageX,n=o.browser.android?e.touches[0].pageY+(e.pageY||0):e.pageY,s=this.cur();if((0,c.hasClass)(t,"moving")){let e=i-(s.pos[0]+s.x),o=n-(s.pos[1]+s.y);(0,c.setStyle)(t,{left:e,top:o});let a=s.wpos;e=s.pos[0]+(0,l.intval)(t.style.marginLeft)+e-a[0],o=s.pos[1]+(0,l.intval)(t.style.marginTop)+o-a[1];let r={x:e,y:o,offsetX:t.offsetWidth,offsetY:t.offsetHeight,index:s.i,node:t},h=!1,d=s.i,u=-1,p=_.THUMBS_MESH_GAP;(0,l.each)(s.coords,(function(e,t){if(e==s.i||e==u)return;t.offsetX=t.node.offsetWidth+p,t.offsetY=t.node.offsetHeight+p;let i=s.coords[e-1],n=s.coords[e+1],o=r.x+r.offsetX/2,a=r.y+r.offsetY/2,l=t.x+t.offsetX/2,_=t.y+t.offsetY/2,g=t.x+t.offsetX,m=t.y+t.offsetY,v=(i&&i.x==t.x&&i.y!=t.y&&0!=t.y||n&&n.x==t.x&&n.y!=t.y)&&0!=t.x,f=o>=l&&(n&&(o<=n.x+n.offsetX/2&&(n.offsetY==t.offsetY||o<g)||n.y!=t.y)||!n&&r.x<=g)&&a>t.y&&a<m,b=o<l&&o>=t.x&&(!i||i.y!=t.y&&!(i.x==t.x&&!n))&&a>t.y&&a<m,w=v&&a>=_&&a<m&&o>t.x&&o<g,T=v&&a<_&&a>=t.y&&o>t.x&&o<g;f=f&&!v,b=b&&!v&&!f,(f||b||w||T)&&(h=!0,d=t.index<s.i&&(f||w)?t.index+1:r.index<t.index&&(T||b)?t.index-1:t.index),d!=s.i?(0,c.setStyle)(t.node,{left:f?-2:b?2:0,top:w?-2:T?2:0}):(0,c.setStyle)(t.node,{left:0,top:0}),f&&n&&n.y==t.y&&n.x>t.x&&r.index>t.index&&((0,c.setStyle)(t.node,{left:0,top:0}),(0,c.setStyle)(n.node,{left:2,top:0}),u=e+1),w&&n&&n.x==t.x&&n.y>t.y&&a<=_&&((0,c.setStyle)(n.node,{left:0,top:0}),u=e+1),T&&i&&i.x==t.x&&i.y<t.y&&a<=_&&((0,c.setStyle)(i.node,{left:0,top:-2}),(0,c.setStyle)(t.node,{left:0,top:0}))})),s.to_i=h?d:s.i}else{const e=t.parentNode.parentNode,r=(0,c.geByClass1)("_overlay",t),h=(0,c.geByClass1)("_preview",t),d=(0,l.intval)(t.parentNode.getAttribute("index")),u=this.cache()[e.id].thumbs[d],p=(0,c.getXY)(e),g=(0,c.getXY)(t.parentNode),m=this.getCoords(e,p);s.id=e.id,s.i=d,s.to_i=d,s.x=i-g[0],s.y=n-g[1],s.t=u,s.w=u.width,s.h=u.height,s.pos=g,s.wpos=p,s.crop=this.crop(u,u.width,u.height),s.coords=m;const[v,f]=this.scale(u.width,u.height,75),b=(0,l.intval)((u.width-v)*(o.browser.mobile?.5:s.x/u.width)),w=(0,l.intval)((u.height-f)*(o.browser.mobile?.5:s.y/u.height));(0,c.addClass)(t,"moving"),(0,c.setStyle)(t,"zIndex",100);let T={duration:_.THUMB_DRAG_ANIMATION_DURATION,transition:a.Fx.Transitions.easeOutCubic},y=this.crop(u,v,f);(0,a.animate)(t,{opacity:.85,width:v,height:f,marginLeft:b,marginTop:w},T),(0,a.animate)(r,{opacity:1},T),h&&(0,a.animate)(h,y,T)}return(0,r.cancelEvent)(e)},drop:function(e){const t=this.cur();document.removeEventListener("touchmove",this.preventScroll),t.updating=!0;const i=t.el,n=(0,c.geByClass1)("_overlay",i),o=(0,c.geByClass1)("_preview",i);if((0,r.removeEvent)(window,"mousemove touchmove",t.dragHandler),(0,r.removeEvent)(window,"mouseup touchend touchcancel",t.dropHandler),!(0,c.hasClass)(i,"moving"))return t.updating=!1,(0,r.cancelEvent)(e);if(t.to_i==t.i){let e=t.crop,s={duration:_.THUMB_DRAG_ANIMATION_DURATION,transition:a.Fx.Transitions.easeOutCubic};(0,a.animate)(i,{marginTop:0,marginLeft:0,top:0,left:0,width:t.w,height:t.h,opacity:1},(0,l.extend)(s,{onComplete:()=>{(0,c.setStyle)(i,"zIndex",null),t.updating=!1}})),(0,a.animate)(n,{opacity:0},s),o&&(0,a.animate)(o,e,s)}else{let e=this.cache()[t.id].previews;e=this.move(e,t.i,t.to_i),this.update(t.id,e);const i=this.cache()[t.id];(0,u.isFunction)((i.opts||{}).onMove)&&this.cache()[t.id].opts.onMove(),(0,u.isFunction)((i.opts||{}).onIndexChanged)&&this.cache()[t.id].opts.onIndexChanged(t.i,t.to_i)}return(0,c.removeClass)(i,"moving"),(0,r.cancelEvent)(e)},update:function(e,t){if(!(e=(0,c.ge)(e)))return;let i=e.id,n=(0,c.ge)(i),o=this.cache()[n.id],s=o.thumbs,r=o.height,h=o.opts,d=!0===h||!1===h?{wide:h}:(0,l.clone)(h||{}),p=d.width,g=d.height;p&&g?d.force=!0:(p=e.parentNode.offsetWidth,g=Math.round(p/_.THUMBS_CONTAINER_DEFAULT_RATIO));let m=this.processThumbs(p,g,t,d);const v=(0,c.se)(`\n      <div style="height: 0;overflow: hidden;">\n        <div class="_editable_thumbs editable_thumbs${o.wide?" wide":""}" style="width: ${m.width}px;height: ${m.height}px;"></div>\n      </div>\n    `),f=(0,c.geByClass1)("_editable_thumbs",v);m.thumbs.forEach(((e,t)=>{f.appendChild(this.createThumbEl(i,e,t))})),n.parentNode.appendChild(v);let b=this.getCoords(f);(0,l.each)(b,((e,t)=>{let i=null;for(let e=this.cur().coords,n=0,o=e.length;n<o;++n)if(e[n].id==t.id){i=e[n];break}if(null==i)return;let n=(0,c.geByClass1)("_draggable",i.node),o=(0,c.geByClass1)("_overlay",n),r=(0,c.geByClass1)("_preview",n),h=s[i.index],d=null;(0,l.each)(m.thumbs,((e,t)=>{t.id==h.id&&(this.loaded()[t.image.src]||(t.oldImage=h.image),d=t)})),(0,c.setStyle)(i.node,{left:0,top:0}),i.height==t.height&&i.width==i.width&&t.x==i.x&&t.y==i.y&&i.index!=this.cur().i||((0,c.hasClass)(n,"moving")&&(0,a.fadeOut)(o,_.THUMB_DRAG_ANIMATION_DURATION),setTimeout((()=>{(0,a.animate)(n,{top:t.y-i.y,left:t.x-i.x,marginLeft:0,marginTop:0,height:t.height,width:t.width,opacity:1},_.THUMB_DRAG_ANIMATION_DURATION);let e=this.crop(d,t.width,t.height);r&&(0,a.animate)(r,e,_.THUMB_DRAG_ANIMATION_DURATION),(0,c.toggleClass)(n,"unsized_single",d.unsized&&d.single)}),4))})),r!=m.height&&setTimeout((()=>{(0,a.animate)(n,{height:m.height},_.THUMB_DRAG_ANIMATION_DURATION)}),4),setTimeout((()=>{(0,u.isFunction)(d.onUpdate)&&d.onUpdate(),(0,c.setStyle)(n,{height:m.height,width:m.width}),n.innerHTML="",this.cache()[i].thumbs=m.thumbs,this.cache()[i].previews=t,this.cache()[i].height=m.height,m.thumbs.forEach(((e,t)=>{n.appendChild(this.createThumbEl(i,e,t))})),(0,c.re)(v),this.cur().updating=!1}),_.THUMB_DRAG_ANIMATION_DURATION)},setWide:function(e,t,i){if(!(e=(0,c.ge)(e)))return;let n=this.cache()[e.id],o=(0,l.clone)(i||{});void 0===t&&(t=!1),o.wide=t,n.wide!=t&&this.init(e,n.previews,o)},hasMedia:function(e,t){if(!(e=(0,c.ge)(e)))return;let i=e.id,n=this.cache()[i];if(n){for(let e=0;e<n.previews.length;e++)if(n.previews[e][n.previews[e].type].id==t)return!0;return!1}},addMedia:function(e,t){if(!(e=(0,c.ge)(e))||!t)return;let i=e.id,n=this.cache()[i];if(!n)return;let o=(0,l.clone)(n.previews);10==o.length||this.hasMedia(e,t[t.type].id)||(o[o.length]=t,this.cache()[i]=null,this.init(i,o,(0,l.clone)(n.opts)))},updateMedia:function(e,t,i,n){if(!((e=(0,c.ge)(e))&&t&&i&&n))return;let o=e.id,s=this.cache()[o];if(!s)return;let a=(0,l.clone)(s.previews),r=!1,h=t+i;for(let e=0;e<a.length;e++)if(a[e][a[e].type].id==h){let o=this.convert(t,i,n.editable);a[e]=o,r=!0;break}r&&(this.cache()[o]=null,this.init(o,a,(0,l.clone)(s.opts)))},refresh:function(e){if(!(e=(0,c.ge)(e)))return;let t=e.id,i=this.cache()[t];i&&(this.cache()[t]=null,this.init(t,(0,l.clone)(i.previews),(0,l.clone)(i.opts)))},removeAll:function(e){if(!(e=(0,c.ge)(e)))return;let t=e.id,i=this.cache()[t];i&&(this.cache()[t]=null,this.init(t,[],i.opts))},removeMedia:function(e,t){var i,n;if(!(e=(0,c.ge)(e)))return null;t=(0,l.intval)(t);let o=this.cache()[e.id];if(!o)return;let s=o.previews.splice(t,1),a=s[0][s[0].type].id;(0,l.each)(e.childNodes,((e,t)=>{if(t.getAttribute&&t.getAttribute("attachment")==a){let e=((0,c.geByClass1)("_close_btn",t)||{}).tt;return e&&e.destroy&&e.destroy(),!1}})),this.cur().coords=this.getCoords(e),0==o.previews.length?this.init(e,[],o.opts):this.update(e,o.previews);const r=null==(n=o)||null==(i=n.opts)?void 0:i.onDelete;return(0,u.isFunction)(r)&&r(t),s[0]&&s[0].remove&&s[0].remove(),s},removeById:function(e,t){if(!(e=(0,c.ge)(e)))return null;let i=(this.cache()[e.id]||{}).previews||[];for(let n=0,o=i.length;n<o;++n)if(i[n].type==_.THUMB_TYPE_DOC&&i[n].doc.id==t||i[n].type==_.THUMB_TYPE_PHOTO&&i[n].photo.id==t||i[n].type==_.THUMB_TYPE_VIDEO&&i[n].video.id==t||i[n].type==_.THUMB_TYPE_ALBUM&&i[n].album.id==t||i[n].type==_.THUMB_TYPE_MARKET_ALBUM&&i[n].market_album.id==t)return this.removeMedia(e,n);return null},processThumbs:_.processThumbs,compute:_.compute,getSize:_.getSize,move:_.move,scale:_.scale,crop:_.crop,getRatio:_.getRatio,convert:_.convert,isValidThumbType:_.isValidThumbType}}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return a[e].call(i.exports,i,i.exports,l),i.exports}l.m=a,e=[],l.O=(t,i,n,o)=>{if(!i){var s=1/0;for(d=0;d<e.length;d++){for(var[i,n,o]=e[d],a=!0,r=0;r<i.length;r++)(!1&o||s>=o)&&Object.keys(l.O).every((e=>l.O[e](i[r])))?i.splice(r--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var h=n();void 0!==h&&(t=h)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,n,o]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);l.r(o);var s={};t=t||[null,i({}),i([]),i(i)];for(var a=2&n&&e;"object"==typeof a&&!~t.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(o,s),o},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,i)=>(l.f[i](e,t),t)),[])),l.u=e=>25394===e?"AudioLongtapModal.7e0dfcf5bfaeea74634a.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.ef06223020efb2b6ec6b.js":79852===e?"37d152adcd0dd111ce505d394803d701.async.f06867e3cb1f30e8925c.js":96816===e?"web-audio-lyrics-modal.1a211e52d789ac7fac77.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.3d45c322ccf50af43298.js":28872===e?"feed-client-nav-skeleton.93951c516f1e3f2a55ad.js":35953===e?"feed-client-nav-async-right-block.98e503ddcd7a638e1b63.js":9202===e?"9202.be55f73a991e4eb41a2e.js":79118===e?e+".87b62f94f0e27cef52c4.js":void 0,l.miniCssF=e=>e+"."+{25394:"5e3e105ffae6ba5c38a9",57468:"a2979e7d82457c1ea9fc",75980:"5bbee2c9f3e189193a73"}[e]+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},l.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,a;if(void 0!==i)for(var r=document.getElementsByTagName("script"),h=0;h<r.length;h++){var d=r[h];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")=="vk:"+i){s=d;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.setAttribute("data-webpack","vk:"+i),s.src=e),n[e]=[t];var c=(t,i)=>{s.onerror=s.onload=null,clearTimeout(u);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(i))),t)return t(i)},u=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),a&&document.head.appendChild(s)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/dist/",o=e=>new Promise(((t,i)=>{var n=l.miniCssF(e),o=l.p+n;if(((e,t)=>{for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var o=(a=i[n]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var a;if((o=(a=s[n]).getAttribute("data-href"))===e||o===t)return a}})(n,o))return t();((e,t,i,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=s=>{if(o.onerror=o.onload=null,"load"===s.type)i();else{var a=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=r,o.parentNode.removeChild(o),n(l)}},o.href=t,document.head.appendChild(o)})(e,o,t,i)})),s={53081:0},l.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(s[e]=o(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={53081:0};l.f.j=(t,i)=>{var n=l.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,o)=>n=e[t]=[i,o]));i.push(n[2]=o);var s=l.p+l.u(t),a=new Error;l.l(s,(i=>{if(l.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,n[1](a)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[s,a,r]=i,h=0;if(s.some((t=>0!==e[t]))){for(n in a)l.o(a,n)&&(l.m[n]=a[n]);if(r)var d=r(l)}for(t&&t(i);h<s.length;h++)o=s[h],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(d)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var h=l.O(void 0,[75514,98066,56990,76400,24509,40885,68592],(()=>l(772161)));h=l.O(h)})();