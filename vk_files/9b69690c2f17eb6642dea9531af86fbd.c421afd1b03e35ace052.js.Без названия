/*! For license information please see 9b69690c2f17eb6642dea9531af86fbd.c421afd1b03e35ace052.js.LICENSE.txt */
"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[25901],{279513:(e,t,r)=>{r.d(t,{Icon12Add:()=>o});var o=(0,r(28178).makeIcon)("Icon12Add","add_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="add_12"><path d="M6.75 1.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5z" /></symbol>',12,12,!1,void 0)},62128:(e,t,r)=>{r.d(t,{Icon16Repost:()=>o});var o=(0,r(28178).makeIcon)("Icon16Repost","repost_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="repost_16"><path fill="currentColor" d="m8.583 1.914.061-.087a.6.6 0 0 1 .758-.128l.088.063 3.272 2.805.04.043a.6.6 0 0 1 .01.768l-.075.078L9.49 8.238a.6.6 0 0 1-.982-.358L8.5 7.783V5.999L5 6a1 1 0 0 0-.993.883L4 7v4a1 1 0 0 0 .883.993L5 12h4a1 1 0 0 1 .117 1.993L9 14H5a3 3 0 0 1-2.995-2.824L2 11V7a3 3 0 0 1 2.824-2.995L5 4h3.5V2.216a.6.6 0 0 1 .083-.303l.061-.087z" /></symbol>',16,16,!1,void 0)},979075:(e,t,r)=>{r.d(t,{Icon20AddCircleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20AddCircleOutline","add_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="add_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17m7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-7 4a.75.75 0 0 1-.75-.75v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5A.75.75 0 0 1 10 14" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},129041:(e,t,r)=>{r.d(t,{Icon20BrushOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.921.921 0 0 1-.293-.353.839.839 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635ZM15.702 2.001a1.608 1.608 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061L15.702 2Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},29157:(e,t,r)=>{r.d(t,{Icon20CheckCircleOff:()=>o});var o=(0,r(28178).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10m0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},60559:(e,t,r)=>{r.d(t,{Icon20ChevronRight:()=>o});var o=(0,r(28178).makeIcon)("Icon20ChevronRight","chevron_right_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="chevron_right_20"><path fill-rule="evenodd" d="M7.293 4.293a1 1 0 0 1 1.414 0l5 5a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414-1.414L11.586 10 7.293 5.707a1 1 0 0 1 0-1.414" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},27687:(e,t,r)=>{r.d(t,{Icon20CropOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20CropOutline","crop_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="crop_outline_20"><path fill-rule="evenodd" d="M6.001 1.75a.75.75 0 1 0-1.5 0v2.744H1.75a.75.75 0 0 0 0 1.5H4.5v7.092a2.417 2.417 0 0 0 2.417 2.418h7.085v2.746a.75.75 0 1 0 1.5 0v-2.746h2.747a.75.75 0 0 0 0-1.5H6.918a.917.917 0 0 1-.917-.918V1.75Zm2.75 2.747a.75.75 0 0 0 0 1.5h4.342c.506 0 .917.412.917.918v4.33a.75.75 0 1 0 1.5 0v-4.33a2.417 2.417 0 0 0-2.417-2.418H8.752Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},307112:(e,t,r)=>{r.d(t,{Icon20FilterOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20FilterOutline","filter_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="filter_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.5 7.75a1 1 0 1 1 0-2 1 1 0 0 1 0 2M5.114 6a2.501 2.501 0 0 1 4.772 0h6.364a.75.75 0 0 1 0 1.5H9.886a2.501 2.501 0 0 1-4.772 0H3.75a.75.75 0 0 1 0-1.5zm7.386 8.25a1 1 0 1 0 0-2 1 1 0 0 0 0 2m2.386-1.75a2.501 2.501 0 0 0-4.771 0H3.75a.75.75 0 0 0 0 1.5h6.365a2.501 2.501 0 0 0 4.77 0h1.365a.75.75 0 0 0 0-1.5z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},689291:(e,t,r)=>{r.d(t,{Icon20FlipHorizontal:()=>o});var o=(0,r(28178).makeIcon)("Icon20FlipHorizontal","flip_horizontal_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_horizontal_20"><path fill-rule="evenodd" d="M8.465 7.531A.75.75 0 0 1 9 8.25v8a.75.75 0 0 1-.75.75H3a.75.75 0 0 1-.627-1.162l5.25-8a.75.75 0 0 1 .842-.307ZM4.389 15.5H7.5v-4.74L4.39 15.5ZM6.53 1.47a.75.75 0 0 1 0 1.06l-.72.72h8.38l-.72-.72a.75.75 0 0 1 1.06-1.06l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 1 1-1.06-1.06l.72-.72H5.81l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Zm5.005 6.061a.75.75 0 0 1 .842.308l5.25 8A.75.75 0 0 1 17 17h-5.25a.75.75 0 0 1-.75-.75v-8a.75.75 0 0 1 .535-.719Zm.965 3.229v4.74h3.11l-3.11-4.74" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},228729:(e,t,r)=>{r.d(t,{Icon20FlipVertical:()=>o});var o=(0,r(28178).makeIcon)("Icon20FlipVertical","flip_vertical_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_vertical_20"><path fill-rule="evenodd" d="M3.394 2.34a.75.75 0 0 1 .767.033l8 5.25A.75.75 0 0 1 11.75 9h-8A.75.75 0 0 1 3 8.25V3a.75.75 0 0 1 .394-.66M4.5 4.39V7.5h4.74zM3 11.75a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 .412 1.377l-8 5.25A.75.75 0 0 1 3 17zm1.5.75v3.11l4.74-3.11zm10.97-9.03a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1-1.06 1.06l-.72-.72v8.38l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06l.72.72V5.81l-.72.72a.75.75 0 1 1-1.06-1.06l2-2Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},661620:(e,t,r)=>{r.d(t,{Icon20FolderOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20FolderOutline","folder_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="folder_outline_20"><path fill-rule="evenodd" d="M7.066 2.058C6.812 2 6.552 2 6.256 2h-.09c-.65 0-1.18 0-1.612.034-.446.035-.85.11-1.23.295A3.25 3.25 0 0 0 1.83 3.824c-.185.38-.26.784-.295 1.23-.034.432-.034.962-.034 1.611v5.616c0 .674 0 1.224.037 1.672.037.463.118.882.317 1.272a3.25 3.25 0 0 0 1.42 1.42c.391.2.81.28 1.273.318.447.037.998.037 1.671.037h7.563c.674 0 1.224 0 1.672-.037.463-.038.882-.118 1.272-.317a3.25 3.25 0 0 0 1.42-1.42c.2-.391.28-.81.318-1.273.037-.448.037-.998.037-1.672V8.85c0-.673 0-1.224-.037-1.672-.037-.463-.118-.881-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318-.447-.037-.998-.037-1.672-.037h-3.486c-.404 0-.484-.004-.55-.02a.75.75 0 0 1-.218-.091c-.059-.036-.118-.09-.403-.377l-.758-.764c-.208-.21-.391-.395-.611-.534a2.25 2.25 0 0 0-.69-.287ZM6.196 3.5c.39 0 .466.004.53.02a.75.75 0 0 1 .23.095c.056.035.113.086.388.363l.759.766c.216.218.406.41.636.552.202.125.423.217.653.273.263.063.534.063.84.063h3.518c.712 0 1.202 0 1.58.031.371.03.57.086.714.16.33.167.598.435.765.764.074.144.13.343.16.714.005.063.009.129.012.199H3v-.805c0-.686 0-1.157.03-1.523.027-.357.08-.55.147-.69a1.75 1.75 0 0 1 .805-.805c.14-.068.333-.12.69-.148.366-.029.837-.03 1.523-.03ZM3 9v3.25c0 .712 0 1.202.032 1.58.03.371.085.57.159.714.167.33.435.597.764.765.145.074.344.129.714.16.38.03.869.03 1.581.03h7.5c.712 0 1.202 0 1.58-.03.371-.031.57-.086.714-.16a1.75 1.75 0 0 0 .765-.765c.074-.144.13-.343.16-.713.03-.38.031-.869.031-1.581V9z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},189625:(e,t,r)=>{r.d(t,{Icon20FullscreenOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20FullscreenOutline","fullscreen_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="fullscreen_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M11.75 3.75A.75.75 0 0 1 12.5 3h3.75a.75.75 0 0 1 .75.75V7.5a.75.75 0 0 1-1.5 0V5.56l-3.223 3.224a.75.75 0 0 1-1.061-1.061L14.439 4.5H12.5a.75.75 0 0 1-.75-.75m-2.967 7.466a.75.75 0 0 1 0 1.06L5.561 15.5H7.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75V12.5a.75.75 0 0 1 1.5 0v1.94l3.223-3.224a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},39470:(e,t,r)=>{r.d(t,{Icon20Grid4UnevenVerticalOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20Grid4UnevenVerticalOutline","grid_4_uneven_vertical_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="grid_4_uneven_vertical_outline_20"><path fill-rule="evenodd" d="M14.121 8c-.395 0-.736 0-1.017-.023a2.29 2.29 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.984 2.29 2.29 0 0 1-.222-.875 8.193 8.193 0 0 1-.021-.546H11V4.5h.003c.003-.136.009-.259.02-.396a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222C13.384 2 13.726 2 14.12 2h.758c.395 0 .736 0 1.017.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.011.137.017.26.02.396H18v.85h-.002a8.193 8.193 0 0 1-.02.546c-.025.297-.079.592-.223.875a2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222C15.616 8 15.274 8 14.88 8h-.758Zm2.361-3.774c.016.2.018.326.018.699 0 .39-.002.65-.018.85-.017.203-.045.278-.064.315a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316-.016-.2-.018-.458-.018-.847 0-.375.002-.501.018-.701.017-.204.045-.28.064-.316a.75.75 0 0 1 .327-.328c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.328c.02.037.047.112.064.316M11 13.12c0-.395 0-.736.023-1.017a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222c.28-.023.65-.023 1.046-.023h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.023.28.023.622.023 1.017v1.758c0 .395 0 .736-.023 1.017a2.29 2.29 0 0 1-.222.875 2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222-.28.023-.65.023-1.046.023h-.7c-.395 0-.765 0-1.046-.023a2.29 2.29 0 0 1-.875-.222 2.251 2.251 0 0 1-.984-.983 2.304 2.304 0 0 1-.222-.876C11 15.616 11 15.274 11 14.88v-1.76Zm3.85 3.379h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316a12.796 12.796 0 0 1-.018-.924v-1.7c0-.432 0-.712.018-.924.017-.204.045-.28.064-.317a.75.75 0 0 1 .327-.327c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317.017.212.018.492.018.924v1.7c0 .432 0 .712-.018.924-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018M2 5.121V6.88c0 .395 0 .736.023 1.017.024.297.078.592.222.875.216.424.56.768.984.984.283.144.578.198.875.222.28.023.65.023 1.046.023h.7c.395 0 .765 0 1.046-.023a2.29 2.29 0 0 0 .875-.222 2.25 2.25 0 0 0 .984-.984 2.29 2.29 0 0 0 .222-.875C9 7.616 9 7.274 9 6.88V5.12c0-.395 0-.736-.023-1.017a2.29 2.29 0 0 0-.222-.875 2.25 2.25 0 0 0-.984-.984 2.29 2.29 0 0 0-.875-.222C6.616 2 6.246 2 5.85 2h-.7c-.395 0-.765 0-1.046.023a2.29 2.29 0 0 0-.875.222 2.25 2.25 0 0 0-.984.984 2.29 2.29 0 0 0-.222.875C2 4.384 2 4.726 2 5.12ZM5.5 8.5h.35c.432 0 .712 0 .924-.018.204-.017.28-.045.316-.064a.75.75 0 0 0 .328-.327c.02-.038.047-.113.064-.317.017-.212.018-.492.018-.924v-1.7c0-.432 0-.712-.018-.924-.017-.204-.045-.28-.064-.316a.75.75 0 0 0-.328-.328c-.037-.02-.112-.047-.316-.064A12.755 12.755 0 0 0 5.85 3.5h-.7c-.432 0-.712 0-.924.018-.204.017-.28.045-.316.064a.75.75 0 0 0-.328.328c-.02.037-.047.112-.064.316-.017.212-.018.492-.018.924v1.7c0 .432 0 .712.018.924.017.204.045.28.064.317a.75.75 0 0 0 .328.327c.037.02.112.047.316.064.212.017.492.018.924.018h.35ZM2 15.121V14.5h.004c.003-.143.009-.275.019-.396a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222C4.384 12 4.754 12 5.15 12h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.01.12.016.253.019.396H9v1h-.004a6.79 6.79 0 0 1-.019.396 2.29 2.29 0 0 1-.222.875 2.25 2.25 0 0 1-.984.984 2.29 2.29 0 0 1-.875.222C6.616 18 6.246 18 5.85 18h-.7c-.395 0-.765 0-1.046-.023a2.29 2.29 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.983 2.304 2.304 0 0 1-.222-.876 6.79 6.79 0 0 1-.019-.396H2v-.379Zm5.482-.895c.015.187.018.425.018.774 0 .349-.003.587-.018.774-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.316-.064a.75.75 0 0 1-.328-.328c-.02-.037-.047-.112-.064-.316A10.448 10.448 0 0 1 3.5 15c0-.349.003-.587.018-.774.017-.204.045-.28.064-.317a.75.75 0 0 1 .328-.327c.037-.02.112-.047.316-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},839618:(e,t,r)=>{r.d(t,{Icon20ImageFilterOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20ImageFilterOutline","image_filter_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="image_filter_outline_20"><path d="M7.75 12.906A5.973 5.973 0 0 1 7 10a5.97 5.97 0 0 1 .75-2.906 3.001 3.001 0 0 1 0 5.812Z" /><path fill-rule="evenodd" d="M1 10a6 6 0 0 0 9 5.197 6 6 0 1 0 0-10.395A6 6 0 0 0 1 10m1.5 0a4.5 4.5 0 1 0 9 0 4.5 4.5 0 0 0-9 0m8.812-4.173A5.98 5.98 0 0 1 13 10a5.98 5.98 0 0 1-1.688 4.172 4.5 4.5 0 1 0 0-8.345" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},892097:(e,t,r)=>{r.d(t,{Icon20RemoveCircleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20RemoveCircleOutline","remove_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="remove_circle_outline_20"><path d="M6.75 9.25a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5zM10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17m7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},866428:(e,t,r)=>{r.d(t,{Icon20RotateLeft:()=>o});var o=(0,r(28178).makeIcon)("Icon20RotateLeft","rotate_left_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_left_20"><path fill-rule="evenodd" d="M9.2 9.5H6.8c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .655-.656c.038-.074.095-.225.128-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.128-.633a1.5 1.5 0 0 0-.655-.656c-.074-.037-.225-.094-.633-.127C10.623 9.5 10.065 9.5 9.2 9.5m-6.873.138C2 10.28 2 11.12 2 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C4.28 18 5.12 18 6.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C14 15.72 14 14.88 14 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C11.72 8 10.88 8 9.2 8H6.8c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311ZM13.53 1.97a.75.75 0 0 1 0 1.06l-.72.72H13a4.75 4.75 0 0 1 4.75 4.75V11a.75.75 0 0 1-1.5 0V8.5A3.25 3.25 0 0 0 13 5.25h-.19l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},553750:(e,t,r)=>{r.d(t,{Icon20RotateRight:()=>o});var o=(0,r(28178).makeIcon)("Icon20RotateRight","rotate_right_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_right_20"><path fill-rule="evenodd" d="M13.2 9.5h-2.4c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .656-.656c.037-.074.094-.225.127-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.127-.633a1.5 1.5 0 0 0-.656-.656c-.074-.037-.225-.094-.633-.127-.425-.035-.983-.036-1.848-.036Zm-6.873.138C6 10.28 6 11.12 6 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C8.28 18 9.12 18 10.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C18 15.72 18 14.88 18 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C15.72 8 14.88 8 13.2 8h-2.4c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311M6.47 1.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H7A3.25 3.25 0 0 0 3.75 8.5V11a.75.75 0 0 1-1.5 0V8.5A4.75 4.75 0 0 1 7 3.75h.19l-.72-.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},77199:(e,t,r)=>{r.d(t,{Icon20Stars:()=>o});var o=(0,r(28178).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367-.65.65-1.532 1.14-2.367 1.507.835.367 1.717.857 2.367 1.507.65.65 1.14 1.532 1.507 2.367.367-.835.857-1.717 1.507-2.367.65-.65 1.532-1.14 2.367-1.507-.835-.368-1.717-.857-2.367-1.507-.65-.65-1.14-1.532-1.507-2.367Zm-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21.073 21.073 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27.146 27.146 0 0 1 .912.26c.083.025.166.05.25.078 1.317.421 2.716 1.014 3.485 1.782.768.768 1.36 2.168 1.782 3.485a20.843 20.843 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a27.487 27.487 0 0 1 .26-.912c.025-.083.05-.166.078-.25.421-1.317 1.014-2.717 1.782-3.485.768-.768 2.168-1.36 3.485-1.782a20.843 20.843 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a27.487 27.487 0 0 1-.912-.26 20.843 20.843 0 0 1-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21.13 21.13 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27.146 27.146 0 0 1-.26.912 21.13 21.13 0 0 1-.078.25ZM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.926 1.926 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.926 1.926 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.926 1.926 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.926 1.926 0 0 1-1.218-1.218L4.365.763" /></symbol>',20,20,!1,void 0)},498865:(e,t,r)=>{r.d(t,{Icon20StickerSmileOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20StickerSmileOutline","sticker_smile_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="sticker_smile_outline_20"><path d="M7.887 9.405c.607 0 1.101-.493 1.104-1.1a1.094 1.094 0 0 0-1.095-1.102c-.607 0-1.101.493-1.104 1.101-.003.608.487 1.1 1.095 1.1Zm5.901-1.801a1.106 1.106 0 0 1-1.104 1.1 1.094 1.094 0 0 1-1.095-1.1 1.106 1.106 0 0 1 1.105-1.101c.607 0 1.097.493 1.094 1.1Z" /><path fill-rule="evenodd" d="M2.042 7.416a4.256 4.256 0 0 1 3.616-4.805l7.545-1.064A4.244 4.244 0 0 1 18 5.164l.415 2.97c.667 4.764-2.63 9.172-7.373 9.881-.274.049-.552.08-.827.117l-2.337.33a4.244 4.244 0 0 1-4.796-3.618l-1.04-7.428Zm14.472-2.042.337 2.406a1.252 1.252 0 0 1-1.055 1.357l-1.07.164a3.755 3.755 0 0 0-3.148 3.2 4.733 4.733 0 0 1-1.622.06c-.555-.076-.978-.239-1.213-.41a.749.749 0 1 0-.884 1.212c.505.37 1.196.59 1.894.685.6.082 1.257.08 1.895-.031l.156 1.114a1.252 1.252 0 0 1-1.005 1.403l-3.13.442a2.746 2.746 0 0 1-3.103-2.341l-1.04-7.428a2.754 2.754 0 0 1 2.34-3.11l7.545-1.064a2.746 2.746 0 0 1 3.103 2.341Zm.424 4.934a7.28 7.28 0 0 1-3.65 5.38 2.758 2.758 0 0 0 0-.767l-.223-1.597a2.253 2.253 0 0 1 1.888-2.54l1.069-.163c.33-.051.64-.16.916-.313Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},574543:(e,t,r)=>{r.d(t,{Icon20TextOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20TextOutline","text_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="text_outline_20"><path d="M9.794 15.478c.522 0 .898-.364.898-.885 0-.17-.035-.342-.119-.587L7.651 5.533C7.4 4.813 6.997 4.5 6.335 4.5c-.654 0-1.057.327-1.3 1.04l-2.917 8.466c-.083.23-.118.439-.118.587 0 .543.355.885.905.885.466 0 .73-.246.897-.825l.661-2.037h3.751l.662 2.052c.16.572.431.81.918.81m-2.048-4.466H4.918l1.383-4.49h.048zm9.412 4.488c.487 0 .842-.335.842-.93V9.638c0-1.583-1.19-2.616-3.02-2.616-1.413 0-2.486.58-2.862 1.494a1.229 1.229 0 0 0-.118.506c0 .445.306.743.73.743.293 0 .523-.12.704-.372.431-.676.801-.921 1.476-.921.856 0 1.378.475 1.378 1.3v.853l-1.955.12c-1.796.118-2.805.958-2.805 2.355 0 1.42 1.037 2.379 2.464 2.379.953 0 1.878-.528 2.303-1.383h.035v.55c.028.55.355.855.828.855Zm-2.638-1.42c-.751 0-1.26-.408-1.26-1.055 0-.624.481-1.026 1.316-1.085l1.712-.112v.602c0 .952-.793 1.65-1.768 1.65Z" /></symbol>',20,20,!1,void 0)},625812:(e,t,r)=>{r.d(t,{Icon20WaterDropOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20WaterDropOutline","water_drop_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="water_drop_outline_20"><path fill-rule="evenodd" d="M5.4 8.683c-.419.85-.65 1.647-.65 2.317a5.25 5.25 0 1 0 10.5 0c0-.67-.231-1.467-.65-2.317-.414-.842-.988-1.69-1.615-2.447-.628-.759-1.292-1.408-1.874-1.86a4.888 4.888 0 0 0-.76-.499 1.644 1.644 0 0 0-.255-.106A.419.419 0 0 0 10 3.75a.42.42 0 0 0-.096.02c-.065.02-.15.054-.254.107a4.854 4.854 0 0 0-.76.5c-.583.451-1.247 1.1-1.875 1.859-.627.757-1.201 1.605-1.615 2.447m3.573-6.145c.308-.155.667-.288 1.027-.288.36 0 .72.133 1.027.288.322.163.662.389 1.003.654.684.53 1.425 1.26 2.11 2.087.686.828 1.33 1.774 1.806 2.742.473.96.804 1.992.804 2.979a6.75 6.75 0 0 1-13.5 0c0-.987.331-2.018.804-2.979.476-.969 1.12-1.914 1.806-2.742.685-.827 1.426-1.557 2.11-2.087a6.44 6.44 0 0 1 1.003-.654Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},95471:(e,t,r)=>{r.d(t,{Icon24AddCircleDottedOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24AddCircleDottedOutline","add_circle_dotted_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="add_circle_dotted_outline_24"><g fill="currentColor"><path d="M13 13v3a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2z" /><path fill-rule="evenodd" d="M10.069 2.288a9.944 9.944 0 0 1 3.862 0 .9.9 0 1 1-.35 1.766 8.144 8.144 0 0 0-3.163 0 .9.9 0 1 1-.349-1.766zM7.747 4.015A.9.9 0 0 1 7.5 5.264 8.145 8.145 0 0 0 5.264 7.5.9.9 0 0 1 3.768 6.5a9.944 9.944 0 0 1 2.73-2.731.9.9 0 0 1 1.25.247m8.506 0a.9.9 0 0 1 1.248-.247 9.945 9.945 0 0 1 2.731 2.73.9.9 0 0 1-1.496 1.002A8.143 8.143 0 0 0 16.5 5.264a.9.9 0 0 1-.247-1.249m4.401 5.346a.9.9 0 0 1 1.058.708 9.942 9.942 0 0 1 0 3.862.9.9 0 1 1-1.766-.35 8.14 8.14 0 0 0 0-3.163.9.9 0 0 1 .708-1.057zm-17.308 0a.9.9 0 0 1 .708 1.057 8.144 8.144 0 0 0 0 3.164.9.9 0 0 1-1.766.349 9.944 9.944 0 0 1 0-3.862.9.9 0 0 1 1.058-.708m.67 6.892a.9.9 0 0 1 1.248.247A8.14 8.14 0 0 0 7.5 18.736.9.9 0 0 1 6.5 20.232a9.95 9.95 0 0 1-2.731-2.73.9.9 0 0 1 .247-1.25zm15.969 0a.9.9 0 0 1 .247 1.248 9.943 9.943 0 0 1-2.73 2.731.9.9 0 0 1-1.002-1.496 8.146 8.146 0 0 0 2.236-2.236.9.9 0 0 1 1.249-.247zM9.36 20.654a.9.9 0 0 1 1.057-.708 8.14 8.14 0 0 0 3.164 0 .9.9 0 1 1 .349 1.766 9.943 9.943 0 0 1-3.862 0 .9.9 0 0 1-.708-1.058z" clip-rule="evenodd" /></g></symbol>',24,24,!1,void 0)},589612:(e,t,r)=>{r.d(t,{Icon24ArrowUturnLeftOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ArrowUturnLeftOutline","arrow_uturn_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_left_outline_24"><path fill-rule="evenodd" d="M10.236 3.264a.9.9 0 0 1 0 1.272L7.673 7.1H12a5.9 5.9 0 1 1 0 11.8H7.9a.9.9 0 1 1 0-1.8H12a4.1 4.1 0 0 0 0-8.2H7.673l2.563 2.564a.9.9 0 0 1-1.272 1.272l-4.1-4.1a.9.9 0 0 1 0-1.272l4.1-4.1a.9.9 0 0 1 1.272 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},318455:(e,t,r)=>{r.d(t,{Icon24ArrowUturnRightOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ArrowUturnRightOutline","arrow_uturn_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_right_outline_24"><path fill-rule="evenodd" d="M13.764 3.264a.9.9 0 0 1 1.272 0l4.1 4.1a.9.9 0 0 1 0 1.272l-4.1 4.1a.9.9 0 0 1-1.272-1.272L16.327 8.9H12a4.1 4.1 0 1 0 0 8.2h4.1a.9.9 0 0 1 0 1.8H12a5.9 5.9 0 1 1 0-11.8h4.327l-2.563-2.564a.9.9 0 0 1 0-1.272Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},363021:(e,t,r)=>{r.d(t,{Icon24BlurOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24BlurOutline","blur_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="blur_outline_24"><path d="M12 2.002c-.442 0-.877.03-1.305.085a.9.9 0 0 0 .233 1.785 8.281 8.281 0 0 1 2.144 0 .9.9 0 0 0 .233-1.785A10.083 10.083 0 0 0 12 2.002m6.087 2.066a.9.9 0 0 0-1.097 1.427 8.253 8.253 0 0 1 1.514 1.515.9.9 0 1 0 1.427-1.097 10.05 10.05 0 0 0-1.845-1.845ZM7.01 5.495a.9.9 0 1 0-1.096-1.427 10.05 10.05 0 0 0-1.845 1.845.9.9 0 1 0 1.427 1.097A8.251 8.251 0 0 1 7.01 5.495m-3.138 5.433a.9.9 0 0 0-1.784-.233 10.083 10.083 0 0 0 0 2.609.9.9 0 0 0 1.784-.233 8.284 8.284 0 0 1 0-2.143m18.041-.233a.9.9 0 0 0-1.785.232 8.284 8.284 0 0 1 0 2.144.9.9 0 1 0 1.785.233 10.09 10.09 0 0 0 0-2.61Zm-1.982 7.391a.9.9 0 1 0-1.427-1.097 8.251 8.251 0 0 1-1.514 1.514.9.9 0 0 0 1.097 1.427 10.05 10.05 0 0 0 1.844-1.844ZM5.496 16.989a.9.9 0 0 0-1.427 1.097 10.05 10.05 0 0 0 1.845 1.844.9.9 0 1 0 1.096-1.427 8.25 8.25 0 0 1-1.514-1.514Zm5.432 3.138a.9.9 0 1 0-.233 1.785 10.074 10.074 0 0 0 2.61 0 .9.9 0 1 0-.233-1.785 8.281 8.281 0 0 1-2.144 0Z" /><path fill-rule="evenodd" d="M17 12a5 5 0 1 1-10 0 5 5 0 0 1 10 0m-1.8 0a3.2 3.2 0 1 1-6.4 0 3.2 3.2 0 0 1 6.4 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},563952:(e,t,r)=>{r.d(t,{Icon24BrushOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24BrushOutline","brush_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="brush_outline_24"><path d="M20.377 3.467a1.857 1.857 0 0 0-2.558.09l-6.93 6.866a.911.911 0 0 0-.007 1.285.904.904 0 0 0 1.281.008l6.935-6.87c.044-.045.117-.018.07.04l-6.154 7.74a.911.911 0 0 0 .143 1.278.904.904 0 0 0 1.273-.143l6.15-7.735a1.85 1.85 0 0 0-.203-2.56Z" /><path fill-rule="evenodd" d="M8.488 12.624c-2.003 0-3.476 1.63-3.56 3.533-.043.938-.454 1.416-.83 1.732-.382.321-.894.553-1.052 1.065-.13.418.033.863.373 1.128.763.593 2.355 1.343 4.654.622 2.399-.752 3.977-2.509 3.977-4.506a3.568 3.568 0 0 0-3.562-3.574m-1.75 3.614c.046-1.037.82-1.796 1.75-1.796.967 0 1.75.786 1.75 1.756 0 .947-.789 2.17-2.705 2.77-.866.272-1.549.249-2.057.123.59-.56 1.198-1.442 1.261-2.853Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},800142:(e,t,r)=>{r.d(t,{Icon24Crop:()=>o});var o=(0,r(28178).makeIcon)("Icon24Crop","crop_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="crop_24"><g fill="currentColor"><path d="M6 1.006a.9.9 0 0 1 .9.9V14.8c0 .575 0 .952.024 1.24.023.278.062.394.096.46a1.1 1.1 0 0 0 .48.48c.067.034.182.073.46.096.288.023.665.024 1.24.024h12.898a.9.9 0 0 1 0 1.8H18.9v3.198a.9.9 0 1 1-1.8 0V18.9H9.165c-.53 0-.981 0-1.352-.03-.389-.032-.768-.102-1.13-.286a2.9 2.9 0 0 1-1.267-1.267c-.184-.362-.254-.741-.286-1.13-.03-.37-.03-.822-.03-1.352V6.9H1.903a.9.9 0 0 1 0-1.8H5.1V1.906a.9.9 0 0 1 .9-.9z" /><path d="M16.04 6.924c-.288-.023-.665-.024-1.24-.024H9.907a.9.9 0 1 1 0-1.8h4.928c.53 0 .981 0 1.352.03.39.032.768.102 1.13.286a2.9 2.9 0 0 1 1.267 1.267c.184.362.254.74.286 1.13.03.37.03.822.03 1.352v4.937a.9.9 0 1 1-1.8 0V9.2c0-.575 0-.952-.024-1.24-.023-.278-.062-.394-.096-.46a1.1 1.1 0 0 0-.48-.48c-.067-.034-.182-.073-.46-.096z" /></g></symbol>',24,24,!1,void 0)},521829:(e,t,r)=>{r.d(t,{Icon24Done:()=>o});var o=(0,r(28178).makeIcon)("Icon24Done","done_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" d="m9 16.2-3.5-3.5a.99.99 0 1 0-1.4 1.4l4.193 4.193a1 1 0 0 0 1.414 0L20.3 7.7a.99.99 0 0 0-1.4-1.4L9 16.2" /></g></symbol>',24,24,!1,void 0)},479049:(e,t,r)=>{r.d(t,{Icon24Filter:()=>o});var o=(0,r(28178).makeIcon)("Icon24Filter","filter_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="filter_24"><path fill-rule="evenodd" d="M6.242 8.9a2.901 2.901 0 0 0 5.516 0H20a.9.9 0 1 0 0-1.8h-8.242a2.901 2.901 0 0 0-5.515 0H4a.9.9 0 1 0 0 1.8zM9 6.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2ZM3.1 16a.9.9 0 0 1 .9-.9h8.242a2.901 2.901 0 0 1 5.516 0H20a.9.9 0 1 1 0 1.8h-2.242a2.901 2.901 0 0 1-5.516 0H4a.9.9 0 0 1-.9-.9Zm10.8 0a1.1 1.1 0 1 1 2.2 0 1.1 1.1 0 0 1-2.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},25184:(e,t,r)=>{r.d(t,{Icon24Fullscreen:()=>o});var o=(0,r(28178).makeIcon)("Icon24Fullscreen","fullscreen_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_24"><path fill-rule="evenodd" d="M14 4.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0V7.073l-3.664 3.663a.9.9 0 1 1-1.272-1.272L16.927 5.8H14.9a.9.9 0 0 1-.9-.9Zm-3.264 8.364a.9.9 0 0 1 0 1.272L7.073 18.2h2.025a.9.9 0 1 1 0 1.8H4.9a.9.9 0 0 1-.9-.9v-4.2a.9.9 0 0 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},322031:(e,t,r)=>{r.d(t,{Icon24FullscreenExit:()=>o});var o=(0,r(28178).makeIcon)("Icon24FullscreenExit","fullscreen_exit_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_exit_24"><path fill-rule="evenodd" d="M5 13.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0v-2.027l-3.664 3.663a.9.9 0 1 1-1.272-1.272L7.927 14.8H5.9a.9.9 0 0 1-.9-.9m14.736-9.636a.9.9 0 0 1 0 1.272L16.073 9.2h2.025a.9.9 0 0 1 0 1.8H13.9a.9.9 0 0 1-.9-.9V5.9a.9.9 0 1 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},621474:(e,t,r)=>{r.d(t,{Icon24HorizontalRectangle16x9Outline:()=>o});var o=(0,r(28178).makeIcon)("Icon24HorizontalRectangle16x9Outline","horizontal_rectangle_16x9_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="horizontal_rectangle_16x9_outline_24"><path fill-rule="evenodd" d="M22.999 10.665v2.67c0 .809 0 1.47-.044 2.006-.045.556-.142 1.059-.381 1.527a3.9 3.9 0 0 1-1.705 1.705c-.468.239-.97.335-1.526.38-.538.045-1.198.045-2.006.045H6.663c-.808 0-1.469 0-2.006-.044-.556-.046-1.058-.142-1.527-.381a3.9 3.9 0 0 1-1.704-1.705c-.239-.468-.336-.97-.381-1.526C1 14.803 1 14.143 1 13.335v-2.67c0-.809 0-1.47.044-2.006.045-.556.142-1.058.381-1.527A3.9 3.9 0 0 1 3.13 5.427c.47-.239.971-.336 1.527-.38.537-.045 1.198-.045 2.006-.045h10.674c.808 0 1.468 0 2.006.044.555.045 1.058.142 1.526.381a3.9 3.9 0 0 1 1.705 1.705c.239.469.335.97.38 1.527.045.537.045 1.197.045 2.005Zm-1.838-1.86c-.036-.445-.103-.683-.191-.856a2.1 2.1 0 0 0-.918-.918c-.173-.088-.412-.155-.856-.19-.455-.038-1.042-.039-1.897-.039H6.7c-.855 0-1.442 0-1.897.038-.445.036-.684.103-.857.191a2.1 2.1 0 0 0-.917.918c-.088.173-.155.411-.191.856-.037.455-.038 1.042-.038 1.897v2.596c0 .855 0 1.442.038 1.897.036.444.103.683.19.856a2.1 2.1 0 0 0 .918.918c.173.088.412.155.857.19.455.038 1.042.039 1.897.039h10.598c.855 0 1.442 0 1.897-.038.444-.036.683-.103.856-.191a2.1 2.1 0 0 0 .918-.918c.088-.173.155-.411.19-.856.038-.455.039-1.042.039-1.897v-2.596c0-.855 0-1.442-.038-1.897Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},783019:(e,t,r)=>{r.d(t,{Icon24HorizontalRectangleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24HorizontalRectangleOutline","horizontal_rectangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="horizontal_rectangle_outline_24"><path fill-rule="evenodd" d="M22 10.462v3.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H8.461c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C2 15.252 2 14.486 2 13.538v-3.076c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 4.401 4.48c.523-.267 1.087-.377 1.726-.43C6.748 4 7.514 4 8.46 4h7.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334Zm-1.845-2.188c-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-7c-.995 0-1.687 0-2.226.045-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 4.083 7.22c-.115.226-.195.527-.238 1.054C3.8 8.813 3.8 9.505 3.8 10.5v3c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h7c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-3c0-.995 0-1.687-.045-2.226Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},370281:(e,t,r)=>{r.d(t,{Icon24ImageFilterOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ImageFilterOutline","image_filter_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="image_filter_outline_24"><path d="M8.983 15.8a3.8 3.8 0 0 0 0-7.6A7.166 7.166 0 0 0 7.9 12c0 1.395.396 2.696 1.083 3.8" /><path fill-rule="evenodd" d="M8.9 4.6A7.4 7.4 0 1 0 12 18.721a7.4 7.4 0 1 0 0-13.443A7.372 7.372 0 0 0 8.9 4.6M3.3 12a5.6 5.6 0 1 1 11.2 0 5.6 5.6 0 0 1-11.2 0Zm10.586-5.468A7.38 7.38 0 0 1 16.3 12a7.38 7.38 0 0 1-2.414 5.468 5.6 5.6 0 1 0 0-10.936Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},770823:(e,t,r)=>{r.d(t,{Icon24MagicWandOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24MagicWandOutline","magic_wand_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="magic_wand_outline_24"><g fill="currentColor"><path d="M5.374 8.397a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27L8.406 6.25l.992 1.876a.2.2 0 0 1-.27.27L7.25 7.406zM17.25 6.905l-1.876.992a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27l-.991 1.877.992 1.876a.2.2 0 0 1-.27.27zM15.374 17.397a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27l-.991 1.877.992 1.876a.2.2 0 0 1-.27.27l-1.877-.991z" /><path fill-rule="evenodd" d="M13.136 10.364a.9.9 0 0 1 0 1.272l-9.5 9.5a.9.9 0 1 1-1.272-1.272l9.5-9.5a.9.9 0 0 1 1.272 0z" clip-rule="evenodd" /></g></symbol>',24,24,!1,void 0)},50466:(e,t,r)=>{r.d(t,{Icon24RecentOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24RecentOutline","recent_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="recent_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M12 21.428A9.428 9.428 0 0 1 2.571 12 9.428 9.428 0 0 1 12 2.57c5.206 0 9.429 4.221 9.429 9.429 0 5.207-4.223 9.428-9.429 9.428m0-1.8a7.63 7.63 0 1 0-.001-15.258A7.63 7.63 0 0 0 12 19.628m4.085-6.387a.9.9 0 1 1-.575 1.706l-4.226-1.427a.9.9 0 0 1-.613-.853V8.353a.9.9 0 1 1 1.8 0v3.668l3.614 1.22" /></g></symbol>',24,24,!1,void 0)},427323:(e,t,r)=>{r.d(t,{Icon24SmileOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4.045 4.045 0 0 1-.976.826A5.094 5.094 0 0 1 12 17.15a5.094 5.094 0 0 1-2.727-.762 3.987 3.987 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5m-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},902077:(e,t,r)=>{r.d(t,{Icon24SquareOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24SquareOutline","square_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="square_outline_24"><path fill-rule="evenodd" d="M9.461 3h5.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334v5.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H9.461c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C3 16.252 3 15.486 3 14.538V9.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 5.401 3.48c.523-.267 1.087-.377 1.726-.43C7.748 3 8.514 3 9.46 3ZM7.274 4.845c-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 5.083 6.22c-.115.226-.195.527-.238 1.054C4.8 7.813 4.8 8.505 4.8 9.5v5c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h5c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-5c0-.995 0-1.687-.045-2.226-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-5c-.995 0-1.687 0-2.226.045Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},135826:(e,t,r)=>{r.d(t,{Icon24StorefrontOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20m13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66.077.195.133.397.167.604.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1.1 1.1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1.1 1.1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a2.9 2.9 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},571238:(e,t,r)=>{r.d(t,{Icon24VerticalRectangle9x16Outline:()=>o});var o=(0,r(28178).makeIcon)("Icon24VerticalRectangle9x16Outline","vertical_rectangle_9x16_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vertical_rectangle_9x16_outline_24"><path fill-rule="evenodd" d="M10.664 1.001h2.671c.808 0 1.47 0 2.006.044.556.045 1.058.142 1.527.381a3.9 3.9 0 0 1 1.705 1.704c.238.47.335.971.38 1.527.045.537.045 1.198.045 2.006v10.674c0 .808 0 1.469-.044 2.006-.046.556-.143 1.058-.381 1.526a3.9 3.9 0 0 1-1.705 1.705c-.469.239-.97.336-1.527.381-.537.044-1.197.044-2.006.044h-2.67c-.809 0-1.47 0-2.007-.044-.556-.045-1.058-.142-1.526-.381a3.9 3.9 0 0 1-1.705-1.705c-.239-.468-.336-.97-.381-1.526-.044-.537-.044-1.198-.044-2.006V6.663c0-.808 0-1.469.044-2.006.045-.556.142-1.058.381-1.527a3.9 3.9 0 0 1 1.705-1.704c.468-.239.97-.336 1.526-.381C9.195 1 9.856 1 10.664 1ZM8.805 2.839c-.445.036-.683.103-.856.19a2.1 2.1 0 0 0-.918.919c-.088.172-.155.411-.191.856-.037.455-.038 1.042-.038 1.897v10.598c0 .855 0 1.442.038 1.897.036.445.103.683.191.856a2.1 2.1 0 0 0 .918.918c.173.088.411.155.856.191.455.037 1.042.038 1.897.038h2.596c.855 0 1.442 0 1.897-.038.444-.036.683-.103.856-.19a2.1 2.1 0 0 0 .918-.919c.088-.172.154-.411.19-.856.038-.455.039-1.042.039-1.897V6.701c0-.855-.001-1.442-.038-1.897-.037-.445-.103-.684-.191-.856a2.1 2.1 0 0 0-.918-.918c-.173-.088-.412-.155-.856-.191-.455-.037-1.042-.038-1.897-.038h-2.596c-.855 0-1.442 0-1.897.038Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},243753:(e,t,r)=>{r.d(t,{Icon24VerticalRectangleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24VerticalRectangleOutline","vertical_rectangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vertical_rectangle_outline_24"><path fill-rule="evenodd" d="M10.461 2h3.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334v7.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.077c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.401 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.46 2ZM8.274 3.845c-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 6.083 5.22c-.115.226-.195.527-.238 1.054C5.8 6.813 5.8 7.505 5.8 8.5v7c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h3c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-7c0-.995 0-1.687-.045-2.226-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-3c-.995 0-1.687 0-2.226.045Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},308964:(e,t,r)=>{r.d(t,{Icon28CameraOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon28CameraOutline","camera_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="camera_outline_28"><path fill-rule="evenodd" d="M11 14a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-5a5 5 0 1 0 0 10 5 5 0 0 0 0-10m-1.337-6h-.076c-.469 0-.822 0-1.161.058a4 4 0 0 0-2.223 1.19c-.237.25-.433.543-.693.934l-.042.063-.086.129a3.862 3.862 0 0 1-.18.261 1 1 0 0 1-.673.36A3.86 3.86 0 0 1 7.212 6h-.09c-.574 0-.98 0-1.338.057a4.5 4.5 0 0 0-3.727 3.727C2 10.141 2 10.548 2 11.122v3.922c0 1.363 0 2.447.071 3.322.074.895.227 1.659.583 2.358a6 6 0 0 0 2.622 2.622c.7.356 1.463.51 2.359.583.874.071 1.958.071 3.321.071h6.088c1.363 0 2.447 0 3.322-.071.895-.074 1.659-.227 2.358-.583a6.001 6.001 0 0 0 2.622-2.622c.356-.7.51-1.463.583-2.358.071-.875.071-1.96.071-3.322v-3.922c0-.574 0-.98-.057-1.338a4.5 4.5 0 0 0-3.727-3.727C21.859 6 21.452 6 20.878 6h-.09a3.86 3.86 0 0 1-.317-.005 1 1 0 0 1-.673-.36 3.877 3.877 0 0 1-.18-.261l-.086-.129-.042-.063c-.26-.39-.456-.684-.693-.934a4 4 0 0 0-2.223-1.19C16.235 3 15.882 3 15.413 3zm0 2c-.578 0-.748.003-.897.03a2 2 0 0 0-1.112.594c-.104.11-.201.25-.522.73l-.085.129-.02.03a4.814 4.814 0 0 1-.28.392 3 3 0 0 1-2.018 1.08C7.579 8 7.424 8 7.249 8h-.037c-.7 0-.932.003-1.11.032a2.5 2.5 0 0 0-2.07 2.07c-.029.178-.032.41-.032 1.11V15c0 1.417 0 2.419.065 3.203.063.771.182 1.243.371 1.613a4 4 0 0 0 1.748 1.748c.37.189.842.308 1.613.371C8.581 22 9.583 22 11 22h6c1.417 0 2.419 0 3.203-.065.771-.063 1.243-.182 1.613-.37a4 4 0 0 0 1.748-1.749c.189-.37.308-.841.371-1.613C24 17.419 24 16.417 24 15v-3.788c0-.7-.003-.932-.032-1.11a2.5 2.5 0 0 0-2.07-2.07c-.178-.029-.41-.032-1.11-.032h-.036c-.176 0-.33 0-.481-.015a3 3 0 0 1-2.018-1.08 4.888 4.888 0 0 1-.28-.392l-.02-.03-.085-.128c-.32-.482-.418-.621-.522-.731a2 2 0 0 0-1.112-.595c-.149-.026-.319-.029-.897-.029h-2.674Z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},638766:(e,t,r)=>{r.d(t,{Icon28DeleteOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon28DeleteOutline","delete_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="delete_outline_28"><path fill-rule="evenodd" d="M10.944 9.502a1 1 0 0 0-.943 1.053l.5 9a1 1 0 0 0 1.998-.11l-.5-9a1 1 0 0 0-1.055-.943m6.111 0A1 1 0 0 1 18 10.555l-.5 9a1 1 0 0 1-1.997-.11l.5-9a1 1 0 0 1 1.053-.943Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3.5 5a1 1 0 0 0 0 2h1.096l1.298 12.823c.073.73.135 1.334.224 1.826.092.513.227.98.488 1.414a4 4 0 0 0 1.72 1.554c.458.216.936.303 1.456.344.498.039 1.106.039 1.84.039h4.757c.733 0 1.34 0 1.84-.039.519-.04.997-.128 1.455-.344a4 4 0 0 0 1.72-1.554c.261-.434.396-.901.489-1.414.088-.492.15-1.097.223-1.826L23.404 7H24.5a1 1 0 1 0 0-2h-6.111a4.502 4.502 0 0 0-8.777 0zm4.38 14.583c.078.778.132 1.304.206 1.71.07.394.148.596.234.738a2 2 0 0 0 .86.778c.15.07.359.127.758.158.41.032.94.033 1.722.033h4.68c.782 0 1.311 0 1.723-.033.399-.031.607-.087.758-.158.356-.169.656-.44.86-.778.085-.142.162-.344.233-.738.074-.406.128-.932.206-1.71L21.395 7H6.606zM14 3.5A2.5 2.5 0 0 0 11.708 5h4.584A2.5 2.5 0 0 0 14 3.5" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},108679:(e,t,r)=>{var o=r(659864),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return o.isMemo(e)?i:s[e.$$typeof]||n}s[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[o.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,r,o){if("string"!=typeof r){if(_){var n=p(r);n&&n!==_&&e(t,n,o)}var i=d(r);u&&(i=i.concat(u(r)));for(var s=l(t),g=l(r),m=0;m<i.length;++m){var f=i[m];if(!(a[f]||o&&o[f]||g&&g[f]||s&&s[f])){var v=h(r,f);try{c(t,f,v)}catch(e){}}}}return t}},441143:e=>{e.exports=function(e,t,r,o,n,a,i,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,o,n,a,i,s],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},169099:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"CellList-module__root--YQ57V",gapXs:"CellList-module__gapXs--EbMEa",gapS:"CellList-module__gapS--FqUb3",gapM:"CellList-module__gapM--YSg6A",gapL:"CellList-module__gapL--l9ZbP",gapXl:"CellList-module__gapXl--IQeNb"}},27473:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ClickableZones-module__root--GSAKQ"}},663301:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorPicker-module__root--acT7x",item:"ColorPicker-module__item--UhrPK",itemWhite:"ColorPicker-module__itemWhite--R_9cf"}},223097:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DropBox-module__root--fMtc3",cap:"DropBox-module__cap--RMq26",hover:"DropBox-module__hover--_o57e"}},682778:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorMainMenu-module__root--H5E8f",pane:"EditorMainMenu-module__pane--hMZLc",prevPane:"EditorMainMenu-module__prevPane--iZryn",nextPane:"EditorMainMenu-module__nextPane--GU0lg",scrollable:"EditorMainMenu-module__scrollable--fMKGb",cellContainer:"EditorMainMenu-module__cellContainer--W2QA_",contentWrapper:"EditorMainMenu-module__contentWrapper--Urxz7"}},297392:(e,t,r)=>{r.d(t,{default:()=>o});const o={spinnerWrapper:"EditorMainMenuItem-module__spinnerWrapper--inyoV",spinnerAfter:"EditorMainMenuItem-module__spinnerAfter--sYU4L",caption:"EditorMainMenuItem-module__caption--eivxe",complexCaption:"EditorMainMenuItem-module__complexCaption--DSVVi",shrinkable:"EditorMainMenuItem-module__shrinkable--h5J_T",cancelButtonWrapper:"EditorMainMenuItem-module__cancelButtonWrapper--wP5JC",cancelButton:"EditorMainMenuItem-module__cancelButton--NGOYI",visuallyMuted:"EditorMainMenuItem-module__visuallyMuted--ljDv9"}},997872:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorTabs-module__root--fP6Cw",header:"EditorTabs-module__header--oVeQU",item:"EditorTabs-module__item--wSzxM",itemDisabled:"EditorTabs-module__itemDisabled--CCSyH",itemCurrent:"EditorTabs-module__itemCurrent--w9XX_",content:"EditorTabs-module__content--iAEOb",tab:"EditorTabs-module__tab--eQl8p",tabCurrent:"EditorTabs-module__tabCurrent--PutYP",tooltip:"EditorTabs-module__tooltip--U8zft",tooltipText:"EditorTabs-module__tooltipText--byS4G"}},516356:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorText-module__root--ftVRm",inner:"EditorText-module__inner--RJh4t",textArea:"EditorText-module__textArea--NSvuj"}},256310:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layer-module__root--fFYF7",locked:"Layer-module__locked--rZAmS",inner:"Layer-module__inner--TCdrT",innerDisabled:"Layer-module__innerDisabled--BIYSz",img:"Layer-module__img--HRwqs",imgHidden:"Layer-module__imgHidden--MajsP",layerDelete:"Layer-module__layerDelete--QDsjT"}},894750:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"LayerControls-module__root--oiN84",rootNewUi:"LayerControls-module__rootNewUi--FyNzB",ants:"LayerControls-module__ants--s7_24",handler:"LayerControls-module__handler--XphVu",handlerNewUi:"LayerControls-module__handlerNewUi--igNkZ",handlerNw:"LayerControls-module__handlerNw--MDIxB",handlerNe:"LayerControls-module__handlerNe--m_V4v",handlerSw:"LayerControls-module__handlerSw--aS0Sc",handlerSe:"LayerControls-module__handlerSe--l4EaO"}},976817:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layers-module__root--peQ15",background:"Layers-module__background--eswQB",items:"Layers-module__items--tbVfj"}},80077:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewColorPicker-module__root--LBnj3",item:"NewColorPicker-module__item--vWD2r",itemCurrent:"NewColorPicker-module__itemCurrent--NHd1X"}},947825:(e,t,r)=>{r.d(t,{default:()=>o});const o={labelText:"PEFormItem-module__labelText--FoGNS",aside:"PEFormItem-module__aside--Nck3p"}},789141:(e,t,r)=>{r.d(t,{default:()=>o});const o={scrollable:"ScrollableContainer-module__scrollable--FZRnM",scrollDetector:"ScrollableContainer-module__scrollDetector--wgcU1",fadeout:"ScrollableContainer-module__fadeout--gZnJx",fadeoutInstant:"ScrollableContainer-module__fadeoutInstant--FE_6H",fadeoutTop:"ScrollableContainer-module__fadeoutTop--OWH7Q",fadeoutBottom:"ScrollableContainer-module__fadeoutBottom--IWWr6",content:"ScrollableContainer-module__content--JDXW5",contentPadded:"ScrollableContainer-module__contentPadded--k6BGX"}},371354:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickerList-module__root--c59eh",sticker:"StickerList-module__sticker--JbnPY",stickerImage:"StickerList-module__stickerImage--f2FLJ"}},370518:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SwitchMode-module__root--OkxGq",mode:"SwitchMode-module__mode--xF2VU",modeActive:"SwitchMode-module__modeActive--lx4fr",icon:"SwitchMode-module__icon--nixtS"}},19410:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"BaseEditor-module__root--_48Id",canvas:"BaseEditor-module__canvas--vj92A",tabs:"BaseEditor-module__tabs--oO1T9",redesignTabs:"BaseEditor-module__redesignTabs--TbFKu",tabsInner:"BaseEditor-module__tabsInner--nykCW",actions:"BaseEditor-module__actions--nPXhB",preview:"BaseEditor-module__preview--kRK_d",fontPreload:"BaseEditor-module__fontPreload--RX3Gl",inputFile:"BaseEditor-module__inputFile--qYELf",submit:"BaseEditor-module__submit--SbS3X",buttons:"BaseEditor-module__buttons--L_XBM",imageContainer:"BaseEditor-module__imageContainer--L3jgB",navigatorContainer:"BaseEditor-module__navigatorContainer--pMMOm",navigatorContainerHidden:"BaseEditor-module__navigatorContainerHidden--jfTgd"}},867643:(e,t,r)=>{r.d(t,{default:()=>o});const o={contents:"BlurPanel-module__contents--OVZ5d"}},810504:(e,t,r)=>{r.d(t,{default:()=>o});const o={}},554984:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorCorrectionPanel-module__root--bAFJu",items:"ColorCorrectionPanel-module__items--ruILA",item:"ColorCorrectionPanel-module__item--FdNqa",itemName:"ColorCorrectionPanel-module__itemName--sBmJj",linkBox:"ColorCorrectionPanel-module__linkBox--aj_D4",link:"ColorCorrectionPanel-module__link--LKCdo",icon:"ColorCorrectionPanel-module__icon--Se981",box:"ColorCorrectionPanel-module__box--Xw_2u",select:"ColorCorrectionPanel-module__select--w3wOe",slider:"ColorCorrectionPanel-module__slider--AFhvJ",dvd:"ColorCorrectionPanel-module__dvd--P9Xd8"}},357841:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DrawPanel-module__root--EFjUE",sliders:"DrawPanel-module__sliders--PDdlP",slider:"DrawPanel-module__slider--LLVCO",title:"DrawPanel-module__title--kRFoP"}},686933:(e,t,r)=>{r.d(t,{default:()=>o});const o={canvas:"DrawingLayer-module__canvas--U7H8x",draw:"DrawingLayer-module__draw--hM14K",disabled:"DrawingLayer-module__disabled--NIRV3"}},731026:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorCanvas-module__root--TAUyx",scaleButton:"EditorCanvas-module__scaleButton--kzD_2",blurCursor:"EditorCanvas-module__blurCursor--YvQlZ",postIcon:"EditorCanvas-module__postIcon--ZanKI",postIconToolTip:"EditorCanvas-module__postIconToolTip--rhnHe",roundedCanvas:"EditorCanvas-module__roundedCanvas--xh8XZ"}},218791:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FilterItem-module__root--zWowR",active:"FilterItem-module__active--ZIE3w",checked:"FilterItem-module__checked--YEjGA",inner:"FilterItem-module__inner--UiF5w",image:"FilterItem-module__image--vVuoT",name:"FilterItem-module__name--sQ3_I"}},374667:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FiltersPanel-module__root--r_QWV",header:"FiltersPanel-module__header--kSvjL",inner:"FiltersPanel-module__inner--Bpqtl",slider:"FiltersPanel-module__slider--TZjc5",title:"FiltersPanel-module__title--_3WhY"}},753148:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ImageLayer-module__root--Jc2Ut"}},715469:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Navigator-module__root--qFzRU",rectangle:"Navigator-module__rectangle--hXPR3",rectangleNoTransitions:"Navigator-module__rectangleNoTransitions--SLMpR",rectContainer:"Navigator-module__rectContainer--dBX2Z",imageContainer:"Navigator-module__imageContainer--nz0Oj",shadowRect:"Navigator-module__shadowRect--N4Z40",image:"Navigator-module__image--Pcb4o"}},967681:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewCropControls-module__root--u8Ozs",inner:"NewCropControls-module__inner--Y4QtK",grid:"NewCropControls-module__grid--E58xC",line:"NewCropControls-module__line--YL8YN",lineH:"NewCropControls-module__lineH--Fj0cr",lineV:"NewCropControls-module__lineV--GqDH6",handle:"NewCropControls-module__handle--PZlFg",handleCorner:"NewCropControls-module__handleCorner--kW9n7",handleCornerNw:"NewCropControls-module__handleCornerNw--DV9Hg",handleCornerNe:"NewCropControls-module__handleCornerNe--zBsSO",handleCornerSw:"NewCropControls-module__handleCornerSw--iUHLb",handleCornerSe:"NewCropControls-module__handleCornerSe--D3E21",handleN:"NewCropControls-module__handleN--UMzcW",handleS:"NewCropControls-module__handleS--cuv8q",handleW:"NewCropControls-module__handleW--k47WF",handleE:"NewCropControls-module__handleE--KTa67",buttons:"NewCropControls-module__buttons--L7AWG",buttonsTop:"NewCropControls-module__buttonsTop--UhXgI",buttonsSmall:"NewCropControls-module__buttonsSmall--WLlx_",buttonSmall:"NewCropControls-module__buttonSmall--F4nDm",separator:"NewCropControls-module__separator--yRDnW"}},2569:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewCropPanel-module__root--sQmlZ",title:"NewCropPanel-module__title--n30Mn",tabs:"NewCropPanel-module__tabs--TRGYi",tabsItem:"NewCropPanel-module__tabsItem--C9EQn",tabsButton:"NewCropPanel-module__tabsButton--d6DKh",tabsButtonActive:"NewCropPanel-module__tabsButtonActive--ssoMK",settings:"NewCropPanel-module__settings--NySDc",settingsItem:"NewCropPanel-module__settingsItem--P0N4P"}},594706:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewDrawPanel-module__root--oJ4vC",brushPreviewContainer:"NewDrawPanel-module__brushPreviewContainer--orfjY",scrollableControls:"NewDrawPanel-module__scrollableControls--aM8Rd"}},862198:(e,t,r)=>{r.d(t,{default:()=>o});const o={row:"NewFiltersPanel-module__row--Rbwph",rowExpanded:"NewFiltersPanel-module__rowExpanded--HyroL",smallGrid:"NewFiltersPanel-module__smallGrid--f9GjR",intensityPresetBtn:"NewFiltersPanel-module__intensityPresetBtn--VQkia",nearest:"NewFiltersPanel-module__nearest--pBZdZ",image:"NewFiltersPanel-module__image--S8skn"}},572141:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NavigationHelperTopbar-module__root--izldK",fadeout:"NavigationHelperTopbar-module__fadeout--TCizQ",fadeoutLeft:"NavigationHelperTopbar-module__fadeoutLeft--VnHGL",fadeoutRight:"NavigationHelperTopbar-module__fadeoutRight--p0QHN",scrollable:"NavigationHelperTopbar-module__scrollable--Kx09X",tab:"NavigationHelperTopbar-module__tab--ZE7d_",tabSelected:"NavigationHelperTopbar-module__tabSelected--wlp3d",thumbImage:"NavigationHelperTopbar-module__thumbImage--vU6gr",arrow:"NavigationHelperTopbar-module__arrow--xBwCO",arrowLeft:"NavigationHelperTopbar-module__arrowLeft--TSf91",arrowRight:"NavigationHelperTopbar-module__arrowRight--Z4zV2",arrowIconFlipped:"NavigationHelperTopbar-module__arrowIconFlipped--Onyb4",arrowHidden:"NavigationHelperTopbar-module__arrowHidden--fQDF4",disableTransition:"NavigationHelperTopbar-module__disableTransition--zf7C4"}},686165:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewStickersPanelStickerPacks-module__root--tOVyW",header:"NewStickersPanelStickerPacks-module__header--siKSn",content:"NewStickersPanelStickerPacks-module__content--RvTTT",stickerPack:"NewStickersPanelStickerPacks-module__stickerPack--DEGVk",title:"NewStickersPanelStickerPacks-module__title--hzmzL",stickerList:"NewStickersPanelStickerPacks-module__stickerList--GK6rF"}},576678:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPane-module__root--zQ6nc",positive:"SegmentationPane-module__positive--mL8kG",negative:"SegmentationPane-module__negative--W_JIf",loading:"SegmentationPane-module__loading--PkWof"}},71814:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPanel-module__root--n7iVW",title:"SegmentationPanel-module__title--EjZPo",scale:"SegmentationPanel-module__scale--wcsPR",scaleText:"SegmentationPanel-module__scaleText--zpVVW",selection:"SegmentationPanel-module__selection--J9v2d",colors:"SegmentationPanel-module__colors--bRwdo"}},653927:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StatusPanel-module__root--d7Llj",inner:"StatusPanel-module__inner--DB7re",link:"StatusPanel-module__link--UmNWP",info:"StatusPanel-module__info--YFYei",backgrounds:"StatusPanel-module__backgrounds--U9Qec",background:"StatusPanel-module__background--SA1IK",backgroundActive:"StatusPanel-module__backgroundActive--v__RN",arrow:"StatusPanel-module__arrow--gyvAO",arrowIcon:"StatusPanel-module__arrowIcon--CBJeJ",arrowLeft:"StatusPanel-module__arrowLeft--xeDoN",arrowRight:"StatusPanel-module__arrowRight--yinX7",square:"StatusPanel-module__square--zbkX7"}},119504:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickerPacksPanel-module__root--Cs2xQ",header:"StickerPacksPanel-module__header--rfkna",scroll:"StickerPacksPanel-module__scroll--fTDhF",tab:"StickerPacksPanel-module__tab--myqJ5",tabSelected:"StickerPacksPanel-module__tabSelected--Oo8H7",arrow:"StickerPacksPanel-module__arrow--hB7l6",arrowIcon:"StickerPacksPanel-module__arrowIcon--fM7lm",arrowLeft:"StickerPacksPanel-module__arrowLeft--IaeqU",arrowRight:"StickerPacksPanel-module__arrowRight--DCIgN",arrowRightDark:"StickerPacksPanel-module__arrowRightDark--K4cWy",arrowLeftDark:"StickerPacksPanel-module__arrowLeftDark--SYwWx",content:"StickerPacksPanel-module__content--hNxxV",preview:"StickerPacksPanel-module__preview--IfZAn",previewImage:"StickerPacksPanel-module__previewImage--eHJ1e"}},443940:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickersPanel-module__root--kZemz",content:"StickersPanel-module__content--zqKKY",preview:"StickersPanel-module__preview--Cd37C",previewImage:"StickersPanel-module__previewImage--g4tCd"}},560707:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"TextPanel-module__root--uLviH",button:"TextPanel-module__button--mAGGg",fonts:"TextPanel-module__fonts--VI1Qb",fontSize:"TextPanel-module__fontSize--Wggv3",title:"TextPanel-module__title--yZMh8",radio:"TextPanel-module__radio--C6pOb",colors:"TextPanel-module__colors--YD4_W"}},507591:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"UndoRedo-module__root--EqrtK",scaleButton:"UndoRedo-module__scaleButton--iFweF",scaleButtonActive:"UndoRedo-module__scaleButtonActive--iXvgL"}},208973:(e,t,r)=>{r.d(t,{default:()=>o});const o={classic:"font-style-module__classic--ul2dx",cursive:"font-style-module__cursive--R5tf4",marker:"font-style-module__marker--AISc3",italics:"font-style-module__italics--sFk_w",typewriter:"font-style-module__typewriter--i43cs",poster:"font-style-module__poster--SRYxi",retro:"font-style-module__retro--Rwp8N",impact:"font-style-module__impact--Arlbi",lobster:"font-style-module__lobster--UP_KH"}},405519:(e,t,r)=>{r.d(t,{default:()=>o});const o="attribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// convert the rectangle from pixels to 0.0 to 1.0\n\tvec2 zeroToOne = a_position / u_resolution;\n\n\t// convert from 0->1 to 0->2\n\tvec2 zeroToTwo = zeroToOne * 2.0;\n\n\t// convert from 0->2 to -1->+1 (clipspace)\n\tvec2 clipSpace = zeroToTwo - 1.0;\n\n\tgl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n\t// pass the texCoord to the fragment shader\n\t// The GPU will interpolate this value between points.\n\tv_texCoord = a_texCoord;\n}\n"},989900:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0; // image\nuniform sampler2D u_image1; // contrast_negative.png\nuniform sampler2D u_image2; // contrast_positive.png\nuniform sampler2D u_image3; // exposure_negative.png\nuniform sampler2D u_image4; // exposure_positive.png\nuniform sampler2D u_image5; // warm_negative_lut.png\nuniform sampler2D u_image6; // warm_positive_lit.png\nuniform sampler2D u_image7; // color table\n\nuniform float u_exposure;\nuniform float u_contrast;\nuniform float u_saturation;\nuniform float u_warmth;\nuniform float u_amount;\n\nvec3 ContrastSaturationBrightness(vec3 color, float brt, float sat, float con) {\n\tconst float AvgLumR = 0.5;\n\tconst float AvgLumG = 0.5;\n\tconst float AvgLumB = 0.5;\n\n\tconst vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\n\n\tvec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n\tvec3 brtColor = color * brt;\n\tvec3 intensity = vec3(dot(brtColor, LumCoeff));\n\tvec3 satColor = mix(intensity, brtColor, sat);\n\tvec3 conColor = mix(AvgLumin, satColor, con);\n\n\treturn conColor;\n}\n\nfloat BF_SoftLight(float base, float blend) {\n\treturn 2.0 * base * blend + base * base * (1.0 - 2.0 * blend);\n}\n\nvec3 BF_SoftLight(vec3 base, vec3 blend) {\n\treturn vec3(BF_SoftLight(base.r, blend.r), BF_SoftLight(base.g, blend.g), BF_SoftLight(base.b, blend.b));\n}\n\nvec3 Exposure(vec3 view, float intensity) {\n\tvec3 exposure1;\n\texposure1.r = texture2D(u_image3, vec2(view.r, 0.5)).r;\n\texposure1.g = texture2D(u_image3, vec2(view.g, 0.5)).g;\n\texposure1.b = texture2D(u_image3, vec2(view.b, 0.5)).b;\n\n\tvec3 exposure2;\n\texposure2.r = texture2D(u_image4, vec2(view.r, 0.5)).r;\n\texposure2.g = texture2D(u_image4, vec2(view.g, 0.5)).g;\n\texposure2.b = texture2D(u_image4, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, exposure2, intensity);\n\t} else {\n\t\tresult = mix(view, exposure1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Contrast(vec3 view, float intensity) {\n\tvec3 contrast1;\n\tcontrast1.r = texture2D(u_image1, vec2(view.r, 0.5)).r;\n\tcontrast1.g = texture2D(u_image1, vec2(view.g, 0.5)).g;\n\tcontrast1.b = texture2D(u_image1, vec2(view.b, 0.5)).b;\n\n\tvec3 contrast2;\n\tcontrast2.r = texture2D(u_image2, vec2(view.r, 0.5)).r;\n\tcontrast2.g = texture2D(u_image2, vec2(view.g, 0.5)).g;\n\tcontrast2.b = texture2D(u_image2, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, contrast2, intensity);\n\t} else {\n\t\tresult = mix(view, contrast1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 ColorTemp(vec3 view, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec3 coldColor1 = texture2D(u_image5, texPos1).rgb;\n\tvec3 coldColor2 = texture2D(u_image5, texPos2).rgb;\n\tvec3 coldColor = mix(coldColor1, coldColor2, fract(blueColor));\n\n\tvec3 warmColor1 = texture2D(u_image6, texPos1).rgb;\n\tvec3 warmColor2 = texture2D(u_image6, texPos2).rgb;\n\tvec3 warmColor = mix(warmColor1, warmColor2, fract(blueColor));\n\n\tvec3 result;\n\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, warmColor, intensity);\n\t} else {\n\t\tresult = mix(view, coldColor, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Saturation(vec3 view, float intensity) {\n\treturn ContrastSaturationBrightness(view, 1.0, intensity, 1.0);\n}\n\nvec3 Lut(vec3 view, sampler2D tex, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec3 newColor1 = texture2D(tex, texPos1).rgb;\n\tvec3 newColor2 = texture2D(tex, texPos2).rgb;\n\n\tvec3 newColor = mix(newColor1, newColor2, fract(blueColor));\n\tvec3 color = mix(view, newColor, intensity);\n\n\treturn color;\n}\n\n// [-1.0; 1.0]\nvec3 pExposure(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Exposure(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pContrast(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Contrast(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pColorTemp(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn ColorTemp(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pSaturation(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.6);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? 1.0 + (range.y - 1.0) * intensity : range.x + (1.0 - range.x) * (intensity + 1.0);\n\treturn Saturation(view, intensity);\n}\n\n// [0.0; 1.0]\nvec3 pLut(vec3 view,sampler2D tex, float intensity) {\n\tvec2 range = vec2(0.0, 1.0);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\treturn Lut(view, tex, intensity);\n}\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 texture = texture2D(u_image0, texelCoord);\n\n\ttexture.rgb = pColorTemp(texture.rgb, u_warmth);\n\ttexture.rgb = pLut(texture.rgb, u_image7, u_amount);\n\ttexture.rgb = pExposure(texture.rgb, u_exposure);\n\ttexture.rgb = pContrast(texture.rgb, u_contrast);\n\ttexture.rgb = pSaturation(texture.rgb, u_saturation);\n\n\tgl_FragColor = texture;\n}\n"},810151:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tfloat distanceFromCenter = distance(u_position, texelCoord);\n\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.3 - 0.2, 0.3, distanceFromCenter), 0.0, 1.0));\n\tgl_FragColor = color;\n}\n"},217368:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tvec2 realPosition = u_position;\n\trealPosition.x = texelCoord.x;\n\n\tfloat distanceFromCenter = distance(realPosition, texelCoord);\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.2 - 0.1, 0.2, distanceFromCenter), 0.0, 1.0));\n\n\tgl_FragColor = color;\n}\n"},205483:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_texture, vec2(v_texCoord.x, 1.0 - v_texCoord.y));\n\tgl_FragColor = color;\n}\n"},175811:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0;\n\nuniform float u_vignette;\nuniform float u_sharpness;\nuniform float u_grain;\n\nuniform vec2 u_sourceSize;\n\nvec4 rnm(in vec2 tc) {\n\tfloat timer = 0.4;\n\tfloat noise = sin(dot(tc + vec2(timer, timer), vec2(12.9898, 78.233))) * 43758.5453;\n\n\tfloat noiseR = fract(noise) * 2.0 - 1.0;\n\tfloat noiseG = fract(noise * 1.2154) * 2.0 - 1.0;\n\tfloat noiseB = fract(noise * 1.3453) * 2.0 - 1.0;\n\tfloat noiseA = fract(noise * 1.3647) * 2.0 - 1.0;\n\n\treturn vec4(noiseR,noiseG,noiseB,noiseA);\n}\n\nfloat fade(in float t) {\n\treturn t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat pnoise3D(in vec3 p) {\n\tvec3 pi = 0.00195313 * floor(p) + 0.00195313;\n\tvec3 pf = fract(p); // Fractional part for interpolation\n\n\t// Noise contributions from (x=0, y=0), z=0 and z=1\n\tfloat perm00 = rnm(pi.xy).a ;\n\tvec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n000 = dot(grad000, pf);\n\tvec3  grad001 = rnm(vec2(perm00, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=0, y=1), z=0 and z=1\n\tfloat perm01 = rnm(pi.xy + vec2(0.0, 0.00195313)).a ;\n\tvec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));\n\tvec3  grad011 = rnm(vec2(perm01, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));\n\n\t// Noise contributions from (x=1, y=0), z=0 and z=1\n\tfloat perm10 = rnm(pi.xy + vec2(0.00195313, 0.0)).a ;\n\tvec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));\n\tvec3  grad101 = rnm(vec2(perm10, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=1, y=1), z=0 and z=1\n\tfloat perm11 = rnm(pi.xy + vec2(0.00195313, 0.00195313)).a ;\n\tvec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));\n\tvec3  grad111 = rnm(vec2(perm11, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));\n\n\t// Blend contributions along x\n\tvec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));\n\n\t// Blend contributions along y\n\tvec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));\n\n\t// Blend contributions along z\n\tfloat n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));\n\n\t// We're done, return the final noise value.\n\treturn n_xyz;\n}\n\n//2d coordinate orientation thing\nvec2 coordRot(in vec2 tc, in float angle) {\n\tfloat aspect = u_sourceSize.x / u_sourceSize.y;\n\tvec2 uv = (tc * 2.0) - 1.0;\n\tfloat rotX = (uv.x * aspect * cos(angle)) - (uv.y * sin(angle));\n\tfloat rotY = (uv.y * cos(angle)) + (uv.x * aspect * sin(angle));\n\trotX = ((rotX / aspect) * 0.5 + 0.5);\n\trotY = rotY * 0.5 + 0.5;\n\treturn vec2(rotX, rotY);\n}\n\nvec3 BF_Multiply(vec3 base, vec3 blend) {\n\treturn base * blend;\n}\n\nfloat BF_Screen(float base, float blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 BF_Screen(vec3 base, vec3 blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 Sharpness(vec3 view, float intensity) {\n\tvec2 uv = v_texCoord;\n\tvec2 step = 1.0 / u_sourceSize;\n\n\tvec3 texA = texture2D(u_image0, uv + vec2(-step.x, -step.y) * 1.0).rgb;\n\tvec3 texB = texture2D(u_image0, uv + vec2( step.x, -step.y) * 1.0).rgb;\n\tvec3 texC = texture2D(u_image0, uv + vec2(-step.x,  step.y) * 1.0).rgb;\n\tvec3 texD = texture2D(u_image0, uv + vec2( step.x,  step.y) * 1.0).rgb;\n\n\tvec3 around = 0.25 * (texA + texB + texC + texD);\n\tvec3 center  = texture2D(u_image0, uv ).rgb;\n\tvec3 col = center + (center - around) * intensity;\n\n\treturn col;\n}\n\nvec3 Grain(vec3 view, float intensity) {\n\tvec2 texCoord = v_texCoord;\n\n\tfloat timer = 0.4;\n\tfloat coloramount = 0.4;\n\tfloat grainsize = 2.0;\n\tfloat lumamount = 0.3;\n\n\tbool colored = true;\n\n\tvec3 rotOffset = vec3(1.425, 3.892, 5.835); // rotation offset values\n\tvec2 rotCoordsR = coordRot(texCoord, timer + rotOffset.x);\n\tvec3 noise = vec3(pnoise3D(vec3(rotCoordsR * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 0.0)));\n\n\tif (colored) {\n\t\tvec2 rotCoordsG = coordRot(texCoord, timer + rotOffset.y);\n\t\tvec2 rotCoordsB = coordRot(texCoord, timer + rotOffset.z);\n\t\tnoise.g = mix(noise.r, pnoise3D(vec3(rotCoordsG * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 1.0)), coloramount);\n\t\tnoise.b = mix(noise.r, pnoise3D(vec3(rotCoordsB * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 2.0)), coloramount);\n\t}\n\n\tvec3 col = view.rgb;\n\tvec3 lumcoeff = vec3(0.299, 0.587, 0.114);\n\tfloat luminance = lumamount * dot(col, lumcoeff);\n\tfloat lum = smoothstep(0.2, 0.0, luminance);\n\n\tlum += luminance;\n\tnoise = mix(noise, vec3(0.0), pow(lum, 4.0));\n\tcol = col + noise * intensity;\n\n\treturn col;\n}\n\nvec3 Vignette(vec3 view, float intensity) {\n\tfloat inten = abs(intensity);\n\tfloat dist = distance(v_texCoord, vec2(0.5, 0.5));\n\tfloat size = 0.5 - inten * 0.4;\n\tfloat amount = inten * inten * 0.1 + 0.5 * inten;\n\tfloat vignette = smoothstep(0.8, size * 0.799, dist * (amount + size));\n\treturn (intensity >= 0.0) ? view * vignette : BF_Screen(view,vec3(1.0-vignette));\n}\n\n// [-1; 1]\nvec3 pSharpness(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.5);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity+1.0) + range.x;\n\treturn Sharpness(view, intensity);\n}\n\n// [0; 1]\nvec3 pGrain(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 0.2);\n\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Grain(view, intensity);\n}\n\n// [-1; 1]\nvec3 pVignette(vec3 view, float intensity) {\n\tvec2 range = vec2(-1.0, 1.0);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Vignette(view, intensity);\n}\n\nvoid main() {\n\tvec4 texture = texture2D(u_image0, v_texCoord);\n\n\ttexture.rgb = pSharpness(texture.rgb, u_sharpness);\n\ttexture.rgb = pVignette(texture.rgb, u_vignette);\n\ttexture.rgb = pGrain(texture.rgb, u_grain);\n\n\tgl_FragColor = texture;\n}\n"},5973:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // original image\nuniform vec2 u_delta;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\tfloat offset = fract(sin(dot(gl_FragCoord.xyz, vec3(12.9898, 78.233, 151.7182))) * 43758.5453);\n\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sampleColor = texture2D(u_image0, v_texCoord + u_delta * percent);\n\t\tsampleColor.rgb *= sampleColor.a;\n\n\t\tcolor += sampleColor * weight;\n\t\ttotal += weight;\n\t}\n\n\tcolor = color / total;\n\tcolor.rgb /= color.a + 0.00001;\n\tgl_FragColor = color;\n}\n"},869921:(e,t)=>{var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,_=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case d:case u:case a:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case g:case l:return e;default:return t}}case n:return t}}}function x(e){return T(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=o,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=g,t.Portal=n,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||T(e)===d},t.isConcurrentMode=x,t.isContextConsumer=function(e){return T(e)===c},t.isContextProvider=function(e){return T(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return T(e)===h},t.isFragment=function(e){return T(e)===a},t.isLazy=function(e){return T(e)===m},t.isMemo=function(e){return T(e)===g},t.isPortal=function(e){return T(e)===n},t.isProfiler=function(e){return T(e)===s},t.isStrictMode=function(e){return T(e)===i},t.isSuspense=function(e){return T(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===u||e===s||e===i||e===p||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===S||e.$$typeof===E||e.$$typeof===f)},t.typeOf=T},659864:(e,t,r)=>{e.exports=r(869921)},929804:(e,t,r)=>{var o=r(14890).compose;t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o:o.apply(null,arguments)}},942236:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var r={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=r;var o={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}};t.ActionCreators=o},18823:(e,t)=>{function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){o=e},t.start=function(e,t){void(n={header:[],prev:[],action:[],next:[],msgs:[]}),o&&(console.group?(n.header=["%credux-undo","font-style: italic","action",e.type],n.action=i("action",a.action,e),n.prev=i("prev history",a.prevState,t)):(n.header=["redux-undo action",e.type],n.action=["action",e],n.prev=["prev history",t]))},t.end=function(e){o&&(console.group?n.next=i("next history",a.nextState,e):n.next=["next history",e],function(){var e=n,t=e.header,o=e.prev,a=e.next,i=e.action,s=e.msgs;if(console.group){var l,c,d,u,h;(l=console).groupCollapsed.apply(l,r(t)),(c=console).log.apply(c,r(o)),(d=console).log.apply(d,r(i)),(u=console).log.apply(u,r(a)),(h=console).log.apply(h,r(s)),console.groupEnd()}else{var p,_,g,m,f;(p=console).log.apply(p,r(t)),(_=console).log.apply(_,r(o)),(g=console).log.apply(g,r(i)),(m=console).log.apply(m,r(a)),(f=console).log.apply(f,r(s))}}())},t.log=function(){if(o){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.msgs=n.msgs.concat([].concat(t,["\n"]))}};var a={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function i(e,t,r){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),r]}},891619:(e,t)=>{function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(r,o,n){return e(r,o,n)&&t(r,o,n)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:r,group:o,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}},21090:(e,t,r)=>{Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return n.ActionCreators}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return a.includeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return a.combineFilters}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return a.newHistory}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var o,n=r(942236),a=r(891619),i=(o=r(582479))&&o.__esModule?o:{default:o}},582479:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.set(t.debug);var r,o=c({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:a.ActionTypes.UNDO,redoType:a.ActionTypes.REDO,jumpToPastType:a.ActionTypes.JUMP_TO_PAST,jumpToFutureType:a.ActionTypes.JUMP_TO_FUTURE,jumpType:a.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,i.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,i.parseActions)(t.clearHistoryType,[a.ActionTypes.CLEAR_HISTORY])}),s=o.neverSkipReducer?function(t,r){for(var o=arguments.length,n=new Array(o>2?o-2:0),a=2;a<o;a++)n[a-2]=arguments[a];return c({},t,{present:e.apply(void 0,[t.present,r].concat(n))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.start(a,t);for(var l,c,d=t,m=arguments.length,f=new Array(m>2?m-2:0),v=2;v<m;v++)f[v-2]=arguments[v];if(!r){if(n.log("history is uninitialized"),void 0===t){return d=h(e.apply(void 0,[t,{type:"@@redux-undo/CREATE_HISTORY"}].concat(f)),o.ignoreInitialState),n.log("do not set initialState on probe actions"),n.end(d),d}(0,i.isHistory)(t)?(d=r=o.ignoreInitialState?t:(0,i.newHistory)(t.past,t.present,t.future),n.log("initialHistory initialized: initialState is a history",r)):(d=r=h(t,o.ignoreInitialState),n.log("initialHistory initialized: initialState is not a history",r))}switch(a.type){case void 0:return d;case o.undoType:return l=g(d,-1),n.log("perform undo"),n.end(l),s.apply(void 0,[l,a].concat(f));case o.redoType:return l=g(d,1),n.log("perform redo"),n.end(l),s.apply(void 0,[l,a].concat(f));case o.jumpToPastType:return l=_(d,a.index),n.log("perform jumpToPast to ".concat(a.index)),n.end(l),s.apply(void 0,[l,a].concat(f));case o.jumpToFutureType:return l=p(d,a.index),n.log("perform jumpToFuture to ".concat(a.index)),n.end(l),s.apply(void 0,[l,a].concat(f));case o.jumpType:return l=g(d,a.index),n.log("perform jump to ".concat(a.index)),n.end(l),s.apply(void 0,[l,a].concat(f));case c=a.type,o.clearHistoryType.indexOf(c)>-1?c:!c:return l=h(d.present,o.ignoreInitialState),n.log("perform clearHistory"),n.end(l),s.apply(void 0,[l,a].concat(f));default:if(l=e.apply(void 0,[d.present,a].concat(f)),o.initTypes.some((function(e){return e===a.type})))return n.log("reset history due to init action"),n.end(r),r;if(d._latestUnfiltered===l)return d;if("function"==typeof o.filter&&!o.filter(a,l,d)){var S=(0,i.newHistory)(d.past,l,d.future,d.group);return o.syncFilter||(S._latestUnfiltered=d._latestUnfiltered),n.log("filter ignored action, not storing it in past"),n.end(S),S}var E=o.groupBy(a,l,d);if(null!=E&&E===d.group){var T=(0,i.newHistory)(d.past,l,d.future,d.group);return n.log("groupBy grouped the action with the previous action"),n.end(T),T}return d=function(e,t,r,o){var a=e.past.length+1;n.log("inserting",t),n.log("new free: ",r-a);var s=e.past,l=e._latestUnfiltered,c=r&&r<=a,d=s.slice(c?1:0),h=null!=l?[].concat(u(d),[l]):d;return(0,i.newHistory)(h,t,[],o)}(d,l,o.limit,E),n.log("inserted new state into history"),n.end(d),d}}};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(18823)),a=r(942236),i=r(891619);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){var r=(0,i.newHistory)([],e,[]);return t&&(r._latestUnfiltered=null),r}function p(e,t){if(t<0||t>=e.future.length)return e;var r=e.past,o=e.future,n=e._latestUnfiltered,a=[].concat(u(r),[n],u(o.slice(0,t))),s=o[t],l=o.slice(t+1);return(0,i.newHistory)(a,s,l)}function _(e,t){if(t<0||t>=e.past.length)return e;var r=e.past,o=e.future,n=e._latestUnfiltered,a=r.slice(0,t),s=[].concat(u(r.slice(t+1)),[n],u(o)),l=r[t];return(0,i.newHistory)(a,l,s)}function g(e,t){return t>0?p(e,t-1):t<0?_(e,e.past.length+t):e}},733775:(e,t,r)=>{var o;r.d(t,{StoryStatsEvent:()=>o}),function(e){e.MarkAdvertiser="mark_advertiser",e.EditAdvertiserMark="edit_advertiser_mark",e.OpenAdvertiser="open_advertiser_information",e.CopyERID="copy_ERID",e.OpenNarrativeStories="narrative_open_stories",e.OpenNarrative="narrative_open",e.NarrativeOther="narrative_other",e.GoToAuthor="go_to_author",e.MusicAdded="music_added",e.PlayNext="play_next",e.ClickToUnlike="click_to_unlike",e.ClickToLike="click_to_like",e.GoToNextAuthor="go_to_next_author",e.GoToPreviousAuthor="go_to_previous_author",e.CloseAutoByTime="close_auto_by_time",e.GoToNextStoryAuto="go_to_next_story_auto_by_time",e.GoToSettings="go_to_settings",e.OpenEmptyFeedback="open_empty_feedback",e.OpenRepliesList="open_replies_list",e.OpenAdvancedStatistic="open_advanced_statistic",e.CommentTap="comment_tap",e.Delete="delete",e.PauseLongTap="pause_long_tap",e.ResumeRelease="resume_release",e.ClickOnClickableSticker="click_on_clickable_sticker",e.CloseSwipeDown="close_swipe_down",e.GoToPreviouseStory="go_to_previous_story",e.GoToNextStoryTap="go_to_next_story_tap",e.LinkClick="link_click",e.CommentSend="comment_send",e.MarkNotInterested="mark_not_interested",e.OpenParentStory="open_parent_story",e.HidePrivacyBlock="hide_privacy_block",e.CloseTap="close_tap",e.ClickOnBadge="click_on_badge",e.QuestionReplyPublish="question_reply_publish",e.QuestionReply="question_reply",e.QuestionReplyAnonymous="question_reply_anonymous",e.QuestionDelete="question_delete",e.QuestionSendMesage="question_send_message",e.QuestionShowAll="question_show_all"}(o||(o={}))},128396:(e,t,r)=>{r.d(t,{sendPerformanceStats:()=>s});var o=r(434788),n=r(306733),a=r(121677);const i=new n.PerformanceStatsCollector,s=e=>{var t;i.logEvent((0,o._)({},e,{value:e.value.toString(),network_effective_type:null!=(t=e.networkEffectiveType)?t:a.default.getConnectionEffectiveType()}))}},306733:(e,t,r)=>{r.d(t,{PerformanceStatsCollector:()=>a});var o=r(957973),n=r(193452);class a{logEvent(e){const t={type:o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM,[o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.actionStatCollector=new n.ActionStatCollector(this.productionStatCollector)}}},227340:(e,t,r)=>{r.d(t,{fetchStickers:()=>c,getPhotoEditorData:()=>u,logPhotoEditorRenderingTime:()=>h,showStickerShop:()=>d});var o=r(363444),n=r(514986),a=r(584356),i=r(29271),s=r(128396),l=r(745163);const c=(e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e,onFail:t})},d=e=>{(0,n.showBox)("al_im.php",{act:"stickers_store",box:1},{stat:["im.css",window.jsc("web/imn.js"),"page_help.css",window.jsc("web/sorter.js")],params:{onDestroy:()=>{e()}}})},u=e=>new Promise(((t,r)=>{o.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e=>{t(e)},onFail:()=>((0,n.showFastBox)({title:i.getLang("global_error")},i.getLang("global_error"),i.getLang("global_close"),(()=>{var t,r;null==(t=(0,a.curBox)())||t.hide(),null==(r=e)||r()})),r(),!0)})}));function h(e,t){(0,s.sendPerformanceStats)({module:l.navigationStat.getModule(),entity:t,event:"render_photo_editor",value:e})}},856505:(e,t,r)=>{r.d(t,{getPhotoEditorLangMap:()=>n,loadPhotoEditorLangs:()=>a});var o=r(29271);const n=()=>({photos_pe_texts_placeholders:o.getLang("photos_pe_texts_placeholders").split("<br>"),photos_pe_fonts:o.getLang("photos_pe_fonts").split("<br>"),photos_pe_save_action:o.getLang("photos_pe_save_action"),photos_pe_publish_action:o.getLang("photos_pe_publish_action"),global_error:o.getLang("global_error"),stories_create_image_incorrect:o.getLang("stories_create_image_incorrect"),photos_pe_tool_blur:o.getLang("photos_pe_tool_blur"),photos_pe_tool_brush:o.getLang("photos_pe_tool_brush"),photos_pe_tool_collage:o.getLang("photos_pe_tool_collage"),photos_pe_tool_color_correction:o.getLang("photos_pe_tool_color_correction"),photos_pe_tool_crop:o.getLang("photos_pe_tool_crop"),photos_pe_tool_filters:o.getLang("photos_pe_tool_filters"),photos_pe_tool_object_removal:o.getLang("photos_pe_tool_object_removal"),photos_pe_tool_segmentation:o.getLang("photos_pe_tool_segmentation"),photos_pe_tool_stickers:o.getLang("photos_pe_tool_stickers"),photos_pe_tool_text:o.getLang("photos_pe_tool_text"),photos_pe_filters_disabled_text:o.getLang("photos_pe_filters_disabled_text"),photos_pe_filters_disabled_button:o.getLang("photos_pe_filters_disabled_button"),photos_pe_correction_exposure:o.getLang("photos_pe_correction_exposure"),photos_pe_correction_contrast:o.getLang("photos_pe_correction_contrast"),photos_pe_correction_saturation:o.getLang("photos_pe_correction_saturation"),photos_pe_correction_warmth:o.getLang("photos_pe_correction_warmth"),photos_pe_correction_vignette:o.getLang("photos_pe_correction_vignette"),photos_pe_correction_sharpness:o.getLang("photos_pe_correction_sharpness"),photos_pe_correction_grain:o.getLang("photos_pe_correction_grain"),photos_pe_correction_auto:o.getLang("photos_pe_correction_auto"),photos_pe_correction_auto_enabled:o.getLang("photos_pe_correction_auto_enabled"),photos_pe_correction_auto_enabled_short:o.getLang("photos_pe_correction_auto_enabled_short"),photos_pe_cancel:o.getLang("photos_pe_cancel"),photos_pe_correction_blur_type_round:o.getLang("photos_pe_correction_blur_type_round"),photos_pe_correction_blur_type_rec:o.getLang("photos_pe_correction_blur_type_rec"),photos_pe_correction_blur:o.getLang("photos_pe_correction_blur"),photos_pe_correction_blur_enabled:o.getLang("photos_pe_correction_blur_enabled"),photos_pe_crop_cancel:o.getLang("photos_pe_crop_cancel"),photos_pe_crop_apply:o.getLang("photos_pe_crop_apply"),photos_pe_crop_aspect_title:o.getLang("photos_pe_crop_aspect_title"),photos_pe_crop_aspect_free:o.getLang("photos_pe_crop_aspect_free"),photos_pe_crop_aspect_original:o.getLang("photos_pe_crop_aspect_original"),photos_pe_crop_aspect_16_9:o.getLang("photos_pe_crop_aspect_16_9"),photos_pe_crop_aspect_4_3:o.getLang("photos_pe_crop_aspect_4_3"),photos_pe_crop_aspect_1_1:o.getLang("photos_pe_crop_aspect_1_1"),photos_pe_crop_aspect_3_4:o.getLang("photos_pe_crop_aspect_3_4"),photos_pe_crop_aspect_9_16:o.getLang("photos_pe_crop_aspect_9_16"),photos_pe_rotate_right:o.getLang("photos_pe_rotate_right"),photos_pe_rotate_left:o.getLang("photos_pe_rotate_left"),photos_pe_flip_horizontal:o.getLang("photos_pe_flip_horizontal"),photos_pe_flip_vertical:o.getLang("photos_pe_flip_vertical"),photos_pe_intensity:o.getLang("photos_pe_intensity"),photos_pe_line_width:o.getLang("photos_pe_line_width"),photos_pe_color:o.getLang("photos_pe_color"),photos_pe_attached_post:o.getLang("photos_pe_attached_post"),photos_pe_filter_regular:o.getLang("photos_pe_filter_regular"),photos_pe_filter_nox:o.getLang("photos_pe_filter_nox"),photos_pe_filter_vesper:o.getLang("photos_pe_filter_vesper"),photos_pe_filter_latona:o.getLang("photos_pe_filter_latona"),photos_pe_filter_liber:o.getLang("photos_pe_filter_liber"),photos_pe_filter_luna:o.getLang("photos_pe_filter_luna"),photos_pe_filter_minerva:o.getLang("photos_pe_filter_minerva"),photos_pe_filter_mitra:o.getLang("photos_pe_filter_mitra"),photos_pe_filter_pro:o.getLang("photos_pe_filter_pro"),photos_pe_filter_terra:o.getLang("photos_pe_filter_terra"),photos_pe_filter_veles:o.getLang("photos_pe_filter_veles"),photos_pe_filter_vesta:o.getLang("photos_pe_filter_vesta"),photos_pe_filter_zaria:o.getLang("photos_pe_filter_zaria"),photos_pe_filter_sepia:o.getLang("photos_pe_filter_sepia"),photos_pe_filter_genius:o.getLang("photos_pe_filter_genius"),photos_pe_filter_horus:o.getLang("photos_pe_filter_horus"),photos_pe_filter_fortuna:o.getLang("photos_pe_filter_fortuna"),photos_pe_filter_disabled:o.getLang("photos_pe_filter_disabled"),photos_pe_filter_enabled:o.getLang("photos_pe_filter_enabled"),photos_pe_delete_sticker:o.getLang("photos_pe_delete_sticker"),photos_pe_delete_text:o.getLang("photos_pe_delete_text"),photos_pe_save_text:o.getLang("photos_pe_save_text"),photos_filtered_restore:o.getLang("photos_filtered_restore"),photos_will_be_saved_to_pe_album:o.getLang("photos_will_be_saved_to_pe_album"),photos_pe_change_photo:o.getLang("photos_pe_change_photo"),photos_pe_add_text:o.getLang("photos_pe_add_text"),photos_pe_font:o.getLang("photos_pe_font"),photos_pe_font_size:o.getLang("photos_pe_font_size"),photos_pe_cancel_action:o.getLang("photos_pe_cancel_action"),photos_pe_restore_original:o.getLang("photos_pe_restore_original"),photos_pe_change_text:o.getLang("photos_pe_change_text"),photos_pe_apply_changes:o.getLang("photos_pe_apply_changes"),photos_pe_deny_changes:o.getLang("photos_pe_deny_changes"),photos_pe_publish_photo:o.getLang("photos_pe_publish_photo")}),a=()=>new Promise(((e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_langs"},{onDone:e,onFail:()=>(t(),!0)})}))},540394:(e,t,r)=>{r.d(t,{EVENTS:()=>c,prepareStat:()=>f,sendStat:()=>m});var o=r(945263),n=r(643897),a=r(839470),i=r(733775),s=r(813412),l=r(745163);const c={FLIP_X:"flipX",FLIP_Y:"flipY",ADD_FILTER:"add_filter",REMOVE_FILTER:"remove_filter",UNDO:"undo",REDO:"redo",ENABLE_AUTOCORRECTION:"enable_autocorrection",DISABLE_AUTOCORRECTION:"disable_autocorrection",ENABLE_BLUR:"enable_blur",DISABLE_BLUR:"disable_blur",ZOOM:"zoom",UNZOOM:"unzoom",TURN_LEFT:"turn_left",TURN_RIGHT:"turn_right",ADD_STORY:"add_story",ADD_STORY_FROM_SHARING:"add_story_from_sharing",CLICK_TO_CAMERA_ICON:"click_to_camera_icon",CLICK_TO_GRADIENT_ICON:"click_to_gradient_icon",ADD_TEXT:"add_text",EDIT_TEXT:"edit_text",DELETE_TEXT:"delete_text",ADD_STICKER:"add_sticker",DELETE_STICKER:"delete_sticker",ADD_GRAFFITI:"add_graffiti",SELECT_BACKGROUND:"select_background",MARK_ADVERTISER:i.StoryStatsEvent.MarkAdvertiser,EDIT_ADVERTISER_MARK:i.StoryStatsEvent.EditAdvertiserMark},d=[c.ADD_STORY,c.ADD_STORY_FROM_SHARING,c.CLICK_TO_CAMERA_ICON,c.CLICK_TO_GRADIENT_ICON,c.ADD_TEXT,c.EDIT_TEXT,c.DELETE_TEXT,c.ADD_STICKER,c.DELETE_STICKER,c.ADD_GRAFFITI,c.SELECT_BACKGROUND,c.MARK_ADVERTISER,c.EDIT_ADVERTISER_MARK],u=e=>e.map((e=>{if(e.type===s.LAYER_TYPES.TEXT){const t=e;return{text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*s.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"}}})).filter((e=>!!e)),h=e=>e.map((e=>{if(e.type===s.LAYER_TYPES.STICKER){const t=e,[r,o]=t.id.split("_"),n=parseInt(r)?parseInt(r):0;return{id:parseInt(o),pack_id:n,type:n?"from_pack":"individual"}}})).filter((e=>!!e)),p=e=>e.map((e=>({brush:e.opacity,size:e.width,color:e.color.slice(1)}))),_=e=>["exposure","contrast","saturation","warmth","vignette","sharpness","grain"].map((t=>{if(0!==e[t])return{type:t,value:100*e[t]}})).filter((e=>e)),g=e=>({[-1]:0,0:1,[16/9]:2,[4/3]:3,1:4,[3/4]:5,[9/16]:6}[e]);function m(e){var t;const r=null==(t=window.cur.photoEditorStore)?void 0:t.getState();if(!r)return;let i=0,s=0;if(window.cur.pvCurPhoto){const[e,t]=window.cur.pvCurPhoto.id.split("_");i=parseInt(e),s=parseInt(t)}const c={event_type:e,media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:i,media_id:s};if(window.cur.photoEditorEntryPoint&&(c.creation_entry_point=`${l.navigationStat.getModule()}_${window.cur.photoEditorEntryPoint}`),["change_crop_mode","save_crop","save"].includes(e)){var m;const e=null==(m=r.present)?void 0:m.settings;e&&e.cropAspect&&(c.ratio=g(e.cropAspect))}if(["save_crop","save"].includes(e)){var f,v;const e=null==(f=r.present)?void 0:f.settings,t=null==(v=r.present)?void 0:v.data;if(e&&t&&e.containerWidth&&e.containerHeight){const r=t.originalHeight/t.artboardHeight,o=e.containerWidth*r,n=e.containerHeight*r;t.width=o,t.height=n,t.is_cropped=1}}if(["save_stickers","save"].includes(e)){var S,E;const e=null==(E=r.present)||null==(S=E.layers)?void 0:S.items;if(e){const t=h(e);t.length>0&&(c.stickers=t),c.has_sticker=t.length>0?1:0}}if(["save_text","save"].includes(e)){var T,x;const e=null==(x=r.present)||null==(T=x.layers)?void 0:T.items;if(e){const t=u(e);t.length>0&&(c.texts=t),c.has_text=t.length>0?1:0}}if(["save_filters","add_filter","change_filter_value","save"].includes(e)){var w,C;const e=null==(C=r.present)||null==(w=C.settings)?void 0:w.filter;e&&"regular"!==e.name&&(c.filter=e.name,c.filter_value=100*e.value)}if(["save_brush","save"].includes(e)){var y;const e=null==(y=r.present)?void 0:y.drawings;e&&(c.graffities=p(e),c.has_graffity=c.graffities.length>0?1:0)}if("save"===e){var b,I;const e=null==(b=r.present)?void 0:b.settings;if(e){var R,A,N;const t=e.colorCorrection,r=_(t);r.length&&(c.photo_correction=r),e.blur.isEnabled&&(c.blur_type=e.blur.form,c.blur_value=e.blur.size),(null==(R=e.segmentation)?void 0:R.delete)&&(c.is_segmented=1),(null==(A=e.enhance)?void 0:A.active)&&(null==(N=e.enhance)?void 0:N.url)&&(c.is_upgraded=1),c.is_autocorrected=e.isAutoCorrection,c.rotation=e.rotation}const t=null==(I=r.present)?void 0:I.layers;if(t){const e=t.defaultScale;1!==e&&(c.is_zoomed=1,c.zoom_value=Math.round(100*e))}}window.cur.storyPublishContext&&(0,a.partConfigEnabled)("story_publish_analytics_log")&&(0,n.debugLog)(c),window.cur.storyPublishContext?d.includes(e)&&(0,o.statlogsValueEvent)("story_create_product_analytics",{event_type:e,story_type:"photo"}):(0,o.statlogsValueEvent)("media_editor_product_analytics",c)}function f(e,t,r,o){let n=0,a="photo";r===s.BACKGROUND_MODES.BACKGROUND&&(n=o||0,a=n>=300?"colors":n>=200?"advice_gradients":n>=100?"emojies":"gradients");const i={has_text:0,has_sticker:0,has_graffiti:0,background_type:a,background_id:n},l=h(e),c=u(e),d=p(t);return c.length&&(i.has_text=1,i.texts=c),l.length&&(i.has_sticker=1,i.stickers=l),d.length&&(i.has_graffiti=1,i.graffities=d),i}},945263:(e,t,r)=>{r.d(t,{statlogsProbValueEvent:()=>i,statlogsValueEvent:()=>a});var o=r(839470),n=r(504867);function a(e,t,r,o,a){return(0,n.statlogsValueEvent)(e,t,r,o,a)}function i(e,t,r,n,i,s){(0,o.randEnabled)(e)&&a(t,r,n,i,s)}},237203:(e,t,r)=>{r.d(t,{AnswerQuestionSticker:()=>l});var o=r(714548),n=r(281504),a=r(273800),i=r(624334),s=r(336383);class l extends o.Sticker{prepareData(){return new Promise(((e,t)=>{const{questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:n,cornerIconFlipped:a}=this.props,i={questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:n,cornerIconFlipped:a};this.loadImages(i).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=this.drawQuestion(s.AnswerQuestionStickerStyles.question.top,s.AnswerQuestionStickerStyles.question.left),t=this.drawAnswer(e.bottom+s.AnswerQuestionStickerStyles.answer.top,s.AnswerQuestionStickerStyles.answer.left);this.setWidth(t.right),this.setHeight(t.bottom),this.drawScene()}drawQuestion(e,t){const r=s.AnswerQuestionStickerStyles.question.width-2*s.AnswerQuestionStickerStyles.question.padding,o=new a.ImageItem({x:t+s.AnswerQuestionStickerStyles.questionCorner.marginLeft,image:this.getImage("cornerIcon"),width:s.AnswerQuestionStickerStyles.questionCorner.width,height:s.AnswerQuestionStickerStyles.questionCorner.height}),l=new n.RectItem({x:t+s.AnswerQuestionStickerStyles.question.marginLeft,y:e,width:s.AnswerQuestionStickerStyles.question.width,radius:s.AnswerQuestionStickerStyles.question.borderRadius,background:s.AnswerQuestionStickerStyles.question.background}),c=new a.ImageItem({x:l.getBoundingClientRect().left+s.AnswerQuestionStickerStyles.question.padding,y:l.getBoundingClientRect().top+s.AnswerQuestionStickerStyles.question.padding,image:this.getImage("questionOwnerPhoto"),width:s.AnswerQuestionStickerStyles.avatar.width,height:s.AnswerQuestionStickerStyles.avatar.height,radius:s.AnswerQuestionStickerStyles.avatar.width/2,borderSize:s.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:s.AnswerQuestionStickerStyles.avatar.borderColor}),d=new i.TextItem({x:c.getBoundingClientRect().right+s.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,y:c.getBoundingClientRect().top+s.AnswerQuestionStickerStyles.questionOwnerName.marginTop,text:this.props.questionOwnerName,fontSize:s.AnswerQuestionStickerStyles.questionOwnerName.fontSize,lineHeight:s.AnswerQuestionStickerStyles.questionOwnerName.lineHeight,fontFamily:s.AnswerQuestionStickerStyles.questionOwnerName.fontFamily,color:s.AnswerQuestionStickerStyles.questionOwnerName.color,maxWidth:r-c.getBoundingClientRect().width-s.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,maxLines:1}),u=new i.TextItem({x:l.getBoundingClientRect().left+s.AnswerQuestionStickerStyles.question.padding,y:c.getBoundingClientRect().bottom+s.AnswerQuestionStickerStyles.questionText.marginTop,text:this.props.questionText,fontSize:s.AnswerQuestionStickerStyles.questionText.fontSize,lineHeight:s.AnswerQuestionStickerStyles.questionText.lineHeight,fontFamily:s.AnswerQuestionStickerStyles.questionText.fontFamily,fontWeight:s.AnswerQuestionStickerStyles.questionText.fontWeight,color:s.AnswerQuestionStickerStyles.questionText.color,maxWidth:r,maxLines:8});return l.setHeight(u.getBoundingClientRect().bottom+s.AnswerQuestionStickerStyles.question.padding-8),o.setY(l.getBoundingClientRect().bottom-124),this.add(o),this.add(l),this.add(c),this.add(d),this.add(u),l.getBoundingClientRect()}drawAnswer(e,t){const r=s.AnswerQuestionStickerStyles.answer.width-2*s.AnswerQuestionStickerStyles.answer.padding,o=new n.RectItem({x:t,y:e,width:s.AnswerQuestionStickerStyles.answer.width,radius:s.AnswerQuestionStickerStyles.answer.borderRadius,background:s.AnswerQuestionStickerStyles.answer.background}),l=new a.ImageItem({x:o.getBoundingClientRect().right+s.AnswerQuestionStickerStyles.answerCorner.marginLeft,image:this.getImage("cornerIconFlipped"),width:s.AnswerQuestionStickerStyles.answerCorner.width,height:s.AnswerQuestionStickerStyles.answerCorner.height}),c=new a.ImageItem({x:o.getBoundingClientRect().left+s.AnswerQuestionStickerStyles.answer.padding,y:o.getBoundingClientRect().top+s.AnswerQuestionStickerStyles.answer.padding,image:this.getImage("answerOwnerPhoto"),width:s.AnswerQuestionStickerStyles.avatar.width,height:s.AnswerQuestionStickerStyles.avatar.height,radius:s.AnswerQuestionStickerStyles.avatar.width/2,borderSize:s.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:s.AnswerQuestionStickerStyles.avatar.borderColor}),d=new i.TextItem({x:c.getBoundingClientRect().right+s.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,y:c.getBoundingClientRect().top+s.AnswerQuestionStickerStyles.answerOwnerName.marginTop,text:this.props.answerOwnerName,fontSize:s.AnswerQuestionStickerStyles.answerOwnerName.fontSize,lineHeight:s.AnswerQuestionStickerStyles.answerOwnerName.lineHeight,fontFamily:s.AnswerQuestionStickerStyles.answerOwnerName.fontFamily,maxWidth:r-c.getBoundingClientRect().width-s.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,maxLines:1,color:s.AnswerQuestionStickerStyles.answerOwnerName.color}),u=new i.TextItem({x:o.getBoundingClientRect().left+s.AnswerQuestionStickerStyles.answer.padding,y:c.getBoundingClientRect().bottom+s.AnswerQuestionStickerStyles.answerText.marginTop,text:this.props.answerText,fontSize:s.AnswerQuestionStickerStyles.answerText.fontSize,lineHeight:s.AnswerQuestionStickerStyles.answerText.lineHeight,fontFamily:s.AnswerQuestionStickerStyles.answerText.fontFamily,fontWeight:s.AnswerQuestionStickerStyles.answerText.fontWeight,color:s.AnswerQuestionStickerStyles.answerText.color,maxWidth:r,maxLines:8});return o.setHeight(u.getBoundingClientRect().bottom+s.AnswerQuestionStickerStyles.answer.padding-16-e),l.setY(o.getBoundingClientRect().bottom-124),this.add(l),this.add(o),this.add(c),this.add(d),this.add(u),l.getBoundingClientRect()}constructor(e){super(),this.props=e}}},336383:(e,t,r)=>{r.d(t,{AnswerQuestionStickerStyles:()=>o});const o={avatar:{width:96,height:96,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"},question:{top:0,left:0,width:968,padding:64,marginLeft:32,borderRadius:64,background:"#fff"},questionOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#000"},questionText:{marginTop:48,fontSize:84,lineHeight:104,fontFamily:"SF Pro Text, sans-serif",fontWeight:"600",color:"#000"},questionCorner:{width:132,height:132,marginLeft:4},answer:{top:80,left:168,width:968,padding:64,borderRadius:64,background:"#fff"},answerOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#2C2D2E"},answerText:{marginTop:48,fontSize:80,lineHeight:96,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#000"},answerCorner:{width:132,height:132,marginLeft:-100}}},618742:(e,t,r)=>{r.d(t,{AskQuestionAvatar:()=>a});var o=r(714548),n=r(273800);class a extends o.Sticker{render(){return new Promise(((e,t)=>{this.loadImages({photo:this.props.photoUrl}).then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const{size:e,borderSize:t=0,borderColor:r=""}=this.props,o=4*e,a=4*t,i=new n.ImageItem({image:this.getImage("photo"),width:o,height:o,radius:o/2,borderSize:a,borderColor:r});this.add(i),this.setWidth(i.getWidth()),this.setHeight(i.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},857247:(e,t,r)=>{r.d(t,{AskQuestionText:()=>i});var o=r(714548),n=r(624334),a=r(34390);class i extends o.Sticker{render(){return new Promise((e=>{this.draw(),e(1)}))}draw(){const e=new n.TextItem({text:this.props.text,fontSize:a.AskQuestionTextStyles.fontSize,lineHeight:a.AskQuestionTextStyles.lineHeight,fontFamily:a.AskQuestionTextStyles.fontFamily,fontWeight:a.AskQuestionTextStyles.fontWeight,color:a.AskQuestionTextStyles.color,fillColor:a.AskQuestionTextStyles.fillColor,fillRadius:a.AskQuestionTextStyles.fillRadius,padding:{top:a.AskQuestionTextStyles.paddingTop,bottom:a.AskQuestionTextStyles.paddingBottom,left:a.AskQuestionTextStyles.paddingLeft,right:a.AskQuestionTextStyles.paddingRight}});this.add(e),this.setWidth(e.getWidth()),this.setHeight(e.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},34390:(e,t,r)=>{r.d(t,{AskQuestionTextStyles:()=>o});const o={fontSize:136,lineHeight:144,fontFamily:"VK Sans Display, SF Pro Text, sans-serif",fontWeight:"600",color:"#000",fillColor:"#fff",fillRadius:48,paddingTop:64,paddingBottom:40,paddingLeft:72,paddingRight:72}},109848:(e,t,r)=>{r.d(t,{CommentSticker:()=>I});var o=r(714548),n=r(281504),a=r(273800),i=r(624334),s=r(703854),l=r(854422),c=r(746337),d=r(432315),u=r(575928),h=r(480631),p=r(655246),_=r(709222),g=r(589810),m=r(495191),f=r(763613),v=r(492232),S=r(917564),E=r(569559),T=r(546337),x=r(291772),w=r(816630),C=r(173360);const y=80,b="SF Pro Text, sans-serif";class I extends o.Sticker{static getReplyMediaIcon(e){let t="";switch(e){case"photo":t=(0,s.getIcon20CameraOutline)().icon;break;case"video":t=(0,l.getIcon20VideoCircleOutline)().icon;break;case"audio":t=(0,c.getIcon20MusicOutline)().icon;break;case"doc":t=(0,d.getIcon20DocumentOutline)().icon;break;case"article":t=(0,u.getIcon20ArticleOutline)().icon;break;case"narrative":t=(0,h.getIcon20NarrativeOutline)().icon;break;default:t=(0,p.getIcon20Attach)().icon}return t}static getPostMediaIcon(e){let t="";switch(e){case"audio":t=(0,_.getIcon28MusicOutline)().icon;break;case"video":t=(0,g.getIcon28VideoOutline)().icon;break;case"poll":t=(0,m.getIcon28PollSquareOutline)().icon;break;case"narrative":t=(0,f.getIcon28NarrativeOutline)().icon;break;case"audio_playlist":t=(0,v.getIcon28PlaylistOutline)().icon;break;case"market":t=(0,S.getIcon28MarketOutline)().icon;break;case"geo":t=(0,E.getIcon28PlaceOutline)().icon;break;case"doc":t=(0,T.getIcon28DocumentOutline)().icon;break;case"article":t=(0,x.getIcon28ArticleOutline)().icon;break;default:t=(0,w.getIcon28AttachOutline)().icon}return t}prepareData(){return new Promise(((e,t)=>{const{replyOwnerPhoto:r,replyMediaType:o,replyMediaPreviewUrl:n,postOwnerPhoto:a,postMediaType:i,postMediaPreviewUrl:s}=this.props,l={replyOwnerPhoto:r,postOwnerPhoto:a,replyIcon:this.getIconUrl((0,C.getIcon12Repost)().icon.replace("currentColor","#99A2AD"))};if(n)l.replySticker=n;else if(o){const e=I.getReplyMediaIcon(o);e&&(l.replyMediaIcon=this.getIconUrl(e.replace("currentColor","#3F8AE0")))}if(s)l.postPreview=s;else if(i){const e=I.getPostMediaIcon(i);e&&(l.postMediaIcon=this.getIconUrl(e.replace("currentColor","#99A2AD")))}this.loadImages(l).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=new n.RectItem({x:0,y:0,radius:72,background:"#fff"});this.add(e);const t=this.renderReplyHeader(y,y),r=this.renderReplyMessage(y,t.bottom+46),o=r?r.bottom:t.bottom,{bottom:a}=this.renderPost(y,o+52);this.setHeight(a+y),e.setWidth(this.getWidth()),e.setHeight(this.getHeight()),this.drawScene()}renderReplyHeader(e,t){const r=new a.ImageItem({x:e,y:t,image:this.getImage("replyOwnerPhoto"),width:160,height:160,radius:80,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}),o=r.getBoundingClientRect(),n=o.right+52,s=new i.TextItem({x:n,y:o.top+20,text:this.props.replyOwnerName,fontSize:60,lineHeight:80,fontFamily:b,fontWeight:"500",maxWidth:this.getInnerWidth()-o.width-52,maxLines:1,color:"#000"}),l=new a.ImageItem({x:n,y:s.getBoundingClientRect().bottom,image:this.getImage("replyIcon"),width:44,height:44,radius:0}),c=new i.TextItem({x:l.getBoundingClientRect().right+20,y:l.getBoundingClientRect().top,text:this.props.replySubtitle,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",maxWidth:880,maxLines:1,color:"#818C99"});return this.add(r),this.add(s),this.add(l),this.add(c),o}renderReplyMessage(e,t){let r={bottom:t};if(this.props.replyMediaPreviewUrl){const o=new a.ImageItem({x:e,y:t,image:this.getImage("replySticker"),width:288,height:288});r=o.getBoundingClientRect(),this.add(o)}else if(this.props.replyText){const o=new i.TextItem({x:e,y:t,text:this.props.replyText,fontSize:68,lineHeight:88,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#2C2D2E",maxWidth:1152,maxLines:3});r=o.getBoundingClientRect(),this.add(o)}if(this.props.replyMediaType&&"sticker"!==this.props.replyMediaType){const o=r?r.bottom+4:t;r=this.renderReplyAttach(e,o)}return r}renderReplyAttach(e,t){const r=new a.ImageItem({x:e,y:t,image:this.getImage("replyMediaIcon"),width:76,height:76});return this.add(r),this.add(new i.TextItem({x:r.getBoundingClientRect().right+32,y:r.getBoundingClientRect().top+12,text:this.props.replyMediaName,fontSize:56,lineHeight:72,fontFamily:"SF Pro Text, sans-serif",color:"#3F8AE0"})),r.getBoundingClientRect()}renderPost(e,t){const{postMediaType:r}=this.props,o=48,s=192,l=this.getInnerWidth()-96,c=l-s-32,d=new a.ImageItem({x:e+o,y:t+o,image:this.getImage("postOwnerPhoto"),width:96,height:96,radius:48,borderSize:2,borderColor:"rgba(0, 0, 0, 0.08)"}),u=l-d.getBoundingClientRect().width-32,h=u-s-32,p=new i.TextItem({x:d.getBoundingClientRect().right+32,y:d.getBoundingClientRect().top+20,text:this.props.postOwnerName,fontSize:56,lineHeight:72,fontFamily:b,fontWeight:"400",maxWidth:r?h:u,maxLines:1,color:"#000"});let _,g;this.props.postText&&(_=new i.TextItem({x:e+o,y:d.getBoundingClientRect().bottom+34,text:this.props.postText,fontSize:52,lineHeight:64,fontFamily:b,fontWeight:"400",color:"#000",maxWidth:r?c:l,maxLines:2})),g=_?_.getBoundingClientRect().bottom+20:d.getBoundingClientRect().bottom+48;const m=new i.TextItem({x:e+o,y:g,text:this.props.postDate,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",color:"#818C99"}),f=new n.RectItem({x:y,y:t,width:this.getInnerWidth(),height:m.getBoundingClientRect().bottom-t+36,radius:64,background:"#fff",borderSize:4,borderColor:"#E1E3E6"});if(this.add(f),this.add(d),this.add(p),this.add(m),_&&this.add(_),r){const i=e+o+c+32;if("photo"===r&&this.props.postMediaPreviewUrl)this.add(new a.ImageItem({x:i,y:t+o,image:this.getImage("postPreview"),width:s,height:s,radius:32,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}));else{const e=new n.RectItem({x:i,y:t+o,width:s,height:s,radius:32,background:"#F5F5F5",borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"});this.add(e);const r=e.getBoundingClientRect(),l=96;this.add(new a.ImageItem({x:r.left+(e.getWidth()/2-l/2),y:r.top+(e.getHeight()/2-l/2),image:this.getImage("postMediaIcon"),width:l,height:l,radius:0}))}}return f.getBoundingClientRect()}getInnerWidth(){return this.getWidth()-160}constructor(e){super(),this.props=e,this.setWidth(1400)}}},106439:(e,t,r)=>{r.d(t,{MusicSticker:()=>d});var o=r(714548),n=r(624334),a=r(273800),i=r(202758),s=r(281504),l=r(985447),c=r(721259);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,i.getIcon56SongOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),n={};this.data.isExplicit&&(n.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?n.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(n.cover=this.data.audioImageUrl,n.label=this.data.labelUrl),this.loadImages(n).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new s.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,background:"rgba(255, 255, 255, 1)",shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=132,r=new a.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new a.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new n.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.audioTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:n.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,n=c.browser.safari?0:4,i=t.getBoundingClientRect().bottom-72-n,s=new a.ImageItem({x:o,y:i,image:this.getImage("explicit"),width:72,height:72});this.add(s)}return t}doRenderArtist(e){const t=new n.TextItem({x:0,y:e+24,text:this.data.audioArtist,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:n.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new a.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:a.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},540724:(e,t,r)=>{r.d(t,{PlaylistSticker:()=>d});var o=r(714548),n=r(624334),a=r(273800),i=r(613039),s=r(281504),l=r(985447),c=r(721259);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,i.getIcon56PlaylistOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),n={};this.data.isExplicit&&(n.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?n.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(n.cover=this.data.playlistImageUrl,n.label=this.data.labelUrl),this.loadImages(n).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new s.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)",background:"rgba(255, 255, 255, 1)"});this.add(e);const t=132,r=new a.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new a.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new n.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.playlistTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:n.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,n=c.browser.safari?0:4,i=t.getBoundingClientRect().bottom-72-n,s=new a.ImageItem({x:o,y:i,image:this.getImage("explicit"),width:72,height:72});this.add(s)}return t}doRenderArtist(e){const t=new n.TextItem({x:0,y:e+24,text:this.data.playlistAuthorName,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:n.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new a.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:a.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},273800:(e,t,r)=>{r.d(t,{ImageItem:()=>a,ImageItemCropType:()=>o});var o,n=r(72081);!function(e){e.FULL="FULL",e.CENTER="CENTER"}(o||(o={}));class a extends n.Shape{draw(e){const{x:t=0,y:r=0,image:n,width:a=0,height:i=0,radius:s=0,borderSize:l=0,borderColor:c="transparent",shadowBlur:d=0,shadowColor:u="",cropType:h=o.CENTER}=this.props;let p,_,g,m;switch(h){case o.FULL:p=0,_=0,g=n.width,m=n.height;break;case o.CENTER:{const e=Math.min(n.width,n.height);p=(n.width-e)/2,_=(n.height-e)/2,g=e,m=e;break}}e.save(),e.lineWidth=l,e.strokeStyle=c,d&&u&&(e.shadowBlur=d,e.shadowColor=u,e.shadowOffsetX=1e4+t,e.shadowOffsetY=1e4+r,e.fillRect(-1e4,-1e4,a,a)),e.beginPath(),e.arc(t+s,r+s,s,Math.PI,Math.PI+Math.PI/2),e.lineTo(t+a-s,r),e.arc(t+a-s,r+s,s,Math.PI+Math.PI/2,2*Math.PI),e.lineTo(t+a,r+i-s),e.arc(t+a-s,r+i-s,s,2*Math.PI,Math.PI/2),e.lineTo(t+s,r+i),e.arc(t+s,r+i-s,s,Math.PI/2,Math.PI),e.closePath(),e.clip(),e.drawImage(n,p,_,g,m,t,r,a,i),e.stroke(),e.restore()}getWidth(){return this.props.width}setWidth(e){this.props.width=e}getHeight(){return this.props.height}setWeight(e){this.props.height=e}}},281504:(e,t,r)=>{r.d(t,{RectItem:()=>n});var o=r(72081);class n extends o.Shape{draw(e){const{x:t=0,y:r=0,width:o=0,height:n=0,background:a="transparent",borderSize:i=0,borderColor:s="transparent",shadowBlur:l=0,shadowColor:c=""}=this.props;let{radius:d=0}=this.props;o<2*d&&(d=o/2),n<2*d&&(d=n/2),e.save(),l&&c&&(e.shadowBlur=l,e.shadowColor=c),e.beginPath(),e.fillStyle=a,e.lineWidth=i,e.strokeStyle=s,e.moveTo(t+d,r),e.arcTo(t+o,r,t+o,r+n,d),e.arcTo(t+o,r+n,t,r+n,d),e.arcTo(t,r+n,t,r,d),e.arcTo(t,r,t+o,r,d),e.closePath(),e.stroke(),e.fill(),e.restore()}getWidth(){const{width:e=0}=this.props;return e}setWidth(e){this.props.width=e}getHeight(){const{height:e=0}=this.props;return e}setHeight(e){this.props.height=e}}},72081:(e,t,r)=>{r.d(t,{Shape:()=>o});class o{getBoundingClientRect(){const{x:e=0,y:t=0}=this.props;return{width:this.getWidth(),height:this.getHeight(),top:t,left:e,right:e+this.getWidth(),bottom:t+this.getHeight()}}setX(e){this.props.x=e}setY(e){this.props.y=e}constructor(e){this.props=e}}},624334:(e,t,r)=>{r.d(t,{Align:()=>o,TextItem:()=>i});var o,n=r(72081),a=r(659397);!function(e){e.LEFT="LEFT",e.CENTER="CENTER"}(o||(o={}));class i extends n.Shape{draw(e){const{x:t=0,y:r=0,color:n="#000",lineHeight:a,fillColor:s,fillRadius:l=0,align:c=o.LEFT,maxWidth:d=0,shadowBlur:u,shadowColor:h,maxLines:p,afterPadding:_=0}=this.props;if(e.save(),this.setFont(e),e.fillStyle=n,e.textBaseline="top",e.textAlign="left",u&&h&&(e.shadowBlur=u,e.shadowColor=h),s){const r=this.getPadding();let n=0;this.splitText.forEach(((u,h)=>{let{width:g}=e.measureText(u);p&&h===this.splitText.length-1&&(g+=_);let m=t;c===o.CENTER&&(m=t+(d-g)/2);let f=0;f=0===h?r.top:r.top/2;let v=0;v=h===this.splitText.length-1?r.bottom:r.bottom/2;let S={tl:0,tr:0,bl:0,br:0};if(0===h){S.tl=l,S.tr=l;const{width:t}=e.measureText(this.splitText[h]),{width:r}=e.measureText(this.splitText[h+1]);t>r&&(S.bl=0,S.br=l)}else if(h===this.splitText.length-1){S.bl=l,S.br=l;const{width:t}=e.measureText(this.splitText[h]),{width:r}=e.measureText(this.splitText[h-1]);t>r&&(S.tl=0,S.tr=l)}else{const{width:t}=e.measureText(this.splitText[h]),{width:r}=e.measureText(this.splitText[h-1]),{width:o}=e.measureText(this.splitText[h+1]);t>r&&(S.tl=0,S.tr=l),t>o&&(S.bl=0,S.br=l)}const E=a+f+v;i.drawFill(e,m,n,g+r.left+r.right,E,s,S),e.fillText(u,m+r.left,n+f),n+=E}))}else this.splitText.forEach(((n,i)=>{let{width:s}=e.measureText(n);p&&i===this.splitText.length-1&&(s+=_);let l=t;c===o.CENTER&&(l=t+(d-s)/2),e.fillText(n,l,r+a*i)}));e.restore()}static drawFill(e,t,r,o,n,a,i){e.save(),e.beginPath(),e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.moveTo(t+i.tl,r),e.lineTo(t+o-i.tr,r),e.quadraticCurveTo(t+o,r,t+o,r+i.tr),e.lineTo(t+o,r+n-i.br),e.quadraticCurveTo(t+o,r+n,t+o-i.br,r+n),e.lineTo(t+i.bl,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i.bl),e.lineTo(t,r+i.tl),e.quadraticCurveTo(t,r,t+i.tl,r),e.closePath(),e.stroke(),e.fill(),e.restore()}setFont(e){const{fontSize:t,lineHeight:r,fontFamily:o="sans-serif",fontWeight:n="normal"}=this.props;e.font=`${n} ${t}px/${r}px ${o}`}splitLongWords(e){const{context:t}=this,{maxWidth:r=0}=this.props,o=[];return t&&r?(this.setFont(t),e.forEach((e=>{if("\n"===e)return void o.push(e);const{width:n}=t.measureText(e);if(n<=r)return void o.push(e);const a=Array.from(e).reduce(((e,o)=>{const{width:n}=t.measureText(e.current+o);return n>r?{current:o,items:[...e.items,e.current]}:{current:e.current+o,items:[...e.items]}}),{current:"",items:[]});o.push(...a.items,a.current)})),o):e}splitTextIntoLines(){const{context:e}=this;let{text:t,maxWidth:r=0,maxLines:o=0,afterPadding:n=0}=this.props;const i=String((0,a.decodeHTMLEntities)(t)).replace(/(?:<br\s*\/?>)+/gim,"\n");if(!e)return i.split(/\n/);if(r<=0)return i.split(/\n/);this.setFont(e);const s=this.splitLongWords(i.replaceAll("\n"," \n ").split(" "));let l=0,c=[];for(;s.length;)if(o&&c.length>=o-1){const t=s.splice(0).join(" "),{width:o}=e.measureText(t);if(o+n<=r)c.push(t);else{const o="...",{width:a}=e.measureText(o);let i=!1;const s=Array.from(t).reduce(((t,o)=>{const{width:s}=e.measureText(t+o);return!i&&s+a+n<=r?t+o:(i=!0,t)}),"");c.push(s.trim()+o)}}else{const t=l+1,o="\n"===s[l],a=s.slice(0,t).join(" ");let{width:i}=e.measureText(a);if(t>=s.length&&(i+=n),i>r||t>s.length||o){const e=s.splice(0,o?t:t-1);c.push(e.join(" ")),l=0}else l++}return c}getWidth(){const e=this.getLinesWidth();return 0===e.length?0:Math.max(...e)}getLinesWidth(){const{context:e}=this,{maxLines:t,afterPadding:r=0}=this.props;if(!e)return[];this.setFont(e);const o=this.getPadding();let n=[];for(let a=0;a<this.splitText.length;a++){let{width:i}=e.measureText(this.splitText[a]);t&&a===this.splitText.length-1&&(i+=r),i+=o.left+o.right,n.push(Math.round(i))}return n}getHeight(){const e=this.getPadding(),{fillColor:t,lineHeight:r}=this.props;if(t){const t=this.splitText.length*r,o=(this.splitText.length-1)*(e.top+e.bottom)/2;return e.top+t+o+e.bottom}return this.splitText.length*(r+e.top+e.bottom)}getPadding(){const{padding:e=0}=this.props;return"number"==typeof e?{top:e,bottom:e,left:e,right:e}:e}constructor(e){super(e),this.context=document.createElement("canvas").getContext("2d"),this.splitText=this.splitTextIntoLines()}}},714548:(e,t,r)=>{r.d(t,{Sticker:()=>n});var o=r(531202);class n{drawScene(){const e=this.ctx;e&&(this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight(),e.clearRect(0,0,this.canvas.width,this.canvas.height),this.layers.forEach((t=>{t.draw(e)})))}add(e){this.layers.push(e)}getCanvas(){return this.canvas}toBlob(){return new Promise(((e,t)=>{this.canvas.toBlob((r=>{r?e(r):t()}),"image/png",1)}))}getWidth(){return this.width}getHeight(){return this.height}setWidth(e){this.width=e}setHeight(e){this.height=e}loadImages(e){return new Promise(((t,r)=>{const n=[];for(const[t,r]of Object.entries(e))t&&r&&n.push((0,o.loadImage)(r,t));Promise.all(n).then((e=>{this.images=e,t(1)})).catch((e=>{r(e)}))}))}getIconUrl(e){return URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}))}getImage(e){return this.images.find((t=>t.dataset.name===e))}constructor(){this.layers=[],this.images=[],this.width=0,this.height=0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}}},173360:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="m7.58.92.06-.1A.6.6 0 0 1 8.4.7l.08.06 2.78 2.32.04.05a.6.6 0 0 1 0 .76l-.07.08-2.75 2.29a.6.6 0 0 1-.97-.37l-.01-.1V4.5H4a1 1 0 0 0-1 .88V8a1 1 0 0 0 .88 1H8a1 1 0 0 1 .12 2H4a3 3 0 0 1-3-2.82V5.5a3 3 0 0 1 2.82-3H7.5V1.2c0-.1.03-.2.08-.3l.06-.08z" fill="currentColor"/></svg>',name:"repost_12"}}r.d(t,{getIcon12Repost:()=>o})},575928:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.5 5.25a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm0 5a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm-15 5c0 .41.34.75.76.75h8.98c.42 0 .76-.33.76-.75a.75.75 0 0 0-.76-.75H3.26a.75.75 0 0 0-.76.75Z" id="article_outline_20__path-1"/></defs><g id="article_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_outline_20__article_outline_20"><path id="article_outline_20__Shape" d="M0 0h20v20H0z"/><mask id="article_outline_20__mask-2" fill="#fff"><use xlink:href="#article_outline_20__path-1"/></mask><use id="article_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero" xlink:href="#article_outline_20__path-1"/></g></g></svg>',name:"article_outline_20"}}r.d(t,{getIcon20ArticleOutline:()=>o})},655246:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M14.95 3.8a2.72 2.72 0 0 0-3.86 0L5.56 9.35a4.5 4.5 0 0 0 0 6.34 4.46 4.46 0 0 0 6.32 0l2.88-2.86a.75.75 0 0 1 1.06 1.06l-2.88 2.86a5.96 5.96 0 0 1-8.44 0 6 6 0 0 1 0-8.46l5.53-5.55a4.22 4.22 0 0 1 5.98 0 4.24 4.24 0 0 1 0 6l-5.53 5.54a2.49 2.49 0 1 1-3.52-3.52l3.1-3.09a.75.75 0 0 1 1.06 1.07l-3.1 3.08a1 1 0 0 0 0 1.4.99.99 0 0 0 1.4 0l5.53-5.55a2.74 2.74 0 0 0 0-3.87z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"attach_20"}}r.d(t,{getIcon20Attach:()=>o})},703854:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 0 1-.91-.2 2.25 2.25 0 0 1-.99-.99 2.4 2.4 0 0 1-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 0 0-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 0 0-2.95-2.94 7.5 7.5 0 0 0-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm1.5 0a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}}r.d(t,{getIcon20CameraOutline:()=>o})},432315:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10.18 1.5H9c-.8 0-1.47 0-2.01.05-.63.05-1.17.16-1.67.41a4.25 4.25 0 0 0-1.86 1.86c-.25.5-.36 1.04-.41 1.67C3 6.1 3 6.86 3 7.82v4.36c0 .95 0 1.71.05 2.33.05.63.16 1.17.41 1.67a4.25 4.25 0 0 0 1.86 1.86c.5.25 1.04.36 1.67.4.61.06 1.37.06 2.33.06h1.36c.96 0 1.72 0 2.33-.05a4.39 4.39 0 0 0 1.67-.41 4.25 4.25 0 0 0 1.86-1.86c.25-.5.36-1.04.41-1.67.05-.62.05-1.38.05-2.33V8.32c0-.48 0-.73-.06-.96-.05-.2-.13-.4-.24-.58-.12-.2-.3-.37-.64-.72l-3.62-3.62a4.27 4.27 0 0 0-.72-.65 2 2 0 0 0-.58-.24c-.23-.05-.48-.05-.96-.05Zm5.32 10.65c0 1 0 1.7-.04 2.24a2.9 2.9 0 0 1-.26 1.1A2.75 2.75 0 0 1 14 16.7c-.25.13-.57.21-1.11.26-.55.04-1.25.04-2.24.04h-1.3c-1 0-1.7 0-2.24-.04a2.9 2.9 0 0 1-1.1-.26 2.75 2.75 0 0 1-1.21-1.2 2.94 2.94 0 0 1-.26-1.11c-.04-.55-.04-1.25-.04-2.24v-4.3c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 0 1 6 3.3c.25-.13.57-.21 1.11-.26C7.66 3 8.36 3 9.35 3H10v2.35c0 .4 0 .76.02 1.05.03.3.09.61.24.9.21.4.54.73.94.94.29.15.6.21.9.24.29.02.64.02 1.05.02h2.35v3.65ZM14.88 7 11.5 3.62v1.7c0 .45 0 .74.02.95.02.22.05.3.07.33a.75.75 0 0 0 .3.31c.05.02.12.05.33.07.22.02.51.02.96.02h1.7Z" clip-rule="evenodd"/></svg>',name:"document_outline_20"}}r.d(t,{getIcon20DocumentOutline:()=>o})},746337:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 0 1 2.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54ZM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37Zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37Zm-.02-7.78a.78.78 0 0 0-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 0 0-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67V4.2Z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}}r.d(t,{getIcon20MusicOutline:()=>o})},480631:(e,t,r)=>{function o(){return{icon:'<svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z"/><path d="M10.53 1.5c.69.17 1.29.51 1.77 1.03.53.56.82 1.16 1.16 2.44l.3 1.14a.75.75 0 1 1-1.44.38l-.3-1.13c-.3-1.07-.48-1.45-.81-1.8-.28-.3-.62-.5-1.02-.6-.44-.1-.84-.08-1.75.16l-.22.05-2.23.6c-.88.24-1.3.42-1.6.63l-.07.06-.14.12c-.3.28-.49.62-.58 1.01-.1.41-.09.78.1 1.55l.1.42 1.9 7.06.11.42c.23.76.4 1.09.7 1.4.27.29.61.48 1 .58.48.1.9.08 1.98-.2l.56-.16a.75.75 0 0 1 .4 1.45l-.57.15c-1.3.34-1.96.4-2.7.22a3.48 3.48 0 0 1-1.77-1.02 4.76 4.76 0 0 1-1.1-2.2L4.25 15l-1.9-7.06c-.34-1.29-.39-1.95-.21-2.7.14-.6.43-1.15.86-1.61l.17-.17.18-.15a5.1 5.1 0 0 1 2-.93l.25-.07 2.23-.6c1.3-.34 1.96-.39 2.7-.21zm5.6 6.75a3.2 3.2 0 0 1 3.12 3.28c0 1.75-.66 2.64-3.32 4.84l-1.15.96c-.45.37-1.1.37-1.56 0l-1.41-1.17c-2.44-2.05-3.06-2.93-3.06-4.63a3.2 3.2 0 0 1 5.12-2.65l.13.1.13-.1a3.44 3.44 0 0 1 1.78-.62zm0 1.5c-.59 0-1.1.24-1.58.75l-.19.2a.5.5 0 0 1-.72 0l-.19-.2c-.47-.51-.99-.75-1.58-.75-.88 0-1.62.78-1.62 1.78 0 1.16.44 1.75 2.77 3.69l.98.8.98-.8c2.25-1.87 2.74-2.49 2.77-3.58v-.11c0-1-.74-1.78-1.62-1.78z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"narrative_outline_20"}}r.d(t,{getIcon20NarrativeOutline:()=>o})},854422:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-8.5-7a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0zm8.65 3.38 2.7-1.56a2.1 2.1 0 0 0 0-3.64l-2.7-1.56A2.1 2.1 0 0 0 7 8.44v3.12a2.1 2.1 0 0 0 3.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 0 1-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}}r.d(t,{getIcon20VideoCircleOutline:()=>o})},985447:(e,t,r)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.65 4c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13.26.5.4.98.4 2.32v7.8c0 1.34-.14 1.83-.4 2.32-.26.48-.65.87-1.13 1.13-.5.26-.98.4-2.32.4h-7.8c-1.34 0-1.83-.14-2.32-.4a2.73 2.73 0 0 1-1.13-1.13c-.26-.5-.4-.98-.4-2.32v-7.8c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13.5-.26.98-.4 2.32-.4h7.8Zm-.21 1.5H8.06c-.89 0-1.21.1-1.54.27-.32.17-.58.43-.75.75-.18.33-.27.65-.27 1.54v7.38c0 .89.1 1.21.27 1.54.17.32.43.58.75.75.33.18.65.27 1.54.27h7.38c.89 0 1.21-.1 1.54-.27.32-.17.58-.43.75-.75.18-.33.27-.65.27-1.54V8.06c0-.89-.1-1.21-.27-1.54a1.82 1.82 0 0 0-.75-.75c-.33-.18-.65-.27-1.54-.27Zm-5.94 10V8h5v1.5H11V11h3.5v1.5H11V14h3.5v1.5h-5Z" fill="currentColor"/></svg>',name:"explicit_24"}}r.d(t,{getIcon24Explicit:()=>o})},291772:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.59 3c2.18 0 3.23.2 4.32.79a5.54 5.54 0 0 1 2.3 2.3c.59 1.09.79 2.14.79 4.32v7.18c0 2.18-.2 3.23-.79 4.32a5.54 5.54 0 0 1-2.3 2.3c-1.09.59-2.14.79-4.32.79h-7.18c-2.18 0-3.23-.2-4.32-.79a5.54 5.54 0 0 1-2.3-2.3C3.2 20.82 3 19.77 3 17.6v-7.18c0-2.18.2-3.23.79-4.32a5.54 5.54 0 0 1 2.3-2.3C7.18 3.2 8.23 3 10.4 3h7.18Zm0 2h-7.18c-1.88 0-2.62.14-3.38.55-.64.34-1.14.84-1.48 1.48-.4.76-.55 1.5-.55 3.38v7.18c0 1.88.14 2.62.55 3.38.34.64.84 1.14 1.48 1.48.76.4 1.5.55 3.38.55h7.18c1.88 0 2.62-.14 3.38-.55a3.54 3.54 0 0 0 1.48-1.48c.4-.76.55-1.5.55-3.38v-7.18c0-1.88-.14-2.62-.55-3.38a3.54 3.54 0 0 0-1.48-1.48c-.76-.4-1.5-.55-3.38-.55ZM13 17.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h4Zm6-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Zm0-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Z" fill="currentColor"/></svg>',name:"article_outline_28"}}r.d(t,{getIcon28ArticleOutline:()=>o})},816630:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="attach_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="attach_outline_28__attach_outline_28"><path d="M0 0h28v28H0z"/><path d="M14.19 10.9a1 1 0 1 1 1.41 1.41l-4.17 4.17a1.5 1.5 0 0 0 0 2.12c.6.6 1.56.57 2.12 0l7.78-7.77a4 4 0 0 0-5.66-5.66L7.9 12.95a6.52 6.52 0 0 0 0 9.19 6.52 6.52 0 0 0 9.19 0l4.17-4.17a1 1 0 0 1 1.41 1.41l-4.17 4.17a8.52 8.52 0 0 1-12.02 0 8.52 8.52 0 0 1 0-12.02l7.78-7.77a6 6 0 0 1 8.48 8.48l-7.77 7.78a3.5 3.5 0 0 1-4.95-4.95l4.17-4.17Z" id="attach_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"attach_outline_28"}}r.d(t,{getIcon28AttachOutline:()=>o})},546337:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path fill-rule="evenodd" d="M11.7 2c-2.46 0-3.53.22-4.63.8A5.47 5.47 0 0 0 4.8 5.07C4.22 6.17 4 7.24 4 9.69v8.62c0 2.45.22 3.53.8 4.62a5.46 5.46 0 0 0 2.27 2.27c1.1.58 2.17.8 4.62.8h4.62c2.45 0 3.53-.22 4.62-.8a5.46 5.46 0 0 0 2.27-2.27c.59-1.1.8-2.17.8-4.62v-5.95c0-.8-.03-1.16-.12-1.56a3.61 3.61 0 0 0-.47-1.13 6.4 6.4 0 0 0-1.02-1.2l-4.87-4.86c-.56-.57-.84-.8-1.2-1.02a3.61 3.61 0 0 0-1.12-.47A5.3 5.3 0 0 0 14 2h-2.3Zm0 2c-2.34 0-3.03.21-3.69.56a3.47 3.47 0 0 0-1.44 1.45C6.2 6.67 6 7.36 6 9.7v8.62c0 2.33.21 3.02.56 3.68a3.47 3.47 0 0 0 1.45 1.45c.66.35 1.35.56 3.68.56h4.62c2.33 0 3.02-.21 3.68-.56a3.47 3.47 0 0 0 1.45-1.45c.35-.66.56-1.35.56-3.68V12h-5.5A2.5 2.5 0 0 1 14 9.5V4H11.7Zm4.4 1.02-.1-.1V9.5a.5.5 0 0 0 .41.5h4.68a25.43 25.43 0 0 0-.11-.1L16.1 5.01Z" clip-rule="evenodd"/></svg>',name:"document_outline_28"}}r.d(t,{getIcon28DocumentOutline:()=>o})},917564:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.15 8c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13l.1.19c.2.44.3.96.3 2.13v7.68c-.04 2.02-.3 2.83-.73 3.66a5 5 0 0 1-2.08 2.08c-.9.47-1.79.73-4.24.73H9.47c-2.02-.04-2.83-.3-3.66-.73a5 5 0 0 1-2.08-2.08c-.45-.86-.7-1.71-.73-3.94v-7.4c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13l.19-.1c.4-.18.88-.28 1.88-.3h14.55Zm0 2H6.5c-.63.01-.82.06-1.01.16a.73.73 0 0 0-.32.32c-.1.2-.15.42-.16 1.18v7.29c0 1.93.13 2.6.5 3.3a3 3 0 0 0 1.26 1.25c.69.37 1.36.5 3.3.5h7.89c1.93 0 2.6-.13 3.3-.5a3 3 0 0 0 1.25-1.26c.37-.69.5-1.36.5-3.3v-7.1c0-.91-.04-1.14-.16-1.36a.73.73 0 0 0-.32-.32c-.2-.1-.38-.15-1.01-.16h-.36ZM19 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2ZM9 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm5-10a6 6 0 0 1 6 6h-2a4 4 0 0 0-8 0H8a6 6 0 0 1 6-6Z" fill="currentColor"/></svg>',name:"market_outline_28"}}r.d(t,{getIcon28MarketOutline:()=>o})},709222:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_28__music_outline_28"><path d="M0 0h28v28H0z"/><path d="M11 16.93v2.46c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H11Zm-2 2h-.46c-3.02 0-4.34 2.52-3.2 3.66C6.48 23.73 9 22.4 9 19.39v-.46Zm10.39-15.4A3 3 0 0 1 23 6.45v10.43c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H21v-4.7L11 11.8V18H9V8.92c0-.95.08-1.43.31-1.96.23-.5.56-.9 1-1.23.47-.33.93-.51 1.85-.7ZM21 16.42h-.46c-3.02 0-4.34 2.52-3.2 3.66 1.14 1.14 3.66-.18 3.66-3.2v-.46Zm-.02-10.17a1 1 0 0 0-1.18-.78l-7.23 1.5c-.67.15-.88.23-1.08.37-.16.12-.27.25-.35.43-.1.23-.14.45-.14 1.14v.85l10-2.08V6.46a1 1 0 0 0 0-.1Z" id="music_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"music_outline_28"}}r.d(t,{getIcon28MusicOutline:()=>o})},763613:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M24.11 19.09c.64-.88.88-1.86.89-2.93 0-2.3-1.86-4.16-4.16-4.16a5 5 0 0 0-2.7.82l-.14.1-.14-.1a4.76 4.76 0 0 0-2.7-.82A4.16 4.16 0 0 0 11 16.16c0 1.07.25 2.06.89 2.93.66.91 1.77 1.9 3.55 3.3l1.65 1.3c.53.42 1.29.42 1.82 0l1.65-1.3c1.77-1.4 2.89-2.39 3.55-3.3zm-10.6-1.18c.48.66 1.37 1.5 3.17 2.9L18 21.87l1.32-1.04c1.8-1.42 2.7-2.25 3.18-2.9.39-.54.5-1.1.5-1.76 0-1.2-.97-2.16-2.16-2.16-.8 0-1.5.3-2.13.94l-.36.35a.5.5 0 0 1-.7 0l-.36-.35a2.9 2.9 0 0 0-2.13-.94c-1.2 0-2.16.97-2.16 2.16 0 .65.12 1.22.5 1.75z"/><path d="m7.65 3.47 3.36-.9c.78-.2 1.42-.38 1.95-.48.56-.1 1.08-.13 1.62-.02a4 4 0 0 1 2.14 1.23c.36.4.6.88.78 1.41.18.52.36 1.16.56 1.93l.68 2.54a1 1 0 0 1-1.93.52l-.67-2.5c-.22-.83-.37-1.39-.52-1.81a2.16 2.16 0 0 0-.39-.75 2 2 0 0 0-1.07-.62c-.17-.03-.4-.04-.84.04-.44.08-1 .23-1.83.46L8.2 5.4c-.82.22-1.38.37-1.81.52-.41.15-.61.27-.74.39a2 2 0 0 0-.62 1.07c-.04.17-.04.4.04.83.08.45.23 1.01.45 1.84L8.2 20.09c.22.83.37 1.4.52 1.82.15.41.27.61.4.74a2 2 0 0 0 1.06.62c.34.07.79.01 2.1-.33a1 1 0 0 1 .5 1.93c-1.18.31-2.12.55-3.01.36a4 4 0 0 1-2.15-1.24c-.36-.4-.59-.88-.78-1.4-.18-.52-.35-1.16-.56-1.94L3.58 10.53c-.21-.78-.39-1.42-.48-1.96a4.09 4.09 0 0 1-.03-1.6 4 4 0 0 1 1.24-2.15c.4-.36.88-.6 1.4-.78.52-.19 1.16-.36 1.94-.57z"/></g></svg>',name:"narrative_outline_28"}}r.d(t,{getIcon28NarrativeOutline:()=>o})},569559:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_28__place_outline_28"><path d="M0 0h28v28H0z"/><path d="M23 12.01a9 9 0 1 0-18 0c0 3.55 2.18 7.83 6.48 12.92a3.3 3.3 0 0 0 5.04 0c4.3-5.09 6.48-9.37 6.48-12.92ZM14.84 23.8a1.3 1.3 0 0 1-1.83-.15C8.98 18.88 7 14.98 7 12a7 7 0 1 1 14 0c0 2.97-1.98 6.87-6 11.63l-.16.15ZM10 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Zm2 0a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" id="place_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"place_outline_28"}}r.d(t,{getIcon28PlaceOutline:()=>o})},492232:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_28__playlist_outline_28"><path d="M0 0h28v28H0z"/><path d="M24.78 4.02A1 1 0 0 1 26 5v2.1a3.6 3.6 0 0 1-2.67 3.48l-3.33.89v7.92c0 4.7-4.58 7.1-7.07 4.61-2.58-2.57-.11-6.8 5.07-7.06v-6.22a1 1 0 0 1 0-.04V8.93c-.03-1.92.91-3.29 2.68-3.88.64-.21 2-.55 4.1-1.03ZM18 18.94c-3.54.2-4.84 2.46-3.66 3.65 1.14 1.14 3.66-.18 3.66-3.2ZM8.5 17a1 1 0 0 1 0 2h-4a1 1 0 0 1 0-2h4Zm5-6a1 1 0 0 1 0 2h-9a1 1 0 0 1 0-2h9ZM24 6.26c-1.35.31-2.25.54-2.68.69-.94.31-1.34.89-1.32 1.97v.48l2.81-.75A1.6 1.6 0 0 0 24 7.1ZM15 5a1 1 0 0 1 0 2H4.5a1 1 0 1 1 0-2H15Z" id="playlist_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_28"}}r.d(t,{getIcon28PlaylistOutline:()=>o})},495191:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="poll_square_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="poll_square_outline_28__poll_square_outline_28"><path id="poll_square_outline_28__poll_outline_28" d="M0 0h28v28H0z"/><path d="M10.7 5c-2.14 0-2.9.15-3.69.57-.63.33-1.1.81-1.44 1.44C5.15 7.8 5 8.56 5 10.7v6.62c0 2.13.15 2.9.57 3.68.33.63.81 1.1 1.44 1.44.78.42 1.55.57 3.68.57h6.62c2.13 0 2.9-.15 3.68-.57A3.45 3.45 0 0 0 22.43 21c.42-.78.57-1.55.57-3.68v-6.62c0-2.13-.15-2.9-.57-3.68A3.45 3.45 0 0 0 21 5.57C20.2 5.15 19.44 5 17.3 5h-6.62Zm0-2h6.6c2.68 0 3.65.28 4.63.8a5.45 5.45 0 0 1 2.27 2.27c.52.98.8 1.95.8 4.62v6.62c0 2.67-.28 3.64-.8 4.62a5.45 5.45 0 0 1-2.27 2.27c-.98.52-1.95.8-4.62.8h-6.62c-2.67 0-3.64-.28-4.62-.8a5.45 5.45 0 0 1-2.27-2.27c-.52-.98-.8-1.95-.8-4.62v-6.62c0-2.67.28-3.64.8-4.62A5.45 5.45 0 0 1 6.07 3.8c.98-.52 1.95-.8 4.62-.8Zm.3 16a1 1 0 0 1-2 0v-6a1 1 0 0 1 2 0v6Zm4 0a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0v10Zm4 0a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0v4Z" id="poll_square_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"poll_square_outline_28"}}r.d(t,{getIcon28PollSquareOutline:()=>o})},589810:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="video_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="video_outline_28__video_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-2.05 5.12c.35 0 .68.1.98.26l5.08 2.93a1.95 1.95 0 0 1 0 3.38l-5.08 2.93a1.95 1.95 0 0 1-2.93-1.7v-5.84c0-1.08.88-1.96 1.95-1.96Zm.05 2.03v5.7L16.94 14 12 11.15Z" id="video_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"video_outline_28"}}r.d(t,{getIcon28VideoOutline:()=>o})},613039:(e,t,r)=>{function o(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_56__Icons-56/playlist_outline_56" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_56__playlist_outline_28"><path id="playlist_outline_56__playlist_outline_56" d="M0 0h56v56H0z"/><path d="M39 38.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.04-2.04-2.3-5.5-.58-8.3C27 36.44 30.77 34.61 36 34.5V16.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 51 9.5v4.2a6.7 6.7 0 0 1-4.97 6.48L39 22.05Zm-3-1.42h-.4c-4 .18-6.67 1.53-7.91 3.54-1.02 1.66-.88 3.6.14 4.62.98.98 2.96 1.14 4.7.22 2.12-1.11 3.47-3.5 3.47-6.96V37.5ZM27.5 22a1.5 1.5 0 0 1 0 3h-19a1.5 1.5 0 0 1 0-3h19ZM48 11.38a83.8 83.8 0 0 0-6.03 1.54l-.21.08c-1.93.71-2.8 2.05-2.76 4.33v1.62l6.25-1.67A3.7 3.7 0 0 0 48 13.71ZM30.5 10a1.5 1.5 0 0 1 0 3h-22a1.5 1.5 0 0 1 0-3h22Z" id="playlist_outline_56__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_56"}}r.d(t,{getIcon56PlaylistOutline:()=>o})},202758:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="56" viewBox="0 0 56 56" width="56" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M29 39.5v2.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.03-2.04-2.29-5.5-.57-8.3C17 39.94 20.77 38.11 26 38V11.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 41 4.5v4.2a6.7 6.7 0 0 1-4.97 6.48L29 17.05V38zm6.25-27.22L29 13.95v-1.62c-.03-2.28.83-3.62 2.76-4.33l.21-.08A83.8 83.8 0 0 1 38 6.38v2.33a3.7 3.7 0 0 1-2.75 3.57zM26 42.42c0 3.47-1.35 5.85-3.46 6.97-1.75.91-3.73.76-4.7-.23-1.02-1.01-1.17-2.95-.15-4.61 1.24-2.02 3.9-3.36 7.92-3.54L26 41z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"song_outline_56"}}r.d(t,{getIcon56SongOutline:()=>o})},909438:(e,t,r)=>{r.d(t,{ERRORS:()=>o});const o={NOT_FOUND_WEBGL_CONTEXT:"WebGL context not found",TEXTURE_CREATE_FAILED:"Create texture failed",SHADER_COMPILE_FAILED:"Shader compile failed",PROGRAM_CREATE_FAILED:"Create program failed",PROGRAM_CREATE_FRAMEBUFFER_FAILED:"Create framebuffer failed",PROGRAM_FRAMEBUFFER_INCOMPLETE:"Incomplete framebuffer",FILTER_NOT_FOUND:"Filter not found",FILTER_LOADING_TEXTURES_FAILED:"Filter loading textures failed"}},153137:(e,t,r)=>{r.d(t,{Renderer:()=>E});var o=r(601951),n=r(730991),a=r(909438),i=r(405519),s=r(989900),l=r(175811),c=r(205483),d=r(5973),u=r(810151),h=r(217368),p=r(330995),_=r(134773),g=r(813412);const m={preserveDrawingBuffer:!0,premultipliedAlpha:!1},f=document.createElement("canvas"),v=f.getContext("webgl",m)||f.getContext("experimental-webgl",m),S={};class E{static getOrCreateTexture(e,t,r){const o=r?`${t.src}_auto`:t.src;if(!S[o]){let a;a=r?E.getAuto(t):t;const i=new n.Texture(e);i.attachImage(e,a),S[o]=i}return S[o]}static loadTextures(e,t){return new Promise((r=>{const o=[],n=t.map((e=>p.imageCacheGlobal.get(e)));Promise.all(n).then((t=>{t.forEach((t=>{const r=E.getOrCreateTexture(e,t);o.push(r)})),r(o)})).catch((()=>{}))}))}static getAuto(e){var t;const r=document.createElement("canvas");let o=r.getContext("2d");if(!o)return r;r.width=e.width,r.height=e.height,o.drawImage(e,0,0,e.width,e.height);let n=e.width*e.height,a=255,i=o.getImageData(0,0,e.width,e.height),s=i.data;function l(e,t,r,o){t+r>=e&&(t=(e-1)/2,r=(e-1)/2);const n=function(e,t,r,o){let n,a=256,i=[];for(let e=0;e<256;e++)i.push(0);let l=0;for(n=0;n<e;n++)l=4*n,i[s[l+o]]+=1;for(n=1;n<a;n++)i[n]+=i[n-1];let c={};for(n=0;n<a&&i[n]<=t;)n++;for(c.min=n,n=255;n<a&&i[n]>e-r;)n--;return n<255&&n++,c.max=n,c}(e,t,r,o),{min:i,max:l}=n;!function(e,t,r,o){let n,i;if(r<=t)for(n=0;n<e;n++)i=4*n,s[i+o]=127.5;else{let l=new Array(256);for(n=0;n<t;n++)l[n]=0;for(n=t;n<r;n++)l[n]=(n-t)*a/(r-t)+.5;for(n=r;n<256;n++)l[n]=a;for(n=0;n<e;n++)i=4*n,s[i+o]=l[s[i+o]]}}(e,i,l,o)}!function(e,t,r){l(e,t,r,0),l(e,t,r,1),l(e,t,r,2)}(n,.01*n,.01*n),o.putImageData(i,0,0);const c=document.createElement("canvas");return c.width=e.width,c.height=e.height,o=c.getContext("2d"),null==(t=o)||t.drawImage(r,0,0,r.width,r.height),r}render(e,t,r,o,n={},i,s){return new Promise((l=>{requestAnimationFrame((()=>{if(!v)throw new Error(a.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const c=(0,_.getColorTable)(o);if(!c)throw new Error(a.ERRORS.FILTER_NOT_FOUND);const d=E.getOrCreateTexture(v,r,s);E.loadTextures(v,c).then((r=>{let o=this.postProcessTexture;if(this.baseColorCorrectionProgram.draw({width:e,height:t,uniforms:{u_exposure:n.exposure,u_contrast:n.contrast,u_warmth:n.warmth,u_saturation:n.saturation,u_amount:n.amount},textures:[d,...r]},this.colorCorrectionTexture),this.postProcessProgram.draw({width:e,height:t,uniforms:{u_vignette:n.vignette,u_sharpness:n.sharpness,u_sourceSize:n.sourceSize,u_grain:n.grain},textures:[this.colorCorrectionTexture]},this.postProcessTexture),i&&i.isEnabled){const r=i.form===g.BLUR_TYPES.ROUND?this.roundBlurProgram:this.squareBlurProgram;this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[i.size/e,0]},textures:[this.postProcessTexture]},this.blurTexture1),this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[0,i.size/t]},textures:[this.blurTexture1]},this.blurTexture2),o=this.blurTexture2,i.position&&(r.draw({width:e,height:t,uniforms:{u_position:i.position},textures:[this.blurTexture2,this.postProcessTexture]},this.resultBlurTexture),o=this.resultBlurTexture)}return this.flippedProgram.draw({width:e,height:t,uniforms:{},textures:[o]}),l(f)})).catch((e=>{console.error(new Error(e))}))}))}))}constructor(){this.baseColorCorrectionProgram=new o.ShaderProgram(v,i.default,s.default),this.postProcessProgram=new o.ShaderProgram(v,i.default,l.default),this.flippedProgram=new o.ShaderProgram(v,i.default,c.default),this.triangleBlurProgram=new o.ShaderProgram(v,i.default,d.default),this.roundBlurProgram=new o.ShaderProgram(v,i.default,u.default),this.squareBlurProgram=new o.ShaderProgram(v,i.default,h.default),this.colorCorrectionTexture=new n.Texture(v),this.postProcessTexture=new n.Texture(v),this.blurTexture1=new n.Texture(v),this.blurTexture2=new n.Texture(v),this.resultBlurTexture=new n.Texture(v)}}},636577:(e,t,r)=>{r.d(t,{Shader:()=>n});var o=r(909438);class n{constructor(e,t,r){const n=e.createShader(r);if(!n)throw new Error(o.ERRORS.SHADER_COMPILE_FAILED);e.shaderSource(n,t),e.compileShader(n);if(!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(`${e.getShaderInfoLog(n)}`);this.shader=n}}},601951:(e,t,r)=>{r.d(t,{ShaderProgram:()=>s});var o=r(636577),n=r(730991),a=r(909438),i=r(659397);class s{createProgram(e,t){const r=this.gl.createProgram();if(!r)throw new Error(a.ERRORS.PROGRAM_CREATE_FAILED);this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r);if(!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error(`${this.gl.getProgramInfoLog(r)}`);return r}destroy(){this.gl.deleteProgram(this.program)}attribute(e,t){const r=this.gl.getAttribLocation(this.program,e),o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(r),this.gl.vertexAttribPointer(r,2,this.gl.FLOAT,!1,0,0)}uniforms(e){this.gl.useProgram(this.program);for(let t in e){if(!e.hasOwnProperty(t))continue;const r=this.gl.getUniformLocation(this.program,t),o=e[t];if(Array.isArray(o))switch(o.length){case 1:this.gl.uniform1fv(r,new Float32Array(o));break;case 2:this.gl.uniform2fv(r,new Float32Array(o));break;case 3:this.gl.uniform3fv(r,new Float32Array(o));break;case 4:this.gl.uniform4fv(r,new Float32Array(o))}else(0,i.isNumber)(o)&&this.gl.uniform1f(r,o)}}textures(e,t){this.gl.useProgram(this.program),e.forEach(((e,r)=>{t?(e.use(this.gl,r),this.gl.uniform1i(this.gl.getUniformLocation(this.program,`u_image${r}`),r)):n.Texture.unuse(this.gl,r)}))}draw(e,t){this.gl.useProgram(this.program),t&&(t.updateSize(this.gl,e.width,e.height),this.bindTexture(t.texture)),this.gl.canvas.width=e.width,this.gl.canvas.height=e.height,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight);const r=e.width,o=e.height;this.attribute("a_position",[0,0,r,0,0,o,0,o,r,0,r,o]),this.attribute("a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1]),this.uniforms(Object.assign(e.uniforms,{u_resolution:[e.width,e.height]})),e.textures&&this.textures(e.textures,!0),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.textures&&this.textures(e.textures,!1),t&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}bindTexture(e,t){if(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0),t){const e=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(e!==this.gl.FRAMEBUFFER_COMPLETE){let t="";switch(e){case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:t="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:t="There is no attachment.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:t="Height and width of the attachment are not the same.";break;case this.gl.FRAMEBUFFER_UNSUPPORTED:t="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer."}throw new Error(`${a.ERRORS.PROGRAM_FRAMEBUFFER_INCOMPLETE}. ${t}`)}}}constructor(e,t,r){if(!e)throw new Error(a.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const n=new o.Shader(e,t,e.VERTEX_SHADER).shader,i=new o.Shader(e,r,e.FRAGMENT_SHADER).shader;this.gl=e,this.program=this.createProgram(n,i),this.framebuffer=e.createFramebuffer()}}},730991:(e,t,r)=>{r.d(t,{Texture:()=>n});var o=r(909438);class n{attachImage(e,t){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}updateSize(e,t,r){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null)}use(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}static unuse(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}destroy(e){e.deleteTexture(this.texture)}constructor(e,t,r){if(!e)throw new Error(o.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const n=e.createTexture();if(!n)throw new Error(o.ERRORS.TEXTURE_CREATE_FAILED);this.texture=n,e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&r&&this.updateSize(e,t,r),e.bindTexture(e.TEXTURE_2D,null)}}},134773:(e,t,r)=>{r.d(t,{getColorTable:()=>R});var o=r(600582),n=r(780699),a=r(99847),i=r(137429),s=r(804194),l=r(167811),c=r(940760),d=r(93790),u=r(350704),h=r(791417),p=r(393353),_=r(702146),g=r(527622),m=r(265558),f=r(770805),v=r(450795),S=r(239022),E=r(619978),T=r(713932),x=r(150531),w=r(773333),C=r(825727),y=r(128399);const b={regular:o,nox:n,vesper:a,latona:i,liber:s,luna:l,minerva:c,mitra:d,pro:u,terra:h,veles:p,vesta:_,zaria:g,sepia:m,genius:f,horus:v,fortuna:S},I=[E,T,x,w,C,y];function R(e){const t=b[e];if(t)return[...I,t]}},330995:(e,t,r)=>{r.d(t,{imageCacheGlobal:()=>n});var o=r(531202);const n=new class{get(e){return new Promise(((t,r)=>{const n=this.images[e];n?t(n):(0,o.loadImage)(e).then((r=>{this.setImage(e,r),t(r)})).catch(r)}))}setImage(e,t){this.images[e]=t}constructor(){this.images={}}}},493809:(e,t,r)=>{r.d(t,{rendererScene:()=>l});var o=r(842386),n=r(813412),a=r(531202),i=r(779870),s=r(659397);const l=new class{draw(e,t,r,n,a,i,l,c,d){return new Promise(((u,h)=>{const p=r[0];this.canvas.width=e,this.canvas.height=t,(0,o.drawBlurFromImage)(this.canvas,p.canvas,p.avgColor);const _=p.width*p.scale,g=p.height*p.scale,m=p.x-_/2,f=p.y-g/2;if(this.drawImage(p.canvas,_*a,g*a,m*a,f*a,p.rotate),c){const e=document.createElement("canvas");e.width=_*a,e.height=g*a;const t=e.getContext("2d"),r=c.getContext("2d");if(r&&t){const o=r.getImageData(0,0,_*a,g*a);t.putImageData(o,0,0),t.drawImage(e,0,0,_*a,g*a),this.drawImage(e,_*a,g*a,m*a,f*a,p.rotate)}}this.drawBrush(n,a),this.drawLayers(r,a,e,t,i,l).then((()=>{if(d){const{croppedWidth:e,croppedHeight:t,croppedY:r,croppedX:o,containerHeight:n,containerWidth:a}=d;(0,s.isNumber)(e)&&(0,s.isNumber)(t)&&(0,s.isNumber)(r)&&(0,s.isNumber)(o)&&(0,s.isNumber)(n)&&(0,s.isNumber)(a)&&this.cropImage(e,t,o,r,a,n)}this.canvas.toBlob((e=>{u({blob:e,width:this.canvas.width,height:this.canvas.height})}),"image/jpeg",1)})).catch((e=>{h(e)}))}))}cropImage(e,t,r,o,n,a){if(!this.context||!this.canvas)return;const i=document.createElement("canvas");i.width=n,i.height=a;const s=i.getContext("2d");i&&s&&(s.drawImage(this.canvas,r,o,e,t,0,0,n,a),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=n,this.canvas.height=a,this.context.drawImage(i,0,0))}drawImage(e,t,r,o,n,a){this.context&&(this.context.save(),this.context.imageSmoothingEnabled=!0,this.context.translate(o,n),this.context.translate(t/2,r/2),this.context.rotate(a*Math.PI/180),this.context.translate(-t/2,-r/2),this.context.drawImage(e,0,0,t,r),this.context.restore())}drawBrush(e,t){const{context:r}=this;r&&(r.save(),r.lineCap="round",r.lineJoin="round",e.forEach((e=>{r.lineWidth=e.width*n.BRUSH_WIDTH_COEFFICIENT*t,r.strokeStyle=(0,o.hexToRgba)(e.color,e.opacity),r.beginPath(),r.moveTo(e.path[0][0]*t/e.scale,e.path[0][1]*t/e.scale),e.path.forEach((o=>{r.lineTo(o[0]*t/e.scale,o[1]*t/e.scale)})),r.stroke()})),r.restore())}drawLayers(e,t,r,o,a,s){return new Promise(((r,o)=>{const l=[];e.forEach(((e,r)=>{let o=null;if(e.type!==n.LAYER_TYPES.BACKGROUND){if(e.type===n.LAYER_TYPES.STICKER){const t=a(e.id,n.STICKER_LARGE);o=this.fetchImage(t,e.width*e.scale/e.baseScale,e.height*e.scale/e.baseScale,e.x,e.y,e.rotate)}else if(e.type===n.LAYER_TYPES.IMAGE)o=this.fetchImage(e.url,e.width*e.scale,e.height*e.scale,e.x,e.y,e.rotate);else if(e.type===n.LAYER_TYPES.TEXT){const n=document.querySelector(`[data-index="${r}"] [data-name="${i.layerSelector}"]`);n&&(o=this.drawTextLayer(e,n,t,s))}o&&l.push(o)}})),Promise.all(l).then((e=>{e.forEach((e=>{const r=e.width,o=e.height,n=e.x-r/2,a=e.y-o/2;this.drawImage(e.image,r*t,o*t,n*t,a*t,e.rotate)})),r()})).catch((e=>{o(e)}))}))}drawTextLayer(e,t,r,a){return new Promise(((i,s)=>{const l=document.createElement("canvas"),c=l.getContext("2d");if(!c)return s();const d=100;l.width=t.offsetWidth/a*n.CANVAS_SCALE*r+d,l.height=t.offsetHeight/a*n.CANVAS_SCALE*r+d;let u="";switch(e.fontStyle){case"classic":u="RobotoPE";break;case"cursive":u="PacificoPE";break;case"marker":u="AmaticPE";break;case"italics":u="TTCommonsPE";break;case"typewriter":u="GoraPE";break;case"poster":u="DinPE";break;case"retro":u="Rodchenko";break;case"impact":u="Impact";break;case"lobster":u="Lobster"}const h=e.fontSize*e.scale*n.FONT_SIZE_COEFFICIENT*n.CANVAS_SCALE*r/e.baseScale;c.font=`${h}px ${u}, serif`,c.fillStyle=e.color,c.textAlign="center",c.textBaseline="top",(0,o.printAtWordWrap)(c,e.text,l.width/2,50,h,l.width-d),i({image:l,width:l.width/n.CANVAS_SCALE/r,height:l.height/n.CANVAS_SCALE/r,x:e.x,y:e.y,rotate:e.rotate})}))}fetchImage(e,t,r,o,n,i){return new Promise((s=>{(0,a.loadImage)(e).then((e=>{s({image:e,width:t,height:r,x:o,y:n,rotate:i})})).catch((e=>{console.error(e)}))}))}constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}}},455566:(e,t,r)=>{r.d(t,{ADD_DRAWING:()=>Q,ADD_LAYER_IMAGE:()=>F,ADD_LAYER_STICKER:()=>M,ADD_LAYER_TEXT:()=>B,DELETE_LAYER:()=>$,RESET_SEGMENTATION_DATA:()=>ae,SET_CURRENT_BACKGROUND_ID:()=>re,SET_CURRENT_BACKGROUND_TYPE:()=>ee,SET_CURRENT_LAYER:()=>D,SET_CURRENT_PHOTO_URL:()=>te,SET_CURRENT_STICKER_PACK_INDEX:()=>s,SET_CURRENT_TAB:()=>i,SET_DATA:()=>oe,SET_DATA_LOADED:()=>o,SET_HEADER_SCROLL_POSITION:()=>l,SET_LAYERS_SCALE:()=>U,SET_LAYERS_SHIFT:()=>W,SET_LAYER_COLOR:()=>z,SET_LAYER_FONT_SIZE:()=>Y,SET_LAYER_FONT_STYLE:()=>V,SET_LAYER_POSITION:()=>H,SET_LAYER_SCALE:()=>j,SET_LAYER_TEXT:()=>X,SET_SAVE_LOADING:()=>a,SET_SEGMENTATION_DATA:()=>ne,SET_SETTING_AUTO_CORRECTION:()=>T,SET_SETTING_BLUR_ENABLE:()=>f,SET_SETTING_BLUR_FORM:()=>v,SET_SETTING_BLUR_POSITION:()=>E,SET_SETTING_BLUR_SIZE:()=>S,SET_SETTING_BRUSH_OPACITY:()=>u,SET_SETTING_BRUSH_WIDTH:()=>d,SET_SETTING_COLOR:()=>c,SET_SETTING_COLOR_CORRECTION:()=>_,SET_SETTING_CROP:()=>P,SET_SETTING_CROPPED:()=>w,SET_SETTING_CROP_ASPECT:()=>x,SET_SETTING_ENHANCE:()=>O,SET_SETTING_FILTER:()=>g,SET_SETTING_FILTER_AMOUNT:()=>m,SET_SETTING_FLIP_X:()=>C,SET_SETTING_FLIP_Y:()=>y,SET_SETTING_FONT_FAMILY:()=>p,SET_SETTING_FONT_SIZE:()=>h,SET_SETTING_LOADING:()=>k,SET_SETTING_ROTATE:()=>b,SET_SETTING_SEGMENTATION:()=>I,SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:()=>L,SET_SETTING_SEGMENTATION_DELETE:()=>A,SET_SETTING_SEGMENTATION_INVERSE:()=>R,SET_SETTING_SEGMENTATION_RESET:()=>N,SET_SHOW_DROP_BOX:()=>n,START_LAYER_SCALE:()=>G,TOGGLE_TEXT_EDIT:()=>Z,UPDATE_BACKGROUND_LAYER:()=>K,UPDATE_DRAWING:()=>J,UPDATE_LAYERS_AFTER_CROP:()=>q});const o="SET_DATA_LOADED",n="SET_SHOW_DROP_BOX",a="SET_SAVE_LOADING",i="SET_CURRENT_TAB",s="SET_CURRENT_STICKER_PACK_INDEX",l="SET_HEADER_SCROLL_POSITION",c="SET_SETTING_COLOR",d="SET_SETTING_BRUSH_WIDTH",u="SET_SETTING_BRUSH_OPACITY",h="SET_SETTING_FONT_SIZE",p="SET_SETTING_FONT_FAMILY",_="SET_SETTING_COLOR_CORRECTION",g="SET_SETTING_FILTER",m="SET_SETTING_FILTER_AMOUNT",f="SET_SETTING_BLUR_ENABLE",v="SET_SETTING_BLUR_FORM",S="SET_SETTING_BLUR_SIZE",E="SET_SETTING_BLUR_POSITION",T="SET_SETTING_AUTO_CORRECTION",x="SET_SETTING_CROP_ASPECT",w="SET_SETTING_CROPPED",C="SET_SETTING_FLIP_X",y="SET_SETTING_FLIP_Y",b="SET_SETTING_ROTATE",I="SET_SETTING_SEGMENTATION",R="SET_SETTING_SEGMENTATION_INVERSE",A="SET_SETTING_SEGMENTATION_DELETE",N="SET_SETTING_SEGMENTATION_RESET",L="SET_SETTING_SEGMENTATION_BACKGROUND_COLOR",k="SET_SETTING_LOADING",O="SET_SETTING_ENHANCE",P="SET_CROP_SETTINGS",D="SET_CURRENT_LAYER",M="ADD_LAYER_STICKER",B="ADD_LAYER_TEXT",F="ADD_LAYER_IMAGE",H="SET_LAYER_POSITION",j="SET_LAYER_SCALE",U="SET_LAYERS_SCALE",W="SET_LAYERS_SHIFT",G="START_LAYER_SCALE",z="SET_LAYER_COLOR",Y="SET_LAYER_FONT_SIZE",V="SET_LAYER_FONT_STYLE",X="SET_LAYER_TEXT",Z="TOGGLE_TEXT_EDITOR",K="UPDATE_BACKGROUND_LAYER",$="DELETE_LAYER",q="UPDATE_LAYERS_AFTER_CROP",Q="ADD_VECTOR",J="UPDATE_DRAWING",ee="SET_CURRENT_BACKGROUND_TYPE",te="SET_CURRENT_PHOTO_URL",re="SET_CURRENT_BACKGROUND_ID",oe="SET_DATA",ne="SET_SEGMENTATION_DATA",ae="RESET_SEGMENTATION_DATA"},428661:(e,t,r)=>{r.d(t,{setBackgroundType:()=>n,setCurrentBackgroundId:()=>i,setCurrentPhotoUrl:()=>a});var o=r(455566);const n=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_TYPE,value:e,canUndo:t}),a=(e,t=!0)=>({type:o.SET_CURRENT_PHOTO_URL,value:e,canUndo:t}),i=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_ID,value:e,canUndo:t})},891687:(e,t,r)=>{r.d(t,{setCrop:()=>d,setCropSettings:()=>u});var o=r(50533),n=r(428661),a=r(2413),i=r(709483),s=r(234448),l=r(822188),c=r(455566);const d=e=>t=>{(0,o.batch)((()=>{e.hasOwnProperty("url")&&t((0,n.setCurrentPhotoUrl)(e.url)),e.hasOwnProperty("data")&&t((0,a.setData)(e.data)),e.hasOwnProperty("isCropped")&&t((0,i.setCropped)(e.isCropped)),e.hasOwnProperty("flipX")&&t((0,i.setFlipX)(e.flipX)),e.hasOwnProperty("flipY")&&t((0,i.setFlipY)(e.flipY)),e.hasOwnProperty("rotate")&&t((0,i.setRotate)(e.rotate)),e.hasOwnProperty("layers")&&t((0,s.updateLayersAfterCrop)(e.layers)),e.hasOwnProperty("drawings")&&t((0,l.updateDrawings)(e.drawings)),e.hasOwnProperty("enhanceUrl")&&t((0,i.setEnhance)({active:!0,url:e.enhanceUrl}))}))},u=e=>({type:c.SET_SETTING_CROP,value:e})},2413:(e,t,r)=>{r.d(t,{setData:()=>n});var o=r(455566);const n=e=>({type:o.SET_DATA,payload:e})},822188:(e,t,r)=>{r.d(t,{addDrawing:()=>n,updateDrawings:()=>a});var o=r(455566);const n=e=>({type:o.ADD_DRAWING,payload:e}),a=e=>({type:o.UPDATE_DRAWING,payload:e})},234448:(e,t,r)=>{r.d(t,{addLayerImage:()=>u,addLayerSticker:()=>d,addLayerText:()=>h,closeTextEditor:()=>I,deleteLayer:()=>b,setCurrentLayer:()=>l,setLayerColor:()=>E,setLayerFontSize:()=>T,setLayerFontStyle:()=>x,setLayerPosition:()=>f,setLayerScale:()=>v,setLayerText:()=>w,setLayersScale:()=>g,setLayersShift:()=>m,startLayerScale:()=>S,toggleTextEditor:()=>C,updateBackgroundLayer:()=>y,updateLayersAfterCrop:()=>R});var o=r(489143),n=r(455566),a=r(659397),i=r(842386),s=r(813412);const l=e=>({type:n.SET_CURRENT_LAYER,index:e}),c=(e,t,r=!0,o)=>(n,a)=>{const{items:i}=a().present.layers;n({type:e,payload:t,canUndo:o}),r&&n(l(i.length))},d=(e,t=!0)=>c(n.ADD_LAYER_STICKER,{type:s.LAYER_TYPES.STICKER,id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,canDelete:e.canDelete,scale:e.scale,baseScale:e.baseScale},!0,t),u=(e,t=!0)=>c(n.ADD_LAYER_IMAGE,{type:s.LAYER_TYPES.IMAGE,url:e.url,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,clickableZones:e.clickableZones,canDelete:e.canDelete,scale:e.scale,baseScale:1},!0,t),h=(e,t,r=!0)=>(o,l)=>{var d;const{data:u,settings:h,layers:p}=l().present,{shiftX:_,shiftY:g,globalScale:m}=p;let f,v=(h.containerWidth||u.artboardWidth)/2/m,S=(h.containerHeight||u.artboardHeight)/2/m,E=(0,a.decodeHTMLEntities)(u.placeholders[(0,i.irand)(0,u.placeholders.length-1)]),T=0,x=!1,w=h.fontStyle,C=h.color,y=h.fontSize,b=1,I=1;t&&(v=void 0!==t.x?t.x:v,S=void 0!==t.y?t.y:S,E=void 0!==t.text?t.text:E,T=void 0!==t.rotate?t.rotate:T,x=void 0!==t.isEdit?t.isEdit:x,w=void 0!==t.style?t.style:w,C=void 0!==t.color?t.color:C,y=void 0!==t.fontSize?t.fontSize:y,f=t.initialFontSize,b=void 0!==t.scale?t.scale:b,I=void 0!==t.baseScale?t.baseScale:I),null==(d=u.helpers)||d.sendStat("add_text"),o(c(n.ADD_LAYER_TEXT,{type:s.LAYER_TYPES.TEXT,text:E,x:v-_/m,y:S-g/m,rotate:T,isEdit:x,fontSize:y,initialFontSize:f,fontStyle:w,color:C,scale:b,canDelete:!0,baseScale:I},e,r))};function p(e){var t;return(null==(t=e)?void 0:t.type)===s.BACKGROUND_MODES.BACKGROUND&&"isBackground"in e&&e.isBackground}function _(e){const t=e.find(p);return null!=t?t:null}const g=(e,t=!1)=>(r,o)=>{const{layers:i,settings:s}=o().present,{items:l,shiftX:c,shiftY:d,globalScale:u,defaultScale:h}=i,{containerWidth:p,containerHeight:g,croppedX:m,croppedY:f,croppedWidth:v,croppedHeight:S}=s,E=_(l);if(!E)return;const T=E.width,x=E.height,w=(0,a.isNumber)(m)?m:0,C=(0,a.isNumber)(f)?f:0,y=(T*u-T+2*w)/c||0,b=(x*u-x+2*C)/d||0,I=T*e-T,R=x*e-x,A=1===u?-(I+2*w)/2:-(I+2*w)/Math.abs(y),N=1===u?-(R+2*C)/2:-(R+2*C)/Math.abs(b),L=(0,a.isNumber)(p)?T-p:0,k=(0,a.isNumber)(g)?x-g:0,O=(0,a.isNumber)(v)?v:T,P=(0,a.isNumber)(S)?S:x,D=T-T*e+(T*e-(O+w)*e)-L,M=x-x*e+(x*e-(P+C)*e)-k,B={scale:e,shiftX:A>-(m||0)*e?-(m||0)*e:A<D?D:A,shiftY:N>-(f||0)*e?-(f||0)*e:N<M?M:N,defaultScale:t?e:h};r({type:n.SET_LAYERS_SCALE,payload:B})},m=(e,t,r=!1)=>(o,i)=>{const{layers:s,settings:l}=i().present,{shiftX:c,shiftY:d,items:u,globalScale:h}=s,{containerWidth:p,containerHeight:g,croppedX:m,croppedY:f,croppedWidth:v,croppedHeight:S}=l,E=_(u);if(!E)return;const T=E.width,x=E.height,w=r?e:((0,a.isNumber)(c)?c:0)+e,C=r?t:((0,a.isNumber)(d)?d:0)+t,y=T-T*h,b=x-x*h,I=(0,a.isNumber)(p)?T-p:0,R=(0,a.isNumber)(g)?x-g:0,A=(0,a.isNumber)(v)?v:T,N=(0,a.isNumber)(S)?S:x,L=y+(T*h-(A+((0,a.isNumber)(m)?m:0))*h)-I,k=b+(x*h-(N+((0,a.isNumber)(f)?f:0))*h)-R,O=w>-(m||0)*h?-(m||0)*h:w<L?L:w,P=C>-(f||0)*h?-(f||0)*h:C<k?k:C;o({type:n.SET_LAYERS_SHIFT,payload:{shiftX:O,shiftY:P}})},f=(e,t)=>(r,o)=>{const{currentIndex:a,items:i}=o().present.layers;null!==a&&i[a]&&r({type:n.SET_LAYER_POSITION,payload:{x:e,y:t}})},v=(e,t)=>(r,o)=>{const{currentIndex:a,items:i}=o().present.layers;null!==a&&i[a]&&r({type:n.SET_LAYER_SCALE,payload:{scale:e,rotate:t}})},S=()=>({type:n.START_LAYER_SCALE}),E=e=>(t,r)=>{const{currentIndex:o,items:a}=r().present.layers;null!==o&&a[o]&&t({type:n.SET_LAYER_COLOR,payload:{color:e}})},T=e=>(t,r)=>{const{currentIndex:o,items:a}=r().present.layers;null!==o&&a[o]&&t({type:n.SET_LAYER_FONT_SIZE,payload:{fontSize:e}})},x=e=>(t,r)=>{const{currentIndex:o,items:a}=r().present.layers;null!==o&&a[o]&&t({type:n.SET_LAYER_FONT_STYLE,payload:{fontStyle:e}})},w=e=>(t,r)=>{const{currentIndex:o,items:a}=r().present.layers;null!==o&&a[o]&&t({type:n.SET_LAYER_TEXT,payload:{text:e}})},C=e=>(t,r)=>{const{currentIndex:o,items:a}=r().present.layers;null!==o&&a[o]&&t({type:n.TOGGLE_TEXT_EDIT,payload:{isEdit:e}})},y=(e,t=!0)=>({type:n.UPDATE_BACKGROUND_LAYER,payload:e,canUndo:t}),b=()=>(e,t)=>{const{currentIndex:r,items:a}=t().present.layers,{helpers:i}=t().present.data;if(null===r)return;const l=a[r];if(l){var c;if(l.type===s.LAYER_TYPES.STICKER)null==(c=i)||c.sendStat("delete_sticker");else if(l.type===s.LAYER_TYPES.TEXT){var d;null==(d=i)||d.sendStat("delete_text")}e((0,o.setShowDropBox)(!1)),e({type:n.DELETE_LAYER,index:r})}},I=()=>(e,t)=>{const{currentIndex:r,items:o}=t().present.layers;if(null===r)return;const n=o[r];n&&n.type===s.LAYER_TYPES.TEXT&&(o[r].text.trim()?e(C(!1)):e(b()))},R=e=>({type:n.UPDATE_LAYERS_AFTER_CROP,items:e})},72353:(e,t,r)=>{r.d(t,{resetSegmentationData:()=>a,setSegmentationData:()=>n});var o=r(455566);const n=e=>({type:o.SET_SEGMENTATION_DATA,payload:e}),a=()=>({type:o.RESET_SEGMENTATION_DATA})},709483:(e,t,r)=>{r.d(t,{resetSegmentationSettings:()=>I,setAspect:()=>v,setAutoCorrection:()=>f,setBlurEnable:()=>p,setBlurForm:()=>_,setBlurPosition:()=>m,setBlurSize:()=>g,setBrushOpacity:()=>s,setBrushWidth:()=>i,setColor:()=>a,setColorCorrection:()=>d,setCropped:()=>S,setEnhance:()=>R,setFilter:()=>u,setFilterAmount:()=>h,setFlipX:()=>E,setFlipY:()=>T,setFontSize:()=>l,setFontStyle:()=>c,setLoading:()=>A,setRotate:()=>x,setSegmentation:()=>w,setSegmentationBackgroundColor:()=>y,setSegmentationDelete:()=>b,setSegmentationInverse:()=>C});var o=r(234448),n=r(455566);const a=e=>(t,r)=>{const{currentIndex:a,items:i}=r().present.layers;a&&!i[a]||t((0,o.setLayerColor)(e)),t({type:n.SET_SETTING_COLOR,color:e})},i=e=>({type:n.SET_SETTING_BRUSH_WIDTH,brushWidth:Math.max(.1,e)}),s=e=>({type:n.SET_SETTING_BRUSH_OPACITY,brushOpacity:e}),l=e=>(t,r)=>{const{currentIndex:a,items:i}=r().present.layers;a&&!i[a]||t((0,o.setLayerFontSize)(e)),t({type:n.SET_SETTING_FONT_SIZE,fontSize:e})},c=e=>(t,r)=>{const{currentIndex:a,items:i}=r().present.layers;a&&!i[a]||t((0,o.setLayerFontStyle)(e)),t({type:n.SET_SETTING_FONT_FAMILY,fontStyle:e})},d=(e,t)=>({type:n.SET_SETTING_COLOR_CORRECTION,filter:e,value:t}),u=e=>({type:n.SET_SETTING_FILTER,name:e}),h=e=>({type:n.SET_SETTING_FILTER_AMOUNT,value:e}),p=e=>({type:n.SET_SETTING_BLUR_ENABLE,isEnabled:e}),_=e=>({type:n.SET_SETTING_BLUR_FORM,form:e}),g=e=>({type:n.SET_SETTING_BLUR_SIZE,size:e}),m=e=>({type:n.SET_SETTING_BLUR_POSITION,position:e}),f=e=>({type:n.SET_SETTING_AUTO_CORRECTION,isAutoCorrection:e}),v=e=>({type:n.SET_SETTING_CROP_ASPECT,aspect:e}),S=e=>({type:n.SET_SETTING_CROPPED,isCropped:e}),E=e=>({type:n.SET_SETTING_FLIP_X,value:e}),T=e=>({type:n.SET_SETTING_FLIP_Y,value:e}),x=e=>({type:n.SET_SETTING_ROTATE,value:e}),w=e=>({type:n.SET_SETTING_SEGMENTATION,value:e}),C=e=>({type:n.SET_SETTING_SEGMENTATION_INVERSE,value:e}),y=e=>({type:n.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,value:e}),b=e=>({type:n.SET_SETTING_SEGMENTATION_DELETE,value:e}),I=({canUndo:e})=>({type:n.SET_SETTING_SEGMENTATION_RESET,canUndo:e||!1}),R=e=>({type:n.SET_SETTING_ENHANCE,value:e}),A=e=>({type:n.SET_SETTING_LOADING,value:e})},489143:(e,t,r)=>{r.d(t,{setCurrentStickerPackIndex:()=>u,setDataLoaded:()=>s,setHeaderScrollPosition:()=>h,setMode:()=>d,setSaveLoading:()=>c,setShowDropBox:()=>l});var o=r(234448),n=r(455566),a=r(813412),i=r(993661);const s=()=>({type:n.SET_DATA_LOADED}),l=e=>({type:n.SET_SHOW_DROP_BOX,value:e}),c=e=>({type:n.SET_SAVE_LOADING,value:e}),d=e=>(t,r)=>{const{items:s,currentIndex:l,defaultScale:c}=r().present.layers,{isRedesignEnabled:d}=r().present.data;console.log(">>>",e),null!==l&&(s[l].type===a.LAYER_TYPES.TEXT&&t((0,o.closeTextEditor)()),e&&[a.TABS.PAINT,a.TABS.FILTERS,a.TABS.COLOR,a.TABS.CROP].includes(e)&&t((0,o.setCurrentLayer)(null))),"crop"===e&&(0,i.scaleAction)(c),d&&"text"===e&&(0,i.currentLayerAction)("textAdd"),t({type:n.SET_CURRENT_TAB,value:e})},u=e=>({type:n.SET_CURRENT_STICKER_PACK_INDEX,value:e}),h=e=>({type:n.SET_HEADER_SCROLL_POSITION,value:e})},809776:(e,t,r)=>{r.d(t,{BackgroundCanvas:()=>i});var o=r(785893),n=r(667294),a=r(813412);class i extends n.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e}=this.props,t=e.width,r=e.height;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:t*a.CANVAS_SCALE,height:r*a.CANVAS_SCALE,style:{width:t,height:r},"data-name":"background-canvas"})}drawImage(){var e;const{layer:t,globalScale:r,shiftY:o,shiftX:n}=this.props,{current:i}=this.canvasBg,s=null==(e=i)?void 0:e.getContext("2d");if(s){const e=t.width,i=t.height;s.save(),s.scale(a.CANVAS_SCALE,a.CANVAS_SCALE),s.drawImage(t.canvas,n,o,e*r,i*r),s.restore()}}constructor(e){super(e),this.canvasBg=(0,n.createRef)()}}},641012:(e,t,r)=>{r.d(t,{StoryBackgroundCanvas:()=>i});var o=r(785893),n=r(667294),a=r(813412);class i extends n.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e}=this.props,t=e.width*e.scale,r=e.height*e.scale;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:t*a.CANVAS_SCALE,height:r*a.CANVAS_SCALE,style:{width:t,height:r}})}drawImage(){var e;const{layer:t}=this.props,{current:r}=this.canvasBg,o=null==(e=r)?void 0:e.getContext("2d");if(o){const e=t.width*t.scale,r=t.height*t.scale;o.drawImage(t.canvas,0,0,e*a.CANVAS_SCALE,r*a.CANVAS_SCALE)}}constructor(e){super(e),this.canvasBg=(0,n.createRef)()}}},837632:(e,t,r)=>{r.d(t,{CellList:()=>s});var o=r(785893),n=r(659397),a=r(169099);const i={s:a.default.gapS,m:a.default.gapM,l:a.default.gapL,xs:a.default.gapXs,xl:a.default.gapXl},s=({className:e,gap:t="m",children:r})=>{const s=(0,n.isNumber)(t)?{gap:t}:void 0;return(0,o.jsx)("div",{className:(0,n.classNames)(a.default.root,(0,n.isString)(t)&&i[t],e),style:s,children:r})}},556947:(e,t,r)=>{r.d(t,{CheckboxLike:()=>h});var o=r(434788),n=r(820224),a=r(785893),i=r(898672),s=r(54929),l=r(757473),c=r(856335),d=r(29157),u=r(813412);const h=e=>{var{type:t="radio",checked:r,label:h,icon:p,compact:_=!1}=e,g=(0,n._)(e,["type","checked","label","icon","compact"]);const m=r?(0,a.jsx)(c.Icon20CheckCircleOn,{className:(0,i.getColorClass)("color_icon_accent")}):(0,a.jsx)(d.Icon20CheckCircleOff,{className:(0,i.getColorClass)("color_icon_tertiary")});return(0,a.jsxs)(s.SimpleCell,{Component:"label",before:p||m,after:p?m:void 0,maxHeight:_?u.COMPACT_CELL_HEIGHT:void 0,children:[(0,a.jsx)(l.VisuallyHidden,(0,o._)({Component:"input",type:t,checked:r},g)),h]})}},864400:(e,t,r)=>{r.d(t,{ClickableZones:()=>i});var o=r(785893),n=r(667294),a=r(27473);class i extends n.Component{render(){return this.props.isDev?this.props.clickableZones.map((({clickable_area:e},t)=>{const r=100*Math.abs(e[1].x-e[0].x),n=100*Math.abs(e[2].y-e[1].y);return(0,o.jsx)("div",{className:a.default.root,style:{top:100*e[0].y+"%",left:100*e[0].x+"%",width:`${r}%`,height:`${n}%`}},t)})):null}}},95756:(e,t,r)=>{r.d(t,{ColorPicker:()=>d});var o=r(785893),n=r(667294),a=r(842386),i=r(659397),s=r(521829),l=r(813412),c=r(663301);class d extends n.Component{shouldComponentUpdate(e){return JSON.stringify(e.avgColor)!==JSON.stringify(this.props.avgColor)&&(this.colors=this.getColors(e.avgColor)),!0}render(){return(0,o.jsx)("div",{className:c.default.root,children:this.colors.map(((e,t)=>{const r=e===this.props.color,n=(0,i.classNames)(c.default.item,"#FFFFFF"===e&&c.default.itemWhite);return(0,o.jsx)("div",{className:n,style:{backgroundColor:e},onClick:()=>this.props.setColor(e),children:r&&(0,o.jsx)(s.Icon24Done,{})},t)}))})}getColors(e){const t=(0,a.rgb2hsv)(e.r,e.g,e.b),r=[];return l.AVERAGE_COLORS_MAP.forEach((e=>{const o=Math.round(Math.min(Math.max(t.s+e.s,0),100)),n=Math.round(Math.min(Math.max(t.v+e.v,0),100));r.push((0,a.hsl2hex)(t.h,o,n).toUpperCase())})),(0,i.uniqueArray)([...l.COLORS,...r]).slice(0,30)}constructor(e){super(e),this.colors=this.getColors(e.avgColor)}}},798211:(e,t,r)=>{r.d(t,{DropBox:()=>s});var o=r(785893),n=r(667294),a=r(659397),i=r(223097);class s extends n.PureComponent{render(){const e=(0,a.classNames)(i.default.root,this.state.onHover&&i.default.hover);return(0,o.jsx)("div",{className:e,onMouseOver:()=>this.setState({onHover:!0}),onMouseOut:()=>this.setState({onHover:!1}),onMouseUp:this.props.onDelete,children:s.renderIcon()})}static renderIcon(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"none",children:[(0,o.jsx)("path",{fill:"#fff",d:"M17.5 18.38a1 1 0 00-2 .24l1.8 15.23a3 3 0 002.98 2.65h9.44a3 3 0 002.98-2.65l1.8-15.23a1 1 0 10-2-.24l-1.78 15.24a1 1 0 01-1 .88h-9.44a1 1 0 01-1-.88L17.5 18.38z"}),(0,o.jsx)("path",{fill:"#fff",d:"M22 21.45a1 1 0 00-2 .1l.5 10a1 1 0 102-.1l-.5-10zm8 .1a1 1 0 00-2-.1l-.5 10a1 1 0 102 .1l.5-10zm-4-.05a1 1 0 10-2 0v10a1 1 0 002 0v-10z"}),(0,o.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M20.62 16.5c.08-.35.2-.77.42-1.2.32-.64.8-1.19 1.38-1.59A4.55 4.55 0 0125 13c1.05 0 1.9.27 2.58.71.59.4 1.06.95 1.38 1.6.21.42.34.84.42 1.19H36a1 1 0 010 2H14a1 1 0 010-2h6.63zm6.68 0a2.9 2.9 0 00-.13-.3c-.16-.33-.4-.61-.7-.82-.31-.2-.77-.38-1.47-.38s-1.16.17-1.47.38c-.32.2-.54.5-.7.82-.05.1-.1.2-.13.3h4.6z",className:i.default.cap,clipRule:"evenodd"})]})}constructor(e){super(e),this.state={onHover:!1}}}},990282:(e,t,r)=>{r.d(t,{EditorMainMenu:()=>g});var o=r(785893),n=r(667294),a=r(659397),i=r(838512),s=r(837632),l=r(811460),c=r(100836),d=r(444980),u=r(682778),h=r(461757);const p=e=>{if(!e)return;const t=function(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>"INPUT"===e.tagName&&"hidden"===e.type?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}).nextNode();return t&&e.contains(t)?t:null}(e)||e;t instanceof HTMLElement&&t.focus({preventScroll:!0})};function _(e){const t=e.currentTarget;t&&t.scrollLeft>0&&(t.scrollLeft=0)}const g=({className:e,menuItems:t=[],activePanel:r,defaultActivePanel:g,onChange:m=a.noop})=>{const f=r||g||null,[v,S]=(0,n.useState)(f),E=void 0!==r?r:v,T=t.filter((e=>!e.disabled)),x=T.filter(c.isEditorSubMenuItem),w=E&&x.find((({key:e})=>e===E))||null,C=w?w.key:null,y=(0,d.useMenuRenderingLogic)(C);function b(e){C!==e&&(S(e),m(e))}function I(e,t){e.target===e.currentTarget&&"transform"===e.propertyName&&y.onTransitionFinished(t)}return(0,o.jsxs)("div",{className:(0,a.classNames)(u.default.root,e),tabIndex:-1,onKeyDown:function(e){const t=null!=C&&"Escape"===e.key;!e.defaultPrevented&&t&&(b(null),e.preventDefault(),e.stopPropagation())},onScroll:_,children:[y.panelsToRender.includes(null)&&(0,o.jsx)("div",{className:(0,a.classNames)(u.default.pane,y.panelsOnTheLeft.includes(null)&&u.default.prevPane),tabIndex:-1,onTransitionEnd:e=>I(e,null),ref:null===y.activePanel?p:void 0,children:(0,o.jsx)(h.InertHelper,{inert:null!==y.activePanel,className:u.default.contentWrapper,children:(0,o.jsx)(i.ScrollableContainer,{padded:!0,fadeEffect:!0,className:u.default.scrollable,children:(0,o.jsx)(s.CellList,{children:T.map((e=>(0,o.jsx)(l.EditorMainMenuItemView,{item:e,onNavigateTo:()=>b(e.key)},e.key)))})})})}),x.filter((({key:e})=>y.panelsToRender.includes(e))).map((e=>(0,o.jsx)("div",{className:(0,a.classNames)(u.default.pane,y.panelsOnTheLeft.includes(e.key)&&u.default.prevPane,y.panelsOnTheRight.includes(e.key)&&u.default.nextPane),tabIndex:-1,onTransitionEnd:t=>I(t,e.key),ref:y.activePanel===e.key?p:void 0,children:(0,o.jsx)(h.InertHelper,{inert:y.activePanel!==e.key,className:u.default.contentWrapper,children:e.panel})},e.key)))]})}},444980:(e,t,r)=>{r.d(t,{useMenuRenderingLogic:()=>i});var o=r(434788),n=r(667294),a=r(395721);function i(e){const[t,r]=(0,n.useState)({currentPanelKey:e,lastPanelKey:null,isTransitioning:!1,currentPanelEntersFromTheRight:!0});let i=t;(0,a.useVariableUpdateTrackerSync)(e,((e,r)=>{const n=null===r;i=(0,o._)({},i),i.currentPanelKey=r,i.lastPanelKey=e,i.isTransitioning=!0,n?i.currentPanelEntersFromTheRight=!1:t.isTransitioning?r!==t.lastPanelKey?i.currentPanelEntersFromTheRight=!0:i.currentPanelEntersFromTheRight=!t.currentPanelEntersFromTheRight:i.currentPanelEntersFromTheRight=!0}));const s=(0,n.useRef)(0);(0,n.useEffect)((()=>{if(i===t)return;const e=s.current,o=e+1<1e7?e+1:0;s.current=o;const n=()=>{r((e=>{const t=s.current;return t>o||o>8e6&&t<2e6?e:i}))};document.hidden?setTimeout(n,1e3/30*2):requestAnimationFrame((()=>requestAnimationFrame(n)))}),[i,t]);const l=e=>{const t=[e.currentPanelKey];return e.isTransitioning&&t.push(e.lastPanelKey),t},c=l(t),d=l(i),u=[...new Set([...c,...d])],h=[],p=[];return u.forEach((e=>{!c.includes(e)?i.currentPanelEntersFromTheRight?p.push(e):h.push(e):t.currentPanelKey!==e&&(t.currentPanelEntersFromTheRight?h.push(e):p.push(e))})),{activePanel:t.currentPanelKey,panelsToRender:u,panelsOnTheLeft:h,panelsOnTheRight:p,onTransitionFinished:e=>{i.currentPanelKey===e&&r((e=>e.isTransitioning||null!=e.lastPanelKey?(0,o._)({},e,{lastPanelKey:null,isTransitioning:!1}):e))}}}},811460:(e,t,r)=>{r.d(t,{EditorMainMenuItemView:()=>S});var o=r(434788),n=r(820224),a=r(785893),i=r(667294),s=r(659397),l=r(86894),c=r(54929),d=r(453616),u=r(322905),h=r(898672),p=r(119506),_=r(813412),g=r(297392);const m=e=>(0,a.jsx)(c.SimpleCell,{maxHeight:_.COMPACT_CELL_HEIGHT,before:e.icon,onClick:()=>e.onClick(),children:(0,a.jsx)("span",{className:g.default.caption,children:e.label})}),f=e=>(0,a.jsx)(c.SimpleCell,{maxHeight:_.COMPACT_CELL_HEIGHT,Component:"label",before:e.icon,after:(0,a.jsx)(l.Switch,{checked:e.active,onChange:t=>{e.onChange(t.currentTarget.checked)}}),children:(0,a.jsx)("span",{className:g.default.caption,children:e.label})}),v=e=>{var t;const r=(0,p.useLangMap)();let o=e.icon;e.loading&&(o=(0,a.jsx)(d.FakeIcon,{size:20,children:(0,a.jsx)("div",{className:g.default.spinnerWrapper,children:(0,a.jsx)(l.Spinner,{size:"small"})})}));return(0,a.jsxs)(c.SimpleCell,{Component:"label",maxHeight:_.COMPACT_CELL_HEIGHT,before:o,disabled:e.loading,children:[(0,a.jsx)(l.VisuallyHidden,{Component:"input",type:"checkbox",checked:e.active,readOnly:e.loading,onChange:t=>{if(e.loading)return t.preventDefault(),!1;e.onChange(t.currentTarget.checked)}}),(0,a.jsx)("span",{className:(0,s.classNames)(g.default.caption,e.active&&g.default.complexCaption,e.loading&&g.default.visuallyMuted),children:e.active?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:g.default.shrinkable,children:e.labelActive}),(0,a.jsx)(u.InterpunctSeparator,{}),(0,a.jsx)("span",{className:g.default.cancelButtonWrapper,children:(0,a.jsx)(l.Headline,{Component:"span",weight:"2",normalize:!1,children:(0,a.jsx)("div",{className:g.default.cancelButton,children:null==(t=r)?void 0:t.photos_pe_cancel})})})]}):e.label})]})},S=e=>{var{item:{key:t,disabled:r,icon:l},onNavigateTo:c}=e,d=(0,n._)(e.item,["key","disabled","icon"]);if(r)return null;const u=(0,h.getColorClass)("color_icon_secondary"),p=(0,i.isValidElement)(l)?(0,i.cloneElement)(l,{className:(0,s.classNames)(l.props.className,u)}):l;switch(d.type){case"submenu":return(0,a.jsx)(m,(0,o._)({icon:p},d,{onClick:c}));case"toggle":return(0,a.jsx)(f,(0,o._)({icon:p},d));case"action_cancellable":return(0,a.jsx)(v,(0,o._)({icon:p},d))}}},100836:(e,t,r)=>{function o(e){return"submenu"===e.type}r.d(t,{isEditorSubMenuItem:()=>o})},395721:(e,t,r)=>{r.d(t,{useMutableObject:()=>a,useVariableUpdateTrackerSync:()=>n});var o=r(667294);function n(e,t){const r=(0,o.useRef)(e),n=r.current,a=e;n!==a&&t(n,a),(0,o.useEffect)((()=>{r.current=a}),[a])}function a(e){return(0,o.useRef)(e).current}},702952:(e,t,r)=>{r.d(t,{EditorTabs:()=>f});var o=r(785893),n=r(667294),a=r(659397),i=r(385235),s=r(86894),l=r(997872),c=r(427323),d=r(821046),u=r(563952),h=r(800142),p=r(479049),_=r(370281),g=r(95471),m=r(813412);class f extends n.Component{render(){return(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("div",{className:l.default.header,children:n.Children.map(this.props.children,(e=>{if((0,n.isValidElement)(e))return this.getHeaderItem(e)}))}),(0,o.jsx)("div",{className:l.default.content,children:n.Children.map(this.props.children,(e=>{if((0,n.isValidElement)(e))return this.getTabContentItem(e)}))})]})}static getIcon(e){let t;switch(e){case m.TABS.STICKERS:t=(0,o.jsx)(c.Icon24SmileOutline,{});break;case m.TABS.TEXT:t=(0,o.jsx)(d.Icon24TextOutline,{});break;case m.TABS.PAINT:t=(0,o.jsx)(u.Icon24BrushOutline,{});break;case m.TABS.CROP:t=(0,o.jsx)(h.Icon24Crop,{});break;case m.TABS.COLOR:t=(0,o.jsx)(p.Icon24Filter,{});break;case m.TABS.FILTERS:t=(0,o.jsx)(_.Icon24ImageFilterOutline,{});break;case m.TABS.SEGMENTATION:t=(0,o.jsx)(g.Icon24AddCircleDottedOutline,{})}return t}constructor(){super(...arguments),this.getHeaderItem=e=>{const t=e.props["data-disabled"],r=(0,a.classNames)(l.default.item,this.props.current===e.props["data-mode"]&&l.default.itemCurrent,t&&l.default.itemDisabled),n=(0,o.jsx)("div",{className:r,onClick:()=>this.onTabClick(e.props["data-mode"],t),children:f.getIcon(e.props["data-mode"])},e.props["data-mode"]);if(t){var c,d;const e=(0,o.jsxs)("div",{className:l.default.tooltip,children:[(0,o.jsx)("span",{className:l.default.tooltipText,children:null==(c=this.props.langMap)?void 0:c.photos_pe_filters_disabled_text}),(0,o.jsx)(i.Link,{onClick:()=>this.props.setMode(m.BACKGROUND_MODES.PHOTO),children:null==(d=this.props.langMap)?void 0:d.photos_pe_filters_disabled_button})]});return(0,o.jsx)(s.unstable_RichTooltip,{content:e,children:n})}return n},this.getTabContentItem=e=>{const t=(0,a.classNames)(e.props.className,l.default.tab,this.props.current===e.props["data-mode"]&&l.default.tabCurrent);return(0,n.cloneElement)(e,{className:t})},this.onTabClick=(e,t)=>{t||this.props.change(e)}}}},289584:(e,t,r)=>{r.d(t,{EditorText:()=>d});var o=r(785893),n=r(667294),a=r(659397),i=r(813412),s=r(842386),l=r(516356);const c="editor-text-inner";class d extends n.Component{componentDidUpdate(e){e.layer.fontSize===this.props.layer.fontSize&&e.layer.fontStyle===this.props.layer.fontStyle||this.onChange()}constructor(e){super(e),this.componentDidMount=()=>{const{current:e}=this.textareaEl;e&&(this.onChange(),e.select())},this.render=()=>{const{layer:e}=this.props;let t=Math.max(10,e.fontSize*i.FONT_SIZE_COEFFICIENT);return e.initialFontSize&&(t=e.initialFontSize*i.FONT_SIZE_COEFFICIENT),(0,o.jsx)("div",{className:l.default.root,children:(0,o.jsx)("div",{className:l.default.inner,"data-name":c,children:(0,o.jsx)("textarea",{ref:this.textareaEl,className:(0,a.classNames)(l.default.textArea,(0,s.getComputedFontFamily)(e.fontStyle)),defaultValue:(0,a.decodeHTMLEntities)(e.text).replace(/(\v)/gm,""),autoFocus:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,onInput:this.onChange,onPaste:this.onChange,style:{color:e.color,fontSize:t,height:this.state.height}})})})},this.onKeyDown=e=>{if("Enter"===e.key)if(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey||e.shiftKey){const{current:t}=this.textareaEl;if(t){const r=e.target.selectionStart,o=e.target.selectionEnd;t.value=t.value.substring(0,r)+"\n"+t.value.substring(o),t.selectionStart=t.selectionEnd=r+1,this.onChange()}}else this.props.closeTextEditor()},this.onChange=()=>{const{current:e}=this.textareaEl;e&&(this.setState({height:0},(()=>{this.setState({height:e.scrollHeight})})),this.props.onChange(this.applyLineBreaks(e)))},this.applyLineBreaks=e=>{const t=e.value,r=e.cloneNode(!0);document.querySelector(`[data-name="${c}"]`).appendChild(r),r.setAttribute("wrap","off"),r.value="";const o=r.scrollWidth;for(let e=0,n=-1;e<t.length;e++){const a=t.charAt(e);if(" "!==a&&"-"!==a&&"+"!==a||(n=e),r.value+=a,r.scrollWidth>o){let o="";if(n>=0){for(let r=n+1;r<e;r++)o+=t.charAt(r);n=-1}o+=a,r.value=r.value.substr(0,r.value.length-o.length),r.value+="\n\v"+o}}return r.remove(),r.value.replace(/(\n\v)/gm,"\v")},this.state={height:0},this.textareaEl=(0,n.createRef)(),(0,a.isFunction)(this.props.sendStat)&&this.props.sendStat("edit_text")}}},461757:(e,t,r)=>{r.d(t,{InertHelper:()=>i});var o=r(785893),n=r(667294),a=r(659397);const i=({inert:e,Component:t="span",className:r,children:i})=>{const s=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{const t=s.current;null!=t&&(e?t.setAttribute("inert",""):t.removeAttribute("inert"))}),[e]),(0,o.jsx)(t,{className:(0,a.classNames)(r),ref:s,children:i})}},779870:(e,t,r)=>{r.d(t,{Layer:()=>v,layerSelector:()=>f});var o=r(785893),n=r(667294),a=r(973935),i=r(809776),s=r(199167),l=r(864400),c=r(659397),d=r(813412),u=r(842386),h=r(256310),p=r(723969),_=r(641012),g=r(638766),m=r(744837);const f="editor-layer";class v extends n.Component{render(){const{layer:e,index:t}=this.props;let r=null;const o=(0,c.classNames)(h.default.root,e.locked&&h.default.locked,e.type===d.LAYER_TYPES.TEXT&&(0,u.getComputedFontFamily)(e.fontStyle));switch(e.type){case d.LAYER_TYPES.STICKER:r=this.renderLayerSticker(e,t,o);break;case d.LAYER_TYPES.TEXT:r=this.renderLayerText(e,t,o);break;case d.LAYER_TYPES.IMAGE:r=this.renderLayerImage(e,t,o);break;case d.LAYER_TYPES.BACKGROUND:r=this.props.context===d.CONTEXT_TYPES.STORY?this.renderStoriesLayerBackground(e,t,o):this.renderPhotoLayerBackground(e,t)}if(e.isBackground){const e=document.querySelector(`[data-name="${p.layersSelector}"`);return e?a.createPortal(r,e):null}return r}renderStoriesLayerBackground(e,t,r){return(0,o.jsx)("div",{"data-name":f,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:h.default.inner,"data-name":f,children:[(0,o.jsx)(_.StoryBackgroundCanvas,{layer:e}),this.props.currentIndex===t&&(0,o.jsx)(s.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:1,shiftX:0,shiftY:0,isNewUi:this.isNewUi()})]})},t)}renderPhotoLayerBackground(e,t){const{globalScale:r,shiftY:n,shiftX:a}=this.props;return(0,o.jsxs)("div",{"data-name":f,"data-index":t,children:[(0,o.jsx)(i.BackgroundCanvas,{layer:e,globalScale:r,shiftX:a,shiftY:n}),this.props.currentIndex===t&&(0,o.jsx)(s.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()})]},t)}renderLayerSticker(e,t,r){const{disabled:n,getStickerUrlById:a,globalScale:i,shiftY:l,shiftX:u,deleteLayerAction:p}=this.props,_=e.width*e.scale*(i/e.baseScale),v=e.height*e.scale*(i/e.baseScale),S=a(e.id,+d.STICKER_MEDIUM),E=a(e.id,d.STICKER_LARGE),T=this.largeStickerLoaded===E;return(0,o.jsxs)("div",{"data-name":f,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*i+u}px, ${e.y*i+l}px) rotateZ(${e.rotate}deg)`},children:[(0,o.jsxs)("div",{className:(0,c.classNames)(h.default.inner,n&&h.default.innerDisabled),"data-name":f,style:{width:_,height:v},children:[(0,o.jsx)("img",{src:E,alt:"",className:(0,c.classNames)(h.default.img,!T&&h.default.imgHidden),crossOrigin:"anonymous",onLoad:()=>{this.largeStickerLoaded=E,this.forceUpdate()}}),(0,o.jsx)("img",{src:S,alt:"",className:(0,c.classNames)(h.default.img,T&&h.default.imgHidden)}),this.props.currentIndex===t&&(0,o.jsx)(s.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()})]}),this.isNewUi()&&this.props.currentIndex===t&&(0,o.jsx)("div",{className:h.default.layerDelete,style:{transform:`translate(-50%, ${v/2+15+28}px)`},children:(0,o.jsx)(m.IconButton,{onClick:()=>p(),children:(0,o.jsx)(g.Icon28DeleteOutline,{color:"white"})})})]},t)}renderLayerImage(e,t,r){const{disabled:n,globalScale:a}=this.props;return(0,o.jsx)("div",{"data-name":f,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(h.default.inner,n&&h.default.innerDisabled),"data-name":f,style:{width:e.width*e.scale,height:e.height*e.scale,backgroundImage:`url('${e.url}')`},children:[this.props.currentIndex===t&&(0,o.jsx)(s.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:a,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()}),e.clickableZones&&(0,o.jsx)(l.ClickableZones,{clickableZones:e.clickableZones})]})},t)}renderLayerText(e,t,r){const{disabled:n,globalScale:a,shiftY:i,shiftX:l,deleteLayerAction:u}=this.props,p=Math.max(10,e.fontSize*d.FONT_SIZE_COEFFICIENT)*e.scale*(a/e.baseScale),_={fontSize:p,color:e.color};return this.props.currentIndex===t&&e.isEdit?null:(0,o.jsxs)("div",{"data-name":f,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*a+l}px, ${e.y*a+i}px) rotateZ(${e.rotate}deg)`},children:[(0,o.jsxs)("div",{className:(0,c.classNames)(h.default.inner,n&&h.default.innerDisabled),"data-name":f,style:_,onDoubleClick:this.handleDoubleClick,children:[(0,o.jsx)("div",{children:(0,c.decodeHTMLEntities)(e.text.replace(/(\v)/gm,"\n"))}),this.props.currentIndex===t&&(0,o.jsx)(s.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()})]}),this.props.isRedesignEnabled&&this.props.currentIndex===t&&(0,o.jsx)("div",{className:h.default.layerDelete,style:{transform:`translate(-50%, ${p/2+15+28}px)`},children:(0,o.jsx)(m.IconButton,{onClick:()=>u(),children:(0,o.jsx)(g.Icon28DeleteOutline,{color:"white"})})})]},t)}isNewUi(){return!0===this.props.isRedesignEnabled}constructor(){super(...arguments),this.largeStickerLoaded=null,this.handleDoubleClick=()=>{this.props.toggleTextEditor(!0)}}}},199167:(e,t,r)=>{r.d(t,{LayerControls:()=>u});var o=r(785893),n=r(667294),a=r(842386),i=r(813412),s=r(659397),l=r(894750),c=r(779870),d=r(952052);class u extends n.Component{render(){const{isNewUi:e=!1}=this.props;return(0,o.jsxs)("div",{className:(0,s.classNames)(l.default.root,e&&l.default.rootNewUi),children:[(0,o.jsx)("div",{className:(0,s.classNames)(l.default.handler,l.default.handlerNw,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"nw")}),(0,o.jsx)("div",{className:(0,s.classNames)(l.default.handler,l.default.handlerNe,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"ne")}),(0,o.jsx)("div",{className:(0,s.classNames)(l.default.handler,l.default.handlerSw,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"sw")}),(0,o.jsx)("div",{className:(0,s.classNames)(l.default.handler,l.default.handlerSe,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"se")})]})}constructor(){super(...arguments),this.controlMouseDown=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),this.props.startLayerScale(),this.layer=this.props.layer,this.layer.type===i.LAYER_TYPES.TEXT){const t=e.target.closest(`[data-name="${c.layerSelector}"]`);if(!t)return;this.width=t.offsetWidth/this.layer.scale,this.height=t.offsetHeight/this.layer.scale}else this.width=this.layer.width*this.props.globalScale/this.layer.baseScale,this.height=this.layer.height*this.props.globalScale/this.layer.baseScale;if(void 0!==this.width&&void 0!==this.height){switch(window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp),t){case"se":this.offsetFromCenter={x:this.width/2,y:this.height/2};break;case"sw":this.offsetFromCenter={x:-this.width/2,y:this.height/2};break;case"ne":this.offsetFromCenter={x:this.width/2,y:-this.height/2};break;case"nw":this.offsetFromCenter={x:-this.width/2,y:-this.height/2}}void 0!==this.offsetFromCenter&&(this.distanceToZero=Math.sqrt(this.offsetFromCenter.x*this.offsetFromCenter.x+this.offsetFromCenter.y*this.offsetFromCenter.y))}},this.controlMouseMove=e=>{var t,r;const{x:o,y:n}=(0,a.getRelativeXY)(e,document.querySelector(`[data-name="${d.drawingLayerSelector}"]`));if(void 0===this.offsetFromCenter||void 0===this.distanceToZero||void 0===this.width||void 0===this.height)return;const s={x:o-((null==(t=this.layer)?void 0:t.x)||0)*this.props.globalScale-this.props.shiftX,y:n-((null==(r=this.layer)?void 0:r.y)||0)*this.props.globalScale-this.props.shiftY},l=180*(Math.atan2(s.y,s.x)-Math.atan2(this.offsetFromCenter.y,this.offsetFromCenter.x))/Math.PI,c=Math.max(i.LAYER_MIN_SIZE,Math.sqrt(s.x*s.x+s.y*s.y))/this.distanceToZero;this.props.setLayerScale(c,l)},this.controlMouseUp=()=>{window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),delete this.width,delete this.height,delete this.centerCoordinates,delete this.offsetFromCenter,delete this.distanceToZero}}}},723969:(e,t,r)=>{r.d(t,{Layers:()=>u,layersSelector:()=>c});var o=r(785893),n=r(667294),a=r(779870),i=r(659397),s=r(813412),l=r(976817);const c="photo-editor-image-layer-bg",d=[s.TABS.PAINT,s.TABS.FILTERS,s.TABS.BLUR,s.TABS.COLOR,s.TABS.CROP,s.TABS.SEGMENTATION,s.TABS.COLLAGE];class u extends n.Component{render(){const{isRedesignEnabled:e}=this.props,{items:t,currentIndex:r,shiftX:n,shiftY:s}=this.props.layers,u=d.includes(this.props.currentMode);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,i.classNames)(l.default.root,l.default.items),children:t.map(((t,i)=>(0,o.jsx)(a.Layer,{index:i,currentIndex:r,layer:t,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,getStickerUrlById:this.props.getStickerUrlById,deleteLayerAction:this.props.deleteLayerAction,globalScale:this.props.globalScale,shiftX:n,shiftY:s,disabled:u,context:this.props.context,isRedesignEnabled:e},i)))}),(0,o.jsx)("div",{className:(0,i.classNames)(l.default.root,l.default.background),"data-name":c})]})}}},231624:(e,t,r)=>{r.d(t,{NewColorPicker:()=>c});var o=r(785893),n=r(667294),a=r(659397),i=r(80077),s=r(842386),l=r(813412);const c=({className:e,colors:t,currentColor:r,onClick:c,avgColor:d})=>{const u=(0,n.useRef)(null);let h=!1;const p=(0,n.useMemo)((()=>{if(!d)return t;const e=(0,s.rgb2hsv)(d.r,d.g,d.b),r=[];return l.AVERAGE_COLORS_MAP.forEach((t=>{const o=Math.round(Math.min(Math.max(e.s+t.s,0),100)),n=Math.round(Math.min(Math.max(e.v+t.v,0),100));r.push((0,s.hsl2hex)(e.h,o,n).toUpperCase())})),(0,a.uniqueArray)([...l.COLORS,...r]).slice(0,30)}),[t,d]),_=e=>(0,o.jsx)("button",{className:(0,a.classNames)(i.default.item,e===r&&i.default.itemCurrent),style:{backgroundColor:e},onClick:()=>c(e)},e),g=p.map((e=>(e===r&&(h=!0),_(e))));return h||null==r||(u.current=r),(0,o.jsxs)("div",{className:(0,a.classNames)(i.default.root,e),children:[g,u.current?_(u.current):null]})}},509396:(e,t,r)=>{r.d(t,{PEFormItem:()=>d});var o=r(434788),n=r(820224),a=r(785893),i=r(46145),s=r(833314),l=r(757473),c=r(947825);const d=e=>{var{children:t,label:r,after:d,hiddenLabel:u}=e,h=(0,n._)(e,["children","label","after","hiddenLabel"]);const p=(0,a.jsx)("span",{className:c.default.aside,"aria-hidden":!0,children:d}),_=(0,a.jsx)(i.FormItemLabel,{aside:null!=d?p:null,children:(0,a.jsx)("div",{className:c.default.labelText,children:r})});return(0,a.jsx)(s.FormItem,(0,o._)({top:u?(0,a.jsx)(l.VisuallyHidden,{children:_}):_},h,{children:t}))}},838512:(e,t,r)=>{r.d(t,{ScrollableContainer:()=>l});var o=r(785893),n=r(667294),a=r(659397),i=r(789141),s=r(859535);const l=({className:e,fadeEffect:t,padded:r,getRootRef:l,children:c})=>{const d=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,n.useRef)(null),p=(0,s.useMergedRefCallback)(h,l),_=(0,n.useRef)(!1),[g,m]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1);(0,n.useLayoutEffect)((()=>{const e=h.current;if(t&&e){if("undefined"==typeof IntersectionObserver){const t={passive:!0},o=()=>{const{scrollTop:t,scrollHeight:o,clientHeight:n}=e;m(t>2),v(Math.abs(o-n-t)>2),r()};return o(),e.addEventListener("scroll",o,t),()=>e.removeEventListener("scroll",o,t)}{const t=d.current,o=u.current,n=new IntersectionObserver((e=>{e.forEach((e=>{switch(e.target){case t:return m(!e.isIntersecting);case o:return v(!e.isIntersecting)}})),r()}),{root:e});return t&&n.observe(t),o&&n.observe(o),()=>n.disconnect()}}function r(){requestAnimationFrame((()=>{_.current=!0}))}}),[t]);const S=_.current,E=(0,a.classNames)(i.default.scrollable,t&&i.default.fadeout,g&&i.default.fadeoutTop,f&&i.default.fadeoutBottom,!S&&i.default.fadeoutInstant,e);return(0,o.jsxs)("div",{className:E,ref:p,tabIndex:-1,children:[(0,o.jsx)("span",{className:i.default.scrollDetector,ref:d}),(0,o.jsx)("div",{className:(0,a.classNames)(i.default.content,r&&i.default.contentPadded),children:c}),(0,o.jsx)("span",{className:i.default.scrollDetector,ref:u})]})}},859535:(e,t,r)=>{function o(e,t){return r=>{[e,t].forEach((e=>{e&&("function"==typeof e?e(r):e.current=r)}))}}r.d(t,{useMergedRefCallback:()=>o})},592352:(e,t,r)=>{r.d(t,{StickerList:()=>c});var o=r(785893),n=r(86894),a=r(659397),i=r(813412),s=r(842386),l=r(371354);const c=({className:e,stickers:t,onClick:r,canUseDarkVersions:c=!1,forceUseDarkVersions:d=!1,corsPolicy:u})=>{const h="dark"===(0,n.useAppearance)()&&c||d,p=t.map(((e,t)=>{const n=(0,s.getStickerSize)(e.sizes,i.STICKER_MEDIUM,h);return(0,o.jsx)("button",{className:l.default.sticker,onClick:t=>{0===t.screenX&&0===t.screenY&&r(t,e.id),t.preventDefault()},onMouseDown:t=>{0===t.button&&(r(t,e.id),t.preventDefault())},"aria-label":"Add sticker",children:(0,o.jsx)("img",{src:n,alt:"","aria-hidden":!0,className:l.default.stickerImage,crossOrigin:u,draggable:!1})},t)}));return(0,o.jsx)("div",{className:(0,a.classNames)(l.default.root,e),children:p})}},700631:(e,t,r)=>{r.d(t,{SwitchMode:()=>u,switchModeSelector:()=>d});var o=r(785893),n=r(667294),a=r(659397),i=r(308964),s=r(813412),l=r(681433),c=r(370518);const d="switch-mode";class u extends n.PureComponent{render(){return(0,o.jsx)("div",{className:c.default.root,"data-name":d,children:Object.values(s.BACKGROUND_MODES).map((e=>{const t=e===this.props.current,r=(0,a.classNames)(c.default.mode,t&&c.default.modeActive);return(0,o.jsx)("span",{className:r,onClick:()=>this.setMode(e),children:this.getBackgroundIcon(e)},e)}))})}getBackgroundIcon(e){return e===s.BACKGROUND_MODES.PHOTO?(0,o.jsx)(i.Icon28CameraOutline,{}):e===s.BACKGROUND_MODES.BACKGROUND?(0,o.jsx)(l.SwitchModeIcon,{className:c.default.icon}):null}constructor(){super(...arguments),this.setMode=e=>{(0,a.isFunction)(this.props.sendStat)&&(e===s.BACKGROUND_MODES.PHOTO?this.props.sendStat("click_to_camera_icon"):e===s.BACKGROUND_MODES.BACKGROUND&&this.props.sendStat("click_to_gradient_icon")),this.props.setMode(e)}}}},681433:(e,t,r)=>{r.d(t,{SwitchModeIcon:()=>i});var o=r(434788),n=r(785893);const a={xmlns:"http://www.w3.org/1999/xhtml"},i=e=>(0,n.jsxs)("svg",(0,o._)({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("circle",{id:"photo-editor-gradient-icon-background__circle",cx:"12",cy:"12",r:"11"}),(0,n.jsx)("clipPath",{id:"photo-editor-gradient-icon-background__clip",children:(0,n.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle"})})]}),(0,n.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle",fill:"#FD5C5C"}),(0,n.jsx)("foreignObject",{width:"24",height:"24",clipPath:"url(#photo-editor-gradient-icon-background__clip)",children:(0,n.jsx)("div",(0,o._)({},a,{style:{width:24,height:24,background:"conic-gradient(from 90deg at 50% 50%, #FF9161 0deg, #FD5C5C 31.14deg, #FE77C4 72.38deg, #C47EFF 119.66deg, #508DFA 160.51deg, #5FE3FF 206.24deg, #50E98E 248.92deg, #FFED63 293.99deg, #FFB063 341.15deg, #FF9261 359.9deg)"}}))}),(0,n.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle",stroke:"#fff",strokeWidth:"2"})]}))},813412:(e,t,r)=>{r.d(t,{AVERAGE_COLORS_MAP:()=>l,BACKGROUND_MODES:()=>a,BLUR_TYPES:()=>u,BOTTOM_PANEL_HEIGHT:()=>E,BRUSH_WIDTH_COEFFICIENT:()=>y,CANVAS_SCALE:()=>T,COLORS:()=>i,COLORS_NEW:()=>s,COMPACT_CELL_HEIGHT:()=>F,CONTEXT_TYPES:()=>p,CROP_ASPECTS:()=>f,CROP_ASPECT_FREE:()=>g,CROP_ASPECT_ORIGINAL:()=>m,CROP_MIN_SIZE:()=>B,CROP_SIDES:()=>_,DRAWING_PREVIEW_HEIGHT:()=>M,DRAWING_PREVIEW_WIDTH:()=>D,FILTER_PREVIEW_HEIGHT:()=>N,FILTER_PREVIEW_HEIGHT_NEW_UI:()=>k,FILTER_PREVIEW_HEIGHT_SMALL_NEW_UI:()=>P,FILTER_PREVIEW_WIDTH:()=>A,FILTER_PREVIEW_WIDTH_NEW_UI:()=>L,FILTER_PREVIEW_WIDTH_SMALL_NEW_UI:()=>O,FONTS:()=>c,FONT_SIZE_COEFFICIENT:()=>b,LAYER_DEFAULT_SIZE:()=>R,LAYER_MIN_SIZE:()=>I,LAYER_TYPES:()=>h,PHOTO_FILTERS:()=>d,STICKER_LARGE:()=>C,STICKER_MEDIUM:()=>w,STICKER_THUMB:()=>x,STORY_BASE_HEIGHT:()=>S,STORY_BASE_WIDTH:()=>v,TABS:()=>n});var o=r(659397);const n={AUTO_COLORS:"color_correction_auto",IMAGE_UPSCALE:"upscale_source_image",STICKERS:"stickers",TEXT:"text",PAINT:"paint",CROP:"crop",FILTERS:"filters",COLOR:"color",SEGMENTATION:"segmentation",BLUR:"blur",COLLAGE:"collage"},a={PHOTO:"photo",BACKGROUND:"background"},i=["#FFFFFF","#000000","#FF3301","#FF8C49","#F9D827","#2EBA48","#4189E8","#9F4BED","#69E4B3","#FF84A0","#F7A978","#F8786C","#8B3232","#93B658","#556E35","#5B4490","#1B1B1B","#333333","#4D4D4D","#666666","#808080","#999999","#B3B3B3","#CCCCCC"],s=["#FFFFFF","#181919","#AFA399","#3F8AE0","#22BD8A","#FAC725","#FF5773","#A393F5","#925CFF","#FA60A3","#FF8000","#B1E718","#7AD3FF","#585F67","#DAD1CA","#EDEFF4"],l=[{s:12,v:-40},{s:9,v:-30},{s:6,v:-20},{s:3,v:-10},{s:0,v:0},{s:-3,v:10},{s:-6,v:20},{s:-9,v:30},{s:-12,v:40}],c=["classic","cursive","marker","italics","typewriter","poster","retro","impact","lobster"],d=["regular","nox","vesper","latona","liber","luna","minerva","mitra","pro","terra","veles","vesta","zaria","sepia","genius","horus","fortuna"],u={ROUND:"round",RECTANGULAR:"rectangular"},h={STICKER:"sticker",TEXT:"text",IMAGE:"image",BACKGROUND:"background",STORY_BACKGROUND:"story_background"},p={PHOTO:"photo",STORY:"story"},_={CENTER:"center",NW:"nw",NE:"ne",SW:"sw",SE:"se",N:"n",S:"s",W:"w",E:"e"},g=0,m=-1,f=[{title:"photos_pe_crop_aspect_free",value:g},{title:"photos_pe_crop_aspect_original",value:m},{title:"photos_pe_crop_aspect_16_9",value:16/9},{title:"photos_pe_crop_aspect_4_3",value:4/3},{title:"photos_pe_crop_aspect_1_1",value:1},{title:"photos_pe_crop_aspect_3_4",value:3/4},{title:"photos_pe_crop_aspect_9_16",value:9/16}],v=1080,S=1920,E=50,T=(0,o.isRetina)()?2:1,x="thumb",w=(0,o.isRetina)()?"256":"128",C=512,y=40,b=100,I=30,R=128,A=127,N=95,L=40,k=40,O=32,P=32,D=270,M=110,B=100,F=36},774893:(e,t,r)=>{r.d(t,{BaseEditor:()=>Q});var o=r(434788),n=r(785893),a=r(667294),i=r(659397),s=r(832550),l=r(50533),c=r(21090),d=r(489143),u=r(709483),h=r(234448),p=r(2413),_=r(428661),g=r(891687),m=r(813412),f=r(612764),v=r(702952),S=r(847542),E=r(693912),T=r(992774),x=r(2293),w=r(575213),C=r(330141),y=r(493809),b=r(842386),I=r(86894),R=r(540724),A=r(618742),N=r(109848),L=r(857247),k=r(106439),O=r(237203),P=r(19410),D=r(531202),M=r(815660),B=r(952052),F=r(700631),H=r(779870),j=r(993661),U=r(651242),W=r(724322),G=r(221227),z=r(855829),Y=r(393522),V=r(578683),X=r(575865),Z=r(172221),K=r(452086);class $ extends a.Component{setBackground({advice_gradients:e,colors:t},r,o=!0){var n;let a=m.BACKGROUND_MODES.PHOTO;this.props.data.context===m.CONTEXT_TYPES.STORY&&(a=this.props.data.photoUrl?m.BACKGROUND_MODES.PHOTO:m.BACKGROUND_MODES.BACKGROUND),this.props.setBackgroundType(a,o),this.props.data.photoUrl&&this.props.setCurrentPhotoUrl(this.props.data.photoUrl,o);const i=[...e,...t];let s;if(r)s=r;else{var l;s=(null==(l=i[Math.floor(Math.random()*i.length)])?void 0:l.id)||0}return this.props.setCurrentBackgroundId(s,o),null==(n=this.props.data.helpers)||n.sendStat("select_background"),s}renderSidebar(){var e;return!!(null==(e=this.props.data)?void 0:e.isRedesignEnabled)?this.renderNewSidebarContents():this.renderOldSidebarContents()}renderNewSidebarContents(){const e=this.props.data,t=!!e.disableCrop||e.cotext===m.CONTEXT_TYPES.STORY;return(0,n.jsx)(Z.MainMenu,{enableCrop:!t,stickersTab:this.renderStickersTab(),allowAutoColorCorrection:!0,allowUpscaling:this.canUpscaleImage(),onAutoColorCorrectionToggle:this.toggleAutoColorCorrection,onUpscaleToggle:this.toggleUpscaleImage,onMenuItemClicked:this.handleMenuItemClicked})}canUpscaleImage(){const{enhanceCb:e,enhanceEnabled:t}=this.props.data;return!!t&&!!e}transformImageToCurrentOrientation(e){const t=(0,i.isNumber)(this.props.settings.rotation)?this.props.settings.rotation:0;return(0,b.rotateImageToCurrentAngle)({url:e,angle:t}).catch((e=>console.error(e)))}renderOldSidebarContents(){var e,t,r,o,a,i,l,c;const{data:d,background:u}=this.props,{isNewFeaturesEnabled:h,isRedesignEnabled:p}=d,_=d.context===m.CONTEXT_TYPES.STORY&&u.currentBackgroundType===m.BACKGROUND_MODES.BACKGROUND,g=this.renderStickersTab();let f=null==(t=this.props.data)||null==(e=t.langMap)?void 0:e.photos_pe_save_action;var C,y,b;this.props.data.context===m.CONTEXT_TYPES.STORY&&(f=null==(y=this.props.data)||null==(C=y.langMap)?void 0:C.photos_pe_publish_action);return(0,n.jsxs)("div",{className:P.default.tabsInner,children:[(0,n.jsxs)(v.EditorTabs,{current:null!=(b=this.props.ui.currentMode)?b:m.TABS.STICKERS,change:j.currentTabAction,setMode:this.setMode,langMap:null==(r=this.props.data)?void 0:r.langMap,children:[g&&(0,n.jsx)("div",{"data-mode":m.TABS.STICKERS,children:g}),(0,n.jsx)("div",{"data-mode":m.TABS.TEXT,children:(0,n.jsx)(T.TextPanel,{})}),(0,n.jsx)("div",{"data-mode":m.TABS.PAINT,children:p?(0,n.jsx)(E.NewDrawPanel,{}):(0,n.jsx)(S.DrawPanel,{})}),!d.disableCrop&&d.context===m.CONTEXT_TYPES.PHOTO&&(0,n.jsx)("div",{"data-mode":m.TABS.CROP,children:(0,n.jsx)(K.NewCropPanel,{})}),(0,n.jsx)("div",{"data-mode":m.TABS.FILTERS,"data-disabled":_,children:(0,n.jsx)(w.FiltersPanel,{})}),(0,n.jsx)("div",{"data-mode":m.TABS.COLOR,"data-disabled":_,children:(0,n.jsx)(x.ColorCorrectionPanel,{newDesign:p})}),h&&(0,n.jsx)("div",{"data-mode":m.TABS.SEGMENTATION,children:(0,n.jsx)(z.SegmentationPanelComponent,{})})]}),(null==(o=this.props.data)?void 0:o.showStatusActions)&&!(null==(a=this.props.data)?void 0:a.isRedesignEnabled)&&(0,n.jsx)("div",{className:P.default.actions,children:(0,n.jsxs)(I.ButtonGroup,{gap:"m",align:"right",stretched:!0,children:[null==(i=this.props.data)?void 0:i.statusPanelLeftSideNode,(0,n.jsx)(s.Button,{mode:"secondary",stretched:!0,onClick:this.props.data.close,children:null==(c=this.props.data)||null==(l=c.langMap)?void 0:l.photos_pe_cancel_action}),(0,n.jsx)(s.Button,{mode:"primary",loading:this.props.ui.isSaveLoading,disabled:this.isSaveDisabled,onClick:this.save,children:f})]})})]})}renderStickersTab(){var e,t;const{isRedesignEnabled:r,customStickers:o,stickers:a}=this.props.data;return(null==(e=o)?void 0:e.length)?r?(0,n.jsx)(W.NewStickersPanelCustom,{onClick:this.addSticker,customStickers:this.props.data.customStickers,canUseDarkVersions:!0,forceUseDarkVersions:!0}):(0,n.jsx)(U.StickersPanel,{stickerMouseDown:this.addSticker,customStickers:this.props.data.customStickers}):(null==(t=a)?void 0:t.length)?r?(0,n.jsx)(G.NewStickersPanelStickerPacks,{onClick:this.addSticker,canUseDarkVersions:!0,forceUseDarkVersions:!0}):(0,n.jsx)(C.StickerPacksPanel,{stickerMouseDown:this.addSticker}):null}isLayerSelected(){return null!==this.getCurrentLayer()}isTextEditorOpen(){const e=this.getCurrentLayer();return e&&e.type===m.LAYER_TYPES.TEXT&&e.isEdit}isZoomedIn(){const{globalScale:e,defaultScale:t}=this.props.layers;return e.toFixed(2)!==t.toFixed(2)}isZoomRestrictedTab(){const e=this.props.ui.currentMode,t=[m.TABS.CROP];return null!=e&&t.includes(e)}getCurrentLayer(){const{currentIndex:e,items:t}=this.props.layers;return null!=e&&t[e]?t[e]:null}constructor(e){super(e),this.componentDidMount=()=>{var e,t,r,o,n,a,s;const l=()=>this.props.data.close(!1,!0);if(window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),window.addEventListener("mousedown",this.canvasMouseDown),this.undoSub=j.undoAction.watch((e=>{(0,i.isNumber)(e)?this.props.jumpToPast(e):this.props.undo()})),this.redoSub=j.redoAction.watch((()=>{this.props.redo()})),this.currentTabActionSub=j.applyOrDenyChangesAndChangeTab.watch((({tab:e,depth:t})=>{var r;(0,i.isNumber)(t)&&this.props.jumpToPast(t),this.props.setMode(e),(0,i.isFunction)(null==(r=this.props.data)?void 0:r.currentTabCb)&&this.props.data.currentTabCb(e)})),this.scaleSub=j.scaleAction.watch((e=>{this.props.setLayersScale(Math.round(100*e)/100)})),this.layerActionSub=j.currentLayerAction.watch((e=>{setTimeout((()=>{"textEdit"===e&&this.props.toggleTextEditor(!0),"textAdd"===e&&this.props.addLayerText(!0,{isEdit:!0,baseScale:this.props.layers.defaultScale})}),0)})),(0,i.isFunction)(null==(e=this.props.data)?void 0:e.currentTabCb)&&(this.currentTabSub=j.$currentTab.watch(this.props.data.currentTabCb)),(0,i.isFunction)(null==(t=this.props)?void 0:t.data.scaleOptionsCb)&&(this.scaleOptionsSub=j.$scaleStatus.watch((e=>{this.props.data.scaleOptionsCb(e)}))),(0,i.isFunction)(null==(r=this.props.data)?void 0:r.saveCb)&&(this.getEditedPhotoSub=j.getEditedPhoto.watch((()=>{this.renderImageFromState().then(this.props.data.saveCb)}))),(0,i.isFunction)(null==(o=this.props.data)?void 0:o.save)&&(this.getEditedPhotoSub=j.getEditedPhoto.watch((()=>{this.save()}))),(0,i.isFunction)(null==(n=this.props.data)?void 0:n.undoRedoStatusCb)&&(this.undoRedoStatusSub=j.$undoRedoStatusFiltered.watch(this.props.data.undoRedoStatusCb)),(0,i.isFunction)(null==(a=this.props.data)?void 0:a.currentLayerStatusCb)&&(this.currentLayerStatusSub=j.$currentLayerStatus.watch(this.props.data.currentLayerStatusCb)),(0,i.isFunction)(null==(s=this.props.data.helpers)?void 0:s.getPhotoEditorData))this.props.data.helpers.getPhotoEditorData(l).then((e=>{var t,r,o,n,a,i,s;const{stickers:l,backgrounds:c,storyUploadUrlHash:d,storySaveHash:u}=e,h=this.setBackground(c,null==(t=this.props.data)?void 0:t.backgroundId,!1),p={};l.forEach((e=>{e.items.forEach((e=>{p[e.id]=e}))})),this.props.setData({stickers:l,stickersMap:p,backgrounds:c,placeholders:null==(o=this.props.data)||null==(r=o.langMap)?void 0:r.photos_pe_texts_placeholders,fontsPlaceholders:null==(a=this.props.data)||null==(n=a.langMap)?void 0:n.photos_pe_fonts,storyUploadUrlHash:d,storySaveHash:u}),this.props.setDataLoaded(),(null==(s=this.props.data)||null==(i=s.serviceInfo)?void 0:i.open_text_editor)?this.props.addLayerText(!0,{isEdit:!0,text:""},!1):this.props.stickers||this.props.background.currentBackgroundType!==m.BACKGROUND_MODES.BACKGROUND||(this.props.addLayerText(!0,{isEdit:!0,color:[201,206,203,207,205,202,204,303,306,307].includes(h)?"#333333":"#FFFFFF"},!1),this.props.closeTextEditor(),this.props.setCurrentLayer(null)),this.props.stickers&&this.prepareStickers(this.props.stickers)}));else{var c,d,u,h,p;const e={colors:[],emojies:[],gradients:[],advice_gradients:[]};this.setBackground(e,null==(c=this.props.data)?void 0:c.backgroundId,!1),this.props.setMode(m.TABS.TEXT),this.props.setData({backgrounds:e,placeholders:null==(u=this.props.data)||null==(d=u.langMap)?void 0:d.photos_pe_texts_placeholders,fontsPlaceholders:null==(p=this.props.data)||null==(h=p.langMap)?void 0:h.photos_pe_fonts}),this.props.setDataLoaded()}},this.componentWillUnmount=()=>{var e,t,r,o,n,a,i,s,l,c;window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),window.removeEventListener("mousedown",this.canvasMouseDown),(0,j.resetTrigger)(),null==(e=this.undoSub)||e.unsubscribe(),null==(t=this.redoSub)||t.unsubscribe(),null==(r=this.undoRedoStatusSub)||r.unsubscribe(),null==(o=this.getEditedPhotoSub)||o.unsubscribe(),null==(n=this.currentTabSub)||n.unsubscribe(),null==(a=this.scaleSub)||a.unsubscribe(),null==(i=this.scaleOptionsSub)||i.unsubscribe(),null==(s=this.currentTabActionSub)||s.unsubscribe(),null==(l=this.currentLayerStatusSub)||l.unsubscribe(),null==(c=this.layerActionSub)||c.unsubscribe()},this.render=()=>{var e,t;const{ui:r,data:o,background:a}=this.props,{imageContainerHeight:s,artboardWidth:l,isRedesignEnabled:c=!1}=o,d=!0===(null==(e=o)?void 0:e.showStatusActions)&&!c,u=d&&!c?m.BOTTOM_PANEL_HEIGHT:0,h=(0,i.isNumber)(s)?s:0,p={width:l,height:h+u};c&&(p.marginLeft=o.marginLeft),this.isSaveDisabled=!1;const _=!r.isDataLoaded,g=this.isZoomedIn()&&!this.isZoomRestrictedTab()&&!this.isTextEditorOpen(),v=d&&!_,S=(0,n.jsxs)("div",{className:P.default.imageContainer,style:{width:o.imageContainerWidth},children:[v&&(0,n.jsx)(V.UndoRedo,{}),c&&!_&&(0,n.jsx)("div",{className:(0,i.classNames)(P.default.navigatorContainer,!g&&P.default.navigatorContainerHidden),children:(0,n.jsx)(X.Navigator,{})}),(0,n.jsx)("div",{className:P.default.canvas,style:p,children:(0,n.jsx)(f.EditorCanvas,{getStickerUrlById:this.getStickerUrlById,setMode:this.setMode})}),v&&(0,n.jsx)(Y.StatusPanel,{currentBackgroundId:a.currentBackgroundId,setCurrentBackgroundId:this.props.setCurrentBackgroundId,currentBackgroundType:a.currentBackgroundType,uploadPhoto:this.uploadPhoto,backgrounds:this.props.data.backgrounds})]});return(0,n.jsxs)("div",{className:P.default.root,style:{height:h+u},children:[S,(0,n.jsx)("div",{className:(0,i.classNames)(P.default.tabs,(null==(t=this.props.data)?void 0:t.isRedesignEnabled)&&P.default.redesignTabs),children:r.isDataLoaded?this.renderSidebar():(0,n.jsx)(I.Spinner,{})}),(0,n.jsx)("input",{type:"file",accept:"image/*",className:P.default.inputFile,onChange:this.handleChooseFile,ref:this.inputFile}),!r.isDataLoaded&&this.renderFontsPreloading()]})},this.handleMenuItemClicked=e=>{const t=e=>{switch(e){case"crop":return"click_to_crop";case"filters":return"click_to_filter";case"stickers":return"click_to_stickers";case"text":return"click_to_text";case"paint":return"click_to_brush";case"color":return"click_to_photo_correction";case"segmentation":return"click_to_segmentation";default:return null}};var r,o;t(e)&&(null==(o=this.props.data)||null==(r=o.helpers)||r.sendStat(t(e)))},this.toggleUpscaleImage=e=>{const{setEnhance:t,setLoading:r,setCrop:o,data:n,settings:a}=this.props,{originalWidth:s,originalHeight:l,enhanceCb:c,photoUrl:d}=n;if(e){if((0,i.isFunction)(c)){var u,h,p;if((0,i.isString)(null==(u=a.enhance)?void 0:u.url)&&(null==(h=a.enhance)?void 0:h.url))return t({active:!0,url:null==(p=a.enhance)?void 0:p.url}),void o({data:{originalWidth:2*s,originalHeight:2*l}});r({enhance:!0}),c((e=>{var n,a;r({enhance:!1}),e&&this.transformImageToCurrentOrientation(e).then((e=>{if(e){const{url:r,width:n,height:a}=e;(0,i.isString)(r)&&(t({active:!0,url:r}),o({data:{originalWidth:n,originalHeight:a}}))}})),null==(a=this.props.data)||null==(n=a.helpers)||n.sendStat("upgrade")}))}}else this.transformImageToCurrentOrientation(d).then((e=>{if(e){const{url:r,width:n,height:a}=e;t({active:!1}),o({url:r,data:{originalWidth:n,originalHeight:a}})}}))},this.toggleAutoColorCorrection=e=>{var t,r;this.props.setAutoCorrection(e),null==(r=this.props.data)||null==(t=r.helpers)||t.sendStat(e?"enable_autocorrection":"disable_autocorrection")},this.renderFontsPreloading=()=>(0,n.jsx)("div",{className:P.default.fontPreload,children:m.FONTS.map((e=>(0,n.jsx)("span",{className:(0,b.getComputedFontFamily)(e)},e)))}),this.save=()=>{this.props.closeTextEditor(),this.props.setCurrentLayer(null),this.props.setSaveLoading(!0),setTimeout((()=>{this.renderImageFromState().then((({blob:e,width:t,height:r})=>{var o,n;const{layers:a,drawings:i,background:s}=this.props,l=null==(n=this.props.data)||null==(o=n.helpers)?void 0:o.prepareStat(a.items,i,s.currentBackgroundType,s.currentBackgroundId),c=[];this.props.layers.items.forEach((e=>{e.clickableZones&&e.clickableZones.forEach((t=>{c.push(this.getPreparedClickableZone(e,t))}))}));const d={original_width:t,original_height:r,clickable_stickers:c};this.props.data.save(e,(()=>{this.props.setSaveLoading(!1)}),{attachment:this.props.data.attachment,storyUploadUrlHash:this.props.data.storyUploadUrlHash,storySaveHash:this.props.data.storySaveHash,analytics:JSON.stringify(l),clickableStickers:JSON.stringify(d)})})).catch((e=>{this.props.setSaveLoading(!1),console.error(e)}))}),0)},this.renderImageFromState=()=>{var e;const{layers:t,drawings:r,data:o,settings:n}=this.props,{globalScale:a}=t,{artboardWidth:s,originalWidth:l,originalHeight:c}=o,d=l/s,u=(null==(e=n.segmentation)?void 0:e.delete)?o.maskCanvas:null,{croppedWidth:h,croppedHeight:p,croppedX:_,croppedY:g,containerWidth:m,containerHeight:f}=n;let v=null;return(0,i.isNumber)(h)&&(0,i.isNumber)(p)&&(0,i.isNumber)(_)&&(0,i.isNumber)(g)&&(0,i.isNumber)(m)&&(0,i.isNumber)(f)&&(v={croppedWidth:h*d,croppedHeight:p*d,croppedX:_*d,croppedY:g*d,containerWidth:m*d,containerHeight:f*d}),new Promise(((e,o)=>{y.rendererScene.draw(l,c,t.items,r,d,this.getStickerUrlById,a,u,v).then((({blob:t,width:r,height:o})=>{e({blob:t,width:r,height:o})})).catch((e=>{o(e)}))}))},this.getPreparedClickableZone=(e,t)=>{var r;const o=this.props.data.originalWidth/this.props.data.artboardWidth,n=e.rotate*(Math.PI/180),a=e.width*e.scale,i=e.height*e.scale,s=e.x-a/2,l=e.y-i/2,c=parseFloat(e.x)+(s-e.x)*Math.cos(n)-(l-e.y)*Math.sin(n),d=parseFloat(e.y)+(l-e.y)*Math.cos(n)+(s-e.x)*Math.sin(n),u=null==(r=t.clickable_area)?void 0:r.map((e=>{const t=e.x*a,r=e.y*i,s=t*Math.cos(n)-r*Math.sin(n),l=t*Math.sin(n)+r*Math.cos(n);return{x:(c+s)*o,y:(d+l)*o}})),h={type:t.action_type,clickable_area:u};return"link"===t.action_type?(h.link=t.action.link,t.action.tooltip_text_key&&(h.tooltip_text_key=t.action.tooltip_text_key)):"app"===t.action_type?(h.app_id=t.action.app_id,t.action.app_context&&(h.app_context=t.action.app_context)):"music"===t.action_type?(h.audio_owner_id=t.action.audioOwnerId,h.audio_id=t.action.audioId):"playlist"===t.action_type&&(h.playlist_owner_id=t.action.playlistOwnerId,h.playlist_id=t.action.playlistId),h},this.handleKeyDown=e=>{if("Escape"===e.key&&this.props.layers.currentIndex&&this.props.layers.items[this.props.layers.currentIndex].isEdit&&(e.preventDefault(),e.stopPropagation(),this.props.closeTextEditor()),(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.shiftKey?this.props.redo():this.props.undo()),null!==this.props.layers.currentIndex&&"TEXTAREA"!==e.target.nodeName)if(["Backspace","Delete"].includes(e.key))e.preventDefault(),this.props.layers.items[this.props.layers.currentIndex].canDelete&&this.props.deleteLayer();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){const t=this.getCurrentLayer();if(!t)return;const r={x:t.x,y:t.y},o=e.shiftKey?10:1;switch(e.key){case"ArrowUp":r.y-=o;break;case"ArrowDown":r.y+=o;break;case"ArrowLeft":r.x-=o;break;case"ArrowRight":r.x+=o}this.props.setLayerPosition(r.x,r.y)}},this.canvasMouseDown=e=>{const{globalScale:t}=this.props.layers,{data:r}=this.props,{isRedesignEnabled:o}=r,n=this.getCurrentLayer(),a=e.target,i=this.props.ui.currentMode;if("TEXTAREA"!==a.tagName){if(!a.closest(`[data-name="${f.editorCanvasSelector}"]`))return!1;if(a.closest(`[data-name="${F.switchModeSelector}"]`))return!1;if(!i||![m.TABS.PAINT,m.TABS.FILTERS].includes(i))if(a.closest(`[data-name="${H.layerSelector}"]`))this.layerDragStart(e);else{if(this.props.ui.currentMode===m.TABS.TEXT){if(n&&n.type===m.LAYER_TYPES.TEXT&&n.isEdit)return void this.props.closeTextEditor();if(o&&n)return void this.props.setCurrentLayer(null);if(!o)return;return this.props.addLayerText(!0,{isEdit:!0,baseScale:t}),void e.preventDefault()}(this.props.ui.currentMode===m.TABS.COLOR&&this.props.settings.blur.isEnabled||this.props.ui.currentMode===m.TABS.BLUR&&this.props.settings.blur.isEnabled)&&this.moveBlurStart(e),n&&this.props.setCurrentLayer(null)}}},this.moveBlurStart=e=>{window.addEventListener("mousemove",this.moveBlurProcess),window.addEventListener("mouseup",this.moveBlurFinish),this.moveBlurProcess(e)},this.moveBlurProcess=e=>{const{croppedX:t,croppedY:r}=this.props.settings,{globalScale:o}=this.props.layers,n=t||0,a=r||0,{x:i,y:s,width:l,height:c}=(0,b.getRelativeXY)(e,document.querySelector(`[data-name="${M.imageLayerSelector}"]`)),d=i/o+n,u=s/o+a,h=[Math.max(0,Math.min(d/l,1)),1-Math.max(0,Math.min(u/c,1))];this.props.setBlurPosition(h)},this.moveBlurFinish=()=>{window.removeEventListener("mousemove",this.moveBlurProcess),window.removeEventListener("mouseup",this.moveBlurFinish)},this.layerDragStart=e=>{const{globalScale:t}=this.props.layers;window.addEventListener("mousemove",this.layerDragProcess),window.addEventListener("mouseup",this.layerDragFinish);const r=e.target.closest("[data-index]");let o;o=r?Number((0,b.domData)(r,"index")):this.props.layers.currentIndex,this.props.layers.currentIndex!==o&&this.props.setCurrentLayer(o);const{x:n,y:a}=(0,b.getRelativeXY)(e,document.querySelector(`[data-name="${B.drawingLayerSelector}"]`));if(this.currentLayer=this.getCurrentLayer(),!this.currentLayer)return;const i=this.currentLayer;i.isBackground&&i.locked?this.props.setCurrentLayer(null):(this.clientX=e.clientX,this.clientY=e.clientY,this.shiftX=n/t-this.currentLayer.x,this.shiftY=a/t-this.currentLayer.y)},this.layerDragProcess=e=>{const{globalScale:t}=this.props.layers;if(!this.currentLayer)return;const r=document.querySelector(`[data-name="${B.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:n}=(0,b.getRelativeXY)(e,r);if(void 0===this.shiftX||void 0===this.shiftY)return;let a=o/t-this.shiftX,i=n/t-this.shiftY;this.props.setLayerPosition(a,i),this.props.ui.isShowDropBox||this.props.setShowDropBox(!0)},this.layerDragFinish=e=>{const{globalScale:t}=this.props.layers;window.removeEventListener("mousemove",this.layerDragProcess),window.removeEventListener("mouseup",this.layerDragFinish);if(!this.getCurrentLayer())return;if(!this.currentLayer)return;if(void 0===this.shiftX||void 0===this.shiftY)return;const r=document.querySelector(`[data-name="${B.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:n}=(0,b.getRelativeXY)(e,r);let a=o/t-this.shiftX,i=n/t-this.shiftY;this.props.setLayerPosition(Math.round(a),Math.round(i)),this.props.setShowDropBox(!1),delete this.currentLayer,delete this.shiftX,delete this.shiftY,delete this.clientX,delete this.clientY},this.getStickerUrlById=(e,t)=>{var r,o,n,a,i;const s=null!=(i=null==(r=this.props.data)?void 0:r.stickersMap)?i:{};var l;const c=null!=(l=null==(o=this.props.data)?void 0:o.customStickers)?l:[],d=null==(n=s)?void 0:n[e],u=null==(a=c)?void 0:a.find((t=>e===t.id)),h=[128,256,512].includes(t)?t:m.STICKER_LARGE;return d?(0,b.getStickerSize)(d.sizes,h,!0)||"":u&&(0,b.getStickerSize)(u.sizes,h,!0)||""},this.addSticker=(e,t)=>{const{globalScale:r,shiftX:o,shiftY:n}=this.props.layers,{containerWidth:a,containerHeight:i}=this.props.settings,{artboardWidth:s,artboardHeight:l}=this.props.data,c=(a||s)/2/r-o/r,d=(i||l)/2/r-n/r;e.persist(),this.props.addLayerSticker({id:t,x:c,y:d,width:m.LAYER_DEFAULT_SIZE,height:m.LAYER_DEFAULT_SIZE,rotate:0,canDelete:!0,scale:1,baseScale:r})},this.prepareStickers=e=>{const{artboardWidth:t,artboardHeight:r}=this.props.data;e.forEach((e=>{let{gravity:o="center",rotation:n=0,translation_x:a=0,translation_y:i=0,relation_width:s}=e.sticker.transform||{};if(a=Math.min(Math.max(a,-1),1),i=Math.min(Math.max(i,-1),1),s&&(s=Math.min(Math.max(s,.1),1)),"renderable"===e.sticker_type)this.prepareRenderableSticker(e.sticker,o,a,i,s).then((({url:t,x:r,y:o,stickerWidth:a,stickerHeight:i,clickableZones:s})=>{this.props.addLayerImage({url:t,x:r,y:o,width:Math.round(a),height:Math.round(i),rotate:-n,clickableZones:s,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));else if("native"===e.sticker_type)switch(e.sticker.action_type){case"sticker":{let l=s?t*s:m.LAYER_DEFAULT_SIZE,c=s?t*s:m.LAYER_DEFAULT_SIZE;const d=`${e.sticker.action.pack_id}_${e.sticker.action.sticker_id}`;if(this.props.data.stickersMap[d]){const{x:e,y:s}=(0,b.getPositionWithGravity)(o,t,r,l/2,c/2,a*t,i*r);this.props.addLayerSticker({id:d,x:e,y:s,width:Math.round(l),height:Math.round(c),rotate:-n,canDelete:!0,scale:1,baseScale:1})}break}case"text":{let l=.5;s&&(l=this.getFontSize(e.sticker.action.text,t*s,e.sticker.action.style));const{width:c,height:d}=this.getTextRect(e.sticker.action.text,l*m.FONT_SIZE_COEFFICIENT,e.sticker.action.style),{x:u,y:h}=(0,b.getPositionWithGravity)(o,t,r,c/2,d/2,a*t,i*r);this.props.addLayerText(!0,{isEdit:!0,text:e.sticker.action.text,style:e.sticker.action.style,color:e.sticker.action.selection_color,fontSize:l,initialFontSize:l,rotate:-n,scale:1,x:u,y:h}),this.props.closeTextEditor(),this.props.setCurrentLayer(null);break}case"comment":{const{postRawId:n,replyId:s}=e.sticker.action,l=new N.CommentSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{var d,u;const{x:h,y:p}=(0,b.getPositionWithGravity)(o,t,r,l.getWidth()/2,l.getHeight()/2,a*t,i*r),_=l.getWidth()/t,g=l.getWidth()/_,m=l.getHeight()/_;this.props.addLayerImage({url:URL.createObjectURL(c),x:h,y:p,width:Math.round(g),height:Math.round(m),rotate:0,clickableZones:[{action_type:"link",action:{link:`https://${null==(u=this.props.data)||null==(d=u.helpers)?void 0:d.getHostName()}/wall${n}?reply=${s}`,tooltip_text_key:"tooltip_open_post"},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}],canDelete:Boolean(e.sticker.can_delete),scale:.8,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"answer_question":{const l=new O.AnswerQuestionSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{const d=l.getHeight()/l.getWidth(),u=s?t*s:l.getWidth()/4,h=s?u*d:l.getHeight()/4,{x:p,y:_}=(0,b.getPositionWithGravity)(o,t,r,u/2,h/2,a*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(c),x:p,y:_,width:Math.round(u),height:Math.round(h),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"ask_question_avatar":{const s=new A.AskQuestionAvatar(e.sticker.action);s.render().then((()=>{s.toBlob().then((l=>{const c=s.props.size,d=s.props.size,{x:u,y:h}=(0,b.getPositionWithGravity)(o,t,r,c/2,d/2,a*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:u,y:h,width:Math.round(c),height:Math.round(d),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"ask_question_text":{const s=new L.AskQuestionText(e.sticker.action);s.render().then((()=>{s.toBlob().then((l=>{const c=s.getWidth()/4,d=s.getHeight()/4,{x:u,y:h}=(0,b.getPositionWithGravity)(o,t,r,c/2,d/2,a*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:u,y:h,width:Math.round(c),height:Math.round(d),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{console.error(e)}))})).catch((e=>{console.error(e)}));break}case"music":{const n=e.sticker.action,a=new k.MusicSticker(n);a.render().then((()=>{a.toBlob().then((i=>{const s=a.getWidth()+198,l=t*a.getWidth()/s,c=a.getWidth()/l,d=a.getHeight()/c,u=a.getClickableHeight()/c/d,{x:h,y:p}=(0,b.getPositionWithGravity)(o,t,r,a.getWidth()/2,a.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(i),x:h,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"music",action:{audioOwnerId:n.audioOwnerId,audioId:n.audioId},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:u},{x:0,y:u}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"playlist":{const n=e.sticker.action,a=new R.PlaylistSticker(n);a.render().then((()=>{a.toBlob().then((i=>{const s=a.getWidth()+198,l=t*a.getWidth()/s,c=a.getWidth()/l,d=a.getHeight()/c,u=a.getClickableHeight()/c/d,{x:h,y:p}=(0,b.getPositionWithGravity)(o,t,r,a.getWidth()/2,a.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(i),x:h,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"playlist",action:{playlistOwnerId:n.playlistOwnerId,playlistId:n.playlistId},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:u},{x:0,y:u}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}}}))},this.prepareRenderableSticker=(e,t,r,n,a)=>{const{artboardWidth:i,artboardHeight:s,originalWidth:l}=this.props.data,c=l/i;return new Promise(((l,d)=>{"string"!=typeof e.url&&"string"!=typeof e.blob&&d();const u=e.url||e.blob||"";(0,D.loadImage)(u).then((d=>{const h=d.height/d.width;let p=0,_=0;a?(p=i*a,_=p*h):(p=d.width/c,_=d.height/c,p>i&&(p=i,_=p*h));const{x:g,y:m}=(0,b.getPositionWithGravity)(t,i,s,p/2,_/2,r*i,n*s);let f;e.clickable_zones&&(f=e.clickable_zones.map((e=>{let t;return t=e.clickable_area?e.clickable_area.map((e=>({x:e.x/d.width,y:e.y/d.height}))):[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}],(0,o._)({},e,{clickable_area:t})}))),l({url:u,x:g,y:m,stickerWidth:p,stickerHeight:_,clickableZones:f})})).catch((()=>{d()}))}))},this.getTextRect=(e,t,r)=>{const o=document.createElement("span");o.innerHTML=(0,b.clean)(e),o.style.display="inline-block",o.style.fontSize=`${t}px`,o.style.lineHeight="1em",o.style.whiteSpace="pre";const n=(0,b.getComputedFontFamily)(r);n&&o.classList.add(n),document.body.appendChild(o);const a=o.getBoundingClientRect();return o.remove(),a},this.getFontSize=(e,t,r)=>{let o=2*t;const n=document.createElement("span");for(n.innerHTML=(0,b.clean)(e),n.style.display="inline-block",n.style.width=`${t}px`,n.style.fontSize=`${o}px`,n.style.lineHeight="1em",n.style.whiteSpace="pre",r&&n.classList.add(`PhotoEditorFontStyle--${r}`),document.body.appendChild(n);o&&n.scrollWidth>Math.round(t);)o--,n.style.fontSize=`${o}px`;return n.remove(),o/100},this.uploadPhoto=()=>{var e;null==(e=this.inputFile.current)||e.click()},this.setMode=e=>{const{ui:t}=this.props,{currentBackgroundType:r,currentPhotoUrl:o}=this.props.background;this.props.setCurrentLayer(null),e===m.BACKGROUND_MODES.PHOTO&&!o||r===m.BACKGROUND_MODES.PHOTO&&r===e?this.uploadPhoto():(this.props.setBackgroundType(e),e===m.BACKGROUND_MODES.BACKGROUND&&t.currentMode&&[m.TABS.COLOR,m.TABS.FILTERS].includes(t.currentMode)&&this.props.setMode(null))},this.handleChooseFile=e=>{var t;const r=null==(t=e.target.files)?void 0:t.item(0);if(!r)return void console.error("File not found");const o=URL.createObjectURL(r);(0,D.loadImage)(o).then((()=>{(0,b.getOrientation)(r).then((e=>{-1===e||-2===e||1===e?(this.props.setCurrentPhotoUrl(o),this.props.setBackgroundType(m.BACKGROUND_MODES.PHOTO,!1)):(0,b.resetOrientation)(o,e).then((e=>{this.props.setCurrentPhotoUrl(e),this.props.setBackgroundType(m.BACKGROUND_MODES.PHOTO,!1)})).catch((()=>{}))})).catch((()=>{}))})).catch((()=>{var e,t,r,o,n,a;null==(a=this.props.data)||null==(n=a.helpers)||n.showErrorBox({title:null==(t=this.props.data)||null==(e=t.langMap)?void 0:e.global_error},null==(o=this.props.data)||null==(r=o.langMap)?void 0:r.stories_create_image_incorrect)}))},this.inputFile=(0,a.createRef)()}}const q=Object.assign(c.ActionCreators,{setMode:d.setMode,setAutoCorrection:u.setAutoCorrection,addLayerSticker:h.addLayerSticker,addLayerText:h.addLayerText,addLayerImage:h.addLayerImage,setLayerPosition:h.setLayerPosition,deleteLayer:h.deleteLayer,setCurrentLayer:h.setCurrentLayer,setDataLoaded:d.setDataLoaded,setShowDropBox:d.setShowDropBox,setSaveLoading:d.setSaveLoading,closeTextEditor:h.closeTextEditor,setData:p.setData,setBlurPosition:u.setBlurPosition,setBackgroundType:_.setBackgroundType,setCurrentPhotoUrl:_.setCurrentPhotoUrl,setCurrentBackgroundId:_.setCurrentBackgroundId,setLayersScale:h.setLayersScale,setLoading:u.setLoading,setEnhance:u.setEnhance,toggleTextEditor:h.toggleTextEditor,setCrop:g.setCrop}),Q=(0,l.connect)((e=>{const{defaultScale:t,globalScale:r,currentIndex:o,items:n}=e.present.layers,a=Math.round(100*r)/100,s=Math.round(100*t)/100,l=s+3,c=a<=s?s:a<=l?a:l;(0,j.scaleActionStatus)({scale:c,defaultScale:s}),(0,j.currentTabActionStatus)(e.present.ui.currentMode),(0,j.undoRedoStatus)({canUndo:e.past.length>0,canRedo:e.future.length>0,depth:e.past.length});const d=(0,i.isNumber)(o)?n[o]:null;return d&&(0,i.isNumber)(o)?(0,j.currentLayerStatusAction)({type:d.type||"unknown",index:o,isEdit:d.isEdit}):(0,j.currentLayerStatusAction)(null),{ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data}}),q,null,{forwardRef:!0})($)},61556:(e,t,r)=>{r.d(t,{BlurPanel:()=>m});var o=r(785893),n=r(667294),a=r(50533),i=r(659397),s=r(279207),l=r(86894),c=r(709483),d=r(813412),u=r(119506),h=r(838512),p=r(509396),_=r(556947),g=r(867643);const m=({className:e})=>{var t,r,m,f,v,S;const E=(0,a.useDispatch)(),T=(0,u.useData)(),x=(0,u.useSettings)(),w=(0,n.useRef)(0),C=function(){const e=(0,a.useDispatch)();return(0,n.useCallback)((0,i.debounce)((t=>e((0,c.setBlurSize)(t))),100),[e])}(),y=x.blur.isEnabled,b=y?x.blur.size:0,I=x.blur.form,R=(0,n.useRef)(y);const A=[{label:null==(r=T)||null==(t=r.langMap)?void 0:t.photos_pe_correction_blur_type_round,value:d.BLUR_TYPES.ROUND},{label:null==(f=T)||null==(m=f.langMap)?void 0:m.photos_pe_correction_blur_type_rec,value:d.BLUR_TYPES.RECTANGULAR}],N=Math.round(w.current);return(0,o.jsx)(h.ScrollableContainer,{fadeEffect:!0,className:(0,i.classNames)(e),children:(0,o.jsxs)("div",{className:g.default.contents,children:[(0,o.jsx)("form",{onSubmit:()=>!1,children:A.map((e=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(_.CheckboxLike,{compact:!0,value:e.value,name:"photo_editor_blur_type",checked:I===e.value,label:e.label,onChange:()=>E((0,c.setBlurForm)(e.value))}),(0,o.jsx)(l.Spacing,{size:8})]},e.value)))}),(0,o.jsx)(p.PEFormItem,{label:null==(S=T)||null==(v=S.langMap)?void 0:v.photos_pe_intensity,after:N,children:(0,o.jsx)(s.Slider,{min:0,max:100,gravity:1,isShowHandle:!0,defaultValue:b,onChange:function(e){const t=e>=1;t!==R.current&&function(e){var t,r;R.current=e,null==(r=T)||null==(t=r.helpers)||t.sendStat(e?"enable_blur":"disable_blur"),E((0,c.setBlurEnable)(e)),e||E((0,c.setBlurSize)(0))}(t),w.current=e,C(e)}})})]})})}},459036:(e,t,r)=>{r.d(t,{CollagePanel:()=>s});var o=r(785893),n=r(659397),a=r(838512),i=r(810504);const s=({className:e})=>(0,o.jsx)(a.ScrollableContainer,{fadeEffect:!0,className:(0,n.classNames)(i.default.root,e),children:"Collages are not yet implemented"})},2293:(e,t,r)=>{r.d(t,{ColorCorrectionPanel:()=>y});var o=r(434788),n=r(820224),a=r(785893),i=r(667294),s=r(50533),l=r(709483),c=r(891687),d=r(86894),u=r(189625),h=r(77199),p=r(625812),_=r(279207),g=r(385235),m=r(832550),f=r(813412),v=r(554984),S=r(509396),E=r(838512),T=r(659397),x=r(842386);class w extends i.Component{render(){var e,t,r,i,s,l,c;const{settings:d,setColorCorrection:u,langMap:h,newDesign:p,className:g}=this.props,m=[{filter:"exposure",label:null==(e=h)?void 0:e.photos_pe_correction_exposure,min:-1,max:1},{filter:"contrast",label:null==(t=h)?void 0:t.photos_pe_correction_contrast,min:-1,max:1},{filter:"saturation",label:null==(r=h)?void 0:r.photos_pe_correction_saturation,min:-1,max:1},{filter:"warmth",label:null==(i=h)?void 0:i.photos_pe_correction_warmth,min:-1,max:1},{filter:"vignette",label:null==(s=h)?void 0:s.photos_pe_correction_vignette,min:-1,max:1},{filter:"sharpness",label:null==(l=h)?void 0:l.photos_pe_correction_sharpness,min:0,max:1},{filter:"grain",label:null==(c=h)?void 0:c.photos_pe_correction_grain,min:0,max:1}];return p?(0,a.jsx)(E.ScrollableContainer,{padded:!0,fadeEffect:!0,className:g,children:(0,a.jsx)("div",{children:m.map((e=>{var{label:t,filter:r}=e,i=(0,n._)(e,["label","filter"]);const s=d.colorCorrection[r];return(0,a.jsx)(S.PEFormItem,{label:t,after:(e=>{const t=Math.round(100*e);var r;return t>0&&(null!=(r=i.min)?r:0)<0?`+${t}`:t})(s),children:(0,a.jsx)(_.Slider,(0,o._)({isShowHandle:!0,isShowZero:!1,gravity:2},i,{value:s,onChange:e=>u(r,e)}))},r)}))})}):(0,a.jsxs)("div",{className:(0,T.classNames)(v.default.root,g),children:[(0,a.jsx)("div",{className:v.default.items,children:m.map((e=>{var{label:t,filter:r}=e,i=(0,n._)(e,["label","filter"]);return(0,a.jsxs)("div",{className:v.default.item,children:[(0,a.jsx)("span",{className:v.default.itemName,children:t}),(0,a.jsx)(_.Slider,(0,o._)({isShowHandle:!0,isShowZero:!0,gravity:2,formatHint:e=>Math.round(100*e)},i,{value:d.colorCorrection[r],onChange:e=>u(r,e)}))]},r)}))}),(0,a.jsx)("div",{className:v.default.link,children:this.renderAutoCorrectionPanel()}),(0,a.jsx)("div",{className:v.default.link,children:this.renderBlurPanel()}),this.canUpscaleImage()&&(0,a.jsx)("div",{className:v.default.link,children:this.renderEnhancePanel()})]})}canUpscaleImage(){const{enhanceCb:e,enhanceEnabled:t}=this.props;return!!t&&!!e}transformImageToCurrentOrientation(e){const t=(0,T.isNumber)(this.props.settings.rotation)?this.props.settings.rotation:0;return(0,x.rotateImageToCurrentAngle)({url:e,angle:t}).catch((e=>console.error(e)))}renderEnhancePanel(){var e;const{settings:t,langMap:r}=this.props;var o;return(null==(e=t.enhance)?void 0:e.active)?(0,a.jsx)("div",{className:v.default.box,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Вы увеличили разрешение"}),(0,a.jsx)("span",{className:v.default.dvd}),(0,a.jsx)(g.Link,{onClick:this.scaleImage,children:null==(o=r)?void 0:o.photos_pe_cancel})]})}):(0,a.jsx)(m.Button,{mode:"tertiary",size:"s",before:(0,a.jsx)(u.Icon20FullscreenOutline,{className:v.default.icon}),onClick:this.scaleImage,loading:t.loading.enhance,children:"Увеличение разрешения"})}renderAutoCorrectionPanel(){const{settings:e,setAutoCorrection:t,helpers:r,langMap:o}=this.props,n=e=>{var o,n;e?null==(o=r)||o.sendStat("enable_autocorrection"):null==(n=r)||n.sendStat("disable_autocorrection");t(e)};var i,s,l;return e.isAutoCorrection?(0,a.jsx)("div",{className:v.default.box,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:null==(i=o)?void 0:i.photos_pe_correction_auto_enabled}}),(0,a.jsx)("span",{className:v.default.dvd}),(0,a.jsx)(g.Link,{onClick:()=>n(!1),children:null==(s=o)?void 0:s.photos_pe_cancel})]})}):(0,a.jsx)(m.Button,{mode:"tertiary",size:"s",before:(0,a.jsx)(h.Icon20Stars,{className:v.default.icon}),onClick:()=>n(!0),children:null==(l=o)?void 0:l.photos_pe_correction_auto})}renderBlurPanel(){var e,t;const{settings:r,setBlurEnable:o,setBlurForm:n,setBlurSize:i,helpers:s,langMap:l}=this.props,{blur:c}=r,u=e=>{var t,r;e?null==(t=s)||t.sendStat("enable_blur"):null==(r=s)||r.sendStat("disable_blur");o(e)},h=[{label:null==(e=l)?void 0:e.photos_pe_correction_blur_type_round,value:f.BLUR_TYPES.ROUND},{label:null==(t=l)?void 0:t.photos_pe_correction_blur_type_rec,value:f.BLUR_TYPES.RECTANGULAR}];var S,E,T;return c.isEnabled?(0,a.jsxs)("div",{className:v.default.box,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:null==(S=l)?void 0:S.photos_pe_correction_blur_enabled}}),(0,a.jsx)("span",{className:v.default.dvd}),(0,a.jsx)(g.Link,{onClick:()=>u(!1),children:null==(E=l)?void 0:E.photos_pe_cancel})]}),(0,a.jsx)("div",{className:v.default.slider,children:(0,a.jsx)(_.Slider,{min:0,max:100,gravity:2,isShowHandle:!0,isShowZero:!0,value:r.blur.size,onChange:e=>i(e),formatHint:e=>Math.round(e)})}),(0,a.jsx)(d.CustomSelect,{className:v.default.select,value:c.form,options:h,onChange:e=>n(String(e.target.value))})]}):(0,a.jsx)(m.Button,{mode:"tertiary",size:"s",before:(0,a.jsx)(p.Icon20WaterDropOutline,{className:v.default.icon}),onClick:()=>u(!0),children:null==(T=l)?void 0:T.photos_pe_correction_blur})}constructor(){super(...arguments),this.scaleImage=()=>{var e;const{setEnhance:t,setLoading:r,setCrop:o,settings:n,originalWidth:a,originalHeight:i,enhanceCb:s,photoUrl:l}=this.props;if(!0===(null==(e=n.enhance)?void 0:e.active))this.transformImageToCurrentOrientation(l).then((e=>{if(e){const{url:r,width:n,height:a}=e;t({active:!1}),o({url:r,data:{originalWidth:n,originalHeight:a}})}}));else if((0,T.isFunction)(s)){var c,d,u;if((0,T.isString)(null==(c=n.enhance)?void 0:c.url)&&(null==(d=n.enhance)?void 0:d.url))return t({active:!0,url:null==(u=n.enhance)?void 0:u.url}),void o({data:{originalWidth:2*a,originalHeight:2*i}});r({enhance:!0}),s((e=>{var n;r({enhance:!1}),e&&this.transformImageToCurrentOrientation(e).then((e=>{if(e){const{url:r,width:n,height:a}=e;(0,T.isString)(r)&&(t({active:!0,url:r}),o({data:{originalWidth:n,originalHeight:a}}))}})),null==(n=this.props.helpers)||n.sendStat("upgrade")}))}}}}const C={setColorCorrection:l.setColorCorrection,setBlurEnable:l.setBlurEnable,setBlurForm:l.setBlurForm,setBlurSize:l.setBlurSize,setAutoCorrection:l.setAutoCorrection,setLoading:l.setLoading,setEnhance:l.setEnhance,setCrop:c.setCrop},y=(0,s.connect)((e=>({enhanceCb:e.present.data.enhanceCb,enhanceEnabled:e.present.data.enhanceEnabled,settings:e.present.settings,helpers:e.present.data.helpers,langMap:e.present.data.langMap,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,photoUrl:e.present.data.photoUrl})),C)(w)},847542:(e,t,r)=>{r.d(t,{DrawPanel:()=>_});var o=r(785893),n=r(667294),a=r(50533),i=r(709483),s=r(95756),l=r(842386),c=r(279207),d=r(813412),u=r(357841);class h extends n.Component{constructor(e){super(e),this.componentDidMount=()=>{this.updateDrawingPreview()},this.render=()=>{var e,t,r;const{settings:n,setColor:a,setBrushWidth:i,setBrushOpacity:l,avgColor:h,langMap:p}=this.props;return this.updateDrawingPreview(),(0,o.jsxs)("div",{className:u.default.root,children:[(0,o.jsx)("canvas",{ref:this.previewCanvas,width:d.DRAWING_PREVIEW_WIDTH*d.CANVAS_SCALE,height:d.DRAWING_PREVIEW_HEIGHT*d.CANVAS_SCALE,style:{width:d.DRAWING_PREVIEW_WIDTH,height:d.DRAWING_PREVIEW_HEIGHT}}),(0,o.jsxs)("div",{className:u.default.sliders,children:[(0,o.jsxs)("div",{className:u.default.slider,children:[(0,o.jsx)("div",{className:u.default.title,children:null==(e=p)?void 0:e.photos_pe_intensity}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:n.brushOpacity,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>l(e)})]}),(0,o.jsxs)("div",{className:u.default.slider,children:[(0,o.jsx)("div",{className:u.default.title,children:null==(t=p)?void 0:t.photos_pe_line_width}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:n.brushWidth,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>i(e)})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:u.default.title,children:null==(r=p)?void 0:r.photos_pe_color}),(0,o.jsx)(s.ColorPicker,{color:n.color,avgColor:h,setColor:a})]})]})},this.updateDrawingPreview=()=>{const{current:e}=this.previewCanvas,{settings:t}=this.props;if(!e)return;const r=e.getContext("2d");if(!r)return;const{width:o,height:n}=r.canvas;r.clearRect(0,0,o,n);const a=d.CANVAS_SCALE,i=new Path2D(`M${69*a} ${65*a}L${93*a} ${41*a}L${121*a} ${69*a}L${149*a} ${41*a}L${177*a} ${69*a}L${201*a} ${45*a}`),s="#FFFFFF"===t.color?"#F1F1F1":t.color;r.lineWidth=t.brushWidth*d.BRUSH_WIDTH_COEFFICIENT*a,r.strokeStyle=(0,l.hexToRgba)(s,t.brushOpacity),r.lineJoin=r.lineCap="round",r.stroke(i)},this.previewCanvas=(0,n.createRef)()}}const p={setColor:i.setColor,setBrushWidth:i.setBrushWidth,setBrushOpacity:i.setBrushOpacity},_=(0,a.connect)((e=>({settings:e.present.settings,drawings:e.present.drawings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),p)(h)},952052:(e,t,r)=>{r.d(t,{DrawingLayer:()=>m,drawingLayerSelector:()=>h});var o=r(785893),n=r(667294),a=r(50533),i=r(822188),s=r(234448),l=r(842386),c=r(659397),d=r(813412),u=r(686933);const h="photo-editor-drawing-layer",p=(e,t)=>{const r=e>t?e/t:t/e;return{canvasWidth:e>t?Math.round(1e3*r):1e3,canvasHeight:t>e?Math.round(1e3*r):1e3}};class _ extends n.PureComponent{render(){const{data:e,width:t,height:r,ui:n}=this.props,{originalWidth:a,originalHeight:i}=e,{canvasWidth:s,canvasHeight:l}=p(a,i),_=(0,c.classNames)(u.default.canvas,u.default.draw,n.currentMode!==d.TABS.PAINT&&u.default.disabled);return(0,o.jsx)("canvas",{ref:this.canvas,className:_,onMouseDown:this.drawStart,width:s,height:l,"data-name":h,style:{width:t,height:r}})}componentDidMount(){this.renderDrawings()}drawImage(){var e;const{data:t,width:r,height:o,globalScale:n,shiftY:a,shiftX:i}=this.props,{current:s}=this.canvas,{originalWidth:l,originalHeight:c}=t,d=null==(e=s)?void 0:e.getContext("2d");if(d&&s){const{canvasWidth:e,canvasHeight:t}=p(l,c);s.width=e,s.height=t,s.style.width=`${r}px`,s.style.height=`${o}px`,d.drawImage(s,i,a,e*n,t*n)}}componentDidUpdate(e){e.globalScale!==this.props.globalScale&&this.drawImage(),this.renderDrawings()}constructor(e){super(e),this.renderDrawings=()=>{const{drawings:e,globalScale:t,height:r,width:o,shiftX:n,shiftY:a,data:i}=this.props,{originalWidth:s,originalHeight:c}=i,{current:u}=this.canvas;if(!u)return;const h=u.getContext("2d");if(!h)return;const{canvasWidth:_,canvasHeight:g}=p(s*t,c*t),m=g/r,f=_/o,v=g/r*t;h.clearRect(0,0,u.width,u.height),h.lineCap="round",h.lineJoin="round",e.forEach((e=>{const t=v/e.scale,r=n*m,o=a*f;h.lineWidth=e.width*d.BRUSH_WIDTH_COEFFICIENT*v,h.strokeStyle=(0,l.hexToRgba)(e.color,e.opacity),h.beginPath(),h.moveTo(e.path[0][0]*t+r,e.path[0][1]*t+o),e.path.forEach((e=>{h.lineTo(e[0]*t+r+.01,e[1]*t+o+.01)})),h.stroke()}))},this.drawStart=e=>{var t;const{globalScale:r,shiftX:o,shiftY:n}=this.props;if(this.props.ui.currentMode!==d.TABS.PAINT)return;window.addEventListener("mousemove",this.drawProcess),window.addEventListener("mouseup",this.drawFinish);const{x:a,y:i}=(0,l.getRelativeXY)(e.nativeEvent,this.canvas.current);this.currentDrawing=[[a-o,i-n]];const{settings:s}=this.props;this.props.addDrawing({color:s.color,width:s.brushWidth,opacity:s.brushOpacity,path:this.currentDrawing,scale:r,shiftX:o,shiftY:n}),null==(t=this.props.data.helpers)||t.sendStat("add_graffiti"),this.renderDrawings()},this.drawProcess=e=>{const{x:t,y:r}=(0,l.getRelativeXY)(e,this.canvas.current),{shiftX:o,shiftY:n}=this.props;this.currentDrawing.push([t-o,r-n]),this.renderDrawings()},this.drawFinish=()=>{window.removeEventListener("mousemove",this.drawProcess),window.removeEventListener("mouseup",this.drawFinish),this.currentDrawing=[],this.renderDrawings()},this.canvas=(0,n.createRef)(),this.currentDrawing=[]}}const g={addDrawing:i.addDrawing,addLayerText:s.addLayerText},m=(0,a.connect)((e=>({ui:e.present.ui,settings:e.present.settings,drawings:e.present.drawings,data:e.present.data})),g)(_)},612764:(e,t,r)=>{r.d(t,{EditorCanvas:()=>N,editorCanvasSelector:()=>I});var o=r(785893),n=r(667294),a=r(50533),i=r(350409),s=r(234448),l=r(428661),c=r(72353),d=r(709483),u=r(952052),h=r(815660),p=r(723969),_=r(289584),g=r(700631),m=r(798211),f=r(86894),v=r(659397),S=r(62128),E=r(25184),T=r(322031),x=r(813412),w=r(731026),C=r(690723),y=r(388380),b=r(437129);const I="editor-canvas";class R extends n.Component{constructor(){super(...arguments),this.render=()=>this.renderCanvas(),this.getMaskPhotoEditorApi=(e,t)=>{var r,o,n,a,i;const{settings:s,data:l,setLoading:c}=this.props,{segmentationCb:d}=l,u=null==(r=s.segmentation)?void 0:r.mode,{segmentation:h}=this.props;if(!d)return;const p=[...(null==(o=h)?void 0:o.clicks)||[],{col:Math.round(e),row:Math.round(t),positive:"positive"===u}];c({segmentation:!0}),d(p,(null==(n=h)?void 0:n.mask)||"",(r=>{r?this.props.setSegmentationData({click:{col:Math.round(e),row:Math.round(t),positive:"positive"===u},mask:r}):this.props.setSegmentation({mode:"positive",enabled:!1}),c({segmentation:!1})})),"positive"===u?null==(a=this.props.data.helpers)||a.sendStat("select_object"):null==(i=this.props.data.helpers)||i.sendStat("delete_selection")},this.renderCanvas=()=>{var e,t,r,a,i;const{layers:s,background:l,data:c,ui:d,settings:R,langMap:A,globalScale:N}=this.props,{artboardWidth:L,artboardHeight:k,attachment:O,originalWidth:P,isRedesignEnabled:D}=c,{currentIndex:M,items:B,shiftX:F,shiftY:H}=this.props.layers,{croppedWidth:j,croppedHeight:U,containerHeight:W,containerWidth:G}=R,z=null!==M&&B[M],Y=!s.items[0].locked,V=z&&z.type===x.LAYER_TYPES.TEXT&&z.isEdit,X=this.props.ui.isDataLoaded&&this.props.data.context===x.CONTEXT_TYPES.STORY,Z=(0,v.isNumber)(W)?W:k,K=(0,v.isNumber)(G)?G:L,$=d.currentMode===x.TABS.COLOR&&R.blur.isEnabled||d.currentMode===x.TABS.BLUR&&R.blur.isEnabled,q=(0,v.classNames)(w.default.root,$&&w.default.blurCursor),Q=P/L,J=(0,o.jsx)("div",{className:w.default.postIconToolTip,children:null==(e=A)?void 0:e.photos_pe_attached_post});return(0,o.jsxs)("div",{style:{width:K,height:Z,marginTop:this.props.marginTop},"data-name":I,className:q,children:[this.props.ui.isDataLoaded&&d.currentMode===x.TABS.CROP&&(0,o.jsx)(b.NewCropControls,{width:K,height:Z,artboardWidth:L,artboardHeight:k}),d.currentMode===x.TABS.SEGMENTATION&&(0,o.jsx)(C.SegmentationPane,{globalScale:N,width:L,height:Z,shiftX:F,shiftY:H,croppedWidth:j,croppedHeight:U,aspectRatio:Q,mode:R.segmentation.enabled?R.segmentation.mode:void 0,loading:!!R.loading.segmentation,click:this.getMaskPhotoEditorApi}),(0,o.jsx)(p.Layers,{setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,currentMode:this.props.ui.currentMode,getStickerUrlById:this.props.getStickerUrlById,layers:s,globalScale:N,context:null==(t=this.props.data)?void 0:t.context,deleteLayerAction:this.props.deleteLayer,isRedesignEnabled:D}),V&&z?(0,o.jsx)(_.EditorText,{layer:z,onChange:this.onChangeText,closeTextEditor:this.props.closeTextEditor,sendStat:null==(r=this.props.data.helpers)?void 0:r.sendStat}):X&&(0,o.jsxs)(n.Fragment,{children:[!!O&&!d.isShowDropBox&&(0,o.jsx)(f.unstable_RichTooltip,{content:J,children:(0,o.jsx)("span",{className:w.default.postIcon,children:(0,o.jsx)(S.Icon16Repost,{})})}),!d.isShowDropBox&&!this.props.data.locked&&this.props.background.currentBackgroundType===x.BACKGROUND_MODES.PHOTO&&[x.TABS.STICKERS,x.TABS.TEXT,null].includes(this.props.ui.currentMode)&&(0,o.jsx)("button",{className:w.default.scaleButton,onClick:this.onClickScaleButton,children:Y?(0,o.jsx)(E.Icon24Fullscreen,{}):(0,o.jsx)(T.Icon24FullscreenExit,{})}),!d.isShowDropBox&&(0,o.jsx)(g.SwitchMode,{current:l.currentBackgroundType,setMode:this.props.setMode,sendStat:null==(i=this.props.data)||null==(a=i.helpers)?void 0:a.sendStat})]}),!D&&d.isShowDropBox&&z&&z.canDelete&&(0,o.jsx)(m.DropBox,{onDelete:this.props.deleteLayer}),this.props.ui.isDataLoaded&&(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(u.DrawingLayer,{width:L,height:k,globalScale:N,shiftX:F,shiftY:H}),(0,o.jsx)(y.SegmentationLayer,{globalScale:N,shiftX:F,shiftY:H,width:L,height:k})]}),this.props.ui.isDataLoaded&&(0,o.jsx)(h.ImageLayer,{width:L,height:k})]})},this.onClickScaleButton=()=>{const e=this.props.layers.items[0],t={},{artboardWidth:r,artboardHeight:o}=this.props.data,n=e.height/e.width;let a,i;n>1.77?(i=o,a=i/n):(a=r,i=r*n);const s=r/2,l=o/2;var c,d;e.locked?(null==(c=this.props.data.helpers)||c.sendStat("zoom"),Object.assign(t,{locked:!1,scale:.7})):(null==(d=this.props.data.helpers)||d.sendStat("unzoom"),Object.assign(t,{locked:!0,rotate:0,x:s,y:l,width:a,height:i,scale:1}));this.props.updateBackgroundLayer(t),this.props.setCurrentLayer(e.locked?0:null)},this.onChangeText=e=>{this.props.setLayerText(e)}}}const A={addLayerText:s.addLayerText,setCurrentBackgroundId:l.setCurrentBackgroundId,setLayerScale:s.setLayerScale,startLayerScale:s.startLayerScale,setLayerText:s.setLayerText,toggleTextEditor:s.toggleTextEditor,deleteLayer:s.deleteLayer,updateBackgroundLayer:s.updateBackgroundLayer,setCurrentLayer:s.setCurrentLayer,setBackgroundType:l.setBackgroundType,closeTextEditor:s.closeTextEditor,setSegmentationData:c.setSegmentationData,setSegmentation:d.setSegmentation,setLoading:d.setLoading},N=(0,a.connect)((e=>({ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data,marginTop:(0,i.getMarginTop)(e),langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale,segmentation:e.present.ml.segmentation})),A)(R)},981574:(e,t,r)=>{r.d(t,{FiltersItem:()=>f});var o=r(785893),n=r(667294),a=r(350409),i=r(50533),s=r(153137),l=r(330995),c=r(709483),d=r(842386),u=r(659397),h=r(519979),p=r(813412),_=r(218791);class g extends n.Component{componentDidMount(){this.update(this.props.currentBackgroundUrl)}render(){const{langMap:e}=this.props,t=this.props.currentFilterName===this.props.filter,r=(0,u.classNames)(_.default.root,t&&_.default.active),n=t?(0,o.jsx)("div",{className:_.default.checked,children:(0,o.jsx)(h.Icon16Done,{})}):null;return(0,o.jsx)("div",{className:r,onClick:this.handleClick,children:(0,o.jsxs)("div",{className:_.default.inner,style:{width:p.FILTER_PREVIEW_WIDTH},children:[(0,o.jsx)("canvas",{className:_.default.image,ref:this.canvas,width:p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,height:p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,style:{width:p.FILTER_PREVIEW_WIDTH,height:p.FILTER_PREVIEW_HEIGHT}}),(0,o.jsx)("span",{className:_.default.name,children:this.getFilterLang(this.props.filter,e)}),n]})})}getFilterLang(e,t){if(t)switch(e){case"regular":return t.photos_pe_filter_regular;case"nox":return t.photos_pe_filter_nox;case"vesper":return t.photos_pe_filter_vesper;case"latona":return t.photos_pe_filter_latona;case"liber":return t.photos_pe_filter_liber;case"luna":return t.photos_pe_filter_luna;case"minerva":return t.photos_pe_filter_minerva;case"mitra":return t.photos_pe_filter_mitra;case"pro":return t.photos_pe_filter_pro;case"terra":return t.photos_pe_filter_terra;case"veles":return t.photos_pe_filter_veles;case"vesta":return t.photos_pe_filter_vesta;case"zaria":return t.photos_pe_filter_zaria;case"sepia":return t.photos_pe_filter_sepia;case"genius":return t.photos_pe_filter_genius;case"horus":return t.photos_pe_filter_horus;case"fortuna":return t.photos_pe_filter_fortuna;default:return}}update(e){e&&l.imageCacheGlobal.get(e).then((e=>{this.renderImage(e)})).catch((e=>{console.error(e)}))}renderImage(e){this.renderer.render(p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,e,this.props.filter,{amount:.75,sourceSize:[e.width,e.height]}).then((t=>{if(!t)return;const r=this.canvas.current;if(!r)return;const o=r.getContext("2d");if(!o)return;const n=+(e.height/e.width).toFixed(2);let a,i;n>1.77?(a=r.height/n,i=r.height):(a=r.width,i=r.width*n);const s=r.width/2-a/2,l=r.height/2-i/2;(0,d.drawBlurFromImage)(r,t,this.props.avgColor),o.drawImage(t,s,l,a,i)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.shouldComponentUpdate=e=>{const{currentBackgroundUrl:t,currentFilterName:r}=this.props,o=t!==e.currentBackgroundUrl;return r!==e.currentFilterName||(o&&this.update(e.currentBackgroundUrl),!1)},this.handleClick=()=>{var e,t;(this.props.setFilter(this.props.filter),"regular"===this.props.filter)?null==(e=this.props.helpers)||e.sendStat("remove_filter"):null==(t=this.props.helpers)||t.sendStat("add_filter")},this.canvas=(0,n.createRef)(),this.renderer=new s.Renderer}}const m={setFilter:c.setFilter},f=(0,i.connect)((e=>({currentFilterName:e.present.settings.filter.name,currentBackgroundUrl:(0,a.getCurrentImageUrl)(e),helpers:e.present.data.helpers,langMap:e.present.data.langMap})),m)(g)},938442:(e,t,r)=>{r.d(t,{FilterPreview:()=>u});var o=r(11010),n=r(785893),a=r(667294),i=r(153137),s=r(330995),l=r(842386),c=r(813412),d=r(119506);function u({className:e,width:t,height:r,filterName:u,intensity:h=.75}){const p=(0,d.useBackgroundUrl)(),_=(0,d.useAvgColor)(),g=(0,a.useRef)(null),m=(0,a.useMemo)((()=>new i.Renderer),[]);return(0,a.useLayoutEffect)((()=>{var e;const t=g.current,r=null==(e=t)?void 0:e.getContext("2d");function n(){return(n=(0,o._)((function*(){if(!t||!r||!p)return;const e=yield s.imageCacheGlobal.get(p),o=yield m.render(t.width,t.height,e,u,{amount:h,sourceSize:[e.naturalWidth,e.naturalHeight]}),n=t.width/t.height,a=e.naturalWidth/e.naturalHeight;let i,c;a>n?(i=t.height*a,c=t.height):(i=t.width,c=t.width/a);const d=t.width/2-i/2,g=t.height/2-c/2;(0,l.drawBlurFromImage)(t,o,_),r.drawImage(o,d,g,i,c)}))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().catch((e=>console.error(e)))}),[u,h,m,p]),(0,n.jsx)("canvas",{className:e,ref:g,width:t*c.CANVAS_SCALE,height:r*c.CANVAS_SCALE,style:{width:t,height:r}})}},575213:(e,t,r)=>{r.d(t,{FiltersPanel:()=>p});var o=r(785893),n=r(667294),a=r(981574),i=r(709483),s=r(50533),l=r(279207),c=r(813412),d=r(374667);class u extends n.Component{render(){return(0,o.jsxs)("div",{className:d.default.root,children:[(0,o.jsx)("div",{className:d.default.header,children:this.renderHeader()}),(0,o.jsx)("div",{className:d.default.inner,children:c.PHOTO_FILTERS.map((e=>(0,o.jsx)(a.FiltersItem,{avgColor:this.props.avgColor,filter:e},e)))})]})}renderHeader(){var e;const{settings:t,langMap:r}=this.props;var n;return"regular"===t.filter.name?(0,o.jsx)("span",{children:null==(n=r)?void 0:n.photos_pe_filter_disabled}):(0,o.jsxs)("div",{className:d.default.slider,children:[(0,o.jsx)("span",{className:d.default.title,children:null==(e=r)?void 0:e.photos_pe_filter_enabled}),(0,o.jsx)(l.Slider,{min:0,max:1,value:t.filter.value,isShowHandle:!0,onChange:this.props.setFilterAmount,formatHint:e=>`${Math.round(100*e)}%`})]})}}const h={setFilterAmount:i.setFilterAmount},p=(0,s.connect)((e=>({settings:e.present.settings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),h)(u)},815660:(e,t,r)=>{r.d(t,{ImageLayer:()=>v,imageLayerSelector:()=>g});var o=r(785893),n=r(667294),a=r(50533),i=r(350409),s=r(234448),l=r(842386),c=r(330995),d=r(153137),u=r(813412),h=r(659397),p=r(753148);const _={},g="photo-editor-image-layer";class m extends n.PureComponent{componentDidMount(){this.update(!1)}componentDidUpdate(e){const{originalWidth:t,originalHeight:r,background:o}=this.props,n=t!==e.originalWidth||r!==e.originalHeight;this.needUpdateSize=n||JSON.stringify(o)!==JSON.stringify(e.background),this.update()}render(){const{originalWidth:e,originalHeight:t}=this.props;return(0,o.jsx)("canvas",{ref:this.canvas,className:p.default.root,width:e,height:t,"data-name":g,style:{width:this.props.width,height:this.props.height}})}update(e=!0){var t,r;const{currentBackgroundUrl:o,enhance:n}=this.props;let a=o;(null==(t=n)?void 0:t.active)&&(null==(r=n)?void 0:r.url)&&(a=n.url),a&&c.imageCacheGlobal.get(a).then((t=>{this.renderImage(t,e)})).catch((e=>{console.error(e)}))}renderImage(e,t){const{current:r}=this.canvas;if(!r)return;if(!r.getContext("2d"))return;const{background:o}=this.props;let{colorCorrection:n,filter:a,blur:i,isAutoCorrection:s}=this.props;o.currentBackgroundType===u.BACKGROUND_MODES.BACKGROUND&&(a={name:u.PHOTO_FILTERS[0],value:0},n={exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},i={isEnabled:!1,form:i.form,size:i.size,position:i.position},s=!1);const c={exposure:n.exposure,contrast:n.contrast,saturation:n.saturation,warmth:n.warmth,amount:a.value,vignette:n.vignette,sharpness:n.sharpness,grain:n.grain,sourceSize:[e.width,e.height]};this.renderer.render(e.width,e.height,e,a.name,c,i,s).then((o=>{if(!o)return;const n=e.height/e.width;let a,i;n>1.77?(a=this.props.height/n,i=this.props.height):(a=this.props.width,i=this.props.width*n);const s=Math.floor(this.props.width/2),c=Math.floor(this.props.height/2),d=(0,l.copyCanvas)(o);let u=_[e.src];u||(_[e.src]=(0,l.getAverageRGB)(d),u=_[e.src]),(0,l.drawBlurFromImage)(r,d,u);const h={canvas:d,width:a,height:i,avgColor:u};this.needUpdateSize&&Object.assign(h,{x:s,y:c,locked:!0,rotate:0,scale:1}),this.props.updateBackgroundLayer(h,t),this.firstRender&&(this.props.renderTime(performance.now()-this.props.renderStart),this.firstRender=!1)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.firstRender=!0,this.canvas=(0,n.createRef)(),this.renderer=new d.Renderer,this.needUpdateSize=!0}}const f={updateBackgroundLayer:s.updateBackgroundLayer},v=(0,a.connect)((e=>{var t;return{currentBackgroundUrl:(0,i.getCurrentImageUrl)(e),originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,background:e.present.background,isAutoCorrection:e.present.settings.isAutoCorrection,colorCorrection:e.present.settings.colorCorrection,filter:e.present.settings.filter,blur:e.present.settings.blur,ml:e.present.ml,enhance:e.present.settings.enhance,renderTime:(null==(t=e.present.data.helpers)?void 0:t.renderTime)||h.noop,renderStart:e.present.data.renderStart}}),f)(m)},172221:(e,t,r)=>{r.d(t,{MainMenu:()=>N});var o=r(785893),n=r(667294),a=r(331533),i=r(770823),s=r(189625),l=r(129041),c=r(27687),d=r(839618),u=r(574543),h=r(498865),p=r(979075),_=r(363021),g=r(307112),m=r(39470),f=r(813412),v=r(119506),S=r(993661),E=r(990282),T=r(580171),x=r(146898),w=r(693912),C=r(855829),y=r(61556),b=r(2293),I=r(459036),R=r(452086);const A=({className:e,enableCrop:t,stickersTab:r,allowAutoColorCorrection:n,allowUpscaling:A,onAutoColorCorrectionToggle:N,onUpscaleToggle:L,onMenuItemClicked:k})=>{const O=(0,v.useCurrentMode)(),P=(0,v.useLangMap)()||{},D=(0,v.useNewFeaturesCheck)(),M=(0,v.useSnapshot)((e=>Boolean(e.settings.isAutoCorrection))),B=(0,v.useSnapshot)((e=>{var t;return!0===(null==(t=e.settings.enhance)?void 0:t.active)})),F=(0,v.useSnapshot)((e=>e.settings.loading.enhance));var H;const j=e=>String(null!=(H=P[e])?H:e);var U;const W=[{type:"action_cancellable",key:f.TABS.AUTO_COLORS,icon:(0,o.jsx)(i.Icon24MagicWandOutline,{width:20,height:20}),label:j("photos_pe_correction_auto"),labelActive:(G="photos_pe_correction_auto_enabled_short",(0,o.jsx)(a.InnerHTML,{children:null!=(U=j(G))?U:""})),disabled:!n,active:M,onChange:N},{type:"action_cancellable",key:f.TABS.IMAGE_UPSCALE,icon:(0,o.jsx)(s.Icon20FullscreenOutline,{}),label:"Улучшить качество",labelActive:"Качественно",active:B,disabled:!A,loading:F,onChange:L},{type:"submenu",key:"smart_removal",icon:(0,o.jsx)(l.Icon20BrushOutline,{}),label:j("photos_pe_tool_object_removal"),disabled:!0,panel:(0,o.jsx)("span",{children:"Not implemented"})},{type:"submenu",key:f.TABS.CROP,icon:(0,o.jsx)(c.Icon20CropOutline,{}),label:j("photos_pe_tool_crop"),disabled:!t,panel:(0,o.jsx)(R.NewCropPanel,{})},{type:"submenu",key:f.TABS.FILTERS,icon:(0,o.jsx)(d.Icon20ImageFilterOutline,{}),label:j("photos_pe_tool_filters"),panel:(0,o.jsx)(T.NewFiltersPanel,{})},{type:"submenu",key:f.TABS.TEXT,icon:(0,o.jsx)(u.Icon20TextOutline,{}),label:j("photos_pe_tool_text"),panel:(0,o.jsx)(x.NewTextPanel,{})},{type:"submenu",key:f.TABS.PAINT,icon:(0,o.jsx)(l.Icon20BrushOutline,{}),label:j("photos_pe_tool_brush"),panel:(0,o.jsx)(w.NewDrawPanel,{})},{type:"submenu",key:f.TABS.STICKERS,icon:(0,o.jsx)(h.Icon20StickerSmileOutline,{}),label:j("photos_pe_tool_stickers"),disabled:null==r,panel:r||(0,o.jsx)("br",{})},{type:"submenu",key:f.TABS.SEGMENTATION,icon:(0,o.jsx)(p.Icon20AddCircleOutline,{}),label:j("photos_pe_tool_segmentation"),disabled:!D,panel:(0,o.jsx)(C.SegmentationPanelComponent,{})},{type:"submenu",key:f.TABS.BLUR,icon:(0,o.jsx)(_.Icon24BlurOutline,{width:20,height:20}),label:j("photos_pe_tool_blur"),panel:(0,o.jsx)(y.BlurPanel,{})},{type:"submenu",key:f.TABS.COLOR,icon:(0,o.jsx)(g.Icon20FilterOutline,{}),label:j("photos_pe_tool_color_correction"),panel:(0,o.jsx)(b.ColorCorrectionPanel,{newDesign:!0})},{type:"submenu",key:f.TABS.COLLAGE,icon:(0,o.jsx)(m.Icon20Grid4UnevenVerticalOutline,{}),label:j("photos_pe_tool_collage"),disabled:!0,panel:(0,o.jsx)(I.CollagePanel,{})}];var G;return(0,o.jsx)(E.EditorMainMenu,{className:e,menuItems:W,onChange:e=>{var t;null==(t=k)||t(e),(0,S.currentTabAction)(e)},activePanel:O})},N=(0,n.memo)(A)},575865:(e,t,r)=>{r.d(t,{Navigator:()=>p});var o=r(785893),n=r(667294),a=r(330995),i=r(659397),s=r(234448),l=r(50533),c=r(119506),d=r(715469);function u(e,t,r){return Math.max(t,Math.min(e,r))}const h={s:137.68,m:171.92,l:224.76},p=({className:e,size:t="m"})=>{const r=(0,n.useRef)(null),p=(0,n.useRef)(null),_=(0,n.useRef)(null),g=(0,n.useRef)({top:0,left:0}),m=(0,n.useRef)(!1),f=(0,l.useDispatch)(),v=(0,c.useBackgroundUrl)(),S=(0,c.useCropSettings)(),{artboardWidth:E,artboardHeight:T}=(0,c.useArtboardSizes)(),{canvasWidth:x,canvasHeight:w,realScale:C,visibleRectWidth:y,visibleRectHeight:b,visibleRectX:I,visibleRectY:R,scaledBaseLayerShiftX:A,scaledBaseLayerShiftY:N,scaledMaxLayerShiftX:L,scaledMaxLayerShiftY:k}=(0,c.useViewportSizes)(),O=L-A,P=k-N,D=O<=0?0:I*C/O,M=P<=0?0:R*C/P,B=h[t],[F,H]=function(e,t,r=156){const o=r/Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return[Math.round(e*o),Math.round(t*o)]}(x,w,B),j=F/x,U=E*j,W=T*j,G=S.croppedX*j,z=S.croppedY*j,Y=Math.round(y*j),V=Math.round(b*j);let X=Math.round((F-Y)*D),Z=Math.round((H-V)*M);X=Math.min(X,F-Y),Z=Math.min(Z,H-V);const K=(e,t)=>{const r=-1*(A+O*e),o=-1*(N+P*t);return f((0,s.setLayersShift)(r,o,!0))},$=e=>{const t=Y/2,r=F-Y/2,o=V/2,n=H-V/2,a=g.current,i=u(e.clientX-a.left,t,r),s=u(e.clientY-a.top,o,n);return[(i-t)/(F-Y),(s-o)/(H-V)]};function q(){if(!r.current)return;const{top:e,left:t}=r.current.getBoundingClientRect();g.current.top=e,g.current.left=t}const Q=e=>{const[t,r]=$(e);m.current=!0,K(t,r)},J=()=>{m.current=!1,window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",J),window.removeEventListener("blur",J)};(0,n.useEffect)((()=>J),[]);function ee(){const e=_.current;e&&(e.style.width=`${U}px`,e.style.height=`${W}px`,e.style.transform=`translate(-${G}px, -${z}px)`)}function te(e=!1){const t={width:Y,height:V,transform:`translate(${X}px, ${Z}px)`,"--shadow-spread":`0 0 0 ${Math.ceil(Math.max(F,H))}px`};return(0,o.jsx)("div",{className:(0,i.classNames)(d.default.rectangle,e&&d.default.shadowRect,m.current&&d.default.rectangleNoTransitions),style:t})}return(0,n.useLayoutEffect)((()=>{v&&a.imageCacheGlobal.get(v).then((e=>{if(!p.current)return;const t=e.cloneNode();t.alt="",t.className=d.default.image,t.draggable=!1,_.current=t,ee(),p.current.appendChild(t)}))}),[v]),(0,n.useLayoutEffect)((()=>{ee()}),Object.values(S)),(0,n.useLayoutEffect)((()=>{q()}),[F,H]),(0,o.jsxs)("div",{className:(0,i.classNames)(d.default.root,e),style:{width:F,height:H},onMouseDown:e=>{if(0!==e.button)return;e.preventDefault(),q();const[t,r]=$(e);K(t,r),window.addEventListener("mousemove",Q),window.addEventListener("mouseup",J),window.addEventListener("blur",J)},ref:r,children:[(0,o.jsx)("div",{className:d.default.imageContainer,ref:p}),(0,o.jsx)("div",{className:d.default.rectContainer,children:te(!0)}),te(!1)]})}},437129:(e,t,r)=>{r.d(t,{NewCropControls:()=>S});var o=r(434788),n=r(785893),a=r(667294),i=r(832550),s=r(709483),l=r(891687),c=r(234448),d=r(50533),u=r(350409),h=r(842386),p=r(659397),_=r(813412),g=r(967681);const m=(e,t,r,o,n)=>{const a=o||r,i=n||t;[_.CROP_ASPECT_ORIGINAL,_.CROP_ASPECT_FREE].includes(e)&&(e=i/a);let s=i,l=s/e;return l>a&&(l=a,s=l*e),{x:i/2-s/2,y:a/2-l/2,width:s,height:l}};class f extends a.Component{shouldComponentUpdate(e){return e.cropAspect===this.props.cropAspect&&e.width===this.props.width&&e.height===this.props.height||this.setState(m(e.cropAspect,e.width,e.height)),!0}render(){var e,t;const{artboardWidth:r,artboardHeight:o,langMap:a,settings:s}=this.props,{containerHeight:l,containerWidth:c}=s,{x:d,y:u,width:h,height:m,isButtonDisable:f}=this.state,v=l||o,S=h<210,E=S?100:60,T=(0,p.classNames)(g.default.buttons,u+m+E>=v&&g.default.buttonsTop,S&&g.default.buttonsSmall),x=c||r,w=l||o,C=Math.round(100*h)/100!=Math.round(100*x)/100||Math.round(100*m)/100!=Math.round(100*w)/100;return(0,n.jsx)("div",{className:g.default.root,ref:this.containerEl,children:(0,n.jsxs)("div",{className:g.default.inner,ref:this.areaEl,style:{top:u,left:d,width:h,height:m},children:[C&&(0,n.jsxs)("div",{className:T,children:[(0,n.jsx)(i.Button,{size:"s",mode:"secondary",appearance:"overlay",onClick:()=>{var e;this.reset(x,w),null==(e=this.props.data.helpers)||e.sendStat("cancel_crop")},children:null==(e=a)?void 0:e.photos_pe_crop_cancel}),(0,n.jsx)("div",{className:g.default.separator}),(0,n.jsx)(i.Button,{size:"s",onClick:this.cropImage,appearance:"overlay",disabled:f,children:null==(t=a)?void 0:t.photos_pe_crop_apply})]}),(0,n.jsxs)("div",{className:g.default.grid,onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.CENTER),children:[(0,n.jsx)("div",{className:(0,p.classNames)(g.default.line,g.default.lineV),style:{left:"33.3333%"}}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.line,g.default.lineV),style:{left:"66.6666%"}}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.line,g.default.lineH),style:{top:"33.3333%"}}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.line,g.default.lineH),style:{top:"66.6666%"}}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handleCorner,g.default.handleCornerNw),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.NW)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handleCorner,g.default.handleCornerNe),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.NE)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handleCorner,g.default.handleCornerSw),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.SW)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handleCorner,g.default.handleCornerSe),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.SE)}),this.props.cropAspect===_.CROP_ASPECT_FREE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handle,g.default.handleN),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.N)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handle,g.default.handleS),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.S)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handle,g.default.handleW),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.W)}),(0,n.jsx)("div",{className:(0,p.classNames)(g.default.handle,g.default.handleE),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.E)})]})]})]})})}constructor(e){super(e),this.controlMouseDown=(e,t)=>{e.stopPropagation();const{current:r}=this.areaEl;if(!r)return;window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp);const{x:o,y:n}=(0,h.getRelativeXY)(e.nativeEvent,r);this.shiftX=o,this.shiftY=n,this.initCrop=this.state,this.side=t},this.controlMouseMove=e=>{const{current:t}=this.containerEl;if(!t||void 0===this.shiftX||void 0===this.shiftY||void 0===this.initCrop||void 0===this.side)return;const r=this.state,{artboardWidth:o,artboardHeight:n,cropAspect:a}=this.props,i=a===_.CROP_ASPECT_ORIGINAL?o/n:a,{x:s,y:l,width:c,height:d}=(0,h.getRelativeXY)(e,t);let u=r.x,p=r.y,g=r.width,m=r.height,f=_.CROP_MIN_SIZE,v=_.CROP_MIN_SIZE;if(i&&(i>1?f=_.CROP_MIN_SIZE*i:i<1&&(v=_.CROP_MIN_SIZE/i)),this.side===_.CROP_SIDES.CENTER)u=Math.min(Math.max(0,s-this.shiftX),c-g),p=Math.min(Math.max(0,l-this.shiftY),d-m);else{const e=Math.max(0,s-this.shiftX),t=Math.max(0,l-this.shiftY);switch(this.side){case _.CROP_SIDES.S:m=l-p-(this.shiftY-this.initCrop.height);break;case _.CROP_SIDES.N:p=t,m-=p-r.y;break;case _.CROP_SIDES.W:u=e,g-=u-r.x;break;case _.CROP_SIDES.E:g=s-u-(this.shiftX-this.initCrop.width);break;case _.CROP_SIDES.NW:u=e,p=t,g-=u-r.x,m-=p-r.y;break;case _.CROP_SIDES.NE:p=t,g=s-u-(this.shiftX-this.initCrop.width),m-=p-r.y;break;case _.CROP_SIDES.SW:u=e,g-=u-r.x,m=l-p-(this.shiftY-this.initCrop.height);break;case _.CROP_SIDES.SE:g=s-u-(this.shiftX-this.initCrop.width),m=l-p-(this.shiftY-this.initCrop.height)}if(i){let e=Math.min(g,c-u)/i;if([_.CROP_SIDES.NW,_.CROP_SIDES.NE].includes(this.side)&&(p=Math.max(0,p+m-e)),d-(p+e)<0)return;m=e}g=Math.min(Math.max(f,g),c-u),m=Math.min(Math.max(v,m),d-p),g-f<=0&&(u=r.x,g=r.width),m-v<=0&&(p=r.y,m=r.height)}this.setState({x:u,y:p,width:g,height:m})},this.controlMouseUp=()=>{window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),delete this.shiftX,delete this.shiftY,delete this.initCrop,delete this.side},this.cropImage=()=>{const{width:e,height:t,x:r,y:o}=this.state,{layers:n,artboardWidth:a,artboardHeight:i,setCropSettings:s,setLayersScale:l,settings:c,width:d,height:u,originalWidth:h}=this.props,{croppedY:_,croppedX:g,croppedWidth:m,croppedHeight:f}=c,{globalScale:v}=n;this.setState({isButtonDisable:!0});if(!document.createElement("canvas").getContext("2d"))return;const S=(0,p.isNumber)(m)?m-(d-e)/v:e,E=(0,p.isNumber)(f)?f-(u-t)/v:t,T=a/i,x=S/E;let w,C,y;if(T>x){if(y=a,C=a/x,w=a/S,C>i){const e=C-i;C=i,y=a-e*x,w=i/E}}else if(T<x){if(C=i,y=i*x,w=i/E,y>a){const e=y-a;y=a,C=i-e/x,w=a/S}}else C=i,y=a,w=i/E;const b=h/a;if(w>b){C=i-(i/b-E)*b,y=a-(a/b-S)*b,w=b}s({croppedWidth:S,croppedHeight:E,croppedX:((0,p.isNumber)(r)&&r||0)/v+((0,p.isNumber)(g)&&g||0),croppedY:((0,p.isNumber)(o)&&o||0)/v+((0,p.isNumber)(_)&&_||0),containerWidth:y,containerHeight:C}),l(w,!0),this.reset(y,C)},this.reset=(e,t)=>{this.props.setAspect(_.CROP_ASPECT_FREE),this.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1})},this.containerEl=(0,a.createRef)(),this.areaEl=(0,a.createRef)();const{cropAspect:t,artboardWidth:r,artboardHeight:n,prevCropWidth:i,prevCropHeight:s,settings:l}=e,{containerWidth:c,containerHeight:d}=l;this.state=(0,o._)({isButtonDisable:!1},m(t,i||r,s||n,d,c))}}const v={setAspect:s.setAspect,setCropSettings:l.setCropSettings,setLayersScale:c.setLayersScale,setLayersShift:c.setLayersShift},S=(0,d.connect)((e=>({currentBackgroundUrl:(0,u.getCurrentImageUrl)(e),cropAspect:e.present.settings.cropAspect,data:e.present.data,prevCropWidth:e.present.data.croppedWidth,prevCropHeight:e.present.data.croppedHeight,originalWidth:e.present.data.originalWidth,layers:e.present.layers,drawings:e.present.drawings,langMap:e.present.data.langMap,settings:e.present.settings})),v)(f)},452086:(e,t,r)=>{r.d(t,{NewCropPanel:()=>b});var o=r(785893),n=r(667294),a=r(832550),i=r(54929),s=r(50533),l=r(350409),c=r(891687),d=r(709483),u=r(234448),h=r(659397),p=r(330995),_=r(553750),g=r(866428),m=r(689291),f=r(228729),v=r(813412),S=r(151471),E=r(556947),T=r(838512),x=r(86894),w=r(2569);class C extends n.Component{render(){var e,t,r,s,l,c,d,u,p;const C=this.props.langMap,y=(0,o.jsxs)("div",{className:w.default.root,children:[(0,o.jsx)("span",{className:w.default.title,children:null==(e=C)?void 0:e.photos_pe_crop_aspect_title}),(0,o.jsx)("ul",{className:w.default.tabs,children:v.CROP_ASPECTS.map((e=>{const t=(0,h.classNames)(w.default.tabsButton,this.props.cropAspect===e.value&&w.default.tabsButtonActive);return(0,o.jsx)("li",{className:w.default.tabsItem,children:(0,o.jsx)("button",{className:t,onClick:()=>{var t;this.props.setAspect(e.value),null==(t=this.props.helpers)||t.sendStat("change_crop_mode",e.value)},children:C&&C[e.title]})},e.title)}))}),(0,o.jsxs)("ul",{className:w.default.settings,children:[(0,o.jsx)("li",{className:w.default.settingsItem,children:(0,o.jsx)(a.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(_.Icon20RotateRight,{}),onClick:()=>this.rotate(!1),children:null==(t=C)?void 0:t.photos_pe_rotate_right})}),(0,o.jsx)("li",{className:w.default.settingsItem,children:(0,o.jsx)(a.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(g.Icon20RotateLeft,{}),onClick:()=>this.rotate(!0),children:null==(r=C)?void 0:r.photos_pe_rotate_left})}),(0,o.jsx)("li",{className:w.default.settingsItem,children:(0,o.jsx)(a.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(m.Icon20FlipHorizontal,{}),onClick:()=>this.flip(!0,!1),children:null==(s=C)?void 0:s.photos_pe_flip_horizontal})}),(0,o.jsx)("li",{className:w.default.settingsItem,children:(0,o.jsx)(a.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(f.Icon20FlipVertical,{}),onClick:()=>this.flip(!1,!0),children:null==(l=C)?void 0:l.photos_pe_flip_vertical})})]})]}),b=(0,o.jsxs)(T.ScrollableContainer,{fadeEffect:!0,padded:!0,children:[(0,o.jsx)("form",{onSubmit:()=>!1,children:v.CROP_ASPECTS.map((e=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(E.CheckboxLike,{compact:!0,value:e.value,name:"photo_editor_aspect_ratio",label:C&&C[e.title],icon:(0,S.getAspectRatioIcon)(e.value,20),onChange:()=>{var t,r;this.props.setAspect(e.value),null==(r=this.props.data)||null==(t=r.helpers)||t.sendStat("change_crop_mode",e.value)},checked:this.props.cropAspect===e.value}),(0,o.jsx)(x.Spacing,{size:8})]},e.value)))}),(0,o.jsx)(i.SimpleCell,{maxHeight:v.COMPACT_CELL_HEIGHT,onClick:()=>this.rotate(!1),before:(0,o.jsx)(_.Icon20RotateRight,{}),children:null==(c=C)?void 0:c.photos_pe_rotate_right}),(0,o.jsx)(x.Spacing,{size:8}),(0,o.jsx)(i.SimpleCell,{maxHeight:v.COMPACT_CELL_HEIGHT,onClick:()=>this.rotate(!0),before:(0,o.jsx)(g.Icon20RotateLeft,{}),children:null==(d=C)?void 0:d.photos_pe_rotate_left}),(0,o.jsx)(x.Spacing,{size:8}),(0,o.jsx)(i.SimpleCell,{maxHeight:v.COMPACT_CELL_HEIGHT,onClick:()=>this.flip(!0,!1),before:(0,o.jsx)(m.Icon20FlipHorizontal,{}),children:null==(u=C)?void 0:u.photos_pe_flip_horizontal}),(0,o.jsx)(x.Spacing,{size:8}),(0,o.jsx)(i.SimpleCell,{maxHeight:v.COMPACT_CELL_HEIGHT,onClick:()=>this.flip(!1,!0),before:(0,o.jsx)(f.Icon20FlipVertical,{}),children:null==(p=C)?void 0:p.photos_pe_flip_vertical})]});return this.props.data.isRedesignEnabled?b:y}constructor(){super(...arguments),this.flip=(e,t)=>{var r;const o=document.createElement("canvas"),n=null==(r=o)?void 0:r.getContext("2d"),{currentBackgroundUrl:a}=this.props;n&&p.imageCacheGlobal.get(a).then((r=>{var a;if(o.width=r.width,o.height=r.height,e)n.translate(o.width,0),n.scale(-1,1),null==(a=this.props.helpers)||a.sendStat("flipX");else if(t){var i;n.translate(0,o.height),n.scale(1,-1),null==(i=this.props.helpers)||i.sendStat("flipY")}n.drawImage(r,0,0),o.toBlob((r=>{if(!r)return;const o={url:URL.createObjectURL(r)};e&&(o.flipX=!this.props.flipX),t&&(o.flipY=!this.props.flipY),this.props.setCrop(o)}),"image/jpeg",1)})).catch((e=>{console.error(e)}))},this.rotate=e=>{var t;const r=document.createElement("canvas"),o=null==(t=r)?void 0:t.getContext("2d"),{currentBackgroundUrl:n,originalWidth:a,originalHeight:i,setCropSettings:s,setLayersScale:l,setLayersShift:c,enhance:d}=this.props;o&&(s(null),l(1,!0),c(0,0),p.imageCacheGlobal.get(n).then((t=>{r.width=t.height,r.height=t.width;const n=e?-90:90;o.translate(r.width/2,r.height/2),o.rotate(n*Math.PI/180),o.drawImage(t,-t.width/2,-t.height/2),r.toBlob((e=>{if(!e)return;const t=r.height/r.width,o=((0,h.isNumber)(this.props.rotate)?this.props.rotate:0)+n;var s,l;this.props.rotate>o?null==(s=this.props.helpers)||s.sendStat("turn_left"):null==(l=this.props.helpers)||l.sendStat("turn_right");const c=this.props.data.imageContainerWidth-(this.props.data.marginLeft||0),u=this.props.data.imageContainerHeight?this.props.data.imageContainerHeight-(this.props.data.marginTop||0):this.props.data.artboardHeight;let p,_;if(t>=.67?(p=u/t,_=u):(p=c,_=c*t),p>c){_-=(p-c)*t,p=c}if(_>u){p-=(_-u)*t,_=u}if(p>i){const e=p-i;p=i,_-=e*t}if(_>a){const e=_-a;_=a,p-=e*t}const g=URL.createObjectURL(e),m={data:{artboardWidth:p,artboardHeight:_,originalWidth:i,originalHeight:a},rotate:o>270?0:o};d.active?m.enhanceUrl=g:m.url=g,this.props.setCrop(m)}),"image/jpeg",1)})).catch((e=>{console.error(e)})))}}}const y={setCrop:c.setCrop,setAspect:d.setAspect,setCropSettings:c.setCropSettings,updateBackgroundLayer:u.updateBackgroundLayer,setLayersScale:u.setLayersScale,setLayersShift:u.setLayersShift},b=(0,s.connect)((e=>({enhance:e.present.settings.enhance,flipX:e.present.settings.flipX,flipY:e.present.settings.flipY,rotate:e.present.settings.rotation,cropAspect:e.present.settings.cropAspect,currentBackgroundUrl:(0,l.getCurrentImageUrl)(e),addons:e.present.data.addons,artboardWidth:e.present.data.artboardWidth,artboardHeight:e.present.data.artboardHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,helpers:e.present.data.helpers,langMap:e.present.data.langMap,data:e.present.data,layers:e.present.layers})),y)(C)},151471:(e,t,r)=>{r.d(t,{getAspectRatioIcon:()=>p});var o=r(434788),n=r(785893),a=r(189625),i=r(661620),s=r(621474),l=r(783019),c=r(571238),d=r(243753),u=r(902077),h=r(813412);function p(e,t){const r=t?{width:t,height:t}:null;switch(e){case h.CROP_ASPECT_FREE:return(0,n.jsx)(a.Icon20FullscreenOutline,(0,o._)({},r));case h.CROP_ASPECT_ORIGINAL:return(0,n.jsx)(i.Icon20FolderOutline,(0,o._)({},r));default:{const t={tallest:.6810700359928015,tall:.8998200359928015,wide:1.1252813203300827,widest:1.5141702092189715};return e>t.wide?e>=t.widest?(0,n.jsx)(s.Icon24HorizontalRectangle16x9Outline,(0,o._)({},r)):(0,n.jsx)(l.Icon24HorizontalRectangleOutline,(0,o._)({},r)):e<t.tall?e<t.tallest?(0,n.jsx)(c.Icon24VerticalRectangle9x16Outline,(0,o._)({},r)):(0,n.jsx)(d.Icon24VerticalRectangleOutline,(0,o._)({},r)):(0,n.jsx)(u.Icon24SquareOutline,(0,o._)({},r))}}}},693912:(e,t,r)=>{r.d(t,{NewDrawPanel:()=>v});var o=r(785893),n=r(667294),a=r(50533),i=r(279207),s=r(659397),l=r(709483),c=r(119506),d=r(509396),u=r(231624),h=r(842386),p=r(813412),_=r(594706),g=r(838512);const m=[["M",69,65],["L",93,41],["L",121,69],["L",149,41],["L",177,69],["L",201,45]];function f(e){return`${Math.round(100*e)}%`}const v=({className:e,useOldPalette:t,useAvgColors:r})=>{var v,S,E;const T=(0,a.useDispatch)(),x=(0,c.useSettings)(),w=(0,c.useAvgColor)(),C=(0,c.useLangMap)(),y=(0,n.useRef)(null),{color:b,brushWidth:I,brushOpacity:R}=x;return(0,n.useLayoutEffect)((()=>{!function(e,t,r,o){var n;const a=null==(n=e)?void 0:n.getContext("2d");if(!e||!a)return;const i=p.CANVAS_SCALE,s=m.map((([e,t,r])=>`${e}${t*i} ${r*i}`)).join(""),l=new Path2D(s);e.width=e.width,a.lineWidth=r*p.BRUSH_WIDTH_COEFFICIENT*i,a.strokeStyle=(0,h.hexToRgba)(t,o),a.lineJoin=a.lineCap="round",a.stroke(l)}(y.current,b,I,R)}),[b,R,I]),(0,o.jsxs)("div",{className:(0,s.classNames)(_.default.root,e),children:[(0,o.jsx)("div",{className:_.default.brushPreviewContainer,children:(0,o.jsx)("canvas",{ref:y,width:p.DRAWING_PREVIEW_WIDTH*p.CANVAS_SCALE,height:p.DRAWING_PREVIEW_HEIGHT*p.CANVAS_SCALE,style:{width:p.DRAWING_PREVIEW_WIDTH,height:p.DRAWING_PREVIEW_HEIGHT}})}),(0,o.jsxs)(g.ScrollableContainer,{fadeEffect:!0,className:_.default.scrollableControls,children:[(0,o.jsx)(d.PEFormItem,{label:null==(v=C)?void 0:v.photos_pe_line_width,after:f(I),children:(0,o.jsx)(i.Slider,{min:0,max:1,isShowHandle:!0,value:I,onChange:function(e){T((0,l.setBrushWidth)(e))}})}),(0,o.jsx)(d.PEFormItem,{label:null==(S=C)?void 0:S.photos_pe_intensity,after:f(R),children:(0,o.jsx)(i.Slider,{min:0,max:1,isShowHandle:!0,value:R,onChange:function(e){T((0,l.setBrushOpacity)(e))}})}),(0,o.jsx)(d.PEFormItem,{hiddenLabel:!0,label:null==(E=C)?void 0:E.photos_pe_color,children:(0,o.jsx)(u.NewColorPicker,{currentColor:x.color,colors:t?p.COLORS:p.COLORS_NEW,onClick:function(e){T((0,l.setColor)(e))},avgColor:r?w:void 0})})]})]})}},580171:(e,t,r)=>{r.d(t,{NewFiltersPanel:()=>v});var o=r(785893),n=r(659397),a=r(50533),i=r(86894),s=r(54929),l=r(279207),c=r(119506),d=r(813412),u=r(709483),h=r(838512),p=r(938442),_=r(509396),g=r(395721),m=r(862198);const f=[.25,.5,.75,1],v=({className:e})=>{var t,r,v,S,E,T,x,w,C,y,b,I,R,A,N,L,k;const O=(0,a.useDispatch)(),P=(0,c.useLangMap)(),D=(0,c.useSettings)(),M=(0,c.useHelpers)(),B=(0,c.useCurrentFilter)(),F={regular:null==(t=P)?void 0:t.photos_pe_filter_regular,nox:null==(r=P)?void 0:r.photos_pe_filter_nox,vesper:null==(v=P)?void 0:v.photos_pe_filter_vesper,latona:null==(S=P)?void 0:S.photos_pe_filter_latona,liber:null==(E=P)?void 0:E.photos_pe_filter_liber,luna:null==(T=P)?void 0:T.photos_pe_filter_luna,minerva:null==(x=P)?void 0:x.photos_pe_filter_minerva,mitra:null==(w=P)?void 0:w.photos_pe_filter_mitra,pro:null==(C=P)?void 0:C.photos_pe_filter_pro,terra:null==(y=P)?void 0:y.photos_pe_filter_terra,veles:null==(b=P)?void 0:b.photos_pe_filter_veles,vesta:null==(I=P)?void 0:I.photos_pe_filter_vesta,zaria:null==(R=P)?void 0:R.photos_pe_filter_zaria,sepia:null==(A=P)?void 0:A.photos_pe_filter_sepia,genius:null==(N=P)?void 0:N.photos_pe_filter_genius,horus:null==(L=P)?void 0:L.photos_pe_filter_horus,fortuna:null==(k=P)?void 0:k.photos_pe_filter_fortuna},H=(0,g.useMutableObject)({});function j(e){var t;const r=null!=(t=H[e])?t:.5;var o,n,a,i;(null==H[e]&&(H[e]=r),O((0,u.setFilter)(e)),O((0,u.setFilterAmount)(r)),"regular"===e)?null==(o=(n=M).sendStat)||o.call(n,"remove_filter"):null==(a=(i=M).sendStat)||a.call(i,"add_filter")}function U(e){var t,r;H[B]=e,O((0,u.setFilterAmount)(e)),null==(t=(r=M).sendStat)||t.call(r,"change_filter_value")}const W=function(e,t){if(0===t.length)return e;let r=e,o=1/0;return t.forEach((t=>{const n=Math.abs(t-e);n<o&&(r=t,o=n)})),r}(D.filter.value,f);return(0,o.jsx)(h.ScrollableContainer,{fadeEffect:!0,padded:!0,className:(0,n.classNames)(m.default.root,e),children:d.PHOTO_FILTERS.map((e=>{var t;const r=(0,o.jsx)(p.FilterPreview,{className:m.default.image,filterName:e,intensity:.75,width:d.FILTER_PREVIEW_WIDTH_NEW_UI,height:d.FILTER_PREVIEW_HEIGHT_NEW_UI}),a=e===B,c="regular"!==e;return c?(0,o.jsx)("div",{className:(0,n.classNames)(m.default.row,a&&m.default.rowExpanded),children:(0,o.jsxs)(i.Accordion,{open:a,onToggle:function(t){const r=!t.currentTarget.open;r&&a?(t.currentTarget.open=!0,t.preventDefault()):r||a||j(e)},children:[(0,o.jsx)(i.Accordion.Summary,{before:r,disabled:a,children:F[e]}),c&&a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:m.default.smallGrid,children:f.map((t=>(0,o.jsx)("button",{className:(0,n.classNames)(m.default.intensityPresetBtn,W===t&&m.default.nearest),onClick:()=>U(t),children:(0,o.jsx)(p.FilterPreview,{className:m.default.image,filterName:e,intensity:t,width:d.FILTER_PREVIEW_WIDTH_SMALL_NEW_UI,height:d.FILTER_PREVIEW_HEIGHT_SMALL_NEW_UI})},String(t))))}),(0,o.jsx)(_.PEFormItem,{label:null==(t=P)?void 0:t.photos_pe_filter_enabled,after:`${Math.round(100*D.filter.value)}%`,children:(0,o.jsx)(l.Slider,{min:0,max:1,value:D.filter.value,isShowHandle:!0,onChange:e=>U(e)})})]})]})},e):(0,o.jsx)("div",{className:(0,n.classNames)(m.default.row,a&&m.default.rowExpanded),children:(0,o.jsx)(s.SimpleCell,{before:r,disabled:a,onClick:()=>j(e),children:F[e]})},e)}))})}},724322:(e,t,r)=>{r.d(t,{NewStickersPanelCustom:()=>l});var o=r(434788),n=r(820224),a=r(785893),i=r(838512),s=r(592352);const l=e=>{var{className:t,customStickers:r}=e,l=(0,n._)(e,["className","customStickers"]);return(0,a.jsx)(i.ScrollableContainer,{className:t,fadeEffect:!0,children:(0,a.jsx)(s.StickerList,(0,o._)({stickers:r},l))})}},293622:(e,t,r)=>{r.d(t,{NavigationHelperTopbar:()=>h});var o=r(785893),n=r(667294),a=r(659397),i=r(60559),s=r(135826),l=r(50466),c=r(427323),d=r(813412),u=r(572141);const h=({className:e,stickers:t,onClick:r,activeItemId:h,showStickerShop:p})=>{const _=(0,n.useRef)(null),g=(0,n.useRef)(!1),m=String(h),[f,v]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!1),[T,x]=(0,n.useState)(!0);(0,n.useEffect)((()=>{if(!g.current){var e,t;const r=null!=(t=_.current)?t:null,o=null==(e=r)?void 0:e.querySelector(`button[data-pack-id="${m}"]`);if(r&&o){const e=o.offsetLeft-(r.clientWidth/2-o.clientWidth/2);requestAnimationFrame((()=>{r.scrollTo({top:0,left:Math.max(0,e),behavior:"smooth"})}))}}g.current=!1}),[m]);const w=e=>{const t=_.current;if(null==t)return;const{scrollLeft:r,scrollWidth:o,clientWidth:n}=t,a=.9*(n-56)*(e>0?1:-1),i=Math.max(0,Math.min(r+a,o-n));t.scrollTo({left:i,behavior:"smooth"})};return(0,n.useLayoutEffect)((()=>{const e=_.current,t={passive:!0};if(null!=e)return r(),e.addEventListener("scroll",r,t),()=>e.removeEventListener("scroll",r,t);function r(){if(null==e)return;const{scrollLeft:t,scrollWidth:r,clientWidth:o}=e;v(t>1),E(Math.abs(r-o-t)>1),x(!1)}}),[]),(0,o.jsxs)("div",{className:(0,a.classNames)(u.default.root,e),children:[(0,o.jsx)("button",{className:(0,a.classNames)(u.default.arrow,u.default.arrowLeft,!f&&u.default.arrowHidden,T&&u.default.disableTransition),tabIndex:-1,"aria-hidden":!0,onClick:()=>w(-1),children:(0,o.jsx)(i.Icon20ChevronRight,{className:u.default.arrowIconFlipped})}),(0,o.jsx)("button",{className:(0,a.classNames)(u.default.arrow,u.default.arrowRight,!S&&u.default.arrowHidden,T&&u.default.disableTransition),tabIndex:-1,"aria-hidden":!0,onClick:()=>w(1),children:(0,o.jsx)(i.Icon20ChevronRight,{})}),(0,o.jsx)("div",{className:(0,a.classNames)(u.default.fadeout,f&&u.default.fadeoutLeft,S&&u.default.fadeoutRight,T&&u.default.disableTransition),children:(0,o.jsxs)("div",{className:u.default.scrollable,ref:_,children:[p&&(0,o.jsx)("div",{className:u.default.tab,onClick:p,children:(0,o.jsx)(s.Icon24StorefrontOutline,{})}),t.map((e=>{const{id:t}=e,n=(e=>{var t;const{items:r=[]}=e,[o]=r;var n;return null!=(n=null==(t=o.sizes)?void 0:t[d.STICKER_THUMB])?n:null})(e),i=String(t)===String(h);let s=(0,o.jsx)("img",{src:n||"",alt:"",draggable:"false",className:u.default.thumbImage});return"recent"===t&&(s=(0,o.jsx)(l.Icon24RecentOutline,{})),"editor"===t&&(s=(0,o.jsx)(c.Icon24SmileOutline,{})),n?(0,o.jsx)("button",{onClick:e=>function(e,t){g.current=!0,r(e,t)}(e,t),className:(0,a.classNames)(u.default.tab,i&&u.default.tabSelected),"data-pack-id":t,children:s},t):null}))]})})]})}},221227:(e,t,r)=>{r.d(t,{NewStickersPanelStickerPacks:()=>m});var o=r(434788),n=r(820224),a=r(785893),i=r(667294),s=r(50533),l=r(659397),c=r(86894),d=r(629932),u=r(838512),h=r(592352),p=r(293622),_=r(2413),g=r(686165);const m=e=>{var t,{className:r}=e,m=(0,n._)(e,["className"]);const f=function(e){var t;const r=(0,s.useSelector)((e=>{var r;return null!=(t=null==(r=e.present.data)?void 0:r.stickers)?t:[]}));return e?r.filter((e=>"editor"!==e.id)):r}(!0),v=(0,s.useDispatch)();var S;const E=(0,s.useSelector)((e=>{var t;return null!=(S=null==(t=e.present.data)?void 0:t.helpers)?S:{}}),s.shallowEqual),T=48,x=(0,i.useRef)(null),[w,C]=(0,i.useState)("recent");function y(e){C(String(e)),function(e){var t,r;const o=null!=(r=x.current)?r:null,n=null==(t=o)?void 0:t.querySelector(`div[data-pack-id="${e}"]`);if(o&&n){const e=o.scrollTop,t=n.offsetTop,r=Math.max(0,t-.5*T),a=r-e,i=Math.abs(a)>16?r+(a>0?-16:16):e;n.focus({preventScroll:!0}),o.scrollTop=i,o.scrollTo({top:r,behavior:"smooth"})}}(e)}function b(){var e,t;null==(e=(t=E).fetchStickers)||e.call(t,(e=>{const t={};e.stickers.forEach((e=>{e.items.forEach((e=>{t[e.id]=e}))})),v((0,_.setData)({stickers:e.stickers,stickersMap:t}))}),(e=>(console.error(e),!0)))}const I=!!(null==(t=E)?void 0:t.showStickerShop);return(0,i.useEffect)((()=>{b()}),[]),(0,i.useLayoutEffect)((()=>{const e=x.current,t={passive:!0};if(null==e)return;let r=null;function o(e){const t=r;if(r=e,e!==t){const t=e.dataset.packId;t&&C(String(t))}}function n(){const t=e,{scrollTop:r,scrollHeight:n,clientHeight:a}=t,i=r/(n-a),s=r+a*i,l=t.querySelectorAll("div[data-pack-id]");function c(e){const t=e.offsetTop,r=t+e.offsetHeight,o=s<t,n=s>r;return{top:t,bottom:r,isAboveThreshold:n,isBelowThreshold:o,isIntersecting:!o&&!n}}let d=Math.round((l.length-1)*i),u=0,h=null,p=null;for(;d>=0&&d<l.length;){const e=l[d],t=c(e);let n=!1,a=e,i=t;if(null!=h&&null!=p){const r=p.top>t.top;a=r?h:e,i=r?p:t,n=(r?t:p).bottom<s&&i.top>s}if(h=e,p=t,t.isIntersecting){if(t.bottom-r<T+50&&d+1<l.length){o(l[d+1]);break}o(e);break}if(n){o(a);break}0===u&&(u=t.isAboveThreshold?1:-1),d+=u}}return n(),e.addEventListener("scroll",n,t),()=>e.removeEventListener("scroll",n,t)}),[]),(0,a.jsxs)("div",{className:(0,l.classNames)(g.default.root,r),children:[(0,a.jsx)(p.NavigationHelperTopbar,{className:g.default.header,stickers:f,showStickerShop:I?function(){var e,t,r,o;null==(e=(t=E).showStickerShop)||e.call(t,(()=>b())),null==(r=(o=E).sendStat)||r.call(o,"click_to_shop")}:void 0,activeItemId:w,onClick:(e,t)=>y(t)}),(0,a.jsx)(u.ScrollableContainer,{className:g.default.content,fadeEffect:!0,getRootRef:x,children:f.map((e=>(0,a.jsxs)("div",{className:g.default.stickerPack,"data-pack-id":e.id,tabIndex:-1,children:[(0,a.jsx)("div",{className:g.default.title,children:(0,a.jsx)(c.Text,{as:"div",normalize:!0,weight:"3",children:(0,a.jsx)(d.TextClamp,{lines:1,children:e.title})})}),(0,a.jsx)(h.StickerList,(0,o._)({stickers:e.items,className:g.default.stickerList},m))]},e.id)))})]})}},146898:(e,t,r)=>{r.d(t,{NewTextPanel:()=>f});var o=r(785893),n=r(50533),a=r(279207),i=r(709483),s=r(813412),l=r(842386),c=r(119506),d=r(838512),u=r(509396),h=r(231624),p=r(556947),_=r(837632);const g=e=>{switch(e){case"typewriter":return"18px";case"poster":return"24px";case"retro":return"19px";case"marker":return"26px";case"italics":return"22px";default:return"20px"}};function m(e){return!!e&&"fontSize"in e&&"fontStyle"in e}const f=({className:e})=>{var t,r;const f=(0,n.useDispatch)(),v=(0,c.useLangMap)(),S=(0,c.useSettings)(),E=(0,c.useCurrentLayer)(),T=(0,c.useFontsPlaceholders)(),x=m(E)?E.fontStyle:S.fontStyle,w=m(E)?E.fontSize:S.fontSize,C=m(E)?E.color:S.color;return(0,o.jsx)(d.ScrollableContainer,{padded:!0,fadeEffect:!0,className:e,children:(0,o.jsxs)(_.CellList,{children:[(0,o.jsx)("form",{onSubmit:()=>!1,children:s.FONTS.map(((e,t)=>{var r;return(0,o.jsx)(p.CheckboxLike,{value:e,name:"photo_editor_fonts",label:(0,o.jsx)("span",{style:{fontSize:g(e)},className:(0,l.getComputedFontFamily)(e),children:null==(r=T)?void 0:r[t]}),onChange:()=>f((0,i.setFontStyle)(e)),checked:x===e},e)}))}),(0,o.jsx)(u.PEFormItem,{label:null==(t=v)?void 0:t.photos_pe_font_size,after:Math.round(100*w),children:(0,o.jsx)(a.Slider,{min:0,max:1,isShowHandle:!0,value:w,onChange:e=>f((0,i.setFontSize)(e))})}),(0,o.jsx)(u.PEFormItem,{hiddenLabel:!0,label:null==(r=v)?void 0:r.photos_pe_color,children:(0,o.jsx)(h.NewColorPicker,{currentColor:C,colors:s.COLORS_NEW,onClick:e=>f((0,i.setColor)(e))})})]})})}},690723:(e,t,r)=>{r.d(t,{SegmentationPane:()=>l});var o=r(785893),n=r(576678),a=r(667294),i=r(842386),s=r(659397);const l=({width:e,height:t,aspectRatio:r,globalScale:l,shiftX:c,shiftY:d,click:u,mode:h,croppedWidth:p,croppedHeight:_,loading:g=!1})=>{const m=(0,a.useRef)(null);return(0,o.jsx)("div",{ref:m,className:(0,s.classNames)(n.default.root,"positive"===h&&n.default.positive,"negative"===h&&n.default.negative,g&&n.default.loading),style:{width:e,height:t},onMouseDown:t=>{if(!h||g)return;const{x:o,y:n}=(0,i.getRelativeXY)(t.nativeEvent,m.current),a=e*r/(e*l);u(o*a-c*a+(p||0)*a*l,n*a-d*a+(_||0)*a*l)}})}},855829:(e,t,r)=>{r.d(t,{SegmentationPanelComponent:()=>m});var o=r(434788),n=r(785893),a=r(71814),i=r(667294),s=r(832550),l=r(86894),c=r(979075),d=r(892097),u=r(709483),h=r(72353),p=r(50533),_=r(95756);const g={setSegmentation:u.setSegmentation,resetSegmentationData:h.resetSegmentationData,setSegmentationInverse:u.setSegmentationInverse,setSegmentationDelete:u.setSegmentationDelete,resetSegmentationSettings:u.resetSegmentationSettings,setSegmentationBackgroundColor:u.setSegmentationBackgroundColor},m=(0,p.connect)((e=>({settings:e.present.settings,segmentation:e.present.ml.segmentation,avgColor:e.present.layers.items[0].avgColor,helpers:e.present.data.helpers})),g)((({setSegmentation:e,settings:t,segmentation:r,resetSegmentationData:u,setSegmentationDelete:h,setSegmentationInverse:p,resetSegmentationSettings:g,avgColor:m,setSegmentationBackgroundColor:f,helpers:v})=>{var S;const E=t.segmentation.enabled,T="positive"===t.segmentation.mode,x="negative"===t.segmentation.mode,w=t.segmentation.color,C=!(null==(S=r)?void 0:S.mask),y=t.segmentation.delete;return(0,n.jsxs)("div",{className:a.default.root,children:[(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("span",{className:a.default.title,children:"Выделение объекта"}),(0,n.jsxs)("ul",{className:a.default.selection,children:[(0,n.jsx)(s.Button,{mode:T&&E?"secondary":"tertiary",size:"s",before:(0,n.jsx)(c.Icon20AddCircleOutline,{}),disabled:y,onClick:()=>{var r;e((0,o._)({},t.segmentation,{enabled:!(E&&T),mode:"positive"})),(!E||!T)&&(null==(r=v)||r.sendStat("select_object"))},children:"Добавить выделение"}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(s.Button,{mode:x&&E?"secondary":"tertiary",size:"s",before:(0,n.jsx)(d.Icon20RemoveCircleOutline,{}),onClick:()=>{var r;e((0,o._)({},t.segmentation,{enabled:!(E&&x),mode:"negative"})),null==(r=v)||r.sendStat("delete_selection")},disabled:C||y,children:"Снять выделение"})]})]}),(0,n.jsx)("span",{className:a.default.title,children:"Выделить или убрать выделение объектов можно с помощью нажатия на них"}),(0,n.jsx)(l.Spacing,{size:25}),!y&&(0,n.jsxs)("ul",{className:a.default.selection,children:[(0,n.jsxs)(l.ButtonGroup,{stretched:!0,children:[(0,n.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{var e;p(!Boolean(t.segmentation.inverse)),null==(e=v)||e.sendStat("invert_object")},children:"Инвертировать"}),(0,n.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{u(),g({canUndo:!1})},children:"Сбросить"})]}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{var e;h(!y),null==(e=v)||e.sendStat("delete_object")},children:"Удалить выбранную область"})]}),y&&(0,n.jsxs)("div",{className:a.default.colors,children:[(0,n.jsx)("div",{className:a.default.title,children:"Цвет фона"}),(0,n.jsx)(_.ColorPicker,{color:null!=w?w:"#000",avgColor:m,setColor:e=>{var t;f(e),null==(t=v)||t.sendStat("change_object_color")}})]})]})}))},388380:(e,t,r)=>{r.d(t,{SegmentationLayer:()=>_});var o=r(785893),n=r(667294),a=r(350409),i=r(50533),s=r(842386),l=r(330995),c=r(2413),d=r(659397),u=r(813412);class h extends n.PureComponent{componentDidUpdate(e){var t,r;const o=e.inverse!==this.props.inverse,n=e.delete!==this.props.delete,a=(null==(t=e.segmentation)?void 0:t.mask)!==(null==(r=this.props.segmentation)?void 0:r.mask),i=e.color!==this.props.color,s=e.croppedWidth!==this.props.croppedWidth||e.croppedHeight!==this.props.croppedHeight,l=a||o||n||i||s;this.update(l)}update(e){const{currentBackgroundUrl:t}=this.props;t&&l.imageCacheGlobal.get(t).then((t=>{const r=t.width,o=t.height;this.drawImage(e,r,o,t)})).catch((e=>{console.error(e)}))}drawImage(e,t,r,o){var n;const{globalScale:a,shiftY:i,shiftX:l,segmentation:c,width:h,height:p}=this.props,{current:_}=this.canvasBg;var g;const{r:m,g:f,b:v}=(0,s.hexToRgbaValues)(null!=(g=this.props.color)?g:"#000000"),S=null==(n=_)?void 0:n.getContext("2d"),E=h*a,T=p*a;if(S&&_)if(_.width=h*u.CANVAS_SCALE,_.height=p*u.CANVAS_SCALE,S.clearRect(0,0,E,T),e){var x;const e=document.createElement("canvas");e.width=t,e.height=r;const n=e.getContext("2d"),a=this.maskCanvas.getContext("2d"),s=this.canvasRender.getContext("2d");if(!a||!s||!n)return;if(!(null==(x=this.props.segmentation)?void 0:x.mask))return void a.clearRect(0,0,E,T);const h=new Image;h.onload=()=>{this.maskCanvas.width=t,this.maskCanvas.height=r,this.canvasRender.width=t,this.canvasRender.height=r,a.drawImage(h,0,0,t,r),n.drawImage(o,0,0,t,r);const e=n.getImageData(0,0,t,r).data,c=a.getImageData(0,0,t,r),d=c.data;for(let t=0;t<d.length;t+=4){const r=!(0!==d[t]&&1!==d[t]||0!==d[t+1]&&1!==d[t+1]||0!==d[t+2]&&1!==d[t+2]);if(this.props.delete)if(this.props.inverse)d[t]=e[t]*d[t]/255+m*(1-d[t]/255),d[t+1]=e[t+1]*d[t+1]/255+f*(1-d[t+1]/255),d[t+2]=e[t+2]*d[t+2]/255+v*(1-d[t+2]/255);else{const r=255-d[t],o=255-d[t+1],n=255-d[t+2];d[t]=e[t]*r/255+m*(1-r/255),d[t+1]=e[t+1]*o/255+f*(1-o/255),d[t+2]=e[t+2]*n/255+v*(1-n/255)}else this.props.inverse?r?(d[t+1]=128,d[t+2]=255,d[t+3]=100):d[t+3]=0:r?d[t+3]=0:(d[t]=0,d[t+1]=128,d[t+2]=255,d[t+3]=100)}a.putImageData(c,0,0),s.drawImage(this.maskCanvas,0,0,t,r),S.save(),S.scale(u.CANVAS_SCALE,u.CANVAS_SCALE),S.drawImage(this.maskCanvas,l,i,E,T),S.restore(),this.props.setData({maskCanvas:this.canvasRender})},h.src=(0,d.isString)(c.mask)?`data:image/png;base64,${c.mask}`:""}else S.save(),S.scale(u.CANVAS_SCALE,u.CANVAS_SCALE),S.drawImage(this.maskCanvas,l,i,E,T),S.restore()}render(){return(0,o.jsx)("canvas",{width:this.props.width*u.CANVAS_SCALE,height:this.props.height*u.CANVAS_SCALE,style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none",width:this.props.width,height:this.props.height},ref:this.canvasBg})}constructor(e){super(e),this.canvasBg=(0,n.createRef)(),this.maskCanvas=document.createElement("canvas"),this.canvasRender=document.createElement("canvas")}}const p={setData:c.setData},_=(0,i.connect)((e=>({currentBackgroundUrl:(0,a.getCurrentImageUrl)(e),croppedY:e.present.data.croppedY,croppedX:e.present.data.croppedX,croppedWidth:e.present.data.croppedWidth,croppedHeight:e.present.data.croppedHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,segmentation:e.present.ml.segmentation,inverse:e.present.settings.segmentation.inverse,delete:e.present.settings.segmentation.delete,color:e.present.settings.segmentation.color})),p)(h)},393522:(e,t,r)=>{r.d(t,{StatusPanel:()=>p});var o=r(785893),n=r(667294),a=r(50533),i=r(234448),s=r(659397),l=r(506281),c=r(813412),d=r(653927);class u extends n.Component{componentDidMount(){const{current:e}=this.scrollElement,t=document.querySelector('[data-status-active="true"]');if(!e||!t)return;t.offsetLeft+30>e.offsetWidth&&this.setPosition(e.offsetWidth)}constructor(e){super(e),this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{var e;const{langMap:t}=this.props,{currentIndex:r,items:n}=this.props.layers,a=null!==r&&n[r],i=a&&a.type===c.LAYER_TYPES.TEXT&&a.isEdit;let l="";var u;if(a)if(a.type===c.LAYER_TYPES.STICKER)l=null==(u=t)?void 0:u.photos_pe_delete_sticker;else if(a.type===c.LAYER_TYPES.TEXT){var h;l=null==(h=t)?void 0:h.photos_pe_delete_text}let p;return this.props.currentBackgroundType!==c.BACKGROUND_MODES.BACKGROUND||a||(p=!0),(0,o.jsx)("div",{className:(0,s.classNames)(d.default.root,d.default.square),children:p?this.renderBackgrounds():(0,o.jsxs)("div",{className:d.default.inner,children:[this.renderLeftBlock(),(0,o.jsxs)("div",{children:[a&&!i&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.deleteLayer,children:l}),a&&i&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.closeTextEditor,children:null==(e=t)?void 0:e.photos_pe_save_text})]})]})})},this.renderLeftBlock=()=>{const{addons:e,langMap:t}=this.props;var r,n,a;return"photo"===this.props.context?(0,o.jsxs)("div",{children:[e&&e.edited&&e.canEdit&&(0,o.jsx)("a",{className:d.default.link,onClick:e.restore,children:null==(r=t)?void 0:r.photos_filtered_restore}),e&&!e.canEdit&&(0,o.jsx)("span",{className:d.default.info,children:null==(n=t)?void 0:n.photos_will_be_saved_to_pe_album})]}):(0,o.jsx)("div",{children:this.props.currentBackgroundType===c.BACKGROUND_MODES.PHOTO&&(0,o.jsx)("a",{className:d.default.link,onClick:()=>this.props.uploadPhoto(),children:null==(a=t)?void 0:a.photos_pe_change_photo})})},this.renderBackgrounds=()=>{const{scrollBlockPosition:e}=this.state,{advice_gradients:t,colors:r}=this.props.backgrounds,{current:n}=this.scrollElement,a=n?e+n.offsetWidth:0,i=!!e,c=!n||!!(n.scrollWidth-a),u=[...t,...r];return(0,o.jsxs)("div",{className:d.default.backgrounds,onWheel:this.panelMouseWheel,children:[(0,o.jsx)("div",{style:{transform:`translateX(-${e}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,children:u.map((({id:e,preview:t,background:r})=>(0,o.jsx)("a",{className:(0,s.classNames)(d.default.background,e===this.props.currentBackgroundId&&d.default.backgroundActive),"data-status-active":e===this.props.currentBackgroundId,style:{backgroundColor:r,backgroundImage:`url(${t})`},onClick:()=>{var t;this.props.setCurrentBackgroundId(e),null==(t=this.props.helpers)||t.sendStat("select_background")}},e)))}),i&&(0,o.jsx)("div",{className:(0,s.classNames)(d.default.arrow,d.default.arrowLeft),onClick:()=>this.handleArrowClick(!0),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})}),c&&(0,o.jsx)("div",{className:(0,s.classNames)(d.default.arrow,d.default.arrowRight),onClick:()=>this.handleArrowClick(!1),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})})]})},this.panelMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement;if(!r)return;const{scrollBlockPosition:o}=this.state,n=r.offsetWidth,a=Math.max(0,Math.min(o+e,r.scrollWidth-n));t&&(this.scrollWithAnimation=!0),this.setState({scrollBlockPosition:a})},this.handleArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth/2;e&&(r=-r),this.setPosition(r,!0)},this.state={scrollBlockPosition:0},this.scrollElement=(0,n.createRef)(),this.scrollWithAnimation=!1}}const h={deleteLayer:i.deleteLayer,closeTextEditor:i.closeTextEditor},p=(0,a.connect)((e=>({context:e.present.data.context,layers:e.present.layers,addons:e.present.data.addons,helpers:e.present.data.helepers,langMap:e.present.data.langMap})),h)(u)},330141:(e,t,r)=>{r.d(t,{StickerPacksPanel:()=>v});var o=r(785893),n=r(667294),a=r(50533),i=r(489143),s=r(2413),l=r(659397),c=r(135826),d=r(50466),u=r(427323),h=r(506281),p=r(813412),_=r(842386),g=r(119504);class m extends n.Component{fetchStickers(){this.props.helpers.fetchStickers((e=>{const t={};e.stickers.forEach((e=>{e.items.forEach((e=>{t[e.id]=e}))})),this.props.setData({stickers:e.stickers,stickersMap:t})}),(e=>(console.error(e),!0)))}showStickerShop(){this.props.helpers.showStickerShop((()=>this.fetchStickers()))}constructor(e){super(e),this.componentDidMount=()=>{this.fetchStickers()},this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{const e="vkcom_dark"===document.body.getAttribute("scheme"),{stickers:t,stickerMouseDown:r}=this.props,{stickerHeaderScrollPosition:n,currentStickerPackIndex:a}=this.props.ui,{current:i}=this.scrollElement,s=!!n;let m=!1,f=0;i&&(f=((0,l.isNumber)(n)?n:0)+i.offsetWidth,m=!!(i.scrollWidth-f));let v=t[a]?t[a].items:[];const S=[];for(let e=0,t=v.length;e<t;e+=3)S.push(v.slice(e,e+3));return(0,o.jsxs)("div",{className:g.default.root,children:[(0,o.jsxs)("div",{className:g.default.header,children:[(0,o.jsxs)("div",{className:g.default.scroll,style:{transform:`translateX(-${n}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,onWheel:this.tabsMouseWheel,children:[(0,o.jsx)("div",{className:g.default.tab,onClick:()=>this.showStickerShop(),children:(0,o.jsx)(c.Icon24StorefrontOutline,{})}),t.map((({id:e},t)=>{const r=this.getTabPreviewUrl(t);if(!r)return null;const n=!["recent","editor"].includes(e.toString()),i=(0,l.classNames)(g.default.tab,t===a&&g.default.tabSelected),s=n?null:"recent"===e?(0,o.jsx)(d.Icon24RecentOutline,{}):(0,o.jsx)(u.Icon24SmileOutline,{});return(0,o.jsx)("div",{className:i,style:n?{backgroundImage:`url('${r}')`}:void 0,onClick:()=>this.selectStickerPack(t),children:s},e)}))]}),s&&(0,o.jsx)("div",{className:(0,l.classNames)(g.default.arrow,g.default.arrowLeft,e&&g.default.arrowLeftDark),onClick:()=>this.handleTabArrowClick(!0),children:(0,o.jsx)(h.Icon24Chevron,{className:g.default.arrowIcon})}),m&&(0,o.jsx)("div",{className:(0,l.classNames)(g.default.arrow,g.default.arrowRight,e&&g.default.arrowRightDark),onClick:()=>this.handleTabArrowClick(!1),children:(0,o.jsx)(h.Icon24Chevron,{className:g.default.arrowIcon})})]}),(0,o.jsx)("div",{className:g.default.content,children:S.map(((e,t)=>(0,o.jsx)("div",{children:e.map((({id:e,sizes:t})=>{const n=(0,_.getStickerSize)(t,p.STICKER_MEDIUM,!0);return(0,o.jsx)("div",{className:g.default.preview,onMouseDown:t=>r(t,e),children:(0,o.jsx)("img",{src:n,alt:"",className:g.default.previewImage})},e)}))},t)))})]})},this.getTabPreviewUrl=e=>{const{items:t}=this.props.stickers[e],[r=null]=t||[];return!(!t||!r)&&r.sizes[p.STICKER_THUMB]},this.selectStickerPack=e=>{this.props.setCurrentStickerPackIndex(e)},this.tabsMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.handleTabArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth;e&&(r=-r),this.setPosition(r,!0)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement,{stickerHeaderScrollPosition:o}=this.props.ui;if(!r)return;const n=r.offsetWidth,a=Math.max(0,Math.min(((0,l.isNumber)(o)?o:0)+e,r.scrollWidth-n));t&&(this.scrollWithAnimation=!0),this.props.setHeaderScrollPosition(a)},this.loadingLimit=25,this.scrollElement=(0,n.createRef)(),this.scrollWithAnimation=!1}}const f={setCurrentStickerPackIndex:i.setCurrentStickerPackIndex,setHeaderScrollPosition:i.setHeaderScrollPosition,setData:s.setData},v=(0,a.connect)((e=>({ui:e.present.ui,stickers:e.present.data.stickers,helpers:e.present.data.helpers})),f)(m)},651242:(e,t,r)=>{r.d(t,{StickersPanel:()=>s});var o=r(785893),n=r(813412),a=r(842386),i=r(443940);const s=({stickerMouseDown:e,customStickers:t})=>{const r=t.map(((t,r)=>{const s=(0,a.getStickerSize)(t.sizes,n.STICKER_MEDIUM,!0);return(0,o.jsx)("div",{className:i.default.preview,onMouseDown:r=>e(r,t.id),children:(0,o.jsx)("img",{src:s,className:i.default.previewImage})},r)}));return(0,o.jsx)("div",{className:i.default.root,children:(0,o.jsx)("div",{className:i.default.content,children:r})})}},992774:(e,t,r)=>{r.d(t,{TextPanel:()=>v});var o=r(785893),n=r(667294),a=r(50533),i=r(234448),s=r(709483),l=r(95756),c=r(86894),d=r(279513),u=r(832550),h=r(279207),p=r(813412),_=r(560707),g=r(842386);class m extends n.Component{constructor(){super(...arguments),this.render=()=>{var e,t,r,n,a;const{settings:i,setColor:s,setFontSize:m,layer:f,fontsPlaceholders:v,avgColor:S,langMap:E,globalScale:T}=this.props,x=f&&f.isEdit,w=f&&f.fontStyle,C=f&&f.fontSize,y=f&&f.color,b=e=>{switch(e){case"typewriter":return"18px";case"poster":return"24px";case"retro":return"19px";case"marker":return"26px";case"italics":return"22px";default:return"20px"}};return(0,o.jsxs)("div",{className:_.default.root,children:[x?(0,o.jsx)(u.Button,{mode:"primary",onClick:this.props.closeTextEditor,children:null==(e=E)?void 0:e.photos_pe_save_text}):(0,o.jsx)(u.Button,{mode:"primary",before:(0,o.jsx)(d.Icon12Add,{}),onClick:()=>this.props.addLayerText(!0,{isEdit:!0,baseScale:T}),children:null==(t=E)?void 0:t.photos_pe_add_text}),(0,o.jsxs)("div",{className:_.default.fonts,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(r=E)?void 0:r.photos_pe_font}),p.FONTS.map(((e,t)=>(0,o.jsx)(c.Radio,{className:_.default.radio,value:e,name:"photo_editor_fonts",onChange:()=>this.props.setFontStyle(e),checked:w?w===e:i.fontStyle===e,children:(0,o.jsx)("span",{style:{fontSize:b(e)},className:(0,g.getComputedFontFamily)(e),children:v&&v[t]})},e)))]}),(0,o.jsxs)("div",{className:_.default.fontSize,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(n=E)?void 0:n.photos_pe_font_size}),(0,o.jsx)(h.Slider,{min:0,max:1,isShowHandle:!0,value:C||i.fontSize,formatHint:e=>`${Math.round(100*e)}`,onChange:e=>m(e)})]}),(0,o.jsxs)("div",{className:_.default.colors,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(a=E)?void 0:a.photos_pe_color}),(0,o.jsx)(l.ColorPicker,{color:y||i.color,avgColor:S,setColor:s})]})]})}}}const f={addLayerText:i.addLayerText,setColor:s.setColor,setFontSize:s.setFontSize,setFontStyle:s.setFontStyle,closeTextEditor:i.closeTextEditor},v=(0,a.connect)((e=>{const{items:t,currentIndex:r}=e.present.layers;let o=null;return null!==r&&(o=t[r]),{settings:e.present.settings,layer:o,fontsPlaceholders:e.present.data.fontsPlaceholders,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale}}),f)(m)},578683:(e,t,r)=>{r.d(t,{UndoRedo:()=>u});var o=r(785893),n=r(21090),a=r(50533),i=r(589612),s=r(318455),l=r(507591),c=r(659397);const d=n.ActionCreators,u=(0,a.connect)((e=>({canUndo:e.past.length>0,canRedo:e.future.length>0,helpers:e.present.data.helpers})),d)((({canUndo:e,canRedo:t,undo:r,redo:n,helpers:a})=>(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,e&&l.default.scaleButtonActive),disabled:!e,onClick:()=>{var e;null==(e=a)||e.sendStat("undo"),r()},children:(0,o.jsx)(i.Icon24ArrowUturnLeftOutline,{})}),(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,t&&l.default.scaleButtonActive),disabled:!t,onClick:()=>{var e;null==(e=a)||e.sendStat("redo"),n()},children:(0,o.jsx)(s.Icon24ArrowUturnRightOutline,{})})]})))},993661:(e,t,r)=>{r.d(t,{$currentLayerStatus:()=>_,$currentTab:()=>u,$scaleStatus:()=>x,$undoRedoStatusFiltered:()=>v,applyOrDenyChangesAndChangeTab:()=>l,currentLayerAction:()=>h,currentLayerStatusAction:()=>p,currentTabAction:()=>c,currentTabActionStatus:()=>d,getEditedPhoto:()=>w,photoEditorActions:()=>y,redoAction:()=>m,resetTrigger:()=>s,scaleAction:()=>E,scaleActionStatus:()=>T,undoAction:()=>g,undoRedoStatus:()=>f});var o=r(434788),n=r(798116),a=r(659397);const i=(0,n.createDomain)("PhotoEditorDesktop"),s=i.createEvent(),l=i.createEvent(),c=i.createEvent(),d=i.createEvent(),u=i.createStore(null).on([c,d],((e,t)=>t));u.reset(s);const h=i.createEvent(),p=i.createEvent(),_=i.createStore(null).on([p],((e,t)=>t));_.reset(s);const g=i.createEvent(),m=i.createEvent(),f=i.createEvent(),v=i.createStore({canUndo:!1,canRedo:!1,depth:0}).on(f,((e,t)=>(0,a.isEqual)(e,t)?e:t));v.reset(s);const S=i.createStore(0);S.reset(s),(0,n.sample)({clock:c,source:v,fn:e=>e.depth,target:S});const E=i.createEvent(),T=i.createEvent(),x=i.createStore({plus:"enabled",minus:"disabled",zoom:1,hidden:!1}).on([T,u],((e,t)=>{if((0,a.isString)(t)||null===t)return(0,o._)({},e,{hidden:"crop"===t});const{scale:r,defaultScale:n}=t,i=n+3,s=n;return r>=i?{hidden:e.hidden,plus:"disabled",minus:"enabled",zoom:i}:r<=s?{hidden:e.hidden,plus:"enabled",minus:"disabled",zoom:s}:(0,o._)({},e,{plus:"enabled",minus:"enabled",zoom:r})}));x.reset(s);const w=i.createEvent(),C=i.createEvent();(0,n.sample)({clock:C,source:S,filter:(e,t)=>"deny"===t||"apply"===t,fn:(e,t)=>({tab:null,depth:"deny"===t?e:null}),target:l}),(0,n.sample)({clock:C,fn:()=>null,target:c}),(0,n.sample)({clock:c,fn:e=>({tab:e,depth:null}),target:l});const y={undo:e=>g(e),redo:()=>m(),save:()=>w(),scale:e=>E(e),statusAction:e=>C(e)}},769824:(e,t,r)=>{r.d(t,{PhotoEditor:()=>p});var o=r(434788),n=r(785893),a=r(667294),i=r(50533),s=r(471198),l=r(2413),c=r(659397),d=r(813412),u=r(774893);class h extends a.Component{createStore(){return null!=this.$store||(this.$store=(0,s.createPhotoEditorStore)({data:(0,o._)({},this.props,{artboardWidth:this.props.artboardWidth,artboardHeight:this.props.artboardHeight,imageContainerWidth:this.props.imageContainerWidth||this.props.artboardWidth,imageContainerHeight:this.props.imageContainerHeight||this.props.artboardHeight,context:this.props.context||"photo",renderStart:performance.now()})}),(0,c.isFunction)(this.props.storeInit)&&this.props.storeInit(this.$store)),this.$store}componentWillUnmount(){(0,c.isFunction)(this.props.onDestroy)&&this.props.onDestroy()}componentDidUpdate(e){const t={};let r=!1;["langMap","isRedesignEnabled"].forEach((o=>{e[o]!==this.props[o]&&(t[o]=this.props[o],r=!0)})),null!=this.$store&&r&&this.$store.dispatch((0,l.setData)(t))}render(){const e=this.createStore();return(0,n.jsx)(i.Provider,{store:e,children:(0,n.jsx)(u.BaseEditor,{stickers:this.props.stickers,ref:e=>{(0,c.isFunction)(this.props.refCb)&&this.props.refCb(e)}})})}constructor(){super(...arguments),this.$store=null}}h.defaultProps={originalWidth:d.STORY_BASE_WIDTH,originalHeight:d.STORY_BASE_HEIGHT};const p=h},708241:(e,t,r)=>{r.d(t,{background:()=>i});var o=r(434788),n=r(455566);const a={currentBackgroundType:"none",currentPhotoUrl:null,currentBackgroundId:null},i=(e=a,t)=>{switch(t.type){case n.SET_CURRENT_BACKGROUND_TYPE:return(0,o._)({},e,{currentBackgroundType:t.value});case n.SET_CURRENT_PHOTO_URL:return(0,o._)({},e,{currentPhotoUrl:t.value});case n.SET_CURRENT_BACKGROUND_ID:return(0,o._)({},e,{currentBackgroundId:t.value});default:return e}}},958269:(e,t,r)=>{r.d(t,{data:()=>i});var o=r(434788),n=r(455566);const a={artboardHeight:0,artboardWidth:0,imageContainerHeight:0},i=(e=a,t)=>t.type===n.SET_DATA?(0,o._)({},e,t.payload):e},851816:(e,t,r)=>{r.d(t,{drawings:()=>n});var o=r(455566);const n=(e=[],t)=>{switch(t.type){case o.ADD_DRAWING:return[...e,t.payload];case o.UPDATE_DRAWING:return t.payload;default:return e}}},85447:(e,t,r)=>{r.d(t,{reducers:()=>m});var o=r(14890),n=r(21090),a=r(692002),i=r(459755),s=r(69005),l=r(907960),c=r(851816),d=r(708241),u=r(958269),h=r(672048),p=r(455566);let _,g=!1;const m=(0,a.esModuleUnwrapDefault)(n.default)((0,o.combineReducers)({ui:i.ui,settings:s.settings,layers:l.layers,drawings:c.drawings,background:d.background,data:u.data,ml:h.ml}),{limit:100,syncFilter:!0,filter:(0,n.combineFilters)((function(e){return![p.SET_CURRENT_BACKGROUND_ID,p.SET_CURRENT_BACKGROUND_TYPE,p.ADD_LAYER_TEXT,p.ADD_LAYER_IMAGE,p.ADD_LAYER_STICKER,p.SET_CURRENT_PHOTO_URL,p.SET_LAYERS_SCALE,p.SET_LAYERS_SHIFT,p.SET_SETTING_SEGMENTATION_RESET].includes(e.type)||e.canUndo}),(0,n.includeAction)([p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_SETTING_BLUR_ENABLE,p.SET_SETTING_BLUR_FORM,p.SET_SETTING_AUTO_CORRECTION,p.SET_SETTING_FILTER,p.SET_SETTING_FILTER_AMOUNT,p.ADD_LAYER_STICKER,p.ADD_LAYER_TEXT,p.DELETE_LAYER,p.ADD_DRAWING,p.SET_CURRENT_BACKGROUND_TYPE,p.SET_CURRENT_PHOTO_URL,p.SET_CURRENT_BACKGROUND_ID,p.SET_LAYER_COLOR,p.SET_LAYER_FONT_SIZE,p.SET_LAYER_FONT_STYLE,p.TOGGLE_TEXT_EDIT,p.SET_SHOW_DROP_BOX,p.START_LAYER_SCALE,p.SET_SEGMENTATION_DATA,p.RESET_SEGMENTATION_DATA,p.SET_SETTING_SEGMENTATION_INVERSE,p.SET_SETTING_SEGMENTATION_DELETE,p.SET_SETTING_SEGMENTATION_RESET,p.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,p.SET_SETTING_ENHANCE,p.SET_SETTING_CROP]),(function(e){return e.type===p.TOGGLE_TEXT_EDIT?e.payload.isEdit:e.type===p.SET_SHOW_DROP_BOX?e.value:![p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_FILTER_AMOUNT,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_LAYER_FONT_SIZE].includes(e.type)||(e.type!==_?(g=!1,_=e.type,!0):!g&&(g=!0,setTimeout((()=>{g=!1}),500),!0))}))})},907960:(e,t,r)=>{r.d(t,{layers:()=>s});var o=r(434788),n=r(455566),a=r(813412);const i={currentIndex:null,items:[{canvas:document.createElement("canvas"),type:a.LAYER_TYPES.BACKGROUND,width:1,height:1,isBackground:!0,locked:!0,x:0,y:0,rotate:0,canDelete:!1,scale:1,avgColor:{r:128,g:128,b:128},baseScale:1}],globalScale:1,shiftX:0,shiftY:0,defaultScale:1},s=(e=i,t)=>{switch(t.type){case n.SET_CURRENT_LAYER:return(0,o._)({},e,{currentIndex:t.index});case n.ADD_LAYER_STICKER:case n.ADD_LAYER_TEXT:case n.ADD_LAYER_IMAGE:return(0,o._)({},e,{items:[...e.items,t.payload]});case n.SET_LAYER_POSITION:case n.SET_LAYER_SCALE:case n.SET_LAYER_COLOR:case n.SET_LAYER_FONT_SIZE:case n.SET_LAYER_FONT_STYLE:case n.SET_LAYER_TEXT:case n.TOGGLE_TEXT_EDIT:return(0,o._)({},e,{items:e.items.map(((r,n)=>e.currentIndex===n?(0,o._)({},r,t.payload):r))});case n.SET_LAYERS_SCALE:return(0,o._)({},e,{globalScale:t.payload.scale,shiftX:t.payload.shiftX,shiftY:t.payload.shiftY,defaultScale:t.payload.defaultScale});case n.SET_LAYERS_SHIFT:return(0,o._)({},e,{shiftX:t.payload.shiftX,shiftY:t.payload.shiftY});case n.START_LAYER_SCALE:return(0,o._)({},e);case n.UPDATE_BACKGROUND_LAYER:return(0,o._)({},e,{items:e.items.map(((e,r)=>0===r?(0,o._)({},e,t.payload):e))});case n.DELETE_LAYER:return(0,o._)({},e,{currentIndex:null,items:e.items.filter(((e,r)=>r!==t.index))});case n.UPDATE_LAYERS_AFTER_CROP:return(0,o._)({},e,{items:t.items});default:return e}}},672048:(e,t,r)=>{r.d(t,{ml:()=>a});var o=r(434788),n=r(455566);const a=(e={},t)=>{switch(t.type){case n.SET_SEGMENTATION_DATA:var r;return(0,o._)({},e,{segmentation:{mask:t.payload.mask,clicks:[...(null==(r=e.segmentation)?void 0:r.clicks)||[],t.payload.click]}});case n.RESET_SEGMENTATION_DATA:return(0,o._)({},e,{segmentation:{mask:"",clicks:[]}});default:return e}}},69005:(e,t,r)=>{r.d(t,{settings:()=>s});var o=r(434788),n=r(455566),a=r(813412);const i={color:a.COLORS[0],brushWidth:.5,brushOpacity:1,fontSize:.5,fontStyle:a.FONTS[0],filter:{name:a.PHOTO_FILTERS[0],value:.5},colorCorrection:{exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},blur:{isEnabled:!1,form:a.BLUR_TYPES.ROUND,size:50,position:[.5,.5]},isAutoCorrection:!1,cropAspect:a.CROP_ASPECT_FREE,isCropped:!1,flipX:!1,flipY:!1,rotation:0,segmentation:{enabled:!1,mode:"positive",inverse:!1,delete:!1,color:"#FFFFFF"},loading:{enhance:!1,segmentation:!1},enhance:{active:!1,url:""},croppedWidth:null,croppedHeight:null,croppedX:null,croppedY:null,containerWidth:null,containerHeight:null},s=(e=i,t)=>{switch(t.type){case n.SET_SETTING_COLOR:return(0,o._)({},e,{color:t.color});case n.SET_SETTING_BRUSH_WIDTH:return(0,o._)({},e,{brushWidth:t.brushWidth});case n.SET_SETTING_BRUSH_OPACITY:return(0,o._)({},e,{brushOpacity:t.brushOpacity});case n.SET_SETTING_FONT_SIZE:return(0,o._)({},e,{fontSize:t.fontSize});case n.SET_SETTING_FONT_FAMILY:return(0,o._)({},e,{fontStyle:t.fontStyle});case n.SET_SETTING_COLOR_CORRECTION:return(0,o._)({},e,{colorCorrection:(0,o._)({},e.colorCorrection,{[t.filter]:t.value})});case n.SET_SETTING_FILTER:return(0,o._)({},e,{filter:(0,o._)({},e.filter,{name:t.name})});case n.SET_SETTING_FILTER_AMOUNT:return(0,o._)({},e,{filter:(0,o._)({},e.filter,{value:t.value})});case n.SET_SETTING_BLUR_ENABLE:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{isEnabled:t.isEnabled})});case n.SET_SETTING_BLUR_FORM:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{form:t.form})});case n.SET_SETTING_BLUR_SIZE:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{size:t.size})});case n.SET_SETTING_BLUR_POSITION:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{position:t.position})});case n.SET_SETTING_AUTO_CORRECTION:return(0,o._)({},e,{isAutoCorrection:t.isAutoCorrection});case n.SET_SETTING_CROP_ASPECT:return(0,o._)({},e,{cropAspect:t.aspect});case n.SET_SETTING_CROPPED:return(0,o._)({},e,{isCropped:t.isCropped});case n.SET_SETTING_FLIP_X:return(0,o._)({},e,{flipX:t.value});case n.SET_SETTING_FLIP_Y:return(0,o._)({},e,{flipY:t.value});case n.SET_SETTING_ROTATE:return(0,o._)({},e,{rotation:t.value});case n.SET_SETTING_SEGMENTATION:return(0,o._)({},e,{segmentation:t.value});case n.SET_SETTING_SEGMENTATION_INVERSE:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{inverse:t.value})});case n.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{color:t.value})});case n.SET_SETTING_SEGMENTATION_DELETE:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{delete:t.value,enabled:!1})});case n.SET_SETTING_SEGMENTATION_RESET:return(0,o._)({},e,{segmentation:{delete:!1,inverse:!1,mode:"positive",enabled:!1,color:"#FFFFFF"}});case n.SET_SETTING_LOADING:return(0,o._)({},e,{loading:(0,o._)({},e.loading,t.value)});case n.SET_SETTING_ENHANCE:return(0,o._)({},e,{enhance:(0,o._)({},e.enhance,t.value)});case n.SET_SETTING_CROP:return null===t.value?(0,o._)({},e,{croppedY:null,croppedX:null,croppedWidth:null,croppedHeight:null,containerWidth:null,containerHeight:null}):(0,o._)({},e,t.value);default:return e}}},459755:(e,t,r)=>{r.d(t,{ui:()=>i});var o=r(434788),n=r(455566);const a={isDataLoaded:!1,isShowDropBox:!1,isSaveLoading:!1,currentMode:null,currentStickerPackIndex:0,stickerHeaderScrollPosition:0},i=(e=a,t)=>{switch(t.type){case n.SET_DATA_LOADED:return(0,o._)({},e,{isDataLoaded:!0});case n.SET_SHOW_DROP_BOX:return(0,o._)({},e,{isShowDropBox:t.value});case n.SET_SAVE_LOADING:return(0,o._)({},e,{isSaveLoading:t.value});case n.SET_CURRENT_TAB:return(0,o._)({},e,{currentMode:t.value});case n.SET_CURRENT_STICKER_PACK_INDEX:return(0,o._)({},e,{currentStickerPackIndex:t.value});case n.SET_HEADER_SCROLL_POSITION:return(0,o._)({},e,{stickerHeaderScrollPosition:t.value});default:return e}}},119506:(e,t,r)=>{r.d(t,{useArtboardSizes:()=>l,useAvgColor:()=>_,useBackgroundUrl:()=>p,useCropSettings:()=>u,useCurrentFilter:()=>v,useCurrentLayer:()=>m,useCurrentMode:()=>S,useData:()=>i,useFontsPlaceholders:()=>f,useHelpers:()=>c,useLangMap:()=>g,useNewFeaturesCheck:()=>s,useSettings:()=>d,useSnapshot:()=>a,useViewportSizes:()=>h});var o=r(50533),n=r(350409);function a(e,t){return(0,o.useSelector)((t=>e(t.present)),t)}function i(){return a((e=>e.data))}function s(){return a((e=>!0===e.data.isNewFeaturesEnabled))}function l(){return a((e=>({artboardWidth:e.data.artboardWidth,artboardHeight:e.data.artboardHeight})),o.shallowEqual)}function c(){var e;return a((t=>{var r;return null!=(e=null==(r=t.data)?void 0:r.helpers)?e:{}}),o.shallowEqual)}function d(){return a((e=>e.settings))}function u(){return a((e=>{var t,r,o,n;return{croppedWidth:null!=(t=e.settings.croppedWidth)?t:e.data.artboardWidth,croppedHeight:null!=(r=e.settings.croppedHeight)?r:e.data.artboardHeight,croppedX:e.settings.croppedX||0,croppedY:e.settings.croppedY||0,containerWidth:null!=(o=e.settings.containerWidth)?o:e.data.artboardWidth,containerHeight:null!=(n=e.settings.containerHeight)?n:e.data.artboardHeight}}),o.shallowEqual)}function h(){return a((e=>{const t=e.data.artboardWidth,r=e.data.artboardHeight;var o;const n=null!=(o=e.settings.croppedWidth)?o:e.data.artboardWidth;var a;const i=null!=(a=e.settings.croppedHeight)?a:e.data.artboardHeight,s=e.layers.globalScale,l=e.layers.globalScale/e.layers.defaultScale,c=e.layers.shiftX,d=e.layers.shiftY,u=(e.settings.croppedX||0)*s,h=(e.settings.croppedY||0)*s;var p;var _;const g=(null!=(p=e.settings.containerWidth)?p:t)/(null!=(_=e.settings.containerHeight)?_:r),[m,f]=g>=t/r?[t,t/g]:[r*g,r],v=n*s,S=i*s,E=v-m,T=S-f;return{scale:l,realScale:s,canvasWidth:n,canvasHeight:i,visibleRectWidth:v<=m?n:m/s,visibleRectHeight:S<=f?i:f/s,visibleRectX:(Math.abs(c)-u)/s,visibleRectY:(Math.abs(d)-h)/s,scaledBaseLayerShiftX:u,scaledBaseLayerShiftY:h,scaledMaxLayerShiftX:u+E,scaledMaxLayerShiftY:h+T}}),o.shallowEqual)}function p(){return(0,o.useSelector)(n.getCurrentImageUrl)||null}function _(){return a((e=>e.layers.items[0].avgColor))}function g(){var e;return a((t=>null!=(e=t.data.langMap)?e:null))}function m(){return a((e=>{const t=e.layers,r=t.currentIndex;return null==r?null:t.items[r]}))}function f(){return a((e=>{var t;return null==(t=e.data)?void 0:t.fontsPlaceholders}))}function v(){return a((e=>e.settings.filter.name))}function S(){return a((e=>e.ui.currentMode))}},471198:(e,t,r)=>{r.d(t,{createPhotoEditorStore:()=>l});var o=r(14890),n=r(21090),a=r(929804),i=r(753894),s=r(85447);const l=e=>{const t=(0,n.newHistory)([],e,[]),r=a.composeWithDevTools((0,o.applyMiddleware)(i.default));return(0,o.createStore)(s.reducers,t,r)}},350409:(e,t,r)=>{r.d(t,{getCurrentImageUrl:()=>i,getMarginTop:()=>s});var o=r(659397),n=r(813412);const a={};function i(e){const{currentBackgroundType:t,currentPhotoUrl:r,currentBackgroundId:o}=e.present.background,{enhance:i}=e.present.settings;let s="";if(t===n.BACKGROUND_MODES.PHOTO){var l;s=r||"",(null==(l=i)?void 0:l.active)&&i.url&&(s=i.url)}else{if(null==e.present.data.backgrounds)return"";const{gradients:t,emojies:r,advice_gradients:n,colors:i}=e.present.data.backgrounds,l=[...t,...r,...n,...i].filter((({id:e})=>e===o))[0];if(l.url)s=l.url;else if(a[l.id])s=a[l.id];else{const{originalWidth:t,originalHeight:r}=e.present.data,o=document.createElement("canvas"),n=o.getContext("2d");o.width=t,o.height=r,n.fillStyle=l.background,n.fillRect(0,0,t,r),a[l.id]=o.toDataURL(),s=a[l.id]}}return s}function s(e){const{artboardHeight:t,imageContainerHeight:r}=e.present.data,{containerHeight:n}=e.present.settings;return(0,o.isNumber)(n)?r/2-n/2:(0,o.isNumber)(t)?r/2-t/2:0}},842386:(e,t,r)=>{r.d(t,{clean:()=>f,copyCanvas:()=>g,domData:()=>v,drawBlurFromImage:()=>h,getAverageRGB:()=>l,getComputedFontFamily:()=>E,getOrientation:()=>c,getPositionWithGravity:()=>u,getRelativeXY:()=>a,getStickerSize:()=>T,hexToRgba:()=>i,hexToRgbaValues:()=>s,hsl2hex:()=>_,irand:()=>S,printAtWordWrap:()=>m,resetOrientation:()=>d,rgb2hsv:()=>p,rotateImageToCurrentAngle:()=>x});var o=r(208973),n=r(330995);function a(e,t){if(!t)return{x:0,y:0,xOrigin:0,yOrigin:0,width:0,height:0};const{left:r,top:o,width:n,height:a}=t.getBoundingClientRect();return{x:e.clientX-r,y:e.clientY-o,xOrigin:r,yOrigin:o,width:n,height:a}}function i(e,t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!r)return"rgba(0, 0, 0, 1)";return`rgba(${parseInt(r[1],16)}, ${parseInt(r[2],16)}, ${parseInt(r[3],16)}, ${t})`}function s(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)return{r:0,g:0,b:0};return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function l(e){const t=e.getContext("2d"),r={r:0,g:0,b:0};let o;if(!t)return r;try{o=t.getImageData(0,0,t.canvas.width,t.canvas.height)}catch(e){return r}let n=-4,a=0;for(;(n+=20)<o.data.length;)++a,r.r+=o.data[n],r.g+=o.data[n+1],r.b+=o.data[n+2];return r.r=~~(r.r/a),r.g=~~(r.g/a),r.b=~~(r.b/a),r}function c(e){return new Promise((t=>{const r=new FileReader;r.onload=e=>{if(!e.target)return;const r=e.target,o=new DataView(r.result);if(65496!==o.getUint16(0,!1))return t(-2);const n=o.byteLength;let a=2;for(;a<n;){if(o.getUint16(a+2,!1)<=8)return t(-1);let e=o.getUint16(a,!1);if(a+=2,65505===e){if(1165519206!==o.getUint32(a+=2,!1))return t(-1);let e=18761===o.getUint16(a+=6,!1);a+=o.getUint32(a+4,e);let r=o.getUint16(a,e);a+=2;for(let n=0;n<r;n++)if(274===o.getUint16(a+12*n,e))return t(o.getUint16(a+12*n+8,e))}else{if(65280!=(65280&e))break;a+=o.getUint16(a,!1)}}return t(-1)},r.readAsArrayBuffer(e)}))}function d(e,t){return new Promise(((r,o)=>{const n=new Image;n.onload=()=>{const e=n.width,a=n.height,i=document.createElement("canvas"),s=i.getContext("2d");if(!s)return o();switch(4<t&&t<9?(i.width=a,i.height=e):(i.width=e,i.height=a),t){case 2:s.transform(-1,0,0,1,e,0);break;case 3:s.transform(-1,0,0,-1,e,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,e);break;case 8:s.transform(0,-1,1,0,0,e)}s.drawImage(n,0,0),r(i.toDataURL())},n.src=e}))}function u(e,t,r,o,n,a,i){let s=0,l=0;switch(e){case"left_top":s=o+a,l=n+i;break;case"left_center":s=o+a,l=r/2+i;break;case"left_bottom":s=o+a,l=r-n+i;break;case"center_top":s=t/2+a,l=n+i;break;case"center":s=t/2+a,l=r/2+i;break;case"center_bottom":s=t/2+a,l=r-n+i;break;case"right_top":s=t-o+a,l=n+i;break;case"right_center":s=t-o+a,l=r/2+i;break;case"right_bottom":s=t-o+a,l=r-n+i}return{x:Math.round(s),y:Math.round(l)}}function h(e,t,r){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="rgb(30, 30, 30)",o.fillRect(0,0,e.width,e.height),o.save(),o.filter="blur(135px)",o.drawImage(t,0,0,e.width,e.height),o.restore(),"none"!==o.filter&&(o.fillStyle=`rgb(${r.r}, ${r.g}, ${r.b})`,o.fillRect(0,0,e.width,e.height)))}function p(e,t,r){let o=0,n=0,a=e/255,i=t/255,s=r/255,l=Math.max(a,i,s),c=l-Math.min(a,i,s);const d=e=>(l-e)/6/c+.5,u=e=>Math.round(100*e)/100;if(0!==c){n=c/l;const e=d(a),t=d(i),r=d(s);a===l?o=r-t:i===l?o=1/3+e-r:s===l&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)}return{h:Math.round(360*o),s:u(100*n),v:u(100*l)}}function _(e,t,r){t/=100,r/=100;let o=(1-Math.abs(2*r-1))*t,n=o*(1-Math.abs(e/60%2-1)),a=r-o/2,i=0,s=0,l=0;return 0<=e&&e<60?(i=o,s=n,l=0):60<=e&&e<120?(i=n,s=o,l=0):120<=e&&e<180?(i=0,s=o,l=n):180<=e&&e<240?(i=0,s=n,l=o):240<=e&&e<300?(i=n,s=0,l=o):300<=e&&e<360&&(i=o,s=0,l=n),i=Math.round(255*(i+a)).toString(16),s=Math.round(255*(s+a)).toString(16),l=Math.round(255*(l+a)).toString(16),1===i.length&&(i="0"+i),1===s.length&&(s="0"+s),1===l.length&&(l="0"+l),"#"+i+s+l}function g(e){var t;const r=document.createElement("canvas"),o=r.getContext("2d");return r.width=e.width,r.height=e.height,null==(t=o)||t.drawImage(e,0,0,e.width,e.height),r}function m(e,t,r,o,n,a){if((a=a||0)<=0)return void e.fillText(t,r,o);let i=t.replace(/(\v)/gm,"\n").split("\n"),s=0,l=1;for(;i.length>0&&l<=i.length;){const t=i.slice(0,l).join(" ");e.measureText(t).width>a?(1===l&&(l=2),e.fillText(i.slice(0,l-1).join(" "),r,o+n*s),s++,i=i.splice(l-1),l=1):l++}l>0&&e.fillText(i.join(" "),r,o+n*s)}function f(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function v(e,t,r){return e?void 0!==r?(null===r?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,r),r):e.getAttribute("data-"+t):null}const S=(e,t)=>Math.floor(((e,t)=>Math.random()*(t-e+1)+e)(e,t)),E=e=>{switch(e){case"typewriter":return o.default.typewriter;case"poster":return o.default.poster;case"retro":return o.default.retro;case"marker":return o.default.marker;case"italics":return o.default.italics;case"cursive":return o.default.cursive;case"classic":return o.default.classic;case"impact":return o.default.impact;case"lobster":return o.default.lobster;default:return}};function T(e,t,r){return e[r?`${t}b`:t]||e[t]}function x({url:e,angle:t}){var r;const o=document.createElement("canvas"),a=null==(r=o)?void 0:r.getContext("2d");return new Promise(((r,i)=>{n.imageCacheGlobal.get(e).then((e=>{let n=e.width,s=e.height;!t||t/90!=1&&t/90!=3||(n=e.height,s=e.width),o&&a?(o.width=n,o.height=s,a.translate(o.width/2,o.height/2),a.rotate(t*Math.PI/180),a.drawImage(e,-e.width/2,-e.height/2),o.toBlob((e=>{if(!e)return;const t=URL.createObjectURL(e);r({url:t,width:n,height:s})}),"image/jpeg",1)):i("Canvas error")})).catch((e=>{i(e)}))}))}},692002:(e,t,r)=>{function o(e){return function(e){return e&&"__esModule"in e&&!0===e.__esModule}(e)?e.default:e}r.d(t,{esModuleUnwrapDefault:()=>o})},721259:(e,t,r)=>{r.d(t,{browser:()=>n});const o=navigator.userAgent.toLowerCase(),n={version:(o.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(o)||/opr/i.test(o),vivaldi:/vivaldi/i.test(o),amigo:/amigo.*mrchrome soc/i.test(o),msie:/msie/i.test(o)&&!/opera/i.test(o)||/trident\//i.test(o)||/edge/i.test(o),msie6:/msie 6/i.test(o)&&!/opera/i.test(o),msie7:/msie 7/i.test(o)&&!/opera/i.test(o),msie8:/msie 8/i.test(o)&&!/opera/i.test(o),msie9:/msie 9/i.test(o)&&!/opera/i.test(o),msie_edge:/edge/i.test(o)&&!/opera/i.test(o),mozilla:/firefox/i.test(o),yabrowser:/yabrowser/i.test(o),whale:/whale/i.test(o),chrome:/chrome/i.test(o)&&!/edge/i.test(o),safari:!/chrome/i.test(o)&&/webkit|safari|khtml/i.test(o),iphone:/iphone/i.test(o),ipod:/ipod/i.test(o),iphone4:/iphone.*OS 4/i.test(o),ipod4:/ipod.*OS 4/i.test(o),ipad:/ipad/i.test(o),ios:/.+(ipod|ipad|iphone.*os)/i.test(o),android:/android/i.test(o),bada:/bada/i.test(o),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(o),msie_mobile:/iemobile/i.test(o),safari_mobile:/iphone|ipod|ipad/i.test(o),opera_mobile:/opera mini|opera mobi/i.test(o),opera_mini:/opera mini/i.test(o),mac:/mac/i.test(o),windows7:/windows nt 6.1/i.test(o),windowsVista:/windows nt 6.0/i.test(o),windowsXp:/windows nt (5.2|5.1)/i.test(o),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(o),smart_tv:/smart-tv|smarttv/i.test(o)}},531202:(e,t,r)=>{r.d(t,{loadImage:()=>o});const o=(e,t)=>new Promise(((r,o)=>{const n=new Image;n.crossOrigin="Anonymous",t&&(n.dataset.name=t),n.onerror=()=>{var t;const r=(null==(t=e)?void 0:t.startsWith("data:"))?"<dataURL>":e;o(new Error(`Failed to load image's URL: ${r}`))},n.onload=()=>{r(n)},n.src=e}))},427164:(e,t,r)=>{r.d(t,{default:()=>a});var o,n=r(310396);e=r.hmd(e),o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e;const a=(0,n.default)(o)},310396:(e,t,r)=>{function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,{default:()=>o})},619978:(e,t,r)=>{e.exports=r.p+"images/894a4bad6f3936dd9445.png"},713932:(e,t,r)=>{e.exports=r.p+"images/d76c3df1076f7efabc7d.png"},150531:(e,t,r)=>{e.exports=r.p+"images/e95e343f81803403d5d3.png"},773333:(e,t,r)=>{e.exports=r.p+"images/f873a6bb7bb460dfb539.png"},239022:(e,t,r)=>{e.exports=r.p+"images/8ff21c6e9f0a2788db49.png"},770805:(e,t,r)=>{e.exports=r.p+"images/842e80feda60b4718b10.png"},450795:(e,t,r)=>{e.exports=r.p+"images/352bb0d293c648a40028.png"},137429:(e,t,r)=>{e.exports=r.p+"images/abf5e076ba1b7cd28c89.png"},804194:(e,t,r)=>{e.exports=r.p+"images/e653d1e4f9de15944019.png"},167811:(e,t,r)=>{e.exports=r.p+"images/fc49bc4f2595c3f75d43.png"},940760:(e,t,r)=>{e.exports=r.p+"images/f564d813eeba2ab2a257.png"},93790:(e,t,r)=>{e.exports=r.p+"images/b0a46866fade1ae1a0c6.png"},780699:(e,t,r)=>{e.exports=r.p+"images/7d0e0fa74fbfe517a63c.png"},350704:(e,t,r)=>{e.exports=r.p+"images/0206c1608a7a28e29ab1.png"},600582:(e,t,r)=>{e.exports=r.p+"images/0e0e54c3291044088ce8.png"},265558:(e,t,r)=>{e.exports=r.p+"images/67d056c2554b7d1ceb6a.png"},791417:(e,t,r)=>{e.exports=r.p+"images/fc79828aadf10edcc85d.png"},393353:(e,t,r)=>{e.exports=r.p+"images/73005d8850c204a4ecd7.png"},99847:(e,t,r)=>{e.exports=r.p+"images/499fb00242bf9fa034ac.png"},702146:(e,t,r)=>{e.exports=r.p+"images/6152209fae492be8fc19.png"},825727:(e,t,r)=>{e.exports=r.p+"images/5548832dd35bb85bc6b5.png"},128399:(e,t,r)=>{e.exports=r.p+"images/c54637bd9fd6fcabbd1e.png"},527622:(e,t,r)=>{e.exports=r.p+"images/f593f66eddb36ba672e2.png"}}]);try{stManager.done("dist/9b69690c2f17eb6642dea9531af86fbd.c421afd1b03e35ace052.js")}catch(e){}