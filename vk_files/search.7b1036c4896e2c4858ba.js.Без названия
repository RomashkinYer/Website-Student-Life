/*! For license information please see search.7b1036c4896e2c4858ba.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={84562:(e,t,r)=>{r.d(t,{Icon16CheckOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon16CheckOutline","check_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="check_outline_16"><path fill-rule="evenodd" d="M12.782 4.721a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06 0l-2.502-2.5A.75.75 0 0 1 4.28 8.22l1.971 1.97 5.47-5.469a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},360646:(e,t,r)=>{r.d(t,{Icon16HistoryBackwardOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon16HistoryBackwardOutline","history_backward_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="history_backward_outline_16"><path d="M9.828 2.812a5.496 5.496 0 0 0-5.313.935h.735a.75.75 0 1 1 0 1.5H3.137c-.058 0-.139 0-.212-.006a1.003 1.003 0 0 1-.379-.103 1 1 0 0 1-.437-.437 1.003 1.003 0 0 1-.103-.378C2 4.248 2 4.167 2 4.11V2a.75.75 0 0 1 1.5 0v.64a6.997 6.997 0 0 1 10.255 9.345 6.998 6.998 0 0 1-7.553 2.78 7.07 7.07 0 0 1-2.96-1.615.75.75 0 1 1 1.016-1.103 5.571 5.571 0 0 0 2.33 1.268A5.496 5.496 0 0 0 13.5 7.962a5.5 5.5 0 0 0-3.672-5.15ZM7.75 5a.75.75 0 0 1 .75.75v2.473l1.32 1.539a.75.75 0 0 1-1.14.976l-1.5-1.75A.75.75 0 0 1 7 8.5V5.75A.75.75 0 0 1 7.75 5" /></symbol>',16,16,!1,void 0)},789862:(e,t,r)=>{r.d(t,{Icon16LockOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon16LockOutline","lock_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="lock_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M2 10c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093c.297-.15.645-.218 1.135-.248V4.5a3.5 3.5 0 1 1 7 0v1.524c.49.03.838.097 1.135.249a2.5 2.5 0 0 1 1.093 1.092C14 7.9 14 8.6 14 10v1c0 1.4 0 2.1-.272 2.635a2.5 2.5 0 0 1-1.093 1.093C12.1 15 11.4 15 10 15H6c-1.4 0-2.1 0-2.635-.272a2.5 2.5 0 0 1-1.092-1.093C2 13.1 2 12.4 2 11zm8-2.5H6c-.725 0-1.178.001-1.52.029-.324.027-.413.07-.434.08a1 1 0 0 0-.437.437c-.01.02-.053.11-.08.434-.028.342-.029.795-.029 1.52v1c0 .725.001 1.178.029 1.52.027.324.07.413.08.434a1 1 0 0 0 .437.437c.02.01.11.053.434.08.342.028.795.029 1.52.029h4c.725 0 1.178-.001 1.52-.03.324-.026.413-.069.434-.079a1 1 0 0 0 .437-.437c.01-.02.053-.11.08-.434.028-.342.029-.795.029-1.52v-1c0-.725-.001-1.178-.03-1.52-.026-.324-.069-.413-.079-.434a1 1 0 0 0-.437-.437c-.02-.01-.11-.053-.434-.08-.342-.028-.795-.029-1.52-.029ZM10 6H6V4.5a2 2 0 1 1 4 0z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},36193:(e,t,r)=>{r.d(t,{Icon20Add:()=>o});var o=(0,r(28178).makeIcon)("Icon20Add","add_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="add_20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},445264:(e,t,r)=>{r.d(t,{Icon20CheckAlt:()=>o});var o=(0,r(28178).makeIcon)("Icon20CheckAlt","check_alt_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="check_alt_20"><path fill-rule="evenodd" d="M16.659 5.344a1.162 1.162 0 0 1 0 1.645L8.82 14.812a1.167 1.167 0 0 1-1.649 0l-3.83-3.823a1.162 1.162 0 0 1 0-1.646 1.167 1.167 0 0 1 1.648 0l3.007 3 7.013-7a1.167 1.167 0 0 1 1.649 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},29157:(e,t,r)=>{r.d(t,{Icon20CheckCircleOff:()=>o});var o=(0,r(28178).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10m0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},810785:(e,t,r)=>{r.d(t,{Icon20DeleteClockOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20DeleteClockOutline","delete_clock_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_clock_outline_20"><path fill-rule="evenodd" d="M8.418 4a1.75 1.75 0 0 1 3.164 0zm-1.58 0a3.25 3.25 0 0 1 6.325 0h4.087a.75.75 0 0 1 0 1.5h-.545l-.155 1.573a.75.75 0 0 1-1.493-.146l.14-1.427H4.803l.896 9.14c.051.527.087.882.134 1.156.046.265.095.4.147.492a1.4 1.4 0 0 0 .654.593c.177.078.431.113 1.172.118a.75.75 0 0 1-.01 1.5c-.69-.005-1.261-.022-1.768-.246a2.9 2.9 0 0 1-1.354-1.228c-.17-.302-.259-.624-.319-.973a18.061 18.061 0 0 1-.146-1.238L3.295 5.5H2.75a.75.75 0 0 1 0-1.5h4.087ZM14 19c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8a.75.75 0 0 1 .75.75v1.849l.913.608a.75.75 0 1 1-.832 1.248l-1.247-.831A.75.75 0 0 1 13.25 14v-2.25A.75.75 0 0 1 14 11" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},910301:(e,t,r)=>{r.d(t,{Icon24ClockOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ClockOutline","clock_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="clock_outline_24"><path d="M12.4 8a.9.9 0 1 0-1.8 0v4.5a.9.9 0 0 0 .584.843l4 1.5a.9.9 0 0 0 .632-1.686l-3.416-1.28V8Z" /><path fill-rule="evenodd" d="M12 2.1c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},688999:(e,t,r)=>{r.d(t,{Icon56ReportOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon56ReportOutline","report_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="report_outline_56"><g fill="currentColor"><path fill-rule="evenodd" d="M17.06 5.318A4.5 4.5 0 0 1 20.244 4h15.514a4.5 4.5 0 0 1 3.182 1.318l11.743 11.743A4.5 4.5 0 0 1 52 20.243v15.514a4.5 4.5 0 0 1-1.318 3.182L38.939 50.682A4.5 4.5 0 0 1 35.757 52H20.243a4.5 4.5 0 0 1-3.182-1.318L5.318 38.939A4.5 4.5 0 0 1 4 35.757V20.243a4.5 4.5 0 0 1 1.318-3.182zM20.244 7a1.5 1.5 0 0 0-1.061.44L7.439 19.181A1.5 1.5 0 0 0 7 20.242v15.515c0 .398.158.78.44 1.061l11.742 11.743a1.5 1.5 0 0 0 1.06.439h15.515a1.5 1.5 0 0 0 1.061-.44l11.743-11.742a1.5 1.5 0 0 0 .44-1.06V20.242a1.5 1.5 0 0 0-.44-1.061L36.818 7.439A1.5 1.5 0 0 0 35.758 7z" clip-rule="evenodd" /><path d="M30 36a2 2 0 1 0-4 0 2 2 0 0 0 4 0M29.5 18a1.5 1.5 0 0 0-2.993-.145L26.5 18v11a1.5 1.5 0 0 0 2.993.145L29.5 29z" /></g></symbol>',56,56,!1,void 0)},108679:(e,t,r)=>{var o=r(659864),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function l(e){return o.isMemo(e)?s:i[e.$$typeof]||a}i[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[o.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,o){if("string"!=typeof r){if(p){var a=_(r);a&&a!==p&&e(t,a,o)}var s=d(r);u&&(s=s.concat(u(r)));for(var i=l(t),S=l(r),v=0;v<s.length;++v){var f=s[v];if(!(n[f]||o&&o[f]||S&&S[f]||i&&i[f])){var E=g(r,f);try{c(t,f,E)}catch(e){}}}}return t}},441143:e=>{e.exports=function(e,t,r,o,a,n,s,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,o,a,n,s,i],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},725602:(e,t,r)=>{r.d(t,{default:()=>o});const o={wrapper:"SearchInput-module__wrapper--HBTTP",inputWrap:"SearchInput-module__inputWrap--RwZpW",input:"SearchInput-module__input--OoBio",clearButton:"SearchInput-module__clearButton--DLioq",button:"SearchInput-module__button--iOQ0A"}},837960:()=>{},144311:(e,t,r)=>{r.d(t,{default:()=>o});const o={app:"App-module__app--sMbxh",search:"App-module__search--_fJCB"}},287063:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SearchResults-module__root--mnxjb",scroll:"SearchResults-module__scroll--P7w2c"}},642419:(e,t,r)=>{r.d(t,{default:()=>o});const o={spinner:"Spinner-module__spinner--pJOJK"}},869921:(e,t)=>{var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,i=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,g=r?Symbol.for("react.forward_ref"):60112,_=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,S=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,E=r?Symbol.for("react.fundamental"):60117,m=r?Symbol.for("react.responder"):60118,h=r?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case d:case u:case n:case i:case s:case _:return e;default:switch(e=e&&e.$$typeof){case c:case g:case v:case S:case l:return e;default:return t}}case a:return t}}}function w(e){return y(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=o,t.ForwardRef=g,t.Fragment=n,t.Lazy=v,t.Memo=S,t.Portal=a,t.Profiler=i,t.StrictMode=s,t.Suspense=_,t.isAsyncMode=function(e){return w(e)||y(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return y(e)===c},t.isContextProvider=function(e){return y(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return y(e)===g},t.isFragment=function(e){return y(e)===n},t.isLazy=function(e){return y(e)===v},t.isMemo=function(e){return y(e)===S},t.isPortal=function(e){return y(e)===a},t.isProfiler=function(e){return y(e)===i},t.isStrictMode=function(e){return y(e)===s},t.isSuspense=function(e){return y(e)===_},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===u||e===i||e===s||e===_||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===S||e.$$typeof===l||e.$$typeof===c||e.$$typeof===g||e.$$typeof===E||e.$$typeof===m||e.$$typeof===h||e.$$typeof===f)},t.typeOf=y},659864:(e,t,r)=>{e.exports=r(869921)},929804:(e,t,r)=>{var o=r(14890).compose;t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o:o.apply(null,arguments)}},898194:(e,t,r)=>{var o;r.d(t,{AudioPlayerAdapterPlaylistType:()=>o}),function(e){e.CURRENT="current",e.PLAYLIST="playlist",e.MY="my",e.ALBUM="album",e.TEMP="temp",e.RECOM="recoms",e.SEARCH="search",e.FEED="feed",e.LIVE="live",e.WALL="wall",e.RECENT="recent"}(o||(o={}))},180833:(e,t,r)=>{var o=r(798116),a=r(774462);a.$selectedIndex.reset(a.fireResetSelectionIndex),a.$itemsIndex.reset(a.fireResetItemsIndex),(0,o.sample)({clock:[a.fireUpSelectionIndex,a.fireDownSelectionIndex],fn:()=>!1,target:a.$isMouseActive}),(0,o.sample)({clock:a.fireSetSelectionIndexByItem,fn:()=>!0,target:a.$isMouseActive}),(0,o.sample)({clock:a.fireSetSelectionIndexByItem,source:a.$itemsIndex,fn:(e,t)=>e.findIndex((e=>e.id===t))||-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireDownSelectionIndex,source:{itemsIndex:a.$itemsIndex,selectedIndex:a.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?(t+1)%e.length:-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireUpSelectionIndex,source:{itemsIndex:a.$itemsIndex,selectedIndex:a.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?t-1<0?e.length-1:t-1:-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireSetItemIndex,source:a.$itemsIndex,fn:(e,t)=>{if(null===t)return[];const r=[...e],o=r.findIndex((e=>e.id===t.id));return-1!==o&&(r[o]=t),r.push(t),r},target:a.$itemsIndex}),(0,o.sample)({clock:a.$selectedIndex,source:{selectedItemIndex:a.$selectedItemIndex,itemsIndex:a.$itemsIndex},filter:({selectedItemIndex:e,itemsIndex:t},r)=>{var o,a,n,s;return(null==(o=t[r]||0===(null==(n=t)||null==(a=n[r])?void 0:a.id)?t[r]:null)?void 0:o.id)!==(null==(s=e)?void 0:s.id)},fn:({itemsIndex:e},t)=>{var r,o;return e[t]||0===(null==(o=e)||null==(r=o[t])?void 0:r.id)?e[t]:null},target:a.$selectedItemIndex})},738007:(e,t,r)=>{r.d(t,{getAPIErrorMessage:()=>a,isRequestAbortError:()=>n});var o=r(29271);const a=e=>e.error_text||e.error_msg||o.getLang("global_unknown_error"),n=e=>e instanceof DOMException&&(20===e.code||"AbortError"===e.name)},237421:(e,t,r)=>{var o,a,n,s=r(434788),i=r(785893),l=r(973935),c=r(54413),d=r(421553),u=r(293579),g=r(426848),_=r(824346),p=r(192220),S=r(714562),v=r(127822),f=r(321850);(null==(a=window.vk)||null==(o=a.pe)?void 0:o.static_manager_dynamic_imports)&&(null==(n=window.vk)?void 0:n.stDomain)&&(r.p=window.vk.stDomain+"/dist/"),window.searcher=c.searcher,window.iSearch=c.iSearch,window.searchActions=d.searchActions,window.slideShow=d.slideShow,window.slideHide=d.slideHide,(0,u.registerReactApplication)("SearchCatalogSuggester",(e=>{const t=e?(0,s._)({},e):null;t&&!t.triggers&&(t.triggers=(0,v.getTriggersMap)(t.type));const r=(0,u.getReactRootEl)("SearchCatalogSuggester");r&&l.render((0,i.jsx)(g.SearchCatalogSuggesterRoot,{initOptions:t}),r)})),(0,u.registerReactApplication)("SearchVideoCatalog",(()=>{const e=(0,u.getReactRootEl)("SearchVideoCatalog");e&&l.render((0,i.jsx)(_.SearchVideoCatalog,{}),e),(0,f.pushNavDestroy)((()=>{e&&l.unmountComponentAtNode(e)}))})),(0,u.registerReactApplication)("TopSearch",(()=>{const e=(0,u.getReactRootEl)("TopSearch");e&&l.render((0,i.jsx)(p.SearchTopRoot,{}),e)})),(0,u.registerReactApplication)("SearchAudioCatalog",(()=>{const e=(0,u.getReactRootEl)("SearchAudioCatalog");e&&l.render((0,i.jsx)(S.SearchAudioCatalogRoot,{}),e)}));try{window.stManager.done(window.jsc("web/search.js"))}catch(e){}},69438:(e,t,r)=>{r.d(t,{CatalogVideo:()=>v});var o=r(785893),a=r(768620),n=r(539791),s=r(12052),i=r(839470),l=r(327038),c=r(29271),d=r(810785),u=r(982555),g=r(243031),_=r(193452),p=r(508249),S=r(538310);const v=({catalog:e,extendedData:t,sections:r,onGetSection:v,blockLayoutResolver:f,search:E})=>{const m={pageId:"SearchVideo",catalogType:n.CatalogType.VIDEO},h={pageVerifiedTip:p.pageVerifiedTip,navGo:S.navGo,userId:window.vk.id};return(0,o.jsx)(a.CatalogSearchProvider,{showVideo:({event:e,id:t,video:r})=>{let o;!o&&window.Video&&window.Video.isGlobalSearchMode()&&window.Video.shouldShowSearchInPlaylistWithSearch()&&(o=window.Video.VIDEO_GLOBAL_SEARCH_TYPE);const a=r.viewed_duration?(0,n.getPlayFromByDuration)(r.viewed_duration):"";s.Video.show(e,t,{autoplay:1,queue:0,playlistId:o,playFrom:a,addParams:{track_code:r.track_code}},e.target)},getVideoCardWrapper:({video:e,handleFavToggle:t,owner:r,handleClickShowVideo:a})=>{if((0,i.partConfigEnabled)("video_showcase_search_vkcomkit_videocards")){const n=[],s=(0,i.partConfigEnabled)("video_bookmarks_renaming_to_watch_later");if(e.can_add_to_faves){const r=s?{onClick:t,children:e.is_favorite?c.getLang("video_remove_from_watch_later"):c.getLang("video_catalog_showcase_section_my_watch_later_title"),component:e.is_favorite?d.Icon20DeleteClockOutline:u.Icon20ClockOutline}:{onClick:t,children:e.is_favorite?c.getLang("global_remove_from_bookmarks"):c.getLang("global_add_to_bookmarks"),component:g.Icon20FavoriteOutline};n.push(r)}const p=[];return(0,o.jsx)(l.VideoCardWrapper,{video:e,owner:r,controls:p,actions:n,onVideoOpen:a,collectClick:_.searchStatsCollector.logEvent})}return null},showVideoMenu:(e,t)=>{var r;null==(r=window.VideoShowcase)||r.showVideoMenu(e,t)},search:E,children:(0,o.jsx)(n.Catalog,{collectClick:_.searchStatsCollector.logEvent,collectView:_.searchViewStatCollector.logEvent,catalog:e,extendedData:t,nextFromSections:r,onGetSection:v,catalogVars:m,platformVars:h,blockLayoutResolver:f})})}},552311:(e,t,r)=>{r.d(t,{SearchInput:()=>c});var o=r(785893),a=r(667294),n=r(29271),s=r(315954),i=r(195192),l=r(725602);const c=({onClick:e,onSubmit:t,onFocus:r,onBlur:c,onInput:d,onKeyDown:u,searchQuery:g="",placeholder:_,focusTrigger:p})=>{const S=(0,a.useRef)(null),[v,f]=(0,a.useState)("");return(0,a.useEffect)((()=>{f(g)}),[g]),(0,a.useEffect)((()=>{var e,t;null==(t=S)||null==(e=t.current)||e.focus()}),[p]),(0,o.jsxs)("div",{className:l.default.wrapper,children:[(0,o.jsxs)("div",{className:l.default.inputWrap,children:[(0,o.jsx)("input",{className:l.default.input,type:"search",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off",placeholder:_||n.getLang("global_search"),onClick:t=>{var r;null==(r=e)||r(t)},onFocus:e=>{var t;null==(t=r)||t(e)},onBlur:e=>{var t;null==(t=c)||t(e)},onInput:e=>{var t;const r=e.currentTarget.value||"";f(r),null==(t=d)||t(e)},onKeyDown:e=>{var t;null==(t=u)||t(e)},ref:S,value:v,id:"search_query"}),v&&(0,o.jsx)("button",{className:l.default.clearButton,onClick:()=>{var e,r,o;f(""),null==(r=S)||null==(e=r.current)||e.focus(),null==(o=t)||o("")},children:(0,o.jsx)(s.Icon24Cancel,{})})]}),(0,o.jsx)("button",{className:l.default.button,onClick:()=>{var e;null==(e=t)||e(v)},children:(0,o.jsx)(i.Icon16SearchOutline,{})})]})}},690743:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(552311)},714562:(e,t,r)=>{r.d(t,{SearchAudioCatalogRoot:()=>i});var o=r(785893),a=r(190147),n=r(772558),s=r(869048);const i=()=>(0,o.jsxs)(s.AppRootProvider,{children:[(0,o.jsx)(n.SearchInput,{}),(0,o.jsx)(a.SearchAudioCatalog,{})]})},411688:(e,t,r)=>{r.d(t,{SearchAudioCatalog:()=>u});var o=r(785893),a=r(667294),n=r(504190),s=r(898194),i=r(193452),l=r(539791),c=r(538310),d=r(648766);const u=()=>{var e,t;const r=(0,n.useStore)(d.searchAudioService.$audioSearchCatalog),u=(0,n.useStore)(d.extendedService.$data),g=(0,n.useStore)(d.searchAudioService.$isCatalogAudioSearchVisible),_=(0,n.useStore)(d.searchAudioService.$query),p=null==(e=r)?void 0:e.sections,S=(0,n.useEvent)(d.searchAudioService.setCatalogAudioSearchVisibleEvent),v=(0,n.useEvent)(d.catalogGetAudioSearchService.catalogSearchAudioEvent);if((0,a.useEffect)((()=>{g&&window.AudioPage.setVisibilitySectionsContent(!1)}),[g]),(0,a.useEffect)((()=>{if(!_)return window.AudioPage.setVisibilitySectionsContent(!0),void S(!1);v({query:_,need_blocks:1})}),[_]),(null==(t=p)?void 0:t.length)&&g){const e={navGo:c.navGo,userId:window.vk.id,musicPlayer:{playlistType:s.AudioPlayerAdapterPlaylistType.SEARCH}},t={catalogType:l.CatalogType.SEARCH,pageId:"SearchAudioCatalog"};return(0,o.jsx)(l.Catalog,{collectClick:i.searchStatsCollector.logEvent,collectView:i.searchViewStatCollector.logEvent,catalog:r,extendedData:u,nextFromSections:p,catalogVars:t,platformVars:e,blockLayoutResolver:l.mobileLayoutResolver})}return(0,o.jsx)(o.Fragment,{})}},190147:(e,t,r)=>{r.d(t,{SearchAudioCatalog:()=>o.SearchAudioCatalog});var o=r(411688)},932992:(e,t,r)=>{r.d(t,{SearchInput:()=>d});var o=r(785893),a=r(648766),n=r(504190),s=r(667294),i=r(690743),l=r(538310),c=r(106898);const d=()=>{const e=(0,s.useRef)(),[t,r]=(0,s.useState)((()=>new URLSearchParams(window.location.search).get("q")||"")),d=(0,n.useEvent)(a.searchAudioService.setQueryEvent),u=(0,n.useStore)(a.searchAudioService.$query),g=(0,s.useCallback)((e=>{const t=new URLSearchParams(window.location.search);t.set("q",e);const r=(0,c.encodeUrlSearchParams)(Object.fromEntries(t.entries()),"?");(0,l.navGo)(`${window.location.pathname}${r}`,null)}),[]);(0,s.useEffect)((()=>{d(t)}),[]),(0,s.useEffect)((()=>{r(u)}),[u]);const _=(0,s.useCallback)((t=>{const o=t.currentTarget.value;r(o),clearTimeout(e.current),e.current=setTimeout((()=>{g(o)}),220)}),[]),p=(0,s.useCallback)((t=>{clearTimeout(e.current),g(t)}),[g]);return(0,o.jsx)(i.SearchInput,{onInput:_,onSubmit:p,searchQuery:t})}},772558:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(932992)},468114:(e,t,r)=>{r.d(t,{createExtendedService:()=>n});var o=r(798116);const a=e=>Object.values(e).filter((e=>Boolean(e))),n=({entitiesGroupsService:e,entitiesUsersService:t,entitiesVideoAlbumsService:r,entitiesVideoService:n,searchAudioService:s})=>{const{$entitiesGroups:i}=e,{$entitiesUsers:l}=t,{$entitiesVideo:c}=n,{$entitiesVideoAlbums:d}=r,{$audios:u,$playlists:g,$links:_}=s,p=i.map(a),S=l.map(a),v=c.map(a),f=d.map(a);return{$data:(0,o.combine)({groups:p,profiles:S,videos:v,albums:f,audios:u,playlists:g,links:_},(({albums:e,groups:t,profiles:r,videos:o,audios:a,playlists:n,links:s})=>({albums:e,groups:t,profiles:r,videos:o,audios:a,playlists:n,links:s})))}}},284956:(e,t,r)=>{r.d(t,{createSearchAudioService:()=>s});var o=r(538310),a=r(798116),n=r(600112);const s=({domain:e,catalogGetAudioSearchService:t})=>{const{catalogGetAudioSearchFx:r,catalogSearchAudioEvent:s}=t,i=e.createStore([]),l=e.createStore([]),c=e.createStore([]),d=e.createStore(!1),u=e.createStore(""),g=e.createStore({sections:[],default_section:""}),_=e.createEvent(),p=e.createEvent(),S=e.createEffect(n.checkSearchLoc);return(0,o.subscribeNavLocationChange)(S),(0,a.sample)({clock:S.doneData,source:u,filter:(e,t)=>t!==e,fn:(e,t)=>t,target:u}),(0,a.sample)({clock:p,target:u}),(0,a.sample)({clock:[s,_],source:r}).watch((e=>{var t;null==(t=e.controller)||t.abort()})),(0,a.sample)({clock:_,target:d}),(0,a.sample)({clock:r.doneData,fn:()=>!0,target:_}),(0,a.sample)({clock:r.doneData,filter:({catalog:e})=>Boolean(e),fn:({catalog:e={sections:[],default_section:""}})=>e,target:g}),(0,a.sample)({clock:r.doneData,filter:({audios:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({audios:e=[]})=>e,target:i}),(0,a.sample)({clock:r.doneData,filter:({playlists:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({playlists:e=[]})=>e,target:l}),(0,a.sample)({clock:r.doneData,filter:({links:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({links:e=[]})=>e,target:c}),{$audios:i,$playlists:l,$links:c,$isCatalogAudioSearchVisible:d,$audioSearchCatalog:g,$query:u,setCatalogAudioSearchVisibleEvent:_,setQueryEvent:p}}},648766:(e,t,r)=>{r.d(t,{catalogGetAudioSearchService:()=>E,extendedService:()=>h,searchAudioService:()=>m});var o=r(468114),a=r(284956),n=r(798116),s=r(481954),i=r(330943),l=r(336547),c=r(555888),d=r(796615),u=r(713990);const g=(0,n.createDomain)("search/SearchAudioCatalog"),_=(0,s.createEntitiesCatalogSectionsService)({domain:g}),p=(0,i.createEntitiesGroupsService)({domain:g}),S=(0,l.createEntitiesUsersService)({domain:g}),v=(0,c.createEntitiesVideoAlbumService)({domain:g}),f=(0,d.createEntitiesVideoService)({domain:g,entitiesGroupsService:p,entitiesUsersService:S}),E=(0,u.createCatalogGetAudioSearchService)({domain:g,entitiesCatalogSections:_,entitiesUsersService:S,entitiesGroupsService:p,entitiesVideoService:f,entitiesVideoAlbumsService:v}),m=(0,a.createSearchAudioService)({domain:g,catalogGetAudioSearchService:E}),h=(0,o.createExtendedService)({entitiesGroupsService:p,entitiesUsersService:S,entitiesVideoAlbumsService:v,entitiesVideoService:f,searchAudioService:m})},600112:(e,t,r)=>{r.d(t,{checkSearchLoc:()=>a});const o=/audios\d+\?(.+)/,a=e=>{const t=e.match(o);if(t){const e=t[1];var r;return null!=(r=new URLSearchParams(e).get("q"))?r:""}return""}},426848:(e,t,r)=>{r.d(t,{SearchCatalogSuggesterRoot:()=>i});var o=r(785893),a=r(50533),n=r(281858),s=r(391345);const i=({initOptions:e})=>(0,o.jsx)(a.Provider,{store:n.suggesterStore,children:(0,o.jsx)(s.SearchForm,{options:e})})},356571:(e,t,r)=>{r.d(t,{Catalog:()=>i});var o=r(434788),a=r(785893),n=r(667294),s=r(166455);const i=({catalog:e})=>{var t,r;const i=null==(r=e)||null==(t=r.sections)?void 0:t.find((({id:t})=>{var r;return t===(null==(r=e)?void 0:r.default_section)})),l=(0,s.extractBlocks)(i);return(0,a.jsx)(a.Fragment,{children:l.map((e=>{const t=(0,s.getBlockByLayout)(e);return(0,n.createElement)(t,(0,o._)({},e,{key:e.id}))}))})}},912826:(e,t,r)=>{r.d(t,{HeaderCompact:()=>a});var o=r(785893);const a=e=>(0,o.jsx)("div",{children:(0,o.jsx)("h3",{className:"SuggestionItemsTitle",children:e.layout.title})},e.id)},912562:(e,t,r)=>{r.d(t,{HeaderCompact:()=>o.HeaderCompact});var o=r(912826)},721600:(e,t,r)=>{r.d(t,{SuggesterBlock:()=>i});var o=r(785893),a=r(667294),n=r(596535),s=r(652427);const i=e=>{const{searchQuery:t,recentSuggestions:r,otherSuggestions:i,selectedSuggestion:l,triggerSearch:c,lastQuery:d}=(0,n.useTypedSelector)((e=>{var t;return{searchQuery:e.searchInput.query,catalog:e.catalog.catalog,recentSuggestions:e.suggester.recentSuggests,otherSuggestions:e.suggester.otherSuggests,selectedSuggestion:e.suggester.selectedSuggest,helpSuggest:e.suggester.helpSuggest,triggerSearch:null==(t=e.initOptions.triggers)?void 0:t.triggerSearch,lastQuery:e.catalog.lastQuery}})),u=(0,a.useMemo)((()=>{let t=[...r,...i];return e.suggestions_ids&&(t=t.filter((({id:t=""})=>{var r,o;return null==(o=e)||null==(r=o.suggestions_ids)?void 0:r.includes(t)}))),e.search_suggestions_ids&&(t=t.filter((({id:t=""})=>{var r,o;return null==(o=e)||null==(r=o.search_suggestions_ids)?void 0:r.includes(t)}))),t}),[r,i,t,d,l]);return(0,o.jsx)("div",{className:"SuggesterBlock",children:(0,o.jsx)(s.SuggestionItems,{suggestions:u,selectedId:l,triggerSearch:c})})}},652427:(e,t,r)=>{r.d(t,{SuggestionItems:()=>_});var o=r(785893),a=r(667294),n=r(360646),s=r(195192),i=r(29271),l=r(254362),c=r(331251),d=r(659397),u=r(193452),g=r(957973);const _=({suggestions:e,selectedId:t,triggerSearch:r})=>{const{setSearchQuery:_,hideSuggest:p,deleteRecent:S,search:v,deleteRecentBlock:f}=(0,l.useAction)(),E=(0,a.useCallback)(((e,t="")=>{const o=(0,c.getMainInput)(),a=window.uiSearch.getWrapEl(o);_(t),v(o,a,t,r,e),p(a),u.searchStatsCollector.logEvent({action:g.SearchClickActionMap.TAP,track_code:e,type:g.EventItemType.SEARCH_SUGGESTION})}),[]),m=(0,a.useCallback)(((t,r,o)=>{t.stopPropagation(),S(o||""),u.searchStatsCollector.logEvent({action:g.SearchClickActionMap.REMOVE_RECENT,track_code:r,type:g.EventItemType.SEARCH_SUGGESTION});1===e.length&&f()}),[e]);return(0,o.jsx)(o.Fragment,{children:e.map((e=>(0,o.jsxs)("div",{className:(0,d.classNames)("SuggestionItemsItem",{"SuggestionItemsItem--selected":t===e.id}),onClick:()=>{var t;return E((null==(t=e)?void 0:t.track_code)||"",e.title)},children:[(0,o.jsx)("div",{className:"SuggestionItemsItemIcon",children:"recent"===e.type?(0,o.jsx)(n.Icon16HistoryBackwardOutline,{}):(0,o.jsx)(s.Icon16SearchOutline,{})}),(0,o.jsx)("p",{className:"SuggestionItemsText",children:e.title}),"recent"===e.type?(0,o.jsx)("button",{className:"SuggestionItemsDelete",onClick:t=>{var r;return m(t,(null==(r=e)?void 0:r.track_code)||"",e.id)},children:i.getLang("search_web_video_suggester_delete_action")}):null]},e.id)))})}},670446:(e,t,r)=>{r.d(t,{SuggesterBlock:()=>o.SuggesterBlock});var o=r(721600)},118330:(e,t,r)=>{r.d(t,{HeaderCompact:()=>a.HeaderCompact,SuggesterBlock:()=>o.SuggesterBlock});var o=r(670446),a=r(912562)},491434:(e,t,r)=>{r.d(t,{Catalog:()=>o.Catalog,HeaderCompact:()=>a.HeaderCompact,SuggesterBlock:()=>a.SuggesterBlock});var o=r(356571),a=r(118330)},166455:(e,t,r)=>{r.d(t,{extractBlocks:()=>n,getBlockByLayout:()=>s});var o=r(906019),a=r(732292);const n=e=>{var t,r;return(null==(r=e)||null==(t=r.blocks)?void 0:t.length)?e.blocks:[]},s=e=>{const t=e.layout.name,r=e.data_type;switch(t){case o.ESearchCatalogBlockLayoutName.LIST:return r===o.ESearchCatalogBlockDataType.CATALOG_SEARCH_SUGGESTION||r===o.ESearchCatalogBlockDataType.SEARCH_SUGGESTION?a.SuggesterBlock:()=>null;case o.ESearchCatalogBlockLayoutName.HEADER_COMPACT:return a.HeaderCompact;default:return()=>null}}},49593:(e,t,r)=>{r.d(t,{InputHelpSuggest:()=>s});var o=r(785893),a=r(973935),n=r(906019);const s=({helpSuggestStart:e="",helpSuggestEnd:t=""})=>{var r;const s=null==(r=document.querySelector(n.SEARCH_INPUT_ELEMENT_ID))?void 0:r.parentElement;return a.createPortal((0,o.jsxs)("div",{className:"InputHelpSuggest",children:[(0,o.jsx)("span",{className:"InputHelpSuggest__hidden",children:e}),t]}),s)}},947139:(e,t,r)=>{r.d(t,{SearchInput:()=>_});var o=r(785893),a=r(667294),n=r(331251),s=r(254362),i=r(82161),l=r(953908),c=r(906019),d=r(596535),u=r(49593),g=r(858431);const _=({options:e})=>{const{query:t,isWaitingForShow:r,allSuggests:_,selectedSuggestId:p,helpSuggest:S,helpSuggestStart:v,helpSuggestEnd:f,helpTrigger:E,shouldBeClosed:m}=(0,d.useTypedSelector)((e=>({query:e.searchInput.query,isWaitingForShow:e.suggester.isWaitingForShow,allSuggests:e.suggester.allSuggests,selectedSuggestId:e.suggester.selectedSuggest,helpSuggestStart:e.suggester.helpSuggestStart,helpSuggestEnd:e.suggester.helpSuggestEnd,helpSuggest:e.suggester.helpSuggest,helpTrigger:e.suggester.helpTrigger,shouldBeClosed:e.suggester.shouldBeClosed}))),{initOptions:h,setSearchQuery:y,startShowingSuggest:w,showSuggest:C,hideSuggest:b,chooseAbove:A,chooseBelow:I,search:T,resetSelectedSuggest:k,resetHelpSuggest:R,triggerHelpSuggest:O,resetTempSuggesterData:x,resetClosedSuggesterStatus:P}=(0,s.useAction)(),[V,D]=(0,a.useState)((0,n.getQueryFromNav)()),L=(0,g.useDebounce)(V,c.DEBOUNCE_TIME);(0,a.useEffect)((()=>{k(),y(L)}),[L]);const F=(0,a.useCallback)((t=>{var r;const o=t.target,a=window.uiSearch.getWrapEl(o),n=(0,i.trim)(o.value)?o.value:"";var s,c,d;n||((null==(s=e)?void 0:s.allowFiltersForEmpty)||window.uiSearch.removeAllFilters(o),window.uiSearch.hideProgress(o));if(null==(r=e)?void 0:r.useInstantSearch)return x(),void T(o,a,n,null==(d=e)||null==(c=d.triggers)?void 0:c.triggerSearch);const u=t;[l.KEY.UP,l.KEY.DOWN,l.KEY.RIGHT,l.KEY.LEFT,l.KEY.SPACE].includes(u.keyCode)||D(n)}),[t,S,e]),q=(0,a.useCallback)((t=>{const r=(0,n.getMainInput)(),o=window.uiSearch.getWrapEl(r),a=(0,i.trim)(r.value)?r.value:"";switch(t.keyCode){case l.KEY.ENTER:var s,c;T(r,o,a,null==(c=e)||null==(s=c.triggers)?void 0:s.triggerSearch),b(o),x();break;case l.KEY.ESC:r.blur(),b(o),x();break;case l.KEY.UP:A(),r.setSelectionRange(r.value.length,r.value.length);break;case l.KEY.DOWN:I();break;case l.KEY.RIGHT:O();break;case l.KEY.TAB:case l.KEY.SHIFT:case l.KEY.CTRL:case l.KEY.ALT:case l.KEY.META_LEFT:case l.KEY.META_RIGHT:break;default:R()}}),[]),M=(0,a.useCallback)((()=>{var t,r;const o=document.querySelector(c.SEARCH_INPUT_ELEMENT_ID),a=window.uiSearch.getWrapEl(o),n=(0,i.trim)(o.value)?(0,i.trim)(o.value):"";x(),T(o,a,n,null==(r=e)||null==(t=r.triggers)?void 0:t.triggerSearch),b(a)}),[t]),$=(0,a.useCallback)((e=>{var t,r;const o=e.target,a=window.uiSearch.getWrapEl(document.querySelector(c.SEARCH_INPUT_ELEMENT_ID));(null==(r=a)||null==(t=r.classList)?void 0:t.contains(c.SEARCH_SUGGESTER_OPEN_CLASS))&&(o.closest(c.SEARCH_INPUT_ELEMENT_ID)||o.closest(".SearchCatalogSuggester")||o.closest(".ui_search_reset_button")||(x(),b(a)))}),[]),G=(0,a.useCallback)((e=>{var t,r,o;const a=e,n=(null==(t=a)?void 0:t.ctrlKey)||(null==(r=a)?void 0:r.metaKey);if([l.KEY.ENTER,l.KEY.ESC].includes(a.keyCode)||n)return;switch(a.keyCode){case l.KEY.TAB:case l.KEY.SHIFT:case l.KEY.CTRL:case l.KEY.ALT:case l.KEY.META_LEFT:case l.KEY.META_RIGHT:return}const s=e.target,i=window.uiSearch.getWrapEl(s);!m||_.length||(null==(o=s)?void 0:o.value)?(P(),C(i)):w()}),[m,_]),B=(0,a.useCallback)((()=>{S&&y(S)}),[S]),N=(0,a.useCallback)((e=>{var t;x();const r=e.target,o=window.uiSearch.getWrapEl(r);!m||_.length||(null==(t=r)?void 0:t.value)?(P(),C(o)):w(),y(""),w()}),[e,m,_]),j=(0,a.useCallback)((()=>{x(),y("")}),[]);return(0,a.useEffect)((()=>{var t,r;e&&h(e);const o=(0,n.getMainInput)(),a=window.uiSearch.getWrapEl(o).querySelector(".ui_search_button_search"),s=[...document.querySelectorAll(".MenuList__item")];return(null==(t=o)?void 0:t.value)&&y(o.value),(0,l.addEvent)(o,"input change keyup valueChanged refresh",F),(0,l.addEvent)(o,"keydown",q),(0,l.addEvent)(a,"click",M),(0,l.addEvent)(window,"mousedown",$),(null==(r=s)?void 0:r.length)&&s.map((e=>(0,l.addEvent)(e,"click",j))),()=>{var e;(0,l.removeEvent)(o,"input change keyup valueChanged refresh",F),(0,l.removeEvent)(o,"keydown",q),(0,l.removeEvent)(a,"click",M),(0,l.removeEvent)(window,"mousedown",$),(null==(e=s)?void 0:e.length)&&s.map((e=>(0,l.removeEvent)(e,"click",j)))}}),[]),(0,a.useEffect)((()=>{var t;e&&h(e);const r=(0,n.getMainInput)(),o=window.uiSearch.getWrapEl(r).querySelector(".ui_search_reset_button");return(null==(t=r)?void 0:t.value)&&y(r.value),(0,l.addEvent)(r,"click keyup keydown",G),(0,l.addEvent)(o,"click",N),()=>{(0,l.removeEvent)(r,"click keyup keydown",G),(0,l.removeEvent)(o,"click",N)}}),[e,m]),(0,a.useEffect)((()=>{var e;const t=(0,n.getMainInput)(),o=window.uiSearch.getWrapEl(t);r&&(_.length||(null==(e=t)?void 0:e.value))&&C(o)}),[e,_,t,r]),(0,a.useEffect)((()=>{const e=(0,n.getMainInput)();e&&t!==e.value&&(e.value=t,e.setSelectionRange(e.value.length,e.value.length))}),[t]),(0,a.useEffect)((()=>{var e;const t=_.find((({id:e})=>e===p));(null==(e=t)?void 0:e.title)&&y(t.title)}),[p]),(0,a.useEffect)((()=>{B()}),[E]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.InputHelpSuggest,{helpSuggestStart:v||"",helpSuggestEnd:f||""})})}},174078:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(947139)},133815:(e,t,r)=>{r.d(t,{Suggester:()=>u});var o=r(785893),a=r(667294),n=r(254362),s=r(732292),i=r(596535),l=r(795558),c=r(331251),d=r(906019);const u=({options:e})=>{var t,r;const{catalog:u,searchQuery:g,isOpen:_,canFetch:p,allSuggests:S,lastQuery:v,shouldBeClosed:f,isWaitingForShow:E}=(0,i.useTypedSelector)((e=>{var t,r,o,a;return{catalog:null==(t=e)?void 0:t.catalog.catalog,searchQuery:null==(r=e)?void 0:r.searchInput.query,isOpen:null==(o=e)?void 0:o.suggester.isOpen,isWaitingForShow:null==(a=e)?void 0:a.suggester.isWaitingForShow,allSuggests:e.suggester.allSuggests,canFetch:!e.suggester.selectedSuggest,lastQuery:e.catalog.lastQuery,shouldBeClosed:e.suggester.shouldBeClosed}})),{fetchCatalog:m,setSuggestions:h,setHelpSuggest:y,resetDeletedSuggest:w,hideSuggest:C}=(0,n.useAction)();return(0,a.useEffect)((()=>{u&&h(u)}),[u]),(0,a.useEffect)((()=>{p&&(_||E)&&g!==v&&(w(),m({q:g}))}),[e,g,_,E,v,p]),(0,a.useEffect)((()=>{y(g)}),[g,S]),(0,a.useEffect)((()=>{if(g){const e=(0,c.getMainInput)(),t=window.uiSearch.getWrapEl(e);(0,l.toggleClass)(t,d.SEARCH_EMPTY_FIELD_CLASS,!g)}}),[]),(0,a.useEffect)((()=>{if(f){var e;const t=(0,c.getMainInput)(),r=window.uiSearch.getWrapEl(t);(null==(e=t)?void 0:e.value)||C(r)}}),[e,f]),_&&(null==(t=u)?void 0:t.catalog)?(0,o.jsx)("div",{className:"SearchCatalogSuggester",children:(0,o.jsx)(s.Catalog,{catalog:null==(r=u)?void 0:r.catalog})}):null}},485211:(e,t,r)=>{r.d(t,{Suggester:()=>o.Suggester});var o=r(133815)},732292:(e,t,r)=>{r.d(t,{Catalog:()=>a.Catalog,HeaderCompact:()=>a.HeaderCompact,SearchInput:()=>n.SearchInput,Suggester:()=>o.Suggester,SuggesterBlock:()=>a.SuggesterBlock});var o=r(485211),a=r(491434),n=r(174078)},906019:(e,t,r)=>{r.d(t,{API_GET_VIDEO_SEARCH:()=>d,API_GET_VIDEO_SEARCH_WEB:()=>u,API_REMOVE_RESENT_QUERY:()=>c,DEBOUNCE_TIME:()=>l,ESearchCatalogBlockDataType:()=>_,ESearchCatalogBlockLayoutName:()=>g,IMMEDIATELY_TIMER:()=>i,LAT:()=>p,RUS:()=>S,SEARCH_EMPTY_FIELD_CLASS:()=>n,SEARCH_INPUT_ELEMENT_ID:()=>a,SEARCH_SUGGESTER_OPEN_CLASS:()=>s,SEARCH_WRAPPER_ELEMENT_ID:()=>o});const o="video_search_input_wrapper",a="#video_search_input",n="ui_search_field_empty",s="VideoSearchInput__withNewSuggester--open",i=0,l=200,c="search.removeVideoSearchRecentQuery",d="catalog.getVideoSearch",u="catalog.getVideoSearchWeb2";var g,_;!function(e){e.LIST="list",e.HEADER_COMPACT="header_compact"}(g||(g={})),function(e){e.CATALOG_SEARCH_SUGGESTION="catalog_search_suggestion",e.SEARCH_SUGGESTION="search_suggestions"}(_||(_={}));const p="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ ",S="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ "},301789:(e,t,r)=>{r.d(t,{SearchForm:()=>n});var o=r(785893),a=r(732292);const n=({options:e})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.SearchInput,{options:e}),(0,o.jsx)(a.Suggester,{options:e})]})},391345:(e,t,r)=>{r.d(t,{SearchForm:()=>o.SearchForm});var o=r(301789)},254362:(e,t,r)=>{r.d(t,{useAction:()=>s});var o=r(50533),a=r(14890),n=r(302644);const s=()=>{const e=(0,o.useDispatch)();return(0,a.bindActionCreators)(n.ActionCreators,e)}},858431:(e,t,r)=>{r.d(t,{useDebounce:()=>a});var o=r(667294);const a=(e="",t=0)=>{const[r,a]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[e]),r}},596535:(e,t,r)=>{r.d(t,{useTypedSelector:()=>o});const o=r(50533).useSelector},596654:(e,t,r)=>{r.r(t),r.d(t,{deleteRecentBlock:()=>d,fetchCatalog:()=>c});var o=r(11010),a=r(434788),n=r(599809),s=r(861928),i=r(906019);let l=null;const c=e=>(0,o._)((function*(t){t({type:s.CatalogActions.START_LOADING,payload:e.q||""}),l&&l.abort(),l=new AbortController;const r=e.q?i.API_GET_VIDEO_SEARCH:i.API_GET_VIDEO_SEARCH_WEB;try{var o;const i=yield(0,n.api)(r,(0,a._)({},e,{need_blocks:1,show_suggests:1}),void 0,{signal:l.signal});(null==(o=i.suggestions)?void 0:o.length)&&i.suggestions[0]&&(window.cur.videoSearchTrackCodeForQID=i.suggestions[0].track_code||""),t({type:s.CatalogActions.FETCH,payload:i}),t({type:s.CatalogActions.STOP_LOADING})}catch(e){var c,d,u;if(e&&"network_error"===(null==(c=e)?void 0:c.type)&&"AbortError"===(null==(u=e)||null==(d=u.error)?void 0:d.name))return null;throw e}})),d=()=>e=>{e({type:s.CatalogActions.REMOVE_RECENT})}},302644:(e,t,r)=>{r.d(t,{ActionCreators:()=>l});var o=r(434788),a=r(217192),n=r(596654),s=r(129324),i=r(366853);const l=(0,o._)({},a,n,s,i)},217192:(e,t,r)=>{r.r(t),r.d(t,{initOptions:()=>a});var o=r(861928);const a=e=>t=>{t({type:o.InitOptionsActionType.INIT,payload:e})}},129324:(e,t,r)=>{r.r(t),r.d(t,{search:()=>i,setSearchQuery:()=>l});var o=r(326646),a=r(82161),n=r(795558),s=r(906019);const i=(e,t,r="",i,l)=>c=>{if(i){var d;const u=(0,a.trim)(r)?(0,a.trim)(r):"";(0,n.toggleClass)(t,s.SEARCH_EMPTY_FIELD_CLASS,!u),null==(d=i)||d.call(e,u,void 0,l),c({type:o.SearchInputActions.SEARCH,payload:u})}},l=e=>t=>{t({type:o.SearchInputActions.SET_QUERY,payload:e})}},366853:(e,t,r)=>{r.r(t),r.d(t,{chooseAbove:()=>g,chooseBelow:()=>_,deleteRecent:()=>u,hideSuggest:()=>l,resetClosedSuggesterStatus:()=>c,resetDeletedSuggest:()=>S,resetHelpSuggest:()=>E,resetSelectedSuggest:()=>p,resetTempSuggesterData:()=>m,setHelpSuggest:()=>v,setSuggestions:()=>d,showSuggest:()=>i,startShowingSuggest:()=>s,triggerHelpSuggest:()=>f});var o=r(861928),a=r(599809),n=r(906019);const s=()=>e=>{e({type:o.SuggesterActions.START_SHOW})},i=e=>t=>{var r;(null==(r=e)?void 0:r.classList.contains(n.SEARCH_SUGGESTER_OPEN_CLASS))||(e.classList.add(n.SEARCH_SUGGESTER_OPEN_CLASS),t({type:o.SuggesterActions.SHOW,payload:e}))},l=e=>t=>{var r,a;null==(a=e)||null==(r=a.classList)||r.remove(n.SEARCH_SUGGESTER_OPEN_CLASS),t({type:o.SuggesterActions.HIDE})},c=()=>e=>{e({type:o.SuggesterActions.RESET_CLOSED_STATUS})},d=e=>t=>{var r;t({type:o.SuggesterActions.SET_SUGGESTS,payload:{suggests:(null==(r=e)?void 0:r.suggestions)||[]}})},u=e=>t=>{e&&((0,a.api)(n.API_REMOVE_RESENT_QUERY,{query_id:e}),t({type:o.SuggesterActions.DELETE_RECENT,payload:e}))},g=()=>e=>{e({type:o.SuggesterActions.CHOOSE_ABOVE})},_=()=>e=>{e({type:o.SuggesterActions.CHOOSE_BELOW})},p=()=>e=>{e({type:o.SuggesterActions.RESET_SELECTED})},S=()=>e=>{e({type:o.SuggesterActions.RESET_DELETED})},v=(e="")=>t=>{t({type:o.SuggesterActions.SET_HELP_SUGGEST,payload:e})},f=()=>e=>{e({type:o.SuggesterActions.TRIGGER_HELP_SUGGEST})},E=()=>e=>{e({type:o.SuggesterActions.RESET_HELP_SUGGEST})},m=()=>e=>{e({type:o.SuggesterActions.RESET_TEMP_SUGGESTER_DATA})}},281858:(e,t,r)=>{r.d(t,{suggesterStore:()=>i});var o=r(14890),a=r(753894),n=r(213435);const s=r(929804).composeWithDevTools((0,o.applyMiddleware)(a.default)),i=(0,o.createStore)(n.rootReducer,s)},619780:(e,t,r)=>{r.d(t,{catalogReducer:()=>s});var o=r(434788),a=r(861928);const n={catalog:{},lastQuery:null,loading:!1},s=(e=n,t)=>{switch(t.type){case a.CatalogActions.START_LOADING:return(0,o._)({},e,{loading:!0,lastQuery:t.payload});case a.CatalogActions.STOP_LOADING:return(0,o._)({},e,{loading:!1});case a.CatalogActions.FETCH:return(0,o._)({},e,{catalog:t.payload});case a.CatalogActions.REMOVE_RECENT:return(0,o._)({},e,{catalog:{}});default:return e}}},213435:(e,t,r)=>{r.d(t,{rootReducer:()=>l});var o=r(14890),a=r(350158),n=r(619780),s=r(531855),i=r(397195);const l=(0,o.combineReducers)({initOptions:a.initOptionsReducer,catalog:n.catalogReducer,searchInput:s.searchInputReducer,suggester:i.suggesterReducer})},350158:(e,t,r)=>{r.d(t,{initOptionsReducer:()=>s});var o=r(434788),a=r(861928);const n={useInstantSearch:!0,type:"video"},s=(e=n,t)=>t.type===a.InitOptionsActionType.INIT?(0,o._)({},e,t.payload):e},531855:(e,t,r)=>{r.d(t,{searchInputReducer:()=>i});var o=r(434788),a=r(331251),n=r(861928);const s={query:(0,a.getQueryFromNav)(),lastSearchRequest:""},i=(e=s,t)=>{switch(t.type){case n.SearchInputActions.SET_QUERY:return(0,o._)({},e,{query:t.payload});case n.SearchInputActions.SEARCH:return(0,o._)({},e,{lastSearchRequest:t.payload});default:return e}}},397195:(e,t,r)=>{r.d(t,{suggesterReducer:()=>i});var o=r(434788),a=r(861928),n=r(906019);const s={isOpen:!1,isWaitingForShow:!1,shouldBeClosed:!1,suggestsOrderIds:[],allSuggests:[],recentSuggests:[],otherSuggests:[],deletedSuggests:[],selectedSuggest:null,helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null,helpTrigger:!1},i=(e=s,t)=>{switch(t.type){case a.SuggesterActions.START_SHOW:var r;return(0,o._)({},e,{isWaitingForShow:!(null==(r=e)?void 0:r.isOpen)});case a.SuggesterActions.SHOW:return(0,o._)({},e,{isOpen:!0,isWaitingForShow:!1});case a.SuggesterActions.HIDE:return(0,o._)({},e,{isOpen:!1});case a.SuggesterActions.RESET_CLOSED_STATUS:return(0,o._)({},e,{shouldBeClosed:!1});case a.SuggesterActions.SET_SUGGESTS:{const r=t.payload.suggests||[],a=r.filter((({id:t="",type:r=""})=>"recent"===r&&!e.deletedSuggests.includes(t))),n=r.filter((e=>{var t;return"recent"!==(null==(t=e)?void 0:t.type)})),s=[...a,...n].map((e=>{var t;return(null==(t=e)?void 0:t.id)||""})),i=[...a,...n];return(0,o._)({},e,{recentSuggests:a,otherSuggests:n,suggestsOrderIds:s,allSuggests:i,shouldBeClosed:!i.length})}case a.SuggesterActions.DELETE_RECENT:{const r=[...e.deletedSuggests,t.payload];return(0,o._)({},e,{deletedSuggests:r,recentSuggests:e.recentSuggests.filter((({id:e=""})=>!r.includes(e))),suggestsOrderIds:e.suggestsOrderIds.filter(((e="")=>!r.includes(e)))})}case a.SuggesterActions.CHOOSE_ABOVE:{if(!e.selectedSuggest)return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[-1],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});const t=e.suggestsOrderIds.findIndex((t=>t===e.selectedSuggest)),r=(t-1==-1?e.suggestsOrderIds.length-1:t-1)%e.suggestsOrderIds.length;return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[r],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.CHOOSE_BELOW:{if(!e.selectedSuggest)return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[0],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});const t=(e.suggestsOrderIds.findIndex((t=>t===e.selectedSuggest))+1)%e.suggestsOrderIds.length;return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[t],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.RESET_SELECTED:return(0,o._)({},e,{selectedSuggest:null});case a.SuggesterActions.RESET_DELETED:return(0,o._)({},e,{deletedSuggests:[]});case a.SuggesterActions.SET_HELP_SUGGEST:{if(e.selectedSuggest)return(0,o._)({},e);const r=t.payload.length-1,a=e.allSuggests.length&&e.allSuggests[0].title||"";if(t.payload[r]===a[r]){if(n.RUS.includes(t.payload[r])&&n.RUS.includes(a[r]))return(0,o._)({},e,{helpSuggest:a,helpSuggestStart:t.payload,helpSuggestEnd:a.slice(t.payload.length,a.length)});if(n.LAT.includes(t.payload[r])&&n.LAT.includes(a[r]))return(0,o._)({},e,{helpSuggest:a,helpSuggestStart:t.payload,helpSuggestEnd:a.slice(t.payload.length,a.length)})}return(0,o._)({},e,{helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.TRIGGER_HELP_SUGGEST:return(0,o._)({},e,{helpTrigger:!e.helpTrigger});case a.SuggesterActions.RESET_HELP_SUGGEST:return(0,o._)({},e,{helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});case a.SuggesterActions.RESET_TEMP_SUGGESTER_DATA:return(0,o._)({},e,{selectedSuggest:null,helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});default:return e}}},861928:(e,t,r)=>{r.d(t,{CatalogActions:()=>o.CatalogActions,InitOptionsActionType:()=>o.InitOptionsActionType,SearchInputActions:()=>o.SearchInputActions,SuggesterActions:()=>o.SuggesterActions});var o=r(995090)},575838:(e,t,r)=>{var o;r.d(t,{CatalogActions:()=>o}),function(e){e.FETCH="FETCH",e.START_LOADING="START_LOADING",e.STOP_LOADING="STOP_LOADING",e.REMOVE_RECENT="REMOVE_RECENT"}(o||(o={}))},995090:(e,t,r)=>{r.d(t,{CatalogActions:()=>a.CatalogActions,InitOptionsActionType:()=>o.InitOptionsActionType,SearchInputActions:()=>n.SearchInputActions,SuggesterActions:()=>s.SuggesterActions});var o=r(572797),a=r(575838),n=r(326646),s=r(686501)},572797:(e,t,r)=>{var o;r.d(t,{InitOptionsActionType:()=>o}),function(e){e.INIT="INIT"}(o||(o={}))},326646:(e,t,r)=>{var o;r.d(t,{SearchInputActions:()=>o}),function(e){e.SEARCH="SEARCH",e.SET_QUERY="SET_QUERY"}(o||(o={}))},686501:(e,t,r)=>{var o;r.d(t,{SuggesterActions:()=>o}),function(e){e.SET_SUGGESTS="SET_SUGGESTS",e.CHOOSE_BELOW="CHOOSE_BELOW",e.CHOOSE_ABOVE="CHOOSE_ABOVE",e.DELETE_RECENT="DELETE_RECENT",e.SET_HELP_SUGGEST="SET_HELP_SUGGEST",e.TRIGGER_HELP_SUGGEST="TRIGGER_HELP_SUGGEST",e.RESET_SELECTED="RESET_SELECTED",e.RESET_DELETED="RESET_DELETED",e.RESET_HELP_SUGGEST="RESET_HELP_SUGGEST",e.RESET_TEMP_SUGGESTER_DATA="RESET_TEMP_SUGGESTER_DATA",e.START_SHOW="START_SHOW",e.SHOW="SHOW",e.HIDE="HIDE",e.RESET_CLOSED_STATUS="RESET_CLOSED_STATUS"}(o||(o={}))},331251:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{getMainInput:()=>getMainInput,getQueryFromNav:()=>getQueryFromNav});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11010),_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(795558),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(643897),_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(906019);const getMainInput=()=>{var e;const t=document.getElementById(_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.SEARCH_WRAPPER_ELEMENT_ID);if(!t)return null;const r=null==(e=t)?void 0:e.querySelector(_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.SEARCH_INPUT_ELEMENT_ID);return r||null},getInitOptionsFromDom=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)((function*(){return new Promise((resolve=>{setTimeout((()=>{const mainInput=getMainInput(),wrapEl=window.uiSearch.getWrapEl(mainInput),delayedInitOptions=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");let result=null;if(delayedInitOptions){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null);const evalScript=`(function() { return ${delayedInitOptions} })()`;try{result=eval(evalScript)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logEvalError)(e,evalScript),resolve(result)}}resolve(result)}),_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.IMMEDIATELY_TIMER)}))})),getQueryFromNav=()=>{var e,t,r;return(null==(t=window.nav)||null==(e=t.objLoc)?void 0:e.q)||(null==(r=window.nav)?void 0:r.objLoc["c[q]"])||""}},192220:(e,t,r)=>{r.d(t,{SearchTopRoot:()=>i});var o=r(785893),a=r(338661),n=r(86894),s=r(869048);r(803205),r(837960);const i=()=>(0,o.jsx)(s.AppRootProvider,{sizeX:n.SizeType.REGULAR,sizeY:n.SizeType.COMPACT,viewWidth:n.ViewWidth.DESKTOP,children:(0,o.jsx)(a.App,{})})},896621:(e,t,r)=>{r.d(t,{getSearchTop:()=>n});r(434788);var o=r(599809),a=r(148652);function n(e,t){return(0,o.api)(a.CATALOG_API_METHODS.GET_SEARCH_TOP,e,void 0,t)}},109291:(e,t,r)=>{r.d(t,{App:()=>S});var o=r(785893),a=r(667294),n=r(504190),s=r(32655),i=r(209660),l=r(108824),c=r(953908),d=r(501461),u=r(836245),g=r(538310),_=r(148652),p=(r(180833),r(144311));const S=()=>{const e=(0,n.useStore)(l.$displayResults),t=(0,n.useStore)(l.$currentQuery),r=(0,a.useRef)(null),S=(0,a.useRef)(),v=(0,a.useCallback)((()=>{var t;e||(null==(t=r.current)||t.focus())}),[r,e]),f=(0,a.useCallback)((e=>{(0,l.fireKeyDownEvent)({event:e,blur:()=>{var e;null==(e=r.current)||e.blur()},cancelEvent:()=>{(0,c.cancelEvent)(e.nativeEvent)},clearTimeout:()=>{clearTimeout(S.current)}})}),[r,S]),E=(0,a.useCallback)((e=>{const t=e.currentTarget.value||"";(0,l.fireSetCurrentQuery)(t),clearTimeout(S.current),S.current=setTimeout((()=>{(0,l.fireSearch)({q:t})}),250)}),[S]);return(0,a.useEffect)((()=>{const e=e=>{const t=e.target;t.closest('[data-search-top-target="true"]')||t.closest(`#${_.SEARCH_INPUT_ID}`)||t.closest(".vkuiSearch__icon")||!(0,d.isMainClick)(e)||(0,l.fireSetResultsDisplay)(!1)};return(0,u.topHeaderListener)(),document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,a.useEffect)((()=>()=>clearTimeout(S.current)),[]),(0,a.useEffect)((()=>{const e=(0,g.subscribeModuleEvaluated)((()=>{(0,l.fireSetCatalog)(null),(0,l.fireAbortRequest)(),(0,l.fireSetCurrentQuery)(""),(0,l.fireSetResultsDisplay)(!1)}));return()=>{e()}}),[]),(0,o.jsxs)("div",{className:p.default.app,id:"ts_wrap",children:[(0,o.jsx)("div",{"data-search-top-target":"true",children:(0,o.jsx)(s.SearchInput,{onClick:v,onFocus:()=>{e||(0,l.fireSetResultsDisplay)(!0)},onInput:E,onKeyDown:f,inputRef:r,searchQuery:t,className:p.default.search})}),e&&(0,o.jsx)(i.SearchResults,{})]})}},338661:(e,t,r)=>{r.d(t,{App:()=>o.App});var o=r(109291)},450589:(e,t,r)=>{r.d(t,{Placeholder:()=>s});var o=r(785893),a=r(635928),n=r(29271);const s=()=>(0,o.jsx)(a.Placeholder,{children:n.getLang("search_search_top_has_no_results")})},373838:(e,t,r)=>{r.d(t,{Placeholder:()=>o.Placeholder});var o=r(450589)},797620:(e,t,r)=>{r.d(t,{SearchInput:()=>c});var o=r(434788),a=r(820224),n=r(785893),s=r(667294),i=r(33045),l=r(29271);const c=e=>{var{onClick:t,onFocus:r,onBlur:c,onInput:d,onKeyDown:u,inputRef:g,searchQuery:_="",placeholder:p}=e,S=(0,a._)(e,["onClick","onFocus","onBlur","onInput","onKeyDown","inputRef","searchQuery","placeholder"]);const[v,f]=(0,s.useState)("");return(0,s.useEffect)((()=>{f(_)}),[_]),(0,n.jsx)(i.Search,(0,o._)({placeholder:p||l.getLang("global_search"),onClick:e=>{var r;null==(r=t)||r(e)},onFocus:e=>{var t;null==(t=r)||t(e)},onBlur:e=>{var t;null==(t=c)||t(e)},onInput:e=>{var t;const r=e.currentTarget.value||"";f(r),null==(t=d)||t(e)},onKeyDown:e=>{var t;null==(t=u)||t(e)},getRef:g,value:v},S))}},32655:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(797620)},486072:(e,t,r)=>{r.d(t,{SearchResults:()=>E});var o=r(785893),a=r(667294),n=r(504190),s=r(86894),i=r(539791),l=r(848504),c=r(108824),d=r(373838),u=r(193452),g=r(538310),_=r(508249),p=r(836245),S=r(95432),v=r(287063),f=r(650721);const E=()=>{var e,t;const r=(0,n.useStore)(c.$catalog),E=(0,n.useStore)(c.$extendedData),m=(0,n.useStore)(c.$pending),h=(0,n.useStore)(c.$currentQuery),y=(0,n.useStore)(c.$fetchError),w={pageId:"top_search",cacheId:window.location.href,catalogType:i.CatalogType.SEARCH},C={navGo:g.navGo,userId:null==(t=window)||null==(e=t.vk)?void 0:e.id,pageVerifiedTip:_.pageVerifiedTip,openChat:(e,t)=>{var r,o,a;null==(a=window)||null==(o=a.reforgedME)||null==(r=o.selectPeer)||r.call(o,e,t)}};return(0,a.useEffect)((()=>{r||m||(0,c.fireSearch)({q:""})}),[]),y?(0,o.jsx)("div",{className:v.default.root,children:(0,o.jsx)(d.Placeholder,{})}):(0,o.jsx)("div",{className:v.default.root,"data-search-top-target":"true",children:(0,o.jsx)(s.CustomScrollView,{autoHideScrollbar:!0,className:v.default.scroll,children:m?(0,o.jsx)(l.Spinner,{}):(0,o.jsx)(i.CatalogSearchProvider,{currentQuery:h,search:e=>(0,c.fireSearch)(e),displayTopSearch:c.fireSetResultsDisplay,setCurrentQuery:(e="")=>(0,c.fireSetCurrentQuery)(e),showVideo:p.showVideo,showWiki:S.showWiki,onOpenUrlClick:e=>{"/search?c[section]=auto&c[q]="===e&&((0,f.searchProfilingService)().setProfilingMarkStart(f.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,f.searchProfilingService)().setProfilingMarkStart(f.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION))},children:(0,o.jsx)(i.Catalog,{catalog:r,extendedData:E,nextFromSections:[],onCatalogUpdate:e=>{(0,c.fireSetCatalogCatalog)(e.updatedCatalog)},collectClick:u.searchStatsCollector.logEvent,collectView:u.searchViewStatCollector.logEvent,catalogVars:w,platformVars:C,blockLayoutResolver:i.modalLayoutResolver})})})})}},209660:(e,t,r)=>{r.d(t,{SearchResults:()=>o.SearchResults});var o=r(486072)},212809:(e,t,r)=>{r.d(t,{Spinner:()=>s});var o=r(785893),a=r(86894),n=r(642419);const s=()=>(0,o.jsx)("div",{className:n.default.spinner,children:(0,o.jsx)(a.Spinner,{size:"small"})})},848504:(e,t,r)=>{r.d(t,{Spinner:()=>o.Spinner});var o=r(212809)},148652:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>o,SEARCH_INPUT_BLUR_TIMEOUT:()=>s,SEARCH_INPUT_ID:()=>a,SEARCH_TOP_MODAL_NON_CLOSING_ATTR:()=>n});const o={GET_SEARCH_TOP:"catalog.getSearchTop",GET_SECTION:"catalog.getSection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",ADD_RECENT:"search.addRecents",CLEAR_RECENT:"search.clearRecents"},a="SearchTopInput",n="data-search-top-target",s=150},447936:(e,t,r)=>{r.d(t,{$currentQuery:()=>g,HandleKeyDownEffectFx:()=>v,appDomain:()=>u,fireClearApp:()=>S,fireKeyDownEvent:()=>p,fireSetCurrentQuery:()=>_});var o=r(798116),a=r(953908),n=r(631859),s=r(839470),i=r(108824),l=r(148652),c=r(538310),d=r(650721);const u=(0,o.createDomain)("SEARCH_TOP/APP"),g=u.createStore("",{name:"currentQuery"}),_=u.createEvent("fire/SetCurrentQuery"),p=u.createEvent("fire/KeyDownEvent"),S=u.createEvent("fire/ClearApp"),v=u.createEffect({name:"HandleKeyDownEffectFx",handler:({event:e,selectedItemIndex:t,cancelEvent:r,currentQuery:o,blur:u,displayResults:g,clearTimeout:p})=>{switch(e.keyCode){case a.KEY.DOWN:r(),(0,n.fireDownSelectionIndex)();break;case a.KEY.UP:r(),(0,n.fireUpSelectionIndex)();break;case a.KEY.ENTER:var S;r(),p();let g="/search?c[section]=auto&c[q]=";var v;return(0,s.partConfigEnabled)("search_search_global_refactor_enabled")&&(g="/search?search_from=top_search&c[q]="),e.ctrlKey||e.metaKey?(null==(v=t)?void 0:v.callback)?void t.callback(void 0,!0):void window.open(`${g}${encodeURIComponent(o)}`):(null==(S=t)?void 0:S.callback)?(t.callback(),(0,i.fireSetCatalog)(null),void(0,i.fireAbortRequest)()):(_(""),(0,i.fireSetResultsDisplay)(!1),(0,i.fireSetCatalog)(null),(0,i.fireAbortRequest)(),setTimeout((()=>{u()}),l.SEARCH_INPUT_BLUR_TIMEOUT),(0,d.searchProfilingService)().setProfilingMarkStart(d.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,d.searchProfilingService)().setProfilingMarkStart(d.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION),void(0,c.navGo)(g+encodeURIComponent(o),null));case a.KEY.TAB:return p(),_(""),void(0,i.fireSetResultsDisplay)(!1)}g||(0,i.fireSetResultsDisplay)(!0)}})},896081:(e,t,r)=>{var o=r(434788),a=r(798116),n=r(108824),s=r(631859);n.appDomain.onCreateStore((e=>{e.reset(n.fireClearApp)})),(0,a.sample)({clock:n.fireSetCurrentQuery,target:n.$currentQuery}),(0,a.sample)({clock:n.fireSendRequest,target:[s.fireResetSelectionIndex,s.fireResetItemsIndex]}),(0,a.sample)({clock:n.fireSetResultsDisplay,target:[s.fireResetSelectionIndex]}),(0,a.sample)({clock:n.fireSendRequest,fn:()=>null,target:n.fireSetCatalog}),(0,a.sample)({clock:n.SearchTopEffectFx.doneData,fn:({request:e})=>e,target:n.fireSetCatalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>{var t;return(null==(t=e)?void 0:t.catalog)||null},target:n.$catalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>{if(!e)return null;const t=(0,o._)({},e);return delete t.catalog,t||null},target:n.$extendedData}),(0,a.sample)({clock:n.fireKeyDownEvent,source:{selectedItemIndex:s.$selectedItemIndex,currentQuery:n.$currentQuery,displayResults:n.$displayResults},fn:(e,t)=>(0,o._)({},t,e),target:n.HandleKeyDownEffectFx})},735753:(e,t,r)=>{r.d(t,{$catalog:()=>s,$extendedData:()=>i,fireSetCatalog:()=>a,fireSetCatalogCatalog:()=>n});const o=r(447936).appDomain.createDomain("SEARCH_TOP/CATALOG"),a=o.createEvent("fire/SetCatalog"),n=o.createEvent("fire/SetCatalog"),s=o.createStore(null,{name:"catalog"}),i=o.createStore(null,{name:"extendedData"})},426675:(e,t,r)=>{var o=r(798116),a=r(108824);(0,o.sample)({clock:a.fireSetCatalogCatalog,target:a.$catalog})},108824:(e,t,r)=>{r.d(t,{$catalog:()=>s.$catalog,$currentQuery:()=>o.$currentQuery,$displayResults:()=>a.$displayResults,$extendedData:()=>s.$extendedData,$fetchError:()=>n.$fetchError,$pending:()=>n.$pending,$requestsQueue:()=>n.$requestsQueue,AbortEffectFx:()=>n.AbortEffectFx,CancelStackFilterFx:()=>a.CancelStackFilterFx,CancelStackPushFx:()=>a.CancelStackPushFx,HandleKeyDownEffectFx:()=>o.HandleKeyDownEffectFx,SearchTopEffectFx:()=>n.SearchTopEffectFx,appDomain:()=>o.appDomain,fireAbortRequest:()=>n.fireAbortRequest,fireCancelStackPush:()=>a.fireCancelStackPush,fireClearApp:()=>o.fireClearApp,fireCreateRequest:()=>n.fireCreateRequest,fireKeyDownEvent:()=>o.fireKeyDownEvent,fireRemoveRequestFromQueue:()=>n.fireRemoveRequestFromQueue,fireSearch:()=>n.fireSearch,fireSendRequest:()=>n.fireSendRequest,fireSetCatalog:()=>s.fireSetCatalog,fireSetCatalogCatalog:()=>s.fireSetCatalogCatalog,fireSetCurrentQuery:()=>o.fireSetCurrentQuery,fireSetRequestToQueue:()=>n.fireSetRequestToQueue,fireSetResultsDisplay:()=>a.fireSetResultsDisplay,fireSetUpRequest:()=>n.fireSetUpRequest});var o=r(447936),a=r(340083),n=r(264299),s=r(735753)},803205:(e,t,r)=>{r(896081),r(666138),r(353199),r(426675)},264299:(e,t,r)=>{r.d(t,{$fetchError:()=>v,$pending:()=>p,$requestsQueue:()=>S,AbortEffectFx:()=>f,SearchTopEffectFx:()=>E,fireAbortRequest:()=>_,fireCreateRequest:()=>l,fireRemoveRequestFromQueue:()=>u,fireSearch:()=>i,fireSendRequest:()=>g,fireSetRequestToQueue:()=>d,fireSetUpRequest:()=>c});var o=r(11010),a=r(447936),n=r(896621);const s=a.appDomain.createDomain("SEARCH_TOP/SEARCH"),i=s.createEvent("fire/Search"),l=s.createEvent("fire/CreateRequest"),c=s.createEvent("fire/SetUpRequest"),d=s.createEvent("fire/SetRequestToQueue"),u=s.createEvent("fire/RemoveRequestToQueue"),g=s.createEvent("fire/SendRequest"),_=s.createEvent("fire/AbortRequest"),p=s.createStore(!1,{name:"pending"}),S=s.createStore([],{name:"requestsQueue"}),v=s.createStore(!1,{name:"fetchError"}),f=s.createEffect({name:"get/AbortEffectFx",handler:(0,o._)((function*(e){e.forEach((e=>{var t,r,o;null==(o=e.fetchOptions)||null==(r=o.controller)||null==(t=r.abort)||t.call(r)}))}))}),E=s.createEffect({name:"get/SearchTopEffectFx",handler:(0,o._)((function*(e){var t,r;const o=null==(r=e.fetchOptions)||null==(t=r.controller)?void 0:t.signal;return{request:yield(0,n.getSearchTop)(e.data,{signal:o}),requestData:e}}))})},353199:(e,t,r)=>{var o=r(434788),a=r(798116),n=r(108824),s=r(836245);(0,a.sample)({clock:n.fireSearch,fn:e=>({id:(0,s.createCacheId)(e),data:e}),target:n.fireCreateRequest}),(0,a.sample)({clock:n.fireAbortRequest,source:n.$requestsQueue,target:n.AbortEffectFx}),(0,a.sample)({clock:n.fireCreateRequest,source:n.$requestsQueue,fn:(e,t)=>{e.forEach((e=>{var t,r,o;null==(o=e.fetchOptions)||null==(r=o.controller)||null==(t=r.abort)||t.call(r)}));const r=new AbortController;return(0,o._)({},t,{fetchOptions:{controller:r}})},target:n.fireSetUpRequest}),(0,a.sample)({clock:n.fireSetUpRequest,target:[n.fireSendRequest,n.fireSetRequestToQueue]}),(0,a.sample)({clock:n.fireSetRequestToQueue,source:n.$requestsQueue,fn:(e,t)=>[...e,t],target:n.$requestsQueue}),(0,a.sample)({clock:n.fireSendRequest,target:n.SearchTopEffectFx}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,target:n.$pending}),(0,a.sample)({clock:n.SearchTopEffectFx.finally,fn:({params:e})=>e,target:n.fireRemoveRequestFromQueue}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,fn:()=>!1,target:n.$fetchError}),(0,a.sample)({clock:n.SearchTopEffectFx.failData,source:n.$pending,filter:e=>!e,fn:()=>!0,target:n.$fetchError})},340083:(e,t,r)=>{r.d(t,{$displayResults:()=>i,CancelStackFilterFx:()=>d,CancelStackPushFx:()=>u,fireCancelStackPush:()=>c,fireSetResultsDisplay:()=>l});var o=r(447936),a=r(196026),n=r(148652);const s=o.appDomain.createDomain("SEARCH_TOP/MODAL"),i=s.createStore(!1,{name:"displayResults"}),l=s.createEvent("fire/SetResultsDisplay"),c=s.createEvent("fire/CancelStackPush"),d=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,a.cancelStackFilter)("top_search",!0)}}),u=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,a.cancelStackPush)("top_search",((e=!0)=>{if(e){var t;const e=document.querySelector(`#${n.SEARCH_INPUT_ID}`);l(!1),null==(t=e)||t.blur()}else c()}),!0)}})},666138:(e,t,r)=>{var o=r(798116),a=r(108824);(0,o.sample)({clock:a.fireSetResultsDisplay,source:a.$displayResults,filter:(e,t)=>e!==t,fn:(e,t)=>t,target:a.$displayResults}),(0,o.sample)({clock:a.$displayResults,filter:e=>e,target:a.CancelStackPushFx}),(0,o.sample)({clock:a.$displayResults,filter:e=>!e,target:a.CancelStackFilterFx}),(0,o.sample)({clock:a.fireCancelStackPush,target:a.CancelStackPushFx})},836245:(e,t,r)=>{r.d(t,{createCacheId:()=>u,showVideo:()=>g,topHeaderListener:()=>d});var o=r(434788),a=r(953908),n=r(795558),s=r(611290),i=r(148652),l=r(539791),c=r(613202);const d=()=>{(0,a.addEvent)(document,"mousedown",(e=>{var t,r;const o=e.target,l=!((0,a.checkKeyboardEvent)(e)||(0,n.domClosest)("top_audio_layer_place",o)||(0,n.domClosest)("_ap_layer__close",o)||(0,n.domClosest)("layer_wrap",o)||(0,n.domClosest)("PortalNavigation",o)||(0,n.domClosest)("PortalNavigationDropdown",o)||(0,n.domClosest)("ObsceneTextAlertBox",o)||(0,n.domClosest)("top_notify_layer_details",o)||(null==(t=o)?void 0:t.closest('[data-search-top-target="true"]'))),c=!(null==(r=o)?void 0:r.closest(`#${i.SEARCH_INPUT_ID}`));l&&(0,s.topHeaderClose)((()=>!1),c)}))},u=e=>((e,t="",r)=>{const o=Object.entries(e).filter((([,e])=>!!e||0===e)).map((([e,t])=>r?`${r}[${encodeURIComponent(e)}]=${encodeURIComponent(t)}`:`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return o?`${t}${o}`:""})(Object.keys(e).sort(((e,t)=>e.localeCompare(t))).reduce(((t,r)=>(0,o._)({},t,{[r]:e[r]})),{})),g=({event:e,id:t,video:r})=>{const o=()=>{if(window.Video.checkClickEvent(e))return!0;if(e.preventDefault(),window.cur.cancelClick)return void(window.cur.cancelClick=!1);if(window.cur.chooseVideoMedia)return window.cur.chooseVideoMedia(e.target,t);let o;!o&&window.Video&&window.Video.isGlobalSearchMode()&&window.Video.shouldShowSearchInPlaylistWithSearch()&&(o=window.Video.VIDEO_SEARCH_TOP_TYPE),window.Video.show(e,t,{autoplay:1,queue:0,playlistId:o,playFrom:r.viewed_duration?(0,l.getPlayFromByDuration)(r.viewed_duration):"",addParams:{track_code:r.track_code}},e.target)};window.Video?o():(0,c.getVideoModule)().then(o)}},824346:(e,t,r)=>{r.d(t,{SearchVideoCatalog:()=>E});var o=r(434788),a=r(785893),n=r(667294),s=r(12052),i=r(688007),l=r(12531),c=r(869048),d=r(635928),u=r(832550),g=r(845847),_=r(539791),p=r(29271),S=r(688999),v=r(106898),f=r(69438);const E=()=>{var e,t,r,E,m,h;const[y,w]=(0,n.useState)(),[C,b]=(0,n.useReducer)((e=>e+1),0),[A,I]=(0,n.useState)(!1),[T,k]=(0,l.useSearchParams)(),R=null==(e=y)?void 0:e.catalog,O=null==(r=R)||null==(t=r.sections)?void 0:t.find((e=>{var t,r;return(null==(t=e)?void 0:t.id)===(null==(r=R)?void 0:r.default_section)})),x=null==(m=R)?void 0:m.sections[(null==(E=R)?void 0:E.sections.length)-1],P=()=>{b()};(0,n.useEffect)((()=>{if(!window.cur.is_section)return;const e=new AbortController;if("upload"!==T.get("section"))return T.has("q")||"upload"===T.get("section")?(s.Video.toggleSearchProgress(!0),(0,i.getVideoSearchBySearchParams)(T,e).then((e=>{w(e),I(!1)})).catch((({type:e,error:t})=>{if("network_error"===e&&"AbortError"===t.name)return null;throw I(!0),t})).finally((()=>{s.Video.setVisibilityShowcaseContent(!1),s.Video.toggleSearchProgress(!1)})),()=>{e.abort()}):(w(void 0),void s.Video.setVisibilityShowcaseContent(!0));w(void 0)}),[T,C]);const V=e=>{if(x&&O&&e&&e){const t=e.data;w((e=>{var r;if((null==(r=e)?void 0:r.catalog)&&t.section){let r;var a,n,s,i,l,c,d,u;return r=O.id===t.section.id?(0,g.getMutatedCatalogSections)(e.catalog.sections,O,t.section):[...e.catalog.sections,t.section],(0,o._)({},e,{catalog:(0,o._)({},e.catalog,{sections:r}),videos:(0,g.filterArrayOfUniqueByKey)([...null!=(a=e.videos)?a:[],...null!=(n=t.videos)?n:[]],"id"),groups:(0,g.filterArrayOfUniqueByKey)([...null!=(s=e.groups)?s:[],...null!=(i=t.groups)?i:[]],"id"),profiles:(0,g.filterArrayOfUniqueByKey)([...null!=(l=e.profiles)?l:[],...null!=(c=t.profiles)?c:[]],"id"),albums:(0,g.filterArrayOfUniqueByKey)([...null!=(d=e.albums)?d:[],...null!=(u=t.albums)?u:[]],"id")})}return e}))}};if(null==(h=R)?void 0:h.sections){var D;const e=y?(0,_.extractExtendedData)(y):{},t=null==(D=R)?void 0:D.sections,r=e=>{const t=new URLSearchParams(window.location.search);t.set("q",e.q),t.set("suggest_trackcode",e.additionalParams.suggestTrackCode),t.set("no_spellcheck",String(e.additionalParams.noSpellcheck));const r=(0,v.encodeUrlSearchParams)(Object.fromEntries(t.entries()),"?");window.nav.go(`${window.location.pathname}${r}`),k(t)};return(0,a.jsx)(c.AppRootProvider,{children:(0,a.jsx)("div",{className:"VideoLayout__contentsWrapper",style:{overflowAnchor:"none"},children:(0,a.jsx)("div",{className:"VideoLayout__search",style:{display:"block"},children:(0,a.jsx)(f.CatalogVideo,{catalog:R,extendedData:e,sections:t,onGetSection:V,blockLayoutResolver:_.videoLayoutResolver,search:r})})})})}return A?(0,a.jsx)(d.Placeholder,{icon:(0,a.jsx)(S.Icon56ReportOutline,{}),header:p.getLang("search_error_videoshowcase_header"),stretched:!0,action:(0,a.jsx)(u.Button,{onClick:P,size:"m",children:p.getLang("search_error_videoshowcase_button")}),children:p.getLang("search_error_videoshowcase_subtitle")}):null}},688007:(e,t,r)=>{r.d(t,{getVideoSearchBySearchParams:()=>l});var o=r(434788),a=r(599809),n=r(964886),s=r(845847);const i=(e,t={})=>(0,a.api)(n.CATALOG_API_METHODS.GET_VIDEO_SEARCH,(0,o._)({},e),void 0,t);function l(e,t=null){let r={};return t&&(r={signal:t.signal}),i((0,s.getParamsForVideoSearchCatalog)(e),r)}},964886:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>o,LONGER_FILTER_DURATION:()=>n,SHORTER_FILTER_DURATION:()=>a});const o={ADD_VIDEO:"video.add",GET_VIDEO_SEARCH:"catalog.getVideoSearchWeb2",DELETE_VIDEO:"video.delete",ADD_VIDEO_TO_FAVE:"fave.addVideo",REMOVE_VIDEO_FROM_FAVE:"fave.removeVideo",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete"},a=300,n=1200},12531:(e,t,r)=>{r.d(t,{useSearchParams:()=>s});var o=r(667294),a=r(538310);const n=/video\?(.+)/,s=()=>{const[e,t]=(0,o.useState)((()=>new URLSearchParams(document.location.search))),r=(0,o.useRef)();return(0,o.useEffect)((()=>{let e="";return r.current=(0,a.subscribeNavLocationChange)((r=>{const o=r.match(n);if(o&&o[1]){const r=new URLSearchParams(o[1]);r.delete("z");const a=r.toString();a!==e&&(e=a,t(new URLSearchParams(a)))}else t(new URLSearchParams(document.location.search))})),()=>{var e,t;null==(e=(t=r).current)||e.call(t)}}),[]),[e,t]}},845847:(e,t,r)=>{r.d(t,{filterArrayOfUniqueByKey:()=>n,getMutatedCatalogSections:()=>s,getParamsForVideoSearchCatalog:()=>i});var o=r(434788),a=r(964886);function n(e,t){return[...new Map(e.map((e=>[e[t],e]))).values()]}function s(e,t,r){const a=e.findIndex((({id:e})=>e===t.id));if(-1===a||!t.blocks||!r.blocks)return e;const n=(0,o._)({},t,{blocks:[...t.blocks,...r.blocks],next_from:r.next_from});return[...e.slice(0,a-1),n,...e.slice(a+1)]}function i(e){const t={},r={order:"sort",notsafe:"adult"};for(const[n,s]of e)if("len"===n){const e="1"===s?"shorter":"longer";t[e]="shorter"===e?`${a.SHORTER_FILTER_DURATION}`:`${a.LONGER_FILTER_DURATION}`}else{var o;t[null!=(o=r[n])?o:n]=s}return t.screen_ref="search_video_service",t}},194969:(e,t,r)=>{r.d(t,{VideoCardWrapper:()=>_});var o=r(434788),a=r(820224),n=r(785893),s=r(392594),i=r(40565),l=r(412859),c=r(292063),d=r(916207),u=r(957973),g=r(539791);const _=e=>{var t,{controls:r,actions:_,owner:p,video:S,onVideoOpen:v,collectClick:f}=e,E=(0,a._)(e,["controls","actions","owner","video","onVideoOpen","collectClick"]);const m=(0,l.useMenuActions)(S,_),h=(0,l.useControls)({video:S,controls:null!=r?r:[]}),y=(0,g.useRefLogView)(u.EventItemType.VIDEO,null==(t=S)?void 0:t.track_code);var w;return(0,n.jsx)(s.VideoCard,(0,o._)({getRef:y,controlItems:(0,n.jsx)(i.VideoCardControls,{video:S,collectClick:f,controls:null!=h?h:[]}),menuItems:m,video:(0,o._)({},(0,c.mapVideoToVideoCardItem)(S),{owner:(0,o._)({},null!=(w=(0,c.mapArtistToVideoCardOwner)(S))?w:(0,c.mapUserOrGroupToVideoCardOwner)(p),{badge:(0,d.getVerifiedBadge)(p)})}),onVideoOpen:v},E))}},996842:(e,t,r)=>{r.d(t,{VideoCardControls:()=>s});var o=r(785893),a=r(392594),n=r(903806);const s=({video:e,controls:t,collectClick:r})=>{var s;return(null==(s=t)?void 0:s.length)?(0,o.jsx)(o.Fragment,{children:t.map((t=>{if(t.type===n.ControlTypes.ICON){const{text:r,onClick:n,component:s}=t;return(0,o.jsx)(a.VideoCard.IconControl,{tooltipText:r,onClick:t=>n(t,e),icon:s},r)}if(t.type===n.ControlTypes.PLAYLIST_POPOVER){const{component:a}=t;return(0,o.jsx)(a,{video:e,collectClick:r},e.id)}}))}):null}},399588:(e,t,r)=>{r.d(t,{VideoCardControls:()=>o.VideoCardControls});var o=r(996842)},665570:(e,t,r)=>{r(785893),r(384627)},40565:(e,t,r)=>{r.d(t,{VideoCardControls:()=>o.VideoCardControls});var o=r(399588);r(665570)},60819:(e,t,r)=>{r.d(t,{showEditVideoForm:()=>a});var o=r(514986);const a=({oid:e,vid:t})=>{const r={vid:t,oid:e};(0,o.showBox)("al_video.php?act=edit_box",r,{containerClass:"video_edit"})}},753472:(e,t,r)=>{r.d(t,{reportHandler:()=>o.reportHandler,showEditVideoForm:()=>a.showEditVideoForm});var o=r(590439),a=r(60819)},590439:(e,t,r)=>{r.d(t,{reportHandler:()=>n});var o=r(11010),a=r(29271);const n=(0,o._)((function*(e,t){e&&t&&(window.Videoview||(yield window.stManager.add([window.jsc("web/videoview.js")])),window.Videoview.showReportVideoForm(t,e,(()=>{var r;null==(r=window.VideoShowcase)||r.showCardFeedback(t,e,a.getLang("global_report_spam"))})))}))},412859:(e,t,r)=>{r.d(t,{useControls:()=>o.useControls,useMenuActions:()=>a.useMenuActions});var o=r(157863),a=r(909748)},157863:(e,t,r)=>{r.d(t,{useControls:()=>g});var o=r(667294),a=r(304680),n=r(293079),s=r(29271),i=r(441447),l=r(327038),c=r(903806),d=r(297455),u=r(839470);const g=({video:e,controls:t})=>(0,o.useMemo)((()=>{const{id:r,owner_id:o,can_edit:g,can_download:_,title:p,type:S,can_add:v}=e,f=Array.isArray(t)?t:[],E=(0,u.partConfigEnabled)("video_bookmarks_renaming_to_watch_later");return g&&r&&o&&f.push({component:a.Icon16PenOutline,text:s.getLang("video_edit"),onClick:()=>(0,l.showEditVideoForm)({oid:String(o),vid:String(r)}),type:c.ControlTypes.ICON}),3===_&&r&&o&&p&&S&&f.push({component:n.Icon16DownloadOutline,text:s.getLang("video_download_short"),onClick:()=>(0,i.downloadVideo)({oid:String(o),title:p,type:S,vid:String(r)}),type:c.ControlTypes.ICON}),!E&&v&&f.push({type:c.ControlTypes.PLAYLIST_POPOVER,component:d.AddToPlaylistControl}),f}),[e,t])},909748:(e,t,r)=>{r.d(t,{useMenuActions:()=>i});var o=r(667294),a=r(17117),n=r(29271),s=r(327038);const i=(e,t)=>(0,o.useMemo)((()=>{const r=Array.isArray(t)?t:[];if(e.owner_id!==window.vk.id&&e.owner_id&&e.id&&r.push({component:a.Icon20ReportOutline,children:n.getLang("global_report_spam"),onClick:()=>(0,s.reportHandler)(String(e.id),String(e.owner_id))}),r.length)return r}),[e])},327038:(e,t,r)=>{r.d(t,{VideoCardWrapper:()=>o.VideoCardWrapper,reportHandler:()=>a.reportHandler,showEditVideoForm:()=>a.showEditVideoForm});var o=r(194969),a=(r(40565),r(412859),r(753472))},127822:(e,t,r)=>{r.d(t,{getTriggersMap:()=>s});var o,a=r(12052),n=r(899181);!function(e){e.VIDEO="video"}(o||(o={}));const s=e=>"video"===e?{triggerSearch:a.Video.onSearchInputChange,onBlur:a.Video.onSearchInputBlur,onFilterRemoved:a.Video.onFilterRemoved,onFiltersChanged:n.VideoShowcase.onSearchFiltersChanged}:null},426131:(e,t,r)=>{r.d(t,{AddToPlaylistControl:()=>h});var o=r(434788),a=r(820224),n=r(785893),s=r(504190),i=r(667294),l=r(392594),c=r(352755),d=r(84562),u=r(358493),g=r(29271),_=r(292063),p=r(40073),S=r(166915),v=r(916207),f=r(362246),E=r(21677),m=r(957973);const h=e=>{var t,r,{video:h,collectClick:y}=e,w=(0,a._)(e,["video","collectClick"]);const[C,b]=(0,i.useState)(!1),{owner_id:A=0,id:I=0,added:T}=h,k=(0,S.ensurePlaylistPopoverService)(),R=(0,v.getVideoCardKey)(A,I),O=(0,c.useEntitiesStore)(k.videoCardEntities,R),x=(0,E.usePlaylists)(k.$playlistEntityStore),{$playlistsLoading:P,$ownerId:V,addVideoCardEntity:D,togglePlaylistAddedEvent:L,fetchPlaylistsEvent:F,$curVideoAddedToMy:q,clearStoreEvent:M}=(0,s.useUnit)(k);return(0,i.useEffect)((()=>{D({added:Boolean(T),oid:A,vid:I})}),[]),(0,n.jsx)(p.PlaylistPopover,(0,o._)({action:"hover",shown:C,addedToMy:Boolean(q),onToggleVideoAdded:(e,t)=>{var r,o;return null==(o=y)||o({action:e?m.SearchClickActionMap.REMOVE_FROM_ME:m.SearchClickActionMap.ADD_TO_ME,track_code:null==(r=h)?void 0:r.track_code,type:m.EventItemType.VIDEO}),L({key:R,album_id:t,isAdded:e})},onCreateNewPlaylist:e=>{b(!1),(0,f.createPlaylistPopup)(e,V,I,A,f.CreatePlaylistRequestOrigin.VIDEO_PLAYLISTS_MODAL)},addedToMyCheckboxDisabled:P,playlistsLoading:P,playlists:x,width:_.PLAYLIST_POPOVER_WIDTH,maxWidth:_.PLAYLIST_POPOVER_WIDTH,offsetDistance:_.PLAYLIST_POPOVER_VERTICAL_OFFSET,placement:"bottom-end",onShownChange:e=>{b(e),e&&F(R),e||M()}},w,{children:(0,n.jsx)(l.VideoCard.ExpandingControl,{icon:(null==(t=O)?void 0:t.added)?(0,n.jsx)(d.Icon16CheckOutline,{}):(0,n.jsx)(u.Icon16Add,{}),text:(null==(r=O)?void 0:r.added)?g.getLang("video_card_added_button_label"):g.getLang("video_card_add_button_label"),expanded:C})}))}},297455:(e,t,r)=>{r.d(t,{AddToPlaylistControl:()=>o.AddToPlaylistControl});var o=r(426131)},40073:(e,t,r)=>{r.d(t,{PlaylistPopover:()=>o.PlaylistPopover});var o=r(81682)},296747:(e,t,r)=>{r.d(t,{downloadVideo:()=>n});var o=r(504867),a=r(108705);const n=({oid:e,vid:t,title:r,type:n})=>{const s=Number(e),i=Number(t);window.ajax.post("al_video.php?act=get_download_url",{video_raw_id:(0,a.joinRawId)({ownerId:s,itemId:i})},{onDone:e=>{((e,t,r)=>{if(!e)return!1;const a=document.createElement("a");a.href=e,a.download=`${t}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a),(0,o.statlogsValueEvent)("video_downloads","",r)})(e,r,n)}})}},441447:(e,t,r)=>{r.d(t,{downloadVideo:()=>o.downloadVideo});var o=r(296747)},276405:(e,t,r)=>{r.d(t,{createPlaylistPopoverService:()=>g});var o=r(434788),a=r(916207),n=r(838740),s=r(555888),i=r(759336),l=r(798116),c=r(629260),d=r(292063),u=r(830232);const g=(e,t)=>{const r=(0,n.createVideoGetAlbumsByVideoFx)({domain:e}),g=e.createEvent(),_=(0,n.createVideoAddToAlbumFx)({domain:e}),p=(0,n.createVideoRemoveFromAlbumFx)({domain:e}),S=e.createStore({}),v=e.createEffect((({controller:e,isAdded:t,query:r})=>{const o={controller:e,query:r};return t?p(o):_(o)})),f=e.createStore(t),E=e.createEvent(),m=(0,l.restore)(E,{}),h=e.createEvent(),y=e.createEvent(),w=(0,s.createEntitiesVideoAlbumService)({domain:e}),C=(0,i.createListsVideosAlbumsService)({domain:e,entitiesVideoAlbumService:w}),{videoCardEntities:b,addEntity:A,updateEntity:I}=(0,u.createVideoCardEntitiesService)({domain:e}),{$entitiesVideoAlbums:T}=w,{resetVideosAlbumsEvent:k}=C;T.reset(g);const R=e.createEvent(),O=e.createEvent(),x=(0,l.restore)(O,null).reset(g),P=e.createEvent(),V=(0,l.restore)(P,null).reset(g);(0,l.sample)({clock:R,target:A});const D=(0,l.combine)(m,x,((e,t)=>!!t||Object.values(e).some((e=>e&&e.containsVideo)))),L=(0,l.combine)(C.fetchVideosAlbumsFx.pending,r.pending,((e,t)=>e||t)),F=(0,c.combineEvents)({events:{albumsByVideo:r.done,albums:C.fetchVideosAlbumsFx.done},reset:g});return(0,l.sample)({clock:F,source:{videoEntities:T,ownerId:f},fn:({videoEntities:e,ownerId:t},{albumsByVideo:r})=>(0,a.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:r.result,albums:e,ownerId:t||0}),target:E}),(0,l.sample)({clock:F,fn:({albumsByVideo:{result:e}})=>e.includes(d.MY_VIDEO_ALBUM_ID),target:O}),(0,l.sample)({clock:h,source:f,filter:e=>Boolean(e),fn:e=>({query:{owner_id:e||0,extended:1},controller:new AbortController,entityKey:e||0}),target:C.fetchVideosAlbumsFx}),(0,l.sample)({clock:h,source:{videoCardEntities:b,$ownerId:f},filter:({videoCardEntities:e},t)=>!!e[t],fn:({videoCardEntities:e,$ownerId:t},r)=>{const{vid:o,oid:a}=e[r];return{query:{video_id:o,owner_id:a,target_id:t},controller:new AbortController}},target:r}),(0,l.sample)({clock:h,target:P}),(0,l.sample)({clock:k,fn:()=>({}),target:m}),(0,l.sample)({clock:y,source:{videoCardEntities:b,$ownerId:f},filter:({videoCardEntities:e},{key:t})=>!!e[t],fn:({videoCardEntities:e,$ownerId:t},{key:r,album_id:o,isAdded:n})=>{const s=(0,a.getFullAlbumId)({albumId:o,ownerId:t}),{vid:i,oid:l}=e[r];return{controller:new AbortController,fullId:s,query:{target_id:t,album_id:o,video_id:i,owner_id:l},isAdded:n}},target:v}),(0,l.sample)({clock:v,source:m,filter:(e,t)=>!(0,a.isMyVideoAlbum)(t.query.album_id),fn:(e,{query:t,isAdded:r})=>{const n=(0,o._)({},e),s=(0,a.getFullAlbumId)({albumId:t.album_id,ownerId:t.target_id}),i=e[s];return i&&(n[s]=(0,o._)({},i,{containsVideo:!r})),n},target:E}),(0,l.sample)({clock:v,filter:({query:{album_id:e}})=>(0,a.isMyVideoAlbum)(e),fn:({isAdded:e})=>!e,target:O}),(0,l.sample)({clock:D,source:V,filter:e=>!!e,fn:(e,t)=>({key:e,updates:{added:t}}),target:I}),(0,l.sample)({clock:v,source:S,fn:(e,{controller:t,fullId:r})=>{var a;return null==(a=e[r])||a.abort(),(0,o._)({},e,{[r]:t})},target:S}),(0,l.sample)({clock:g,source:r,fn:({controller:e})=>{var t;null==(t=e)||t.abort()}}),(0,l.sample)({clock:g,fn:()=>{},target:k}),(0,l.sample)({clock:[v.done,v.fail],source:m,filter:(e,t)=>("error"in t||!t.result)&&!(0,a.isMyVideoAlbum)(t.params.query.album_id),fn:(e,{params:{query:t,isAdded:r}})=>{const n=(0,o._)({},e),s=(0,a.getFullAlbumId)({albumId:t.album_id,ownerId:t.owner_id}),i=e[s];return i&&(n[s]=(0,o._)({},i,{containsVideo:r})),n},target:E}),(0,l.sample)({clock:[v.done,v.fail],filter:e=>("error"in e||!e.result)&&(0,a.isMyVideoAlbum)(e.params.query.album_id),fn:({params:{isAdded:e}})=>e,target:O}),(0,l.sample)({clock:y,source:{playlists:m,ownerId:f},fn:({playlists:e,ownerId:t},{isAdded:r,album_id:o})=>{var n;const s=(0,a.getFullAlbumId)({albumId:o,ownerId:t});(0,a.showPlaylistActionSnackbar)({ownerId:t||0,playlistId:o,playlistTitle:null==(n=e[s])?void 0:n.title,added:!r})}}),{addVideoCardEntity:R,videoCardEntities:b,togglePlaylistAddedEvent:y,fetchPlaylistsEvent:h,resetVideosAlbumsEvent:k,$ownerId:f,$playlistsLoading:L,$curVideoAddedToMy:x,clearStoreEvent:g,$playlistEntityStore:m}}},830232:(e,t,r)=>{r.d(t,{createVideoCardEntitiesService:()=>i});var o=r(434788),a=r(798116),n=r(916207),s=r(453934);const i=({domain:e})=>{const t=e.createEvent(),r=(0,a.restore)(t,{}),i=e.createEvent(),l=e.createEvent();return(0,a.sample)({clock:i,source:r,fn:(e,t)=>{const r=(0,n.getVideoCardKey)(t.oid,t.vid);return(0,o._)({},e,{[r]:t})},target:t}),(0,a.sample)({clock:l,source:r,fn:(e,{key:t,updates:r})=>{const a=(0,o._)({},e[t],r);return"object"==typeof(n=a)&&null!==n&&"vid"in n&&"oid"in n&&"added"in n?(0,s.produce)(e,(e=>{e[t]=a})):e;var n},target:t}),{addEntity:i,updateEntity:l,videoCardEntities:r}}},855955:(e,t,r)=>{r.d(t,{ensurePlaylistPopoverService:()=>s});var o=r(276405),a=r(798116);let n;function s(){if(!n){const e=(0,a.createDomain)("global/video/playlists/popover");n=(0,o.createPlaylistPopoverService)(e,window.vk.id)}return n}},166915:(e,t,r)=>{r.d(t,{ensurePlaylistPopoverService:()=>o.ensurePlaylistPopoverService});var o=r(855955);r(276405),r(830232)},662273:(e,t,r)=>{function o(e,t){let r,o,a=!1;return function n(){if(a)return r=arguments,void(o=this);e.apply(this,arguments),a=!0,setTimeout((function(){a=!1,r&&(n.apply(o,r),r=o=null)}),t)}}r.d(t,{throttle:()=>o})},535727:(e,t,r)=>{r.d(t,{usePatchChildrenRef:()=>s});var o=r(667294),a=r(488543);const n=e=>"string"==typeof e.type,s=e=>{var t;const r=(0,o.isValidElement)(e)&&(n(e)?e.ref:e.props.getRootRef),s=(0,a.useExternRef)(r);return(0,o.useEffect)((()=>{s.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[null==(t=e)?void 0:t.type,s]),[s,(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{[n(e)?"ref":"getRootRef"]:s}):e]}},142246:(e,t,r)=>{r.d(t,{createUsersGetFx:()=>a,createUsersSearchFx:()=>n});var o=r(972051);const a=e=>(0,o.createApiEffect)("users.get",e),n=e=>(0,o.createApiEffect)("users.search",e)},352755:(e,t,r)=>{r.d(t,{useEntitiesStore:()=>a,useNotNullEntitiesStore:()=>n});var o=r(504190);const a=(e,t)=>(0,o.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>e[t],defaultValue:null}),n=(e,t)=>(0,o.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>{const r=e[t];if(null==r)throw new Error("Empty value entity store");return r}})},713990:(e,t,r)=>{r.d(t,{createCatalogGetAudioSearchService:()=>n});var o=r(798116),a=r(870918);const n=({domain:e,entitiesCatalogSections:t,entitiesVideoAlbumsService:r,entitiesVideoService:n,entitiesGroupsService:s,entitiesUsersService:i})=>{const l=(0,a.createCatalogGetAudioSearchFx)({domain:e}),c=e.createEvent();return(0,o.sample)({clock:c,fn:({query:e,need_blocks:t})=>({query:{query:e,need_blocks:t},controller:new AbortController}),target:l}),(0,o.sample)({clock:l.doneData,target:t.initCatalog}),(0,o.sample)({clock:l.doneData,filter:({groups:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({groups:e=[]})=>e,target:s.setGroupsEvent}),(0,o.sample)({clock:l.doneData,filter:({albums:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({albums:e=[]})=>e,target:r.setVideoAlbumsEvent}),(0,o.sample)({clock:l.doneData,filter:({profiles:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({profiles:e=[]})=>e,target:i.setUsersEvent}),(0,o.sample)({clock:l.doneData,filter:({videos:e})=>{var t;return Boolean(null==(t=e)?void 0:t.length)},fn:({videos:e=[]})=>e,target:n.setVideosEvent}),{catalogGetAudioSearchFx:l,catalogSearchAudioEvent:c}}},481954:(e,t,r)=>{r.d(t,{createEntitiesCatalogSectionsService:()=>l});var o=r(434788),a=r(798116),n=r(453934),s=r(870918),i=r(584117);const l=({domain:e})=>{const t=(0,s.createCatalogGetSectionFx)({domain:e}),r=e.createEvent(),l=e.createEvent(),c=e.createStore({}),d=e.createStore([]).reset(r),u=e.createStore({}),g=e.createStore({});var _,p;return(0,a.sample)({clock:l,source:c,fn:(e,t)=>(0,i.mapToEntity)(e,t),target:c}),(0,a.sample)({clock:r,source:c,fn:(e,t)=>{var r;return(0,i.mapToEntity)(e,null!=(_=null==(r=t.catalog)?void 0:r.sections)?_:[])},target:c}),(0,a.sample)({clock:r,source:d,fn:(e,t)=>{var r;return[...e,...null!=(p=null==(r=t.catalog)?void 0:r.sections.map((({id:e})=>e)))?p:[]]},target:d}),u.on(t,((e,t)=>{const r=t.query.section_id;return r?(0,o._)({},e,{[r]:!0}):e})),u.on(t.finally,((e,t)=>{const r=t.params.query.section_id;return r?(0,o._)({},e,{[r]:!1}):e})),g.on(t,((e,t)=>(0,n.produce)(e,(e=>{const r=t.query.section_id;r&&(e[r]=null)})))),g.on(t.fail,((e,t)=>{const r=t.params.query.section_id;return r?(0,o._)({},e,{[r]:t.error}):e})),{initCatalog:r,$entitiesCatalogSections:c,$entitiesCatalogSectionIds:d,$entitiesSectionsErrors:g,$entitiesSectionsLoading:u,catalogGetSectionFx:t,setCatalogGetSectionsEvent:l}}},336547:(e,t,r)=>{r.d(t,{createEntitiesUsersService:()=>i});var o=r(798116),a=r(386037),n=r(584117),s=r(142246);const i=e=>{const t=(0,s.createUsersGetFx)(e),{domain:r}=e,i=r.createStore({}),l=r.createStore({}),c=r.createStore({}),d=r.createEvent();return c.on(t,((e,{query:t})=>(0,a.updateEntitiesBy)(e,t.user_ids,!0))),c.on(t.finally,((e,{params:t})=>(0,a.updateEntitiesBy)(e,t.query.user_ids,!1))),l.on(t,((e,{query:t})=>(0,a.updateEntitiesBy)(e,t.user_ids,null))),l.on(t.fail,((e,{error:t,params:r})=>(0,a.updateEntitiesBy)(e,r.query.user_ids,t))),(0,o.sample)({clock:t.done,filter:({result:e})=>Boolean(e),fn:({result:e})=>e,target:d}),(0,o.sample)({clock:d,source:i,fn:(e,t)=>(0,n.mapToEntity)(e,t),target:i}),{$entitiesUsers:i,$entitiesUsersErrors:l,$entitiesUsersLoading:c,getUsersFx:t,setUsersEvent:d}}},555888:(e,t,r)=>{r.d(t,{createEntitiesVideoAlbumService:()=>v});var o=r(434788),a=r(820224),n=r(798116),s=r(108705),i=r(281848),l=r(66957),c=r(838740),d=r(255344),u=r(386037),g=r(528676),_=r(727320),p=r(723062);const S=({album_id:e,owner_id:t=0})=>(0,s.joinRawId)({ownerId:t,itemId:e}),v=e=>{const t=(0,c.createVideoDeleteAlbumFx)(e),r=(0,c.createVideoEditAlbumFx)(e),v=(0,c.createVideoAddAlbumFx)(e),f=(0,c.createVideoGetAlbumByIdFx)(e),E=(0,c.createVideoGetAlbumsExtendedFx)(e),m=(0,c.createVideoAddToAlbumFx)(e),h=(0,c.createVideoRemoveFromAlbumFx)(e),{domain:y}=e,w=y.createStore({}),C=y.createStore({}),b=y.createStore({}),A=y.createStore({}),I=y.createStore({}),T=y.createStore({}),k=y.createStore({}),R=y.createStore({}),O=y.createEvent(),x=y.createEvent(),P=(0,n.attach)({effect:t,mapParams:e=>{var{id:t}=e,r=(0,a._)(e,["id"]);const{itemId:n,ownerId:s}=(0,i.splitRawId)(t),l=p.Ranges.isGroupId(s)?{album_id:n,group_id:p.Ranges.convertOwnerIdToGroupId(s)}:{album_id:n,owner_id:s};return(0,o._)({},r,{query:l})}}),V=(0,n.attach)({effect:r,mapParams:e=>{var{ownerId:t,itemId:r,title:n,privacy:s}=e,i=(0,a._)(e,["ownerId","itemId","title","privacy"]);const l={album_id:r,title:n};return s&&(l.privacy=(0,d.stringifyBasePrivacy)(s)),p.Ranges.isGroupId(t)&&(l.group_id=p.Ranges.convertOwnerIdToGroupId(t)),(0,o._)({},i,{query:l})}}),D=(0,n.attach)({effect:v,mapParams:e=>{var{ownerId:t,title:r,privacy:n}=e,s=(0,a._)(e,["ownerId","title","privacy"]);const i={title:r};return n&&(i.privacy=(0,d.stringifyBasePrivacy)(n)),p.Ranges.isGroupId(t)&&(i.group_id=p.Ranges.convertOwnerIdToGroupId(t)),(0,o._)({},s,{query:i})}}),L=(0,g.createVideoAlbumSubscriptionEffect)((0,c.createVideoSubscribeToAlbum)(e),O,!0),F=(0,g.createVideoAlbumSubscriptionEffect)((0,c.createVideoUnsubscribeFromAlbum)(e),O,!1);return(0,_.registerEntitiesSetSample)(x,w),b.on(f,((e,{query:t})=>(0,u.updateEntitiesBy)(e,S(t),!0))),b.on(f.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,S(t.query),!1))),C.on(f,((e,{query:t})=>(0,u.updateEntitiesBy)(e,S(t),null))),C.on(f.fail,((e,{error:t,params:r})=>(0,u.updateEntitiesBy)(e,S(r.query),t))),w.on(f.done,((e,{params:t,result:r})=>(0,u.updateEntitiesBy)(e,S(t.query),r))),T.on(P,((e,{id:t})=>(0,u.updateEntitiesBy)(e,t,!0))),T.on(P.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,t.id,!1))),I.on(P,((e,{id:t})=>(0,u.updateEntitiesBy)(e,t,null))),I.on(P.fail,((e,{error:t,params:r})=>(0,u.updateEntitiesBy)(e,r.id,t))),A.on(P.done,((e,{params:t,result:r})=>r?(0,u.updateEntitiesBy)(e,t.id,!0):e)),R.on(V,((e,{ownerId:t,itemId:r})=>(0,u.updateEntitiesBy)(e,(0,s.joinRawId)({itemId:r,ownerId:t}),!0))),R.on(V.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,(0,s.joinRawId)({itemId:t.itemId,ownerId:t.ownerId}),!1))),k.on(V,((e,{ownerId:t,itemId:r})=>(0,u.updateEntitiesBy)(e,(0,s.joinRawId)({itemId:r,ownerId:t}),null))),k.on(V.fail,((e,{error:t,params:r})=>(0,u.updateEntitiesBy)(e,(0,s.joinRawId)({itemId:r.itemId,ownerId:r.ownerId}),t))),(0,n.sample)({clock:V.done,fn:({params:e})=>[{owner_id:e.ownerId,id:e.itemId,title:e.title,privacy:e.privacy}],target:O}),(0,n.sample)({clock:O,source:w,fn:(e,t)=>t.reduce(((t,r)=>{const a=(0,s.joinRawId)({ownerId:r.owner_id,itemId:r.id}),n=(0,o._)({},e[a],r);return(0,l.isVideoVideoAlbumFull)(n)&&t.push(n),t}),[]),target:x}),{$entitiesVideoAlbums:w,$entitiesVideoAlbumsErrors:C,$entitiesVideoAlbumsLoading:b,$entitiesVideoDeletedAlbums:A,$entitiesVideoDeletedAlbumsErrors:I,$entitiesVideoDeletedAlbumsPending:T,$entitiesVideoEditedAlbumsErrors:k,$entitiesVideoEditedAlbumsPending:R,patchVideoAlbumsEvent:O,setVideoAlbumsEvent:x,editVideoAlbumByIdFx:V,createVideoAlbumFx:D,deleteVideoAlbumByIdFx:P,getVideoAlbumByIdFx:f,subscribeToVideoAlbumFx:L,unsubscribeFromVideoAlbumFx:F,getVideoAlbumsFx:E,addVideoToAlbumFx:m,removeVideoFromAlbumFx:h}}},796615:(e,t,r)=>{r.d(t,{createEntitiesVideoService:()=>d});var o=r(434788),a=r(820224),n=r(798116),s=r(108705),i=r(838740),l=r(386037),c=r(727320);const d=({domain:e,entitiesGroupsService:t,entitiesUsersService:r})=>{var d,u;const g=(0,i.createVideoGetFx)({domain:e}),_=(0,i.createVideoGetVideoDiscoverFx)({domain:e}),p=e.createStore({}),S=e.createStore({}),v=e.createStore({}),f=e.createEvent(),E=e.createEvent();v.on(g,((e,{query:t})=>(0,l.updateEntitiesBy)(e,t.videos,!0))),v.on(g.finally,((e,{params:t})=>(0,l.updateEntitiesBy)(e,t.query.videos,!1))),S.on(g,((e,{query:t})=>(0,l.updateEntitiesBy)(e,t.videos,void 0))),S.on(g.fail,((e,{error:t,params:r})=>(0,l.updateEntitiesBy)(e,r.query.videos,t)));const m=(0,n.attach)({effect:g,mapParams:e=>{var{id:t,extended:r}=e,n=(0,a._)(e,["id","extended"]);return(0,o._)({},n,{query:{count:1,extended:r,videos:t}})}});var h,y,w;((0,n.sample)({clock:[g.done,_.done],filter:({result:e})=>Boolean(e.items),fn:({result:e})=>e.items,target:f}),null==(d=t)?void 0:d.setGroupsEvent)&&(0,n.sample)({clock:[g.done,_.done],filter:({result:e})=>{var t;return Boolean(null==(t=e.groups)?void 0:t.length)},fn:({result:e})=>null!=(y=e.groups)?y:[],target:null==(h=t)?void 0:h.setGroupsEvent});(null==(u=r)?void 0:u.setUsersEvent)&&(0,n.sample)({clock:[g.done,_.done],filter:({result:e})=>{var t;return Boolean(null==(t=e.profiles)?void 0:t.length)},fn:({result:e})=>null!=(w=e.profiles)?w:[],target:r.setUsersEvent});return(0,n.sample)({clock:E,source:p,fn:(e,t)=>t.map((t=>{const r=(0,s.joinRawId)({ownerId:t.owner_id,itemId:t.id});return(0,o._)({},e[r],t)})),target:f}),(0,c.registerEntitiesSetSample)(f,p),{$entitiesVideo:p,$entitiesVideoLoading:v,$entitiesVideoErrors:S,patchVideosEvent:E,setVideosEvent:f,videoGetFx:g,videoGetByIdFx:m,videoGetVideoDiscoverFx:_}}},759336:(e,t,r)=>{r.d(t,{createListsVideosAlbumsService:()=>i});var o=r(108705),a=r(838740),n=r(584646);const s=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,o.joinRawId)({itemId:e,ownerId:t}),i=({domain:e,entitiesVideoAlbumService:t})=>{const r=(0,a.createVideoGetAlbumsExtendedFx)({domain:e}),o=e.createEffect(r),i=(0,n.createFactoryLists)({$entitiesItems:t.$entitiesVideoAlbums,domain:e,fetchFx:o,getItemKey:s,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:s});return{resetVideosAlbumsEvent:i.resetEvent,fetchMoreVideosAlbumsEvent:i.fetchMoreEvent,fetchVideosAlbumsFx:i.fetchFx,$videosAlbumsFullyLoaded:i.$entitiesFullyLoaded,$videosAlbumsLoading:i.$entitiesLoading,$videosAlbumsIds:i.$entitiesListIds,$videosAlbumsCount:i.$entitiesCount,$videosAlbumsError:i.$entitiesError,selectStores:i.selectStores}}},528676:(e,t,r)=>{r.d(t,{createVideoAlbumSubscriptionEffect:()=>n});var o=r(820224),a=r(798116);const n=(e,t,r)=>{const n=(0,a.createEffect)((t=>{var{optimistic:r}=t,a=(0,o._)(t,["optimistic"]);return e(a)}));return(0,a.sample)({clock:n,filter:({optimistic:e=!1,query:t})=>e&&void 0!==t.album_id,fn:({query:e})=>[{owner_id:e.owner_id,id:Number(e.album_id),is_subscribed:r}],target:t}),(0,a.sample)({clock:n.fail,filter:({params:e})=>Boolean(e.optimistic)&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:!r}],target:t}),(0,a.sample)({clock:n.done,filter:({params:e})=>!e.optimistic&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:r}],target:t}),n}},727320:(e,t,r)=>{r.d(t,{registerEntitiesSetSample:()=>s});var o=r(798116),a=r(108705),n=r(584117);const s=(e,t)=>{(0,o.sample)({clock:e,source:t,fn:(e,t)=>{const r=t.filter((e=>void 0!==e.owner_id&&void 0!==e.id));return r.length?(0,n.mapToEntity)(e,r,(e=>(0,a.joinRawId)({ownerId:e.owner_id,itemId:e.id}))):e},target:t})}},255344:(e,t,r)=>{function o(e){var t,r,o,a,n,s,i,l;const c=null==(r=e.lists)||null==(t=r.allowed)?void 0:t.map((e=>`list${e}`)).join(","),d=null==(a=e.lists)||null==(o=a.excluded)?void 0:o.map((e=>`-list${e}`)).join(","),u=null==(s=e.owners)||null==(n=s.allowed)?void 0:n.join(","),g=null==(l=e.owners)||null==(i=l.excluded)?void 0:i.map((e=>-e)).join(",");return[e.category,c,d,u,g].filter(Boolean).join(",")}r.d(t,{stringifyBasePrivacy:()=>o})},386037:(e,t,r)=>{r.d(t,{updateEntitiesBy:()=>a});var o=r(434788);const a=(e,t,r)=>{var a,n;const s=Array.isArray(t)?t:null==(a=t)?void 0:a.split(",");if(!(null==(n=s)?void 0:n.length))return e;if(void 0!==r){const t=Object.fromEntries(new Map(s.map((e=>[e,r]))));return(0,o._)({},e,t)}return s.reduce(((e,t)=>(delete e[t],e)),(0,o._)({},e))}},66957:(e,t,r)=>{r.d(t,{isVideoVideoAlbumFull:()=>o});const o=e=>"object"==typeof e&&null!==e&&"id"in e&&"owner_id"in e&&"title"in e&&"count"in e},281848:(e,t,r)=>{r.d(t,{splitRawId:()=>o});const o=e=>{const[t,r,o]=e.split("_");return{ownerId:Number(t),itemId:Number(r),externalId:void 0!==o?o:null}}},427164:(e,t,r)=>{r.d(t,{default:()=>n});var o,a=r(310396);e=r.hmd(e),o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e;const n=(0,a.default)(o)},310396:(e,t,r)=>{function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,{default:()=>o})}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,r,o)=>{if(!t){var a=1/0;for(l=0;l<deferred.length;l++){for(var[t,r,o]=deferred[l],n=!0,s=0;s<t.length;s++)(!1&o||a>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[s])))?t.splice(s--,1):(n=!1,o<a&&(a=o));if(n){deferred.splice(l--,1);var i=r();void 0!==i&&(e=i)}}return e}o=o||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>o;l--)deferred[l]=deferred[l-1];deferred[l]=[t,r,o]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var o={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&t&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(r,o),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>25394===e?"AudioLongtapModal.7e0dfcf5bfaeea74634a.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.ef06223020efb2b6ec6b.js":79852===e?"37d152adcd0dd111ce505d394803d701.async.f06867e3cb1f30e8925c.js":96816===e?"web-audio-lyrics-modal.1a211e52d789ac7fac77.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.3d45c322ccf50af43298.js":28872===e?"feed-client-nav-skeleton.93951c516f1e3f2a55ad.js":35953===e?"feed-client-nav-async-right-block.98e503ddcd7a638e1b63.js":60593===e?"ui_scroll.a86cb1a828acd98d68be.js":96361===e?"cc22a516cbe3b61d6f5e8d8711e63166.async.bb96d749fd74e43dfe3e.js":89658===e?"video_groups_redesign.3eff5a6faeeefeeeebaa.js":68137===e?"1c20f60ee879bca5a33f5ac404c8fb29.async.211f064d74bf6e21a1fc.js":72149===e?"0522dee79d8b099a5d15ff21bf794ab7.async.248945422ad09ab61334.js":54650===e?"video_showcase_horizontal_scroll_block.3c776e3a8f00a54b7cdb.js":13412===e?"9f5b456c2e9a40d01ea71c0900b4e059.async.a0816ba3dc79c3bd2523.js":16957===e?"video_showcase_onboarding.2185a995f1052c7f07db.js":63161===e?"video_showcase_nps.0eb7fc1cf058b44a8181.js":62795===e?"video_tabs.787b52f7e7350c62b1e9.js":94749===e?"6b5a318884d3469d78bf8c2fca986e5e.async.d882d5b8d08810c43c63.js":52974===e?"videoplayer_v2.16eebbde45fb175b4748.js":74212===e?e+".3c2153e4b2773d84f0b3.js":9202===e?"9202.be55f73a991e4eb41a2e.js":79118===e?e+".87b62f94f0e27cef52c4.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{16957:"b4893c8dde7f3dad9f0b",25394:"5e3e105ffae6ba5c38a9",54650:"43f97c515ec3006f0d56",57468:"a2979e7d82457c1ea9fc",62795:"e844020f55cadaa6ce04",63161:"286898ea40f2028d2453",75980:"5bbee2c9f3e189193a73",89658:"d63181cebbbf125efe53"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,r,o)=>{if(inProgress[e])inProgress[e].push(t);else{var a,n;if(void 0!==r)for(var s=document.getElementsByTagName("script"),i=0;i<s.length;i++){var l=s[i];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+r){a=l;break}}a||(n=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack","vk:"+r),a.src=e),inProgress[e]=[t];var c=(t,r)=>{a.onerror=a.onload=null,clearTimeout(d);var o=inProgress[e];if(delete inProgress[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),n&&document.head.appendChild(a)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,r)=>{var o=__webpack_require__.miniCssF(e),a=__webpack_require__.p+o;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var a=(s=r[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){var s;if((a=(s=n[o]).getAttribute("data-href"))===e||a===t)return s}})(o,a))return t();((e,t,r,o)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)r();else{var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,a.parentNode.removeChild(a),o(l)}},a.href=t,document.head.appendChild(a)})(e,a,t,r)})),installedCssChunks={45973:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{16957:1,25394:1,54650:1,57468:1,62795:1,63161:1,75980:1,89658:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={45973:0};__webpack_require__.f.j=(t,r)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise(((r,a)=>o=e[t]=[r,a]));r.push(o[2]=a);var n=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(n,(r=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",s.name="ChunkLoadError",s.type=a,s.request=n,o[1](s)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[n,s,i]=r,l=0;if(n.some((t=>0!==e[t]))){for(o in s)__webpack_require__.o(s,o)&&(__webpack_require__.m[o]=s[o]);if(i)var c=i(__webpack_require__)}for(t&&t(r);l<n.length;l++)a=n[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},r=self.webpackChunkvk=self.webpackChunkvk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,76400,24509,40885,76429,68592,19970,78413,7854,88656,98725],(()=>__webpack_require__(237421)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();