(()=>{"use strict";var e,t,a,r,o,i,n={793830:(e,t,a)=>{a.d(t,{WebAttachPlayerAdapter:()=>c});var r=a(182780),o=a(132247),i=a(29271),n=a(9480),l=a(839470),s=a(145669),d=a(800523),u=a(182525);class c{constructor(e){this.soundBarClass="audio_row__sound_bars",this.playButtonClass="SecondaryAttachment__iconButton",this.avatarContainerClass="SecondaryAttachmentAvatar",this.secondaryAttachmentClass="SecondaryAttachment",this.langMap={lang_play:i.getLang("global_audio_play"),lang_pause:i.getLang("global_audio_pause"),lang_add_audio:i.getLang("audio_add_to_audio"),lang_remove_audio:i.getLang("audio_delete_audio"),lang_ads:i.getLang("audio_lyrics_ads")},this.features={isAudioPlayerRedesignEnabled:(0,l.partConfigEnabled)("feed_secondary_attachment_audio_redesign")},this.appendPlaylistFromElements=e=>{const t=this.getSharedFeedAudioEntryStore(),a=t.getAllAudios();return e.pushAudio(a),t.cleanUp(),e},this.getWebAttachPlaylist=e=>{if(e){let t=this.player.getPlaylist(e.type,e.ownerId,e.albumId);return t=this.appendPlaylistFromElements(t),t}return new o.WebPlayerAdapter(this.player).getPlaylistId()?this.player.getCurrentPlaylist():this.player.getPlaylist(s.AudioPlaylist.TYPE_TEMP,window.vk.id)},this.play=(e,t,a)=>{var r;const{contextWithId:o,playlistId:i}=null!=a?a:{};if(null==(r=this.player.getPlaylistQueue().autoplayQueue)?void 0:r.enabled){let t=null;i&&(t=this.player.getPlaylist(i),o&&t.setContext(o)),this.player.play(e,t,o)}else{var n;const t=this.getWebAttachPlaylist(a);var l;this.player.play(e,t,null!=(l=null==(n=a)?void 0:n.context)?l:u.AudioPlaylistContext.WALL)}},this.playPlaylist=(e,t,a)=>this.player.playPlaylist(e,t,a),this.pause=()=>this.player.pause(),this.stop=()=>this.player.stop(),this.seek=e=>this.player.seek(e),this.getCurrentPlaylist=()=>this.player.getCurrentPlaylist(),this.getCurrentPlaylistId=()=>"",this.subscribe=(e,t,a)=>this.player.on(e,t,a),this.unsubscribe=e=>{(0,l.partConfigEnabled)("primary_attachment_audio_component_and_services_clean_up")&&this.player.off(e)},this.notify=(e,...t)=>{this.player.notify(e,t)},this.getCurrentAudio=()=>this.player.getCurrentAudio(),this.getPreviousAudio=()=>{var e;return null!=(e=this.player.getPreviousAudio())?e:null},this.addOrDeleteAudio=(e,t)=>{const a=r.Player.coerceAttachAudioIntoAudioObject(t);n.AudioUtils.addAudio(e,a,(()=>{}),a.context)},this.setVolume=e=>{this.player.setVolume(e)},this.getVolume=()=>this.player.getVolume(),this.isAdsPlaying=()=>{var e,t;return null!=(t=null==(e=this.player.ads)?void 0:e.isActive)&&t},this.isPlaying=()=>{var e;return null!=(e=this.player.isPlaying())&&e},this.getSharedFeedAudioEntryStore=()=>(0,d.getSharedFeedAudioEntryStore)(),this.player=e,this.player.eventBus&&(this.subscriptions=this.player.eventBus.subscriptions),this.ads=this.player.ads}}},363025:(e,t,a)=>{var r,o,i,n=a(283452),l=a(95432),s=a(793830),d=a(182780),u=a(9480),c=a(864424),y=a(839470),p=a(925189),h=a(796943);function A(){const e=new s.WebAttachPlayerAdapter((0,l.getAudioPlayer)());return new d.Player(e)}(null==(o=window.vk)||null==(r=o.pe)?void 0:r.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(a.p=window.vk.stDomain+"/dist/"),window.vk.widget||((0,n.tq)().setStartupHandler("WebSecondaryAudioAttach/init",(({payload:{target:e,data:t}})=>{"audio-play"===t.after_data_action&&A().addAudioElementyToList(e)})),(0,n.tq)().setStartupHandler("WebSecondaryAudioPodcastAttach/init",(({payload:{target:e,data:t}})=>{var a;"audio-podcast-play"===t.after_data_action&&t.podcast_id&&(null==(a=e)||a.classList.add(`_audio_row_${t.podcast_id}`))})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/playAudio",(e=>{var t,a,r;let{audio:o}=e.payload.dataAttrs;const i=JSON.parse(o);if(i.restrictionStatus)return void u.AudioUtils.showAudioRestriction(i);const n=A(),l=e.payload.target;let s=!1;const c=[`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.ACTIONS}`,`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.AFTER_ITEM_SLIDER}`];if(window.cur._sliderMouseUpNowEl&&(null==(a=window.cur)||null==(t=a._sliderMouseUpTargetElement)?void 0:t.closest(`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`))&&c.every((e=>{var t,a;return!(null==(a=window.cur)||null==(t=a._sliderMouseUpTargetElement)?void 0:t.closest(e))}))&&(s=!0),delete window.cur._sliderMouseUpNowEl,delete window.cur._sliderMouseUpTargetElement,s)return;const y=null==(r=l)?void 0:r.closest(`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`);n.togglePlay(i,y)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/addAudio",(e=>{var t;const a=null==(t=e.payload.target)?void 0:t.closest(`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`);A().addAudio(a)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/uma",(e=>{var t;const a=null==(t=e.payload.target)?void 0:t.closest(`.${d.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`),r=d.Player.getAudioDataFromElement(a);u.AudioUtils.getUMAInfo(a,r)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/playPlaylist",(e=>{var t,a;const{playlistId:r,ownerId:o,accessKey:i,restricted:n,context:l}=e.payload.dataAttrs;if(n)return;const s=(null==(a=e.payload)||null==(t=a.event)?void 0:t.target).closest(".SecondaryAttachment__after");var d;s&&"audio-play"===s.dataset.afterAction?A().togglePlayPlaylist(e.payload.target,r,o,i):u.AudioUtils.showAudioPlaylist(o,r,i,l,null==(d=e.payload)?void 0:d.event)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/showPodcast",(e=>{const{podcastId:t,restricted:a}=e.payload.dataAttrs;a?u.AudioUtils.showAudioRestriction({restrictionStatus:a}):(0,l.showPodcast)(null,t,e.payload.event,"audio")})),(0,h.onDomReady)((()=>{(0,y.partConfigEnabled)("feed_content_events_open_audio")&&A().eventEmitter.on(p.AttachPlayerEvents.PLAY,c.attachPlayerEventHandler)})));try{window.stManager.done(window.jsc("web/secondary_attachment_audio.js"))}catch(e){}}},l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return n[e].call(a.exports,a,a.exports,s),a.exports}s.m=n,e=[],s.O=(t,a,r,o)=>{if(!a){var i=1/0;for(u=0;u<e.length;u++){for(var[a,r,o]=e[u],n=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](a[l])))?a.splice(l--,1):(n=!1,o<i&&(i=o));if(n){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,r,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var i={};t=t||[null,a({}),a([]),a(a)];for(var n=2&r&&e;"object"==typeof n&&!~t.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,s.d(o,i),o},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,a)=>(s.f[a](e,t),t)),[])),s.u=e=>25394===e?"AudioLongtapModal.7e0dfcf5bfaeea74634a.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.ef06223020efb2b6ec6b.js":79852===e?"37d152adcd0dd111ce505d394803d701.async.f06867e3cb1f30e8925c.js":96816===e?"web-audio-lyrics-modal.1a211e52d789ac7fac77.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.3d45c322ccf50af43298.js":28872===e?"feed-client-nav-skeleton.93951c516f1e3f2a55ad.js":35953===e?"feed-client-nav-async-right-block.98e503ddcd7a638e1b63.js":9202===e?"9202.be55f73a991e4eb41a2e.js":79118===e?e+".87b62f94f0e27cef52c4.js":void 0,s.miniCssF=e=>e+"."+{25394:"5e3e105ffae6ba5c38a9",57468:"a2979e7d82457c1ea9fc",75980:"5bbee2c9f3e189193a73"}[e]+".css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},s.l=(e,t,a,o)=>{if(r[e])r[e].push(t);else{var i,n;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+a){i=u;break}}i||(n=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack","vk:"+a),i.src=e),r[e]=[t];var c=(t,a)=>{i.onerror=i.onload=null,clearTimeout(y);var o=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(a))),t)return t(a)},y=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),n&&document.head.appendChild(i)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/dist/",o=e=>new Promise(((t,a)=>{var r=s.miniCssF(e),o=s.p+r;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=(n=a[r]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===e||o===t))return n}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var n;if((o=(n=i[r]).getAttribute("data-href"))===e||o===t)return n}})(r,o))return t();((e,t,a,r)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=i=>{if(o.onerror=o.onload=null,"load"===i.type)a();else{var n=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=n,s.request=l,o.parentNode.removeChild(o),r(s)}},o.href=t,document.head.appendChild(o)})(e,o,t,a)})),i={86288:0},s.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(i[e]=o(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{s.b=document.baseURI||self.location.href;var e={86288:0};s.f.j=(t,a)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise(((a,o)=>r=e[t]=[a,o]));a.push(r[2]=o);var i=s.p+s.u(t),n=new Error;s.l(i,(a=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",n.name="ChunkLoadError",n.type=o,n.request=i,r[1](n)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var r,o,[i,n,l]=a,d=0;if(i.some((t=>0!==e[t]))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(l)var u=l(s)}for(t&&t(a);d<i.length;d++)o=i[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self.webpackChunkvk=self.webpackChunkvk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var d=s.O(void 0,[75514,98066,56990,76400,24509,40885,68592,67370],(()=>s(363025)));d=s.O(d)})();