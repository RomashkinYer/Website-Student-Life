(()=>{"use strict";var __webpack_modules__={988865:(e,t,o)=>{o.d(t,{Icon56HideOutline:()=>s});var s=(0,o(28178).makeIcon)("Icon56HideOutline","hide_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="hide_outline_56"><g fill="none" fill-rule="nonzero"><path d="M0 0h56v56H0z" /><path fill="currentColor" d="M12.44 10.44a1.5 1.5 0 0 1 2.12 0l31 31a1.5 1.5 0 0 1-2.12 2.12l-2.515-2.513C37.03 43.573 32.652 45 28 45c-6.256 0-12.004-2.583-16.639-6.832C7.644 34.761 5 30.484 5 28c0-3.35 4.362-9.256 9.932-12.947l-2.493-2.492a1.5 1.5 0 0 1 0-2.122m4.662 6.784C12.052 20.387 8 25.732 8 28c0 1.454 2.232 5.063 5.389 7.957C17.505 39.73 22.556 42 28 42c3.828 0 7.46-1.118 10.75-3.129l-4.446-4.446a9 9 0 0 1-12.728-12.728ZM28 11c6.256 0 12.004 2.583 16.639 6.832C48.356 21.239 51 25.516 51 28c0 1.99-1.714 5.171-4.331 8.11a1.5 1.5 0 0 1-2.24-1.996C46.6 31.676 48 29.078 48 28c0-1.454-2.232-5.063-5.389-7.957C38.495 16.27 33.444 14 28 14c-1.443 0-2.86.159-4.248.468a1.5 1.5 0 1 1-.652-2.928c1.6-.356 3.236-.54 4.9-.54m-4.302 12.819a6 6 0 0 0 8.484 8.485Zm5.93-3.295a1.5 1.5 0 0 1 1.975-.774 9.028 9.028 0 0 1 4.65 4.651 1.5 1.5 0 0 1-2.75 1.2 6.028 6.028 0 0 0-3.102-3.102 1.5 1.5 0 0 1-.774-1.975" /></g></symbol>',56,56,!1,void 0)},501461:(e,t,o)=>{o.d(t,{KEY:()=>s,isMainClick:()=>r,preventLinkOpening:()=>n});const s={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16,META_LEFT:91,META_RIGHT:93};function r(e){return!("click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}const n=e=>new Promise((t=>{r(e instanceof MouseEvent?e:e.nativeEvent)&&(e.stopPropagation(),e.preventDefault(),t())}))},103912:(e,t,o)=>{o.d(t,{getPerformanceStatsEventMomentData:()=>r});var s=o(121677);const r=()=>{var e,t;const o=null==(e=(t=performance).now)?void 0:e.call(t);if(void 0===o)return;return{eventTime:o,network:s.default.getConnectionEffectiveType()}}},593568:(e,t,o)=>{o.d(t,{getPerformanceStatsTools:()=>a});var s=o(11010),r=o(434788),n=o(103912),i=o(745163);function a(){return l.apply(this,arguments)}function l(){return(l=(0,s._)((function*({module:e=i.navigationStat.getModule(),page:t,entity:s,cooldownRecord:a}={}){if(!window.performance||"visible"!==window.document.visibilityState)return;const l=(0,n.getPerformanceStatsEventMomentData)();return l?o.e(59240).then(o.bind(o,642440)).then((({configurePerformanceStatsUtils:o,navigationStat:n,PerformanceStatsEventName:i,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d})=>{if(!n.getModule)return;const{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:p}=o((0,r._)({},l,{module:e,page:t,entity:s,cooldownRecord:a}));return p(i.load_performance_stats_chunk)||(u(i.load_performance_stats_chunk,!0),_()),{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:p,PerformanceStatsEventName:i,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d}})):void 0}))).apply(this,arguments)}},222285:(e,t,o)=>{o.d(t,{BADGES_BOX_WIDTH:()=>s,BADGES_RESTRICTED_CLASS_SELECTOR_FOR_POST:()=>b,BADGE_COMMENT_SELECTOR:()=>c,BADGE_IMAGE_SIZE_100:()=>f,BADGE_IMAGE_SIZE_128:()=>p,BADGE_IMAGE_SIZE_20:()=>m,BADGE_IMAGE_SIZE_28:()=>w,BADGE_IMAGE_SIZE_64:()=>g,BADGE_IMAGE_SIZE_96:()=>h,BadgesEventName:()=>a,BadgesEventRef:()=>i,BadgesObjectType:()=>l,DONUT_BADGE_ID:()=>_,DONUT_FORM_STATUSES:()=>u,ERRORS:()=>n,LINK_TO_HELP_FOR_AUTHORS:()=>r,LoadingStatus:()=>d});const s=640,r="/@authors-badges";var n;!function(e){e[e.ERROR_PARAM=100]="ERROR_PARAM",e[e.NEED_CONFIRMATION=24]="NEED_CONFIRMATION",e[e.BALANCE=504]="BALANCE"}(n||(n={}));const i={TAB:"tab",SENDER_LIST:"sender_list",POST_BTN:"post_btn",COLLECTION_BLOCK:"collection_block",COLLECTON_ALL:"collecton_all",NOTIFICATION:"notification",PUSH:"push",PIN:"pin",COMMENT_IMG:"comment_img",COMMENT_LINK:"comment_link",PROFILE_DETAILS:"profile_details"},a={OPEN_BADGE:"open_badge",OPEN_BADGES_ALL:"open_badges_all"};var l;!function(e){e[e.WALL=11]="WALL"}(l||(l={}));const c="BadgeComment";var d;!function(e){e[e.pending=0]="pending",e[e.loaded=1]="loaded",e[e.failed=2]="failed"}(d||(d={}));const u={waiting:"waiting",initial:"initial",error:"error",waiting_timeout:"waiting_timeout",payment_cancel:"payment_cancel"},_=38,p=128,f=100,h=96,g=64,w=28,m=20,b="post--badgesRestricted"},286118:(e,t,o)=>{o.d(t,{storyPublisherInitAsync:()=>r});var s=o(584356);function r(e){(function(e){const t=!0,o=(0,s.showBoxLoader)();return e.then((e=>t&&(0,s.isBoxLoadingCancelled)(o)?n:((0,s.isBoxLoadingCancelled)(o)||(0,s.hideBoxLoader)(),e)),(e=>((0,s.hideBoxLoader)(),Promise.reject(e))))})(window.stManager.add([window.jsc("web/story_publisher.js")])).then((t=>{(function(e){return e===n})(t)||window.StoryPublisher.init(...e)}))}const n="showBoxLoaderForPromise cancelled"},398986:(e,t,o)=>{var s,r,n,i=o(630260);(null==(r=window.vk)||null==(s=r.pe)?void 0:s.static_manager_dynamic_imports)&&(null==(n=window.vk)?void 0:n.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.feed=i.Feed,window.Feed=i.Feed;try{window.stManager.done(window.jsc("web/feed.js"))}catch(e){}},165392:(e,t,o)=>{o.d(t,{hideRightBlock:()=>s.hideRightBlock,requestRightBlock:()=>s.requestRightBlock});var s=o(587367)},587367:(e,t,o)=>{o.d(t,{hideRightBlock:()=>b,requestRightBlock:()=>w});var s,r=o(11010),n=o(434788),i=o(719645),a=o(795558),l=o(970978),c=o(561826),d=o(363444),u=o(934913),_=o(813100),p=o(300120),f=o(989311);!function(e){e.fromDocumentRequest="from_document_request"}(s||(s={}));const h=e=>{p.debugConsole.error(e),(0,l.logError)(new Error(e))};function g(e,t,o,s){e.insertAdjacentHTML("beforeend",t),o&&(0,i.evalWithLogging)(o),function(e){e.no_left_ads&&(window.cur.no_left_ads=!0);e.is_games_in_right_block&&(window.cur.isGamesInRightBlock=!0)}(s),p.debugConsole.info("FeedPageRightBlock: right block has been shown.")}function w(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)((function*({isDocumentRequest:e,params:t}){const o=(0,f.getFeedPageLoadingState)().rightBlock.setRequestStarted();try{p.debugConsole.info("FeedPageRightBlock: right block request started");const s=yield d.ajax.promisifiedPost("al_feed_right_block.php",(0,n._)({},t,{from_document_request:e}),{cancellationToken:o,local:e,ignoreDefaultErrorLogger:!0});if(e&&!(0,_.isPageTheSame)())return void p.debugConsole.error("FeedPageRightBlock: landing on page with different page id (document request)");if(!Array.isArray(s))return void h("FeedPageRightBlock: no array returned in response to request");const[r]=s;if(!(0,u.isLikePlainObject)(r,{html:"",js:"",no_left_ads:!1,is_games_in_right_block:!1}))return void h(`FeedPageRightBlock: invalid response: ${(0,c.stringifyUnknown)(r)}`);(0,f.getFeedPageLoadingState)().rightBlock.setRequestState("success");const{html:i,js:a,no_left_ads:l,is_games_in_right_block:w}=r;return p.debugConsole.info("FeedPageRightBlock: right block request has been completed. Data: ",r),i?e=>g(e,i,a,{no_left_ads:l,is_games_in_right_block:w}):void p.debugConsole.info("FeedPageRightBlock: no html (no right block)")}catch(e){(0,f.getFeedPageLoadingState)().rightBlock.setRequestState("error"),h(`FeedPageRightBlock: error loading block. Error: ${(0,c.stringifyUnknown)(e)}`)}}))).apply(this,arguments)}function b(e,t,o){let s=(0,a.domCA)(e,".page_block");return(0,a.re)(s),window.cur.isGamesInRightBlock=!1,window.ajax.post("al_feed.php",{act:"a_hide_right_block",block_type:t,app_id:e.dataset.app_id||0,hash:o}),!1}},509568:(e,t,o)=>{function s(e,t){return o.e(15302).then(o.bind(o,135617)).then((({initPhotoBlockInPost:o})=>o(e,t)))}o.d(t,{initPhotoBlockInPostLoader:()=>s})},710402:(e,t,o)=>{o.d(t,{initFeedRightBlocksLoader:()=>r});var s=o(82161);const r=e=>{const t=(0,s.vkLocal)((t=>t(e)));Promise.all([o.e(98066),o.e(53290)]).then(o.bind(o,9747)).then((({initFeedRightBlocks:e})=>{t(e)}))}},215460:(e,t,o)=>{var s;o.d(t,{BlockTypeIds:()=>s}),function(e){e.YoulaRecommendationsCarousel="block_youla-recommendations-carousel",e.AliExpressRecommendationsCarousel="block_aliexpress-recommendations-carousel",e.PhotoRecognize="tags_suggestions",e.RecommendedNarratives="recommended_narratives",e.BookmarkGame="bookmark_game",e.AchievementGame="achievement_game",e.VideosForYou="videos_for_you",e.VideoPostcard="video_postcard",e.UXPollBlock="uxpoll_block"}(s||(s={}))},688756:(e,t,o)=>{o.d(t,{LEAVING_FEED_STATS:()=>s});const s="leaving_feed_stats"},488957:(e,t,o)=>{o.d(t,{feedLoadingStats:()=>c});var s=o(11010),r=o(839470),n=o(593568),i=o(848751),a=o(688756);function l(){return(l=(0,s._)((function*(){const e=yield(0,n.getPerformanceStatsTools)({module:"feed",entity:a.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,readMetricValue:s,LeavingFeedEventName:r}=e;window.setTimeout((()=>{Object.keys(r).some(s)||(t(r.stay_in_feed,!0),o(),window.nav.removeNavigationStartListener(i.onNavigationStart))}),12e4)}))).apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=(0,s._)((function*({collect_stats:e,is_skeleton_rendered:t}){if(!e||!(0,r.partConfigEnabled)("feed_web_performance_stats"))return;(0,r.partConfigEnabled)("web_navigation_listeners")&&function(){l.apply(this,arguments)}();const o=yield(0,n.getPerformanceStatsTools)({module:"feed"});if(!o)return;const{storePerformanceStats:s,sendStoredPerformanceStats:i,PerformanceStatsEventName:a,AuxiliaryPerformanceStatsEventName:c}=o;s(a.render_content),s({metricName:a.render_content_without_ttfb,basisMetricName:a.render_content,auxiliaryMetricName:c.TTFB}),t?(s(a.render_content_after_skeleton),s({metricName:a.render_content_after_skeleton_without_ttfb,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:c.TTFB}),s({metricName:a.render_content_after_skeleton_without_skeleton,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:a.render_skeleton})):(s(a.render),s({metricName:a.render_without_ttfb,basisMetricName:a.render,auxiliaryMetricName:c.TTFB})),i()})),d.apply(this,arguments)}},848751:(e,t,o)=>{o.d(t,{onNavigationStart:()=>d});var s=o(11010),r=o(981254),n=o(593568),i=o(989311),a=o(543020),l=o(688756),c=o(82161);function d(e,t){return u.apply(this,arguments)}function u(){return(u=(0,s._)((function*(e,t){const o=window.nav.objLoc[0]===r.FeedPath.feed&&t[0]!==window.nav.objLoc[0];try{if(o&&(0,c.isPageFirstOneOpened)()&&!["error","timeout"].includes((0,i.getFeedPageLoadingState)().content.requestState)){const e=yield(0,n.getPerformanceStatsTools)({module:"feed",entity:l.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,LeavingFeedEventName:s,readMetricValue:r}=e;if(r(s.navigation_from_feed))return;t(s.navigation_from_feed),(0,i.getFeedPageLoadingState)().skeleton.hasSkeleton?t(s.navigation_from_feed_skeleton_on):t(s.navigation_from_feed_skeleton_off),["initial","loading"].includes((0,i.getFeedPageLoadingState)().content.requestState)?t(s.navigation_from_feed_before_page_load):t(s.navigation_from_feed_after_page_load),o(),window.nav.removeNavigationStartListener(d)}}catch(e){console.error("leaving feed navigation stats error"),(0,a.logUnknownError)(e)}}))).apply(this,arguments)}},941468:(e,t,o)=>{o.d(t,{feedLogFilteredRow:()=>n});var s=o(385376),r=o(290266);function n({filterReason:e,ref:t,row:o,rowsContainer:n,section:i}){var a,l;const c={contentId:null==(a=o.firstElementChild)?void 0:a.id,feedRowsCount:n.childElementCount,filterReason:e,ref:t,rowFlags:(0,r.formatStringValueBooleans)([Boolean(null==(l=o.firstElementChild)?void 0:l.id),Boolean(o.firstElementChild)]),section:i};(0,s.saveStatlogEvents)({name:"feed_pagination_item_filtered",value:c})}},175426:(e,t,o)=>{function s(e){const t=window.cur;t.feedScrollCheckIntervalID&&clearInterval(t.feedScrollCheckIntervalID);const o=setInterval((function(){"feed"===window.cur.module?e():s()}),500);function s(){clearInterval(o)}t.feedScrollCheckIntervalID=o,setTimeout(s,5e3)}o.d(t,{feedPaginationIntervalCheckInit:()=>s})},523408:(e,t,o)=>{o.d(t,{shouldFilterPaginatedRow:()=>l});const s=/^post(-?\d+_\d+)$/,r=e=>!!e.id&&s.test(e.id),n=e=>!!e.id&&e.id.startsWith("feedback_row"),i={shouldFilter:!1},a={shouldFilter:!0,filterReason:"empty"};function l({row:e}){const t=e.firstElementChild;return t?function(e){const t=r(e),o=n(e);if(!t&&!o)return i;const s=!!e.id&&null!==document.querySelector(`#${e.id}`);if(!s)return i;return{shouldFilter:!0,filterReason:c({isNotification:o,isPost:t})}}(t):a}function c(e){return e.isNotification?"duplicate_notification":e.isPost?"duplicate_post":"duplicate_unknown"}},466497:(e,t,o)=>{o.d(t,{initCheckValidationPhoneLoader:()=>s});const s=()=>o.e(37513).then(o.bind(o,42575)).then((({initCheckValidationPhone:e})=>{e()}))},290266:(e,t,o)=>{function s(e){return e.map((e=>e?"1":"0")).join("_")}o.d(t,{formatStringValueBooleans:()=>s})},813100:(e,t,o)=>{o.d(t,{isPageTheSame:()=>i});var s=o(839470),r=o(82161),n=o(934913);const i=(0,s.partConfigEnabled)("vk_local_return")?(0,r.vkLocal)((()=>!0)):(()=>{const e=(0,n.getField)(window,"PageID");return()=>e===(0,n.getField)(window,"PageID")})()},561826:(e,t,o)=>{o.d(t,{stringifyUnknown:()=>s});const s=e=>{if("object"!=typeof e)return String(e);try{return JSON.stringify(e)}catch(e){return"got a non-serializable error object"}}},934913:(e,t,o)=>{function s(e){return"object"==typeof e&&null!==e}function r(e,t){return function(e,t){return s(e)&&t in e}(e,t)?e[t]:void 0}o.d(t,{getField:()=>r,isLikePlainObject:()=>i,unknownToBinaryInt:()=>n});const n=e=>1===Number(e)?1:0;function i(e,t){return s(e)&&Object.entries(t).every((([t,o])=>typeof e[t]==typeof o))}},469943:(e,t,o)=>{function s(e){var t,o;if(null!==(o=t=e)&&"object"==typeof o&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}o.d(t,{subscriptionObjectStableId:()=>s})},617950:(e,t,o)=>{function s(e,t){return o.e(63167).then(o.bind(o,120425)).then((({default:o})=>{o.init(e,t)}))}o.d(t,{videoLiveBlacklistBoxLoader:()=>s})},120718:(e,t,o)=>{o.d(t,{API_VERSION:()=>s,CLOSE_STATUS:()=>u,ERROR_CODES:()=>a,ERROR_REASONS:()=>l,ERROR_TYPES:()=>c,GROUP_STATUS:()=>_,NFT_APP_ID:()=>g,ORD_APP_ID:()=>h,PERMISSION_TYPES:()=>d,PLATFORM:()=>i,PMC_PART_CONFIG_KEY_LONG_ID:()=>y,SITPOSTING_APP_ID:()=>w,TEXTLIVE_APPS:()=>f,THROTTLE_SCROLL_TIME:()=>r,VKPAY_APPS:()=>p,VKPAY_TRANSACTION_EVENT:()=>n,VK_CONNECT_EVENTS:()=>b,VK_CONNECT_SUPERAPPKIT_EVENT_TYPE:()=>v,VMOJI_CONSTRUCTOR_APP_ID:()=>m});const s="5.95",r=200,n="VKWebAppActionDone",i={WEB:"web",MOBILE_WEB:"mobile-web"},a={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,UNSUPPORTED_PLATFORM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11,CUSTOM:13,NO_ADS:20},l={ACCESS_DENIED:"Access denied",UNSUPPORTED_PLATFORM:"Unsupported platform",UNSUPPORTED_ACTION:"Unsupported action",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",CONNECTION_LOST:"Connection lost",NETWORK_ERROR:"Network error",USER_DENIED:"User denied",INVALID_PARAMS:"Invalid params",NO_ADS:"No ads",ADS_ALREADY_PLAYED:"Ads already played",VK_PAY_DISABLED:"This app can't use VK Pay",SCROLL_SUBSCRIBER_ALREADY_EXIST:"Scroll subscriber already exist",SUBSCRIPTION_IS_ALREADY_CANCELLED:"Subscription is in invalid status: subscription is already cancelled",SURVEY_INIT_IN_PROGRESS:"Survey init in progress",SURVEY_ALREADY_INIT:"Survey already init",SURVEY_NO_MATCH:"Survey no match",SURVEY_USER_CANCEL:"Survey user cancel",ALREADY_IN_PROGRESS:"Already in progress",USER_IS_NOT_GROUP_ADMIN:"Only group admins have access to group tokens",DEVICE_CANT_GET_GEODATA:"Device can't get geodata",USER_DIDNT_ALLOWED_ACTION:"User didn't allowed"},c={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},d={DENIED:"denied",PROMPT:"prompt",GRANTED:"granted"},u=["success","failed"],_={OPEN:0,CLOSED:1,PRIVATE:2},p=[6217559,7131443],f=[7512376],h=51707812,g=51459963,w=7644481,m=7929683,b={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_preload_settings",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppAllowNotificationsPreload:"are_notifications_allowed",VKWebAppAllowNotifications:"allow_notifications",VKWebAppDenyNotifications:"deny_notifications",VKWebAppAllowMessagesFromGroup:"allow_messages_from_group",VKWebAppAllowMessagesFromGroupPreload:"can_send_messages_from_group",VKWebAppJoinGroup:"join_group",VKWebAppJoinGroupPreload:"is_group_member",VKWebAppLeaveGroup:"leave_group",VKWebAppLeaveGroupPreload:"is_group_member",VKWebAppOpenApp:"open_app",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowSubscriptionBox:"subscription",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowLinkCardBox:"show_link_card",VKWebAppShowNftPaymentBox:"show_nft_pay_box",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppStorageGetKeys:"storage_get_keys",VKWebAppStorageSet:"storage_set",VKWebAppStorageGet:"storage_get",VKWebAppOpenArticleEditor:"open_article_edit",VKWebAppSubscribeStoryApp:"subscribe_story_app",VKWebAppClose:"close",VKWebAppGetSilentToken:"get_silent_token",VKWebAppCheckAllowedScopes:"check_allowed_scopes",VKWebAppOpenPayForm:"open_pay_form",VKWebAppCheckSurvey:"check_survey",VKWebAppShowSurvey:"show_survey",VKWebAppAddToChat:"add_to_chat",VKWebAppTrackEvent:"track_event",VKWebAppCallStart:"call_start",VKWebAppCallJoin:"call_join",VKWebAppCallLeft:"call_left",VKWebAppCallFinished:"call_finished",VKWebAppCallGetStatus:"call_get_status"},v="vk-sak-sdk",y="mini_apps_long_id"},630260:(e,t,o)=>{o.d(t,{Feed:()=>ie});var s=o(434788),r=o(659397),n=o(962983),i=o(839470),a=o(9480),l=o(301230),c=o(488957),d=o(175426),u=o(577552),_=o(652027),p=o(29271),f=o(643897),h=o(10645),g=o(849222),w=o(95432),m=o(584356),b=o(562112),v=o(953908),y=o(438221),k=o(795558),C=o(719645),S=o(96756),P=o(725296),E=o(514986),T=o(320422),A=o(215066),L=o(82161),B=o(469943),R=o(498275),N=o(84852),x=o(54413),I=o(854099),M=o(664988),O=o(617950),D=o(198186),F=o(709291),V=o(829234),j=o(215460),q=o(385295),H=o(509568),W=o(862736),U=o(880660),G=o(90692),K=o(941468),Y=o(523408),z=o(991243),Q=o(137363),X=o(710402),$=o(466497),J=o(931917),Z=o(321850),ee=o(864424),te=o(286118),oe=o(165392),se=o(122348),re=o(700771),ne=o(809053);const ie={sectionUpdateExceptions:["search","notifications","photos_search","mentions","articles","articles_search","likes","recommended","live","topics"],blockHideReason:function e(t,o){if(e.progress)return!1;e.progress=!0;let s="block_"+t,r=(0,k.ge)(s);delete cur.feedEntriesHTML[s],ajax.post("al_feed.php",{act:"a_block_hide_reason",block_id:t,reason:0|o,hash:(0,k.attr)(r,"data-hash"),ref:ie.getModuleRef(),pos:(0,k.attr)(r,"data-pos")},{onDone:function(t){e.progress=!1,t?(0,k.val)(r,t):(0,k.hide)(r)},hideProgress:function(){e.progress=!1}})},blockRestore:function(e){let t="block_"+e,o=(0,k.ge)(t);cur.feedEntriesHTML[t]&&(0,k.val)(t,cur.feedEntriesHTML[t]),ajax.post("al_feed.php",{act:"a_block_restore",block_id:e,hash:(0,k.attr)(o,"data-hash"),ref:ie.getModuleRef(),pos:(0,k.attr)(o,"data-pos")})},blockHide:function(e,t){if((0,P.actionsMenuItemLocked)(t))return;(0,P.lockActionsMenuItem)(t);let o="block_"+e,s=(0,k.ge)(o),r=(0,k.geByClass1)("ui_actions_menu_wrap",s);ajax.post("al_feed.php",{act:"a_block_hide",block_id:e,hash:(0,k.attr)(s,"data-hash"),ref:ie.getModuleRef(),pos:(0,k.attr)(s,"data-pos")},{onDone:function(e){uiActionsMenu.toggle(r,!1),cur.feedEntriesHTML[o]=(0,k.val)(s),(0,k.val)(s,e)},hideProgress:P.unlockActionsMenuItem.pbind(t)})},videoRecomsBlockHideCancel:function(){ajax.post("/al_feed.php",{act:"a_video_recom_hide_cancel"}),ie.restorePost("video_recoms")},videoRecomsBlockHideReason:function(e,t){(0,k.re)((0,k.geByClass1)("feed_rb_video_reason_wrap")),(0,k.show)((0,k.geByClass1)("feed_rb_video_reason_thankyou")),ajax.post("/al_feed.php",{act:"a_video_recom_hide_reason",reason:t,reason_hash:e})},expandVideosPost:function(e,t){let o=(0,k.geByClass1)("page_post_sized_thumbs",(0,k.domPN)(t)),s=0;(0,L.each)(o.children,(function(){if(!(0,k.isVisible)(this)&&((0,k.show)(this),s++,s>5))return!1})),(0,k.toggle)(t,!(0,k.isVisible)(o.children[o.children.length-1]))},update:function(e){if(cur.feedUpdateLoading)return;if(window.Notifier&&cur.add_queues&&cur.add_queues.length&&(cur.add_queues.forEach((function(e){Notifier.addKey(e,ie.updated)})),"news"!=cur.section))return;if("feed"!==cur.module||"top"==cur.subsection||(0,L.inArray)(cur.section,ie.sectionUpdateExceptions)||cur.isDisabledFeedAutoupdate)return;let t=Math.random();if("news"!=cur.section&&"comments"!=cur.section&&t>.3||"news"==cur.section&&(e||t>.05))return;cur.feedUpdateLoading=!0;let o=ie.getSectionParams(cur.section);(0,L.extend)(o,cur.navParams),ajax.post("al_feed.php?au_"+cur.section,(0,L.extend)(o,{timestamp:cur.timestamp,posted:e?1:"",queue:cur.add_feed_queue?1:0}),{onDone:function(t,o,s){if(cur.feedUpdateLoading=!1,1==e&&(!o||-1==o.indexOf(vk.id+"")))return void setTimeout(ie.update.pbind(2),2e3);if("feed"!==cur.module||t.section!=cur.section||t.timestamp<cur.timestamp||s<cur.timestamp)return;(0,A.statlogsValueEvent)("feed_check_update",!!o),t.count+=cur.count;let r,n,i,a,l=cur.rowsCont,c=(0,k.ce)("div"),d=0;if("news"==cur.section){if(a=(0,y.scrollGetY)(),o){for(c.innerHTML=o;c.lastChild;)r=c.lastChild,l.insertBefore(r,l.firstChild),ie.onPostLoaded(r,!0);(0,L.each)((0,k.geByClass)("ts"+s,l),(function(e,t){var o,s;d+=this.offsetHeight;const r=null==(s=t)||null==(o=s.querySelector)?void 0:o.call(s,".post");r&&(0,D.highlightUpdatedPost)(r),cur.feedUnreadCount++}))}d&&a>100&&(0,y.scrollToY)(a+d,0,!1,!0)}else if(o)for(c.innerHTML=o;r=c.lastChild;)if("DIV"==r.tagName)if("podcasts_recommended_block"!==r.id)if(i=r.firstChild.id.substr(4),i&&cur.wallLayer==i)c.removeChild(r);else if(n=(0,k.ge)("post"+i)){if(!(0,k.hasClass)(n.parentNode,"feed_row"))return;const e=(0,k.ge)("replies"+i);let t=e.nextSibling,o=0;if((0,L.each)([].slice.call((0,k.geByClass)("reply",r,"div")),(function(){(0,k.ge)(this.id)||((0,k.addClass)(this,"new_reply"),e.appendChild(this),o++)})),o){let s=n.parentNode.offsetHeight,r=(0,k.geByClass)("new_reply",e,"div").length;t&&"replies_open"==t.className||(t=(0,k.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(i),role:"button",tabIndex:0}),e.parentNode.insertBefore(t,e.nextSibling)),t.innerHTML=p.getLang("wall_x_new_replies_more",Math.min(100,r)),t.newCnt=r;let a=(0,y.scrollGetY)(),c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=(0,k.getXY)(t)[1],u=n.parentNode.offsetHeight;s=u-s,(0,L.inArray)(i,cur.feedUnread)||cur.feedUnread.unshift(i),!cur.idleManager.isIdle&&d>a+100&&d<a+c+100?(l.insertBefore((0,k.ge)("post_ph"+i)||(0,k.ce)("div",{id:"post_ph"+i}),l.firstChild),(0,L.inArray)(i,cur.feedToSort)||cur.feedToSort.push(i)):((0,k.re)(n.parentNode),l.insertBefore(n.parentNode,l.firstChild),d>a+c+100&&(s=u),s&&(0,y.scrollToY)((0,y.scrollGetY)()+s,0,!1,!0)),cur.feedUnreadCount+=o}c.removeChild(r)}else a=(0,y.scrollGetY)(),l.insertBefore(r,l.firstChild),ie.onPostLoaded(r,!0),d=r.offsetHeight,a>100&&(0,y.scrollToY)(a+d,0,!1,!0);else c.removeChild(r);else c.removeChild(r);ie.applyOptions(t),ie.updateTitle()},onFail:function(){return cur.feedUpdateLoading=!1,!1},showProgress:function(){cur.feedUpdateLoading=!0},hideProgress:function(){cur.feedUpdateLoading=!1}})},getNewQKey:function(e){let t={act:"a_get_key",only_update:cur.add_feed_queue?1:0,need_ignore:(0,M.isArray)(cur.ignore_owners)?0:1},o={onDone:function(o,s,n){if(cur.section!=r)return;if(cur.add_feed_queue=n,o)cur.add_queues=o,setTimeout(ie.update.pbind(0),0);else if(!t.only_update){let t=s;return void(cur.timestamp=(t||(0,M.vkNow)()/1e3)-e)}(0,M.isArray)(s)&&(cur.ignore_owners=s)},local:1},r=cur.section;ajax.post("al_feed.php",(0,s._)({},ie.getSectionParams(cur.section),t,{queue:1}),o)},updated:function(e,t){cur.queueTO=cur.queueTO||(0,M.irand)(0,5e3),setTimeout(ie.handleQueueEvent.pbind(e,t),cur.queueTO)},handleQueueEvent:function(e,t){if("search"!=cur.section&&"news"!=cur.section&&cur.section||!(0,M.isArray)(cur.add_queues))return;const o=cur.add_queues.find((t=>(0,B.subscriptionObjectStableId)(t)===e));if(!o)return;if(t.failed){cur.add_queues=!1,cur.add_feed_queue=null;let e=curNotifier.error_timeout||1;return clearTimeout(cur.lp_error_to),void(cur.lp_error_to=setTimeout(ie.getNewQKey.bind(ie).pbind(e),1e3*e))}if(!(0,M.isArray)(t.events)||!t.events.length)return;o.ts=t.ts,t.key&&(o.key=t.key);let s=(0,y.scrollGetY)(),r=0;(0,L.each)(t.events,(function(){if((0,M.isObject)(this))return Wall.processQueueEvent(this);r+=ie.pushEvent(this.split("<!>"),s+(0,k.getSize)("page_header_cont")[1])}));let n=(0,y.scrollGetY)();r&&Math.abs(s-n)<100&&(cur.leftMenuDelta=r,(0,y.scrollToY)(n+r,0,!1,!0)),ie.updateTitle(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()},needScrollPost:function(e,t){return e+80>(0,k.getXY)(t)[1]||cur.storyLayer||window.mvcur&&mvcur.mvShown||window.pvcur&&cur.pvShown},pushEvent:function(e,t){let o=e[0],r=e[1],n=e[2],i=(0,k.ge)("post"+n),l=cur.section,c="search"!=l?(0,L.intval)(e.pop()):0,d=0,u=function(e){return(0,L.intval)((0,k.getStyle)((0,k.domByClass)(e,"page_block"),"marginTop"))||(0,L.intval)((0,k.getStyle)((0,k.domByClass)((0,k.domNS)(e),"page_block"),"marginTop"))||15};if(!cur.options||o!=cur.options.qversion)return 0;switch((Wall.isArchiveWall()?"archive_post"===r:"reveal_post"===r)&&(r="res_post"),(Wall.isArchiveWall()?"reveal_post"===r:"archive_post"===r)&&(r="del_post"),r){case"new_post":{if(i)break;let o=Q.GroupAdminLevel.USER;if((0,L.intval)(e[11])&&(0,L.intval)(e[11])!=vk.id)return ajax.post("al_feed.php",{act:"a_need_own_reply",oid:(0,L.intval)(e[11])},{onDone:function(o){o&&(e[11]=0,ie.pushEvent(e,t))}}),0;if("search"!=l){let t=n.split("_")[0];e[8]=(0,L.intval)(e[8])>0&&4==(4&c)?"1":"0",J.Ranges.isGroupId(t)&&(o=8&c?Q.GroupAdminLevel.EDITOR:2&c?Q.GroupAdminLevel.MODERATOR:Q.GroupAdminLevel.USER)}"search"==l&&(0,A.statlogsValueEvent)("feed_switch",0,"search_update",cur.options.q&&"#"==cur.options.q.charAt(0)?"hashtag":"");let s=cur.rowsCont,r=s.childNodes,_=Wall.getNewPostHTML(e,o,ie.feedPostRepl);if(!_)break;let f,h,g,w,m,b,v=e[12],y="search"!=l&&(window._wf<=0||(0,k.hasClass)(cur.feedEls.wrap,"feed_has_new")||ie.needScrollPost(t,s)),C=cur.storyLayer;C&&(y=!0);let S=!1,P=_;if(y&&(_=Wall.updatePostImages(_)),v){if(cur.ignore_owners.length&&(0,L.inArray)((0,L.intval)(v),cur.ignore_owners))break;if(h=(0,k.geByClass1)("feed_reposts_wrap"+v,s,"div"))g=(0,k.geByClass1)("feed_reposts_first",h,"div").firstChild,w=(0,k.geByClass1)("feed_reposts_group",h,"div"),m=(0,k.geByClass1)("feed_reposts_more_link",h),ie.needScrollPost(t,g)&&(d-=g.offsetHeight+u(g)),g.parentNode.replaceChild(f=(0,k.se)(P),g),w.insertBefore(g,w.firstChild),(0,k.isVisible)(w)||I.FlatButton.setLabel(m,p.getLang("news_show_X_reposts",w.childNodes.length)),h=h.parentNode,s.firstChild!=h&&s.insertBefore(h,s.firstChild),ie.needScrollPost(t,h)&&(d+=h.offsetHeight+u(h)),h.bits=0;else if((b=(0,k.geByClass)("feed_repost"+v,s,"div"))&&b.length){_=(0,k.rs)(cur.wallTpl.grouped_posts,{place:v,random:(0,M.irand)(1e8,2e8),first:_,other:"",label:p.getLang("news_show_X_reposts",b.length)});let e=(0,k.se)('<div class="feed_row'+(y?"_unshown":"")+'">'+_+"</div>");s.insertBefore(e,s.firstChild),!y&&ie.needScrollPost(t,e)&&(d+=e.offsetHeight+u(e)),S=!0,h=e.firstChild,f=(0,k.geByClass1)("feed_reposts_first",h,"div"),w=(0,k.geByClass1)("feed_reposts_group",h,"div"),(0,L.each)((0,L.clone)(b),(function(){ie.needScrollPost(t,this)&&(d-=this.offsetHeight+u(this)),(0,k.re)(this.parentNode),w.appendChild(this.firstChild)}))}else f=(0,k.se)('<div class="feed_row'+(y?"_unshown":"")+'"><div class="feed_repost'+v+'">'+_+"</div></div>"),s.insertBefore(f,s.firstChild),S=!0,!y&&ie.needScrollPost(t,f)&&(d+=f.offsetHeight+u(f))}else f=(0,k.se)('<div class="feed_row'+(y?"_unshown":"")+'">'+_+"</div>"),s.insertBefore(f,s.firstChild),S=!0,!y&&ie.needScrollPost(t,f)&&(d+=f.offsetHeight+u(f));const E=(0,k.geByClass1)("post",f);0==e[8]&&(0,k.addClass)(E,"closed_comments"),cur.deepRepliesActive&&(0,k.addClass)(E,"deep_active"),y&&S&&(cur.newPostsCount=cur.newPostsCount?cur.newPostsCount+1:1,cur.feedEls.newPosts.innerHTML=p.getLang("news_new_posts",cur.newPostsCount),(0,k.addClass)(cur.feedEls.wrap,"feed_has_new"),1==cur.newPostsCount&&ie.needScrollPost(t,cur.feedEls.newPosts)&&!C&&(d+=(0,k.getSize)(cur.feedEls.newPosts)[1])),a.AudioUtils.updateQueueReceivedPost(f),(0,U.updateNarrativeSnippetsFromQueueByPost)(f),(0,G.updateArticleSnippetsFromQueueByPost)(f),cur.feedUnreadCount++,"search"!=l&&E&&(0,D.highlightUpdatedPost)(E),r.length>300?s.removeChild(r[300]):r.length<=1&&(0,k.removeClass)(cur.feedEls.wrap,"feed_is_empty"),Wall.updateMentionsIndex();break}case"new_post_reply":{if(i)break;const o=cur.rowsCont,s=o.childNodes,r=Wall.getNewPostHTML(e,!1,ie.feedPostRepl);if(!r)break;const n=(0,k.se)('<div class="feed_row">'+r+"</div>");o.insertBefore(n,o.firstChild),ie.needScrollPost(t,n)&&(d+=n.offsetHeight+u(n)),(0,U.updateNarrativeSnippetsFromQueueByPost)(n),(0,G.updateArticleSnippetsFromQueueByPost)(n),(0,z.updateStickersFromQueue)(n),cur.feedUnreadCount++,s.length>300?o.removeChild(s[300]):s.length<=1&&(0,k.removeClass)(cur.feedEls.wrap,"feed_is_empty");break}case"edit_post":{const o=(0,k.ge)("wpt"+n);let s;if(!(0,k.isVisible)(i)||!o)break;let r=(0,k.geByClass1)("wall_post_more",o);r&&(r=(0,k.isVisible)((0,k.domNS)(r))),(s=ie.needScrollPost(t,o))&&(d-=o.offsetHeight);let a=(0,k.rs)(e[3],{poll_hash:cur.wallTpl.poll_hash});const l=(0,k.ge)("post"+n);l&&!(0,k.isVisible)(l.parentNode)&&(a=Wall.updatePostImages(a)),(0,k.val)(o,a),r&&(r=(0,k.geByClass1)("wall_post_more",o),r&&r.onclick()),s&&(d+=o.offsetHeight),(0,U.updateNarrativeSnippetsFromQueueByPost)(o),(0,G.updateArticleSnippetsFromQueueByPost)(o),(0,D.highlightUpdatedPostContent)(o),window.Wall&&Wall.updatePostAuthorData(n);break}case"edit_reply":{let t=e[3];const o=(0,k.ge)("wpt"+t);if(!(0,k.isVisible)("post"+t)||!o)break;let s=(0,k.geByClass1)("wall_reply_more",o);s&&(s=(0,k.isVisible)((0,k.domNS)(s)));let r=e[4];(0,k.val)(o,r),s&&(s=(0,k.geByClass1)("wall_reply_more",o),s&&s.onclick()),(0,U.updateNarrativeSnippetsFromQueueByPost)(o),(0,G.updateArticleSnippetsFromQueueByPost)(o),(0,z.updateStickersFromQueue)(o),(0,F.highlightUpdatedReplyContent)(o);break}case"post_parsed_link":{if(!i)break;let t=(0,k.geByClass1)("wall_postlink_preview_btn_disabled",i);if(!t)break;let o=e[3];if("1"===o)(0,k.removeClass)(t,"wall_postlink_preview_btn_disabled");else if("0"===o)(0,k.re)(t);else if(o){(0,k.removeClass)(t,"wall_postlink_preview_btn_disabled");let o=(0,k.geByClass1)("flat_button",t);o&&(o.setAttribute("href",e[3]),o.removeAttribute("onclick"))}break}case"del_post":if(i){let e=(0,k.domClosest)("feed_row",i)||(0,k.domClosest)("feed_row_unshown",i)||i;cur.wallMyDeleted[n]||(ie.needScrollPost(t,i)&&(d-=i.offsetHeight+u(i)),(0,_.revertLastInlineVideo)(i),(0,k.re)(e)),cur.options.offset--,(0,k.hasClass)(cur.feedEls.wrap,"feed_has_new")&&!(0,k.isVisible)(e)&&(cur.newPostsCount--,cur.newPostsCount?cur.feedEls.newPosts.innerHTML=p.getLang("news_new_posts",cur.newPostsCount):(0,k.removeClass)(cur.feedEls.wrap,"feed_has_new"))}break;case"res_post":i&&cur.options.offset++;break;case"new_reply":{if(!i||cur.wallMyReplied[n]||(0,k.ge)("post"+e[3]))break;if((0,k.hasClass)((0,k.ge)("post"+n),"deep_active")){const t=Wall.addNewReply(e);d+=t[0];break}let o=(0,k.ge)("replies"+n),s=(0,k.ge)("replies_wrap"+n),r=i.offsetHeight;const a=n.split("_")[0],l=J.Ranges.isGroupId(a)?8&c?Q.GroupAdminLevel.EDITOR:2&c?Q.GroupAdminLevel.MODERATOR:Q.GroupAdminLevel.USER:Q.GroupAdminLevel.USER;let u=Wall.getNewReplyHTML(e,l);if(!u)break;let _,f=!1,h=!1;if((0,k.isVisible)(o)&&(0,k.isVisible)(s)&&!(0,k.isVisible)("reply_link"+n)){_=o.nextSibling;let e=(0,k.geByClass)("new_reply",o,"div").length+1;if(cur.wallMyOpened[n]){_&&"replies_open"==_.className&&(0,k.re)(_),h=!0;let e=(0,k.geByClass1)("wr_header",o,"a"),t=(0,k.geByClass)("reply",o,"div").length+1,s=t;e&&(s=(0,L.intval)(e.getAttribute("offs").split("/")[1])+1),(s>5||t<s)&&(e||o.insertBefore(e=(0,k.ce)("a",{className:"wr_header"}),o.firstChild),Wall.updateRepliesHeader(n,e,t,s))}else u=Wall.updatePostImages(u),f=(0,k.se)(u),(0,k.addClass)(f,"new_reply"),_&&"replies_open"==_.className||(_=(0,k.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(n),role:"button",tabIndex:0}),o.parentNode.insertBefore(_,o.nextSibling)),_.innerHTML=p.getLang("wall_x_new_replies_more",Math.min(100,e)),_.newCnt=e}else(0,k.re)("reply_link"+n),(0,k.show)(s,o),h=!0;n.split("_")[0]==vk.id&&cur.feedUnreadCount++,f||(f=(0,k.se)(u)),o.appendChild(f),ie.needScrollPost(t,h?f:_)&&(d+=i.offsetHeight-r),f instanceof HTMLElement&&((0,U.updateNarrativeSnippetsFromQueueByPost)(f),(0,G.updateArticleSnippetsFromQueueByPost)(f),(0,z.updateStickersFromQueue)(f)),h&&(0,F.highlightUpdatedReply)(f),Wall.repliesSideSetup(n),Wall.updateMentionsIndex(),Likes.update("wall"+n,{comment_num:e[13]});break}case"del_reply":if(!cur.wallMyDeleted[n]&&i){if((0,k.hasClass)((0,k.gpeByClass)("post",i),"deep_active")){const t=Wall.removeDeepReply(e);d+=t[0];break}ie.needScrollPost(t,i)&&(d-=i.offsetHeight);let o=i.parentNode.id.match(/replies(-?\d+_\d+)/);(0,_.revertLastInlineVideo)(i),(0,k.re)(i),o&&Wall.repliesSideSetup(o[1])}break;case"view_post":Likes.update("wall"+n,{views_num:Wall.formatCount((0,L.intval)(e[3]))});break;case"like_post":case"like_reply":{if(!i)break;let t="like_reply"==r?"wall_reply"+n:n,o=i&&(0,k.domByClass)(i,"_like_wrap"),a=i&&(0,k.domByClass)(i,"_share_wrap");const l=(0,N.likeDataReactionsFields)(e);Wall.likeFullUpdate(o,t,(0,s._)({isQueueUpdate:!0,like_my:o&&(0,k.hasClass)(o,"my_like"),like_num:e[3],like_title:!1,share_my:a&&(0,k.hasClass)(a,"my_share"),share_num:e[4],share_title:!1},l));break}}return d},feedPostRepl:function(e,t){e.replies=cur.wallTpl.post_replies;let o={full_id:t[2],item_id:"wall_"+t[2],sec_name:(0,M.stripHTML)(t[3]),date:Wall.getNowRelTime(),del:cur.wallTpl.spam};if("search"==cur.section&&cur.q){let s=e.text||"",r=cur.q.toLowerCase().split(/[\s.,:;!?()]/),n=[];s=s.replace(/<(.|\n)+?>/g,(function(e){return n.push(e),""}));let i,a,l,c=s.toLowerCase();for(i=r.length-1;i>=0;i--)if(l=r[i],(0,L.trim)(l))for(a=0;-1!=(a=c.indexOf(l,a));)s.charAt(a-1)!=String.fromCharCode(2)?(s=s.substr(0,a)+""+i+""+s.substr(a+l.length),c=c.substr(0,a)+""+i+""+c.substr(a+l.length)):a+=2;s=s.replace(/\x02(\d+)\x02/g,(function(e,t){return'<span class="highlight">'+r[t]+"</span>"})),s=s.replace(/\x01/g,(function(){return n.shift()||""})),o.text=s,"new_post_reply"==t[1]&&(o.date_postfix=t[7])}return o},reSortItems:function(){cur.feedToSort&&cur.feedToSort.length&&((0,L.each)(cur.feedToSort,(function(e,t){let o=(0,k.ge)("post_ph"+t),s=(0,k.ge)("post"+t).parentNode;o&&s&&(o.parentNode.insertBefore(s,o),(0,k.re)(o))})),cur.feedToSort=[],(0,y.scrollToY)(0,0))},showNewPosts:function(){(0,k.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0;let e=(0,k.ge)("feed_rows");Wall.loadPostImages(e),(0,L.each)((0,k.geByClass)("feed_row_unshown",e,"div"),(function(){(0,k.replaceClass)(this,"feed_row_unshown","feed_row")}))},updateTitle:function(){cur.idleManager&&(cur.idleManager.isIdle||(cur.feedUnreadCount=0),(0,k.setDocumentTitle)((cur.feedUnreadCount?"("+cur.feedUnreadCount+") ":"")+cur.feedInitialTitle))},toggleTabsMenuTab:function(e,t){let o=(0,k.geByClass1)("feed_section_"+e,cur.feedEls.rmenu);o&&(0,k.toggleClass)(o,"ui_rmenu_item_hidden",!t)},toggleTabsMenu:function(e,t){let o=(0,k.ge)("feed_add_list_icon");return void 0===t&&(t=!(0,k.hasClass)(o,"shown")),l.browser.mozilla&&(0,k.setStyle)("page_body",{overflow:t?"visible":""}),uiActionsMenu.toggle(o,t),t&&(0,v.addEvent)(document,"mousedown",(function e(t){ie.toggleTabsMenu(!1,0),(0,v.removeEvent)(document,"mousedown",e)})),e&&(0,v.cancelEvent)(e)},checkTabsFilter:function(e,t){let o,s,r,n=t==cur.section,i=cur.my_feed_types.tabs;switch(t){case"news":return!1;case"newlist":return ie.addList();default:if(r=t.match(/list(\d+)/))return ie.editList(r[1])}o=-1!=(s=(0,L.indexOf)(i,t)),(0,k.toggleClass)(e,"checked",!o),o?(i.splice(s,1),n&&(cur.onSaveTabs=function(e,t){ie.toggleTabsMenu(null,!1),ie.switchSection("news")}.pbind(t,o))):i.push(t),cur.my_feed_types.tabs=i,ie.toggleTabsMenuTab(t,!o||n),clearTimeout(cur.saveTabsTO),cur.saveTabsTO=setTimeout(ie.saveTabs,500)},hasSearchParams:function(e){let t=!1;return(0,L.each)(e,(function(e,o){if((!e.indexOf("c[")&&"c[section]"!==e||"q"==e)&&o)return t=!0,!1})),t},getSectionParams:function(e){let t={section:e};switch(e){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"podcasts":case"articles":void 0===(t.subsection=cur.subsections[e])&&delete t.subsection;break;case"owner":(t.owner=cur.owner)||delete t.section;break;case"source":case"notifications":(t.source=cur.source)||delete t.source;break;case"list":void 0===(t.subsection=cur.subsections["list"+cur.list])&&delete t.subsection,(t.list=cur.list)||delete t.list;break;case"search":const o=(0,k.ge)("search_filters_form");if(o){let e=(0,L.serializeForm)(o)||{};for(let t in e)e[t]&&"0"!=e[t]||delete e[t];(0,L.extend)(t,e)}t["c[q]"]=(0,L.trim)((0,k.val)(cur.feedEls.search));break;case"photos_search":(t.q=(0,L.trim)((0,k.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,L.intval)(cur.search_sort_value))||delete t.sort;break;case"trends_search":window.nav.objLoc.trend_id&&(t.trend_id=window.nav.objLoc.trend_id),(t.q=(0,L.trim)((0,k.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,L.intval)(cur.search_sort_value))||delete t.sort;break;case"articles_search":(t.q=(0,L.trim)((0,k.val)(cur.feedEls.search)))||(t.section="articles");break;case"comments":cur.reposts&&(t.reposts=cur.reposts);break;case"mentions":const s=new URLSearchParams(location.search);s.delete("ref"),history.replaceState(null,"","?"+s+location.hash),cur.mentionObj&&cur.mentionObj!=vk.id&&(t.obj=cur.mentionObj)}return t},switchNotifyList:function(e,t){uiRightMenu.go((0,k.geByClass1)("feed_section_"+e),!1,!1),ie.go(t)},switchSubSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;let s=cur.section;"list"===cur.section&&(s="list"+cur.list),cur.subsection=cur.subsections[s]=e;let r=ie.getSectionParams(cur.section);r.hash=o,delete cur.feedUpdateLoading,delete cur.isFeedLoading,nav.go((0,L.extend)(r||{},{0:"feed"})),uiRightMenu.showProgress(cur.feedEls.rmenu)},switchSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;if((0,k.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,"photos_search"==e&&!(0,L.trim)((0,k.val)(cur.feedEls.search))){if("photos_search"!=cur.section)return!1;e="photos"}"comments"==e&&(cur.reposts=cur.options.reposts=""),(0,A.statlogsValueEvent)("feed_switch",0,e),ie.setSection(e,1);let s=ie.getSectionParams(e||"news");delete cur.feedUpdateLoading,delete cur.isFeedLoading;let r=!o&&(0,L.extend)(s||{},{0:"feed"});return uiRightMenu.go((0,k.geByClass1)("feed_section_"+e),!1,r),!1},setSection:function(e,t,o){if(t=t||0,cur.prevSection=cur.section,!(e==cur.section&&t<2)&&e){if(uiRightMenu.hideProgress(cur.feedEls.rmenu),cur.feedEls.search&&uiSearch.hideProgress(cur.feedEls.search),t>1){Page.playVkFestBanner&&Page.playVkFestBanner(),(0,k.toggleClass)(cur.feedEls.wrap,"feed_submit_shown",(0,L.inArray)(e,cur.options.feed_types.tabs.concat(["list","likes"]))),(0,k.toggleClass)(cur.feedEls.wrap,"feed_submit_only_shown",~["recommended","search","updates","comments"].indexOf(e));let t=(0,L.inArray)(e,["articles_search","articles","search","photos_search","photos","trends","trends_search"]);(0,k.toggleClass)(cur.feedEls.wrap,"feed_search_shown",t),t&&(0,k.elfocus)(cur.feedEls.search),"search"===e&&o.stories_block_show?(0,k.addClass)(cur.feedEls.wrap,"feed_submit_shown_stories"):(0,k.removeClass)(cur.feedEls.wrap,"feed_submit_shown_stories"),cur.section&&(0,k.val)(cur.feedEls.search,"")}2==t&&window.Stories&&Stories.updateFeedStories(e,o),cur.my_feed_types&&(~(0,L.indexOf)(cur.my_feed_types.optional_tabs,cur.section)&&!~(0,L.indexOf)(cur.my_feed_types.tabs,cur.section)&&ie.toggleTabsMenuTab(cur.section,!1),~(0,L.indexOf)(cur.my_feed_types.optional_tabs,e)&&!~(0,L.indexOf)(cur.my_feed_types.tabs,e)&&ie.toggleTabsMenuTab(e,!0)),cur.section=e,4!=t?(cur.editingHide=("notifications"==e||"replies"==e)&&ie.notifyCheckHideReply,cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()):ie.searchUpdate()}},applyOptions:function(e,t){t=t||0,e.no_left_ads&&(cur.no_left_ads=!0),e.owner&&(cur.owner=e.owner),cur.subsection=e.subsection||"",ie.setSection(e.section,t,e),cur.options||(cur.options={reply_names:{}}),(0,L.extend)(cur.options.reply_names,e.reply_names),delete e.reply_names,(0,L.extend)(cur,e);let o=cur.section;if("list"===cur.section&&(o="list"+e.list),cur.subsections[o]=cur.subsection,e.loc&&2==t&&nav.setLoc(e.loc),e.section&&"news"==e.section&&e.subsection&&"top"==e.subsection&&(0,A.statlogsValueEvent)("feed_switch",0,"top_news",t),e.filters){let t=(0,k.ge)("search_filters_minimized"),o=t&&(0,k.hasClass)(t,"ui_rmenu_item_expanded"),s=!!t;(0,k.val)("feed_filters",e.filters),window.searcher&&s&&x.searcher.toggleMinimizedFilters((0,k.ge)("search_filters_minimized"),o,!0)}if(e.script&&(0,C.evalWithLogging)(e.script),e.htitle&&(cur.feedInitialTitle=document.title=(0,M.replaceEntities)((0,M.stripHTML)(e.htitle))),void 0!==e.add_feed_queue&&null!==e.add_feed_queue?(cur.add_feed_queue=!1,e.add_feed_queue=!1,ie.getNewQKey(0),!0!==e.add_queue&&(cur.add_queue=e.add_queue)&&setTimeout(ie.update.pbind(0),0)):t&&"search"!=cur.section&&"news"!=cur.section&&cur.section&&(cur.add_feed_queue=!1,e.add_feed_queue=!1),e.add_queues&&(cur.add_queues=e.add_queues,setTimeout(ie.update.pbind(0),0)),e.q){(0,k.val)(cur.feedEls.search,(0,M.replaceEntities)(e.q));let t=e.q;t.length>30&&(t=(0,L.trim)(t.substr(0,30))+"...")}e.last_view&&(cur.options.last_view=e.last_view),void 0!==e.feedback_list&&(cur.options.feedback_list=e.feedback_list),ie.searchUpdate(),"comments"!=cur.section||cur.reposts||(0,k.toggle)("comments_filters",!cur.reposts),(0,M.isString)(cur.all_shown_text)&&(0,k.val)("all_shown",cur.all_shown_text),(0,M.isString)(cur.show_more_text)&&(0,k.val)("show_more_link",cur.show_more_text),cur.empty_text&&(0,k.val)("feed_empty",cur.empty_text),cur.count>=0&&(0,k.re)("feed_error_wrap");let s=!((0,k.geByClass1)("feed_row",cur.rowsCont,"div")||!1),r=(0,k.ge)("feed_rows_next");if(s?((0,k.toggleClass)(cur.feedEls.wrap,"feed_is_empty",!(0,k.isVisible)("feed_error_wrap")),(0,k.hide)("all_shown"),(0,k.toggle)("show_more_link",cur.count>0&&!cur.all_shown)):!cur.all_shown||r&&r.firstChild?((0,k.hide)("all_shown"),(0,k.show)("show_more_link"),(0,k.removeClass)(cur.feedEls.wrap,"feed_is_empty")):((0,k.hide)("show_more_link"),(0,k.show)("all_shown"),(0,k.removeClass)(cur.feedEls.wrap,"feed_is_empty"),(0,k.re)(r)),e.playlistsData&&(e.playlistsData=JSON.parse(e.playlistsData),cur.pageVideosList=(0,L.extend)(cur.pageVideosList||{},e.playlistsData)),("notifications"==cur.section||"replies"==cur.section)&&cur.notify){let e=(0,k.ge)("feedback_row"+cur.notify);e&&e.onclick&&(setTimeout((function(){e.onclick(),(0,y.scrollToY)((0,k.getXY)(e)[1],0)}),l.browser.msie?100:0),delete cur.notify)}cur.feedSection&&cur.feedSection(e.section,e.subsection)},showMore:function(){if(cur.isFeedLoading)return;cur.disableAutoMore=!1;let e,t=(0,k.ge)("feed_rows_next");if(t){if(t.firstChild)for(;t.firstChild;)e=t.firstChild,cur.rowsCont.insertBefore(e,t),ie.onPostLoaded(e,!0);(0,k.re)(t)}"live"==cur.section&&(cur.all_shown=!0);let o=(0,k.ge)("show_more_link");if(cur.all_shown&&((0,k.hide)(o),(0,k.show)("all_shown")),"live"==cur.section)return;let s=!1,r=function(e){e.keyCode==v.KEY.ESC&&(s=!0)};(0,v.addEvent)(document,"keyup",r);let n=ie.getSectionParams(cur.section||"news");(0,L.extend)(n,{offset:cur.offset,from:cur.from,part:1,more:1,last_view:cur.options.last_view,games_news_items_allowed:cur.isGamesInRightBlock?0:1}),(0,L.extend)(n,cur.navParams),cur.options.feedback_list&&(n.list=cur.options.feedback_list),nav.objLoc.situational_suggest_id&&(n.situational_suggest_id=nav.objLoc.situational_suggest_id);let a=cur.section;ajax.post("al_feed.php?sm_"+cur.section,n,{onDone:function(e,t){if((0,v.removeEvent)(document,"keyup",r),a==cur.section)if(s)cur.disableAutoMore=!0;else{if(t){let e,s=(0,k.ce)("div");for(s.innerHTML=t;e=s.firstElementChild;){const t=(0,Y.shouldFilterPaginatedRow)({row:e});var o;if(t.shouldFilter)console.info("Feed: skipping loaded row",e),s.removeChild(e),(0,i.randEnabled)(null!=(o=window.cur.feed_pagination_filtering_log_prob)?o:.01)&&(0,K.feedLogFilteredRow)({filterReason:t.filterReason,ref:ie.getModuleRef(),row:e,rowsContainer:cur.rowsCont,section:cur.section});else cur.rowsCont.appendChild(e),ie.onPostLoaded(e,!0)}}(0,u.shortCurrency)(),ie.applyOptions(e),setTimeout(ie.scrollCheck,200)}},showProgress:function(){(0,P.lockButton)(o),cur.isFeedLoading=!0},hideProgress:function(){if((0,P.unlockButton)(o),cur.isFeedLoading=!1,o.seen){let e=Math.ceil((Date.now()-o.seen)/1e3),t=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,A.statlogsValueEvent)("feed_load_more_seen_time",e,t),o.seen=!1}},cache:1})},getTypesSection:function(){return"owner"===cur.section?J.Ranges.isUserId(cur.owner)?"person":"group":cur.section},checkFilter:function(e,t){let o,s,r=ie.getTypesSection(),n=cur.my_feed_types[r],i=cur.feed_types[r];"notifications"!=r?(!0===n&&(n=(0,L.clone)(i)),o=-1!=(s=(0,L.indexOf)(n,t)),o?n.splice(s,1):(n.push(t),n.length==i.length&&(n=!0)),(0,P.checkbox)(e),cur.my_feed_types[r]=n,ie.updateTypesCookie(),ie.setFiltersUpdatePage(),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)):ie.setNotifyFilter(e,t)},setFilter:function(e,t){let o=ie.getTypesSection(),s=(0,k.ge)(o+"_type_filter"),r=!0;"notifications"!=o&&((0,L.each)((0,k.geByClass)("_feed_filter_row",s,"div"),(function(){if((0,P.isChecked)(this)&&this!=e)return r=!1})),r?(cur.my_feed_types[o]=!0,(0,L.each)((0,k.geByClass)("_feed_filter_row",s,"div"),(function(){(0,P.checkbox)(this,!0)}))):((0,L.each)((0,k.geByClass)("_feed_filter_row",s,"div"),(function(){(0,P.checkbox)(this,!1)})),cur.my_feed_types[o]=[t],(0,P.checkbox)(e,!0)),ie.updateTypesCookie(),ie.setFiltersUpdatePage({force_expand_filters:1}),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu))},setFiltersUpdatePage:function(e){e=e||{};let t=nav.strLoc;if("updates"===cur.section){t.match(/\&filters\_expanded\=1/)||(0,k.ge)("updates_show_all_filters")&&!e.force_expand_filters||(t+="&filters_expanded=1"),t=t.replace(/\&filters\_shown\=([a-z\,]+)/,"");let o=(0,k.geByClass)("_feed_filter_row","feed_filters"),s=[];for(let e=0;e<o.length;e++)(0,k.hasClass)(o[e],"hide")||s.push(o[e].id.replace("filter_updates",""));t+="&filters_shown="+s.join(",")}nav.go(t)},setNotifyFilter:function(e,t){(0,P.checkbox)(e),cur.notifyPrefs||(cur.notifyPrefs={}),cur.notifyPrefs[t]=(0,P.isChecked)(e),clearTimeout(cur.saveNotifyPrefsTO),cur.saveNotifyPrefsTO=setTimeout((function(){let e=[];(0,L.each)(cur.notifyPrefs,(function(t,o){e.push((o?"":"-")+t)})),e=e.join(","),ajax.post("/al_feed.php",{act:"a_set_notify_prefs",prefs:e,feed:1,hash:cur.topNotifyHash},{onDone:function(e){(0,L.addTemplates)({top_notify_prefs:e}),(0,k.toggleClass)("top_notify_pref_"+t,"checked",cur.notifyPrefs[t]),cur.notifyPrefs={},window.TopNotifier&&TopNotifier.invalidate(),nav.go(nav.strLoc),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)}})}),500)},updateTypesCookie:function(){let e=[];(0,L.each)(cur.my_feed_types,(function(t,o){"tabs"!=t&&e.push(!0===o?"*":o.join(","))})),(0,b.setCookie)("remixfeed",e.join("."),365)},toggleFeedTop:function(e,t,o){let s=(0,k.geByClass1)("_ui_toggler",e),r="top";switch((0,k.toggleClass)(s,"on"),cur.section){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"list":r=(0,k.hasClass)(s,"on")?"top":"recent";break;case"articles":r=(0,k.hasClass)(s,"on")?"suggested":"top";break;case"podcasts":r=(0,k.hasClass)(s,"on")?"recent":"top"}ie.switchSubSection(r,t,o)},switchList:function(e){cur.prevList=cur.list,cur.list=e,ie.setSection("list",1),uiRightMenu.go((0,k.geByClass1)("feed_section_list"+e),!1,!1),ie.go(ie.getSectionParams(cur.section))},setSearchSort:function(e){cur.search_sort_value=e,ie.submitSearch()},_activateReplyBox:function(e,t,o){(t||{}).cancelBubble=!0;let s=(0,k.ge)("reply_box"+e);if(cur.editing&&cur.editing!=e&&cur.notifyReplyData&&cur.notifyReplyData[cur.editing].disabled&&ie.notifyCheckHideReply(cur.editing,(window.event||{}).target),s&&(0,k.isVisible)(s))return void ie.notifyCheckHideReply(e,!1);if(void 0===cur.notifyReplyData&&(cur.notifyReplyData={}),cur.notifyReplyData[e]=o,o.disabled){if(s)(0,k.show)(s);else{(0,k.ge)("feedback_row"+e).appendChild((0,k.se)((0,k.rs)(cur.options.feedback_dis,{item:e,text:o.disabled})))}return void setTimeout((function(){cur.editing=e}),0)}(0,k.show)(s),Wall.showEditReply(e,t);let r=(0,k.ge)("reply_field"+e);r.setAttribute("placeholder",o.ph),window.Emoji&&Emoji.val(r,o.greet.replace(/ $/,"&nbsp;")),(0,k.data)(r,"send",ie.notifySendReply),(0,k.removeClass)("reply_box"+e,"clear_fix")},notifyClick:function(e,t,o){let s=(0,k.ge)("feedback_row"+e);Wall.checkPostClick(s,t)&&ie._activateReplyBox(e,t,o)},blindNotifyReply:function(e,t,o){ie._activateReplyBox(e,t,o)},notifySendReply:function(e,t,o){let s=cur.notifyReplyData[e];if(!s||s.sending)return;let r,n=(0,k.ge)("reply_field"+e),i=(0,k.ge)("reply_button"+e),a=(0,k.ge)("feedback_row"+e),l=n&&(0,k.data)(n,"composer");if(o.stickerId)r={message:"",attach1_type:"sticker",attach1:o.stickerId};else{if(r=l?Composer.getSendParams(l,ie.notifySendReply.pbind(e)):{message:(0,L.trim)(Emoji.editableVal(n))},r.delayed)return;if(!r.attach1_type&&(!r.message||s.greet&&!s.greet.indexOf(r.message)))return void Emoji.editableFocus(n,!1,!0)}(0,L.extend)(r,{act:"post",from:"feedback",item:e},s.params||{});let c=(0,k.ge)("reply_as_group"+e);c&&(0,k.isVisible)((0,k.domPN)(c))&&(r.from_oid=(0,k.domData)((0,k.domClosest)("_submit_post_box",c),"from-oid")),s.sending=1,ajax.post("al_wall.php",Wall.fixPostParams(r),{onDone:function(t,o){if(delete s.sending,l?Composer.reset(l):window.Emoji&&Emoji.val(n,""),n.autosize&&n.autosize.update(),ie.notifyHideReply(e),o){let e=(0,k.geByClass1)("_answer_wrap",a);(0,k.val)(e,o),(0,k.show)(e)}else t&&(0,m.showDoneBox)(t)},onFail:function(){delete s.sending},showProgress:()=>(0,P.lockButton)(i),hideProgress:()=>(0,P.unlockButton)(i)})},notifyCheckHideReply:function(e,t){let o=cur.notifyReplyData&&cur.notifyReplyData[e];if(o&&!o.sending&&(0,k.isVisible)("reply_box"+e)){if(cur.editing=!1,!o.disabled){let t=(0,k.ge)("reply_field"+e),s=(0,L.trim)(window.Emoji?Emoji.editableVal(t):""),r=Wall.hasComposerMedia(t);if(!t||r||s&&!o.greet||o.greet.indexOf(s))return}ie.notifyHideReply(e)}},notifyHideReply:function(e){cur.editing==e&&(cur.editing=!1);let t=(0,k.ge)("feedback_row"+e);(0,k.removeClass)(t,"reply_box_open"),(0,k.hide)("reply_box"+e);let o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()},notifyPostTooltip:function(e,t,o,s){let r=(o||{}).reply,n="al_wall.php";t.indexOf("topic_comment")?t=t.replace("wall_reply","").replace("wall",""):(n="al_board.php",t=t.replace("topic_comment","")),s=s||{},(0,T.showTooltip)(e,(0,L.extend)({url:n,params:(0,L.extend)({act:"post_tt",post:t,self:1,from:"feedback"},o||{}),slide:15,shift:[!r||r%2?27:329,6],ajaxdt:100,showdt:400,hidedt:800,dir:"auto",className:"rich wall_tt wall_module _feed_notification feed_notification",appendParentCls:"scroll_fix_wrap"},s))},getModuleRef:function(){let e=cur.module||"feed_other";return"feed"==cur.module&&(e="news"==cur.section?cur.subsection?"feed_news_"+cur.subsection:"feed_news":"podcasts"===cur.section?e+"_"+cur.section+("recent"===cur.subsection?"_my":""):cur.section?e+"_"+cur.section:"feed_other"),e},ignoreItem:function(e,t,o,s,r,n=0,i="",a=!0){let l;switch(e){case j.BlockTypeIds.UXPollBlock:case j.BlockTypeIds.VideosForYou:case j.BlockTypeIds.VideoPostcard:case j.BlockTypeIds.PhotoRecognize:case j.BlockTypeIds.RecommendedNarratives:case j.BlockTypeIds.BookmarkGame:case j.BlockTypeIds.AchievementGame:case j.BlockTypeIds.YoulaRecommendationsCarousel:case j.BlockTypeIds.AliExpressRecommendationsCarousel:l=(0,k.ge)(e);break;default:l=(0,k.ge)("post"+e)}if(!l)return;let c=l.getAttribute("data-ad"),d=(0,k.geByClass1)("ui_actions_menu_wrap",l),u=ie.getModuleRef();return d&&uiActionsMenu.toggle(d,!1),(0,_.revertLastInlineVideo)(l),a&&(t.includes("caption")?cur.feedEntriesHTML[e+"_ignored"]=(0,k.val)(l):cur.feedEntriesHTML[e]=(0,k.val)(l)),new Promise(((d,_)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,caption_type:s,uids:r,hash:o,ad_data:c,ref:u,session_id:cur.feed_session_id,module:ie.getModuleRef(),position:(0,L.indexOf)((0,k.domPN)((0,k.domPN)(l)).children,(0,k.domPN)(l)),reason_id:n,track_code:i},{onDone:function(e,t){ie.destroyPhotoCarouselByPost(l),(0,se.feedViewStatsFactory)().then((e=>{var t;null==(t=e)||t.ignorePost(l)})),a&&((0,k.val)(l,e),(0,C.evalWithLogging)(t)),d()},onFail:()=>(_(),!0),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}))},unignoreItem:function(e,t,o,s){let r=ie.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_item",post_raw:e,feed_raw:t,hash:o,ref:r},{onDone:function(){t.includes("caption")?(0,k.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):ie.restorePost(e)},showProgress:s&&P.lockButton.pbind(s),hideProgress:s&&P.unlockButton.pbind(s)})},reportIgnoredItem:function(e,t){ajax.post("al_wall.php",{act:"spam",post:e,hash:t},{onDone:function(t){let o=(0,k.ge)("post"+e),s=o&&(0,k.geByClass1)("feed_post_report",o,"div");(0,k.val)(s,t)}})},ignoreOwner:function(e,t,o,s,r){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,k.val)("post"+e));let n="list"==cur.section&&cur.list||0,i=ie.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,type:o,hash:s,list:n,ref:i},{onDone:function(o){(0,k.val)("post"+e,o),(0,L.each)((0,k.geByClass)("post",cur.rowsCont),(function(o,s){let r=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);r&&r[1]!=e&&(!r[4]&&r[2]==t||r[4]&&r[3]==t)&&((0,_.revertLastInlineVideo)(this),(0,k.hide)(this.parentNode))}))},showProgress:()=>I.FlatButton.lock(r),hideProgress:()=>I.FlatButton.unlock(r)})},unignoreOwner:function(e,t,o,s){let r="list"==cur.section&&cur.list||0,n=ie.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,hash:o,list:r,ref:n},{onDone:function(o){e?(0,k.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,k.val)("ignore_row"+t,o),(0,L.each)((0,k.geByClass)("post",cur.rowsCont),(function(e,o){let s=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);s&&(!s[4]&&s[2]==t||s[4]&&s[3]==t)&&(0,k.show)(this.parentNode)}))},showProgress:()=>I.FlatButton.lock(s),hideProgress:()=>I.FlatButton.unlock(s)})},ignoreGroupWall:function(e,t,o,s){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,k.val)("post"+e));let r=ie.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,ignore_type:"group_wall",hash:o,ref:r},{onDone:function(t){(0,k.val)("post"+e,t)},showProgress:()=>I.FlatButton.lock(s),hideProgress:()=>I.FlatButton.unlock(s)})},unignoreGroupWall:function(e,t,o,s){let r=ie.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,ignore_type:"group_wall",hash:o,ref:r},{onDone:function(o){e?(0,k.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,k.val)("ignore_row"+t,o)},showProgress:()=>I.FlatButton.lock(s),hideProgress:()=>I.FlatButton.unlock(s)})},ignoreLiveOwner:function(e,t,o,s){let r=(0,k.ge)("post"+e),n=(0,k.geByClass1)("ui_actions_menu_wrap",r);n&&uiActionsMenu.toggle(n,!1),(0,_.revertLastInlineVideo)(r),cur.feedEntriesHTML[e+"_ignored"]=(0,k.val)("post"+e),ajax.post("al_feed.php?act=a_ignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,k.val)("post"+e,t)},showProgress:s&&P.lockButton.pbind(s),hideProgress:s&&P.unlockButton.pbind(s)})},unignoreLiveOwner:function(e,t,o,s){ajax.post("al_feed.php?act=a_unignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,k.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"])},showProgress:s&&P.lockButton.pbind(s),hideProgress:s&&P.unlockButton.pbind(s)})},unsubscribe:function(e,t,o){(0,v.triggerEvent)((0,k.ge)("post_delete"+e),"mouseout"),cur.feedEntriesHTML[e]=(0,k.ge)("post"+e).innerHTML;let s=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);s&&ajax.post("al_feed.php",{act:"unsubscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[s[2]],owner_id:s[1],place_id:s[3],hash:t,feed:1},{onDone:function(t){(0,k.ge)("post"+e).innerHTML=t.replace("%post_raw%",e)},showProgress:o&&P.lockButton.pbind(o),hideProgress:o&&P.unlockButton.pbind(o)})},subscribe:function(e,t,o){let s=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);s&&ajax.post("al_feed.php",{act:"subscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[s[2]],owner_id:s[1],place_id:s[3],hash:t,feed:1},{onDone:ie.restorePost.pbind(e),showProgress:o&&P.lockButton.pbind(o),hideProgress:o&&P.unlockButton.pbind(o)})},restorePost:function(e){let t;if(e===j.BlockTypeIds.PhotoRecognize)t=(0,k.ge)(e);else t=(0,k.ge)("post"+e);if(!t)return;t.innerHTML=cur.feedEntriesHTML[e],ie.initPhotoCarouselInPost(t);let o=(0,k.geByClass1)("input_back",t,"div"),s=(0,k.geByTag1)("textarea",t);s&&(s.placeholder=o.innerHTML,o.parentNode.removeChild(o),(0,S.placeholderSetup)(s))},toggleReposts:function(e,t,o,s){if((0,v.checkEvent)(s))return!0;let r=(0,k.ge)("feed_reposts_more"+t+"_"+o),n=(0,k.ge)("feed_reposts"+t+"_"+o),i=0,a=(0,y.scrollGetY)(),l=(0,k.isVisible)(n);if(n)return l?i-=n.offsetHeight+(0,L.intval)((0,k.getStyle)(e,"marginTop")):((0,k.domPN)((0,k.domPN)(n))||{}).bits=0,(0,k.toggle)(n,!l),I.FlatButton.setLabel(r,l?p.getLang("news_show_X_reposts",n.childNodes.length):p.getLang("news_hide_reposts")),i&&(0,y.scrollToY)(a+i+(0,k.getSize)("page_header")[1],0),!1;r&&(0,k.re)(r.parentNode.parentNode)},editHidden:function(){return(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")]}),cur.onOListSave=ie.onHiddenSave,!1},onHiddenSave:function(e,t,o,s){let r=(0,m.curBox)(),n={act:"a_ignore_olist",no_reposts:(0,k.ge)("feed_list_reposts")&&!(0,P.isChecked)("feed_list_reposts")?1:0,hash:s.hash};return(0,i.partConfigEnabled)("use_only_black_list_param_to_process_owners")?n.Black=t.join(","):e.length<t.length?n.White=e.join(","):n.Black=t.join(","),ajax.post("al_feed.php",n,{onDone:function(e,t){r.hide(),ie.switchSection("photos"==cur.section?"photos":"news")},showProgress:P.lockButton.pbind(r.btns.ok[0]),hideProgress:P.unlockButton.pbind(r.btns.ok[0])}),!1},addList:function(){return ie.editList(-1)},editList:function(e){return ie.toggleTabsMenu(!1,0),(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",list_id:e,height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")],onFail:function(e){return setTimeout((0,E.showFastBox)({title:p.getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e,p.getLang("global_close")).hide,4500),!0}}),cur.onOListSave=ie.onListSave.pbind(e),!1},onListSave:function(e,t,o,s,r){let n=(0,k.val)("feed_list_name");if(!(0,L.trim)(n))return(0,P.notaBene)("feed_list_name"),!1;if(!t.length)return!1;let i=(0,m.curBox)();return ajax.post("al_feed.php",{act:"a_save_list",hash:cur.tabs_hash,White:t.join(","),title:n,list_id:e,no_reposts:(0,k.ge)("feed_list_reposts")&&!(0,P.isChecked)("feed_list_reposts")?1:0},{onDone:function(t){let o=(0,k.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu),s=(0,k.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu);const r=uiRightMenu.selectLabelNode(o);(0,k.val)(r,(0,L.clean)(n)),(0,k.val)((0,k.geByClass1)("ui_actions_menu_item_label",s),(0,L.clean)(n)),i.hide(),e>0?ie.switchList(e):nav.go({0:"feed",section:"list",list:t},null,{nocur:!0})},onFail:function(e){return(0,k.val)("feed_list_error",e),(0,k.show)("feed_list_error_wrap"),!0},showProgress:P.lockButton.pbind(i.btns.ok[0]),hideProgress:P.unlockButton.pbind(i.btns.ok[0])}),!1},deleteList:function(e,t,o,s){if(s&&(0,v.cancelEvent)(s),e<=0)return!1;if(!o){ie.toggleTabsMenu(!1,0);const o=(0,E.showFastBox)({title:p.getLang("news_delete_list_sure_title"),bodyStyle:"padding: 20px; line-height: 160%;"},p.getLang("news_delete_list_sure").replace("{list}",t),p.getLang("global_delete"),(function(){ie.deleteList(e,t,!0)}),p.getLang("global_cancel"),(function(){o.hide()}));return}const r=(0,m.curBox)();ajax.post("al_feed.php",(0,L.extend)({act:"a_delete_list",list_id:e,hash:cur.tabs_hash}),{onDone:function(){(0,k.re)((0,k.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu)),(0,k.re)((0,k.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu)),boxQueue.hideAll(),"list"==cur.section&&cur.list==e&&ie.switchSection("news")},showProgress:P.lockButton.pbind(r.btns.ok[0]),hideProgress:P.unlockButton.pbind(r.btns.ok[0])})},saveTabs:function(){ajax.post("al_feed.php",{act:"a_save_tabs",hash:cur.tabs_hash,tabs:cur.my_feed_types.tabs.join(",")},{hideProgress:function(){(0,M.isFunction)(cur.onSaveTabs)&&cur.onSaveTabs(),cur.onSaveTabs=null}})},statsShow:function(e,t){return(0,w.showWiki)({w:"stats"+(cur.source||"")},!1,e)},editLiveBlacklist:function(e){(0,v.cancelEvent)(e),(0,E.showBox)("al_video.php?act=live_blacklist_box",{},{onDone:function(e,t){(0,O.videoLiveBlacklistBoxLoader)(e,t)},stat:[window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/indexer.js")]})},_scrollCheck:e=>{if(e=e||{},(0,re.isFeedViewStatsEnabled)()){const e=(0,V.getFeedPosts)("#feed_rows");(0,se.feedViewStatsFactory)(e).then((t=>{var o;null==(o=t)||o.checkScroll(e)}))}if("scroll"!=e.type&&(!cur.idleManager||cur.idleManager.isIdle))return;let t,o,s,r,n,i,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=(0,y.scrollGetY)(),c=0,d=[];if(!cur.isFeedLoading&&!cur.disableAutoMore){const e=(0,k.ge)("show_more_link");(0,k.isVisible)(e)&&l+a+1e3>e.offsetTop&&ie.showMore()}if((0,k.domPN)(cur.topRow)==cur.rowsCont&&"feed_rows_next"!=(cur.topRow||{}).id||(cur.topRow=(0,k.domFC)(cur.rowsCont)),(0,re.isFeedViewStatsEnabled)()||!vk.id||!cur.topRow||"feed_rows_next"==cur.topRow.id||((window.curNotifier||{}).idle_manager||{}).is_idle&&"init"!=e.type)return;let u=[];for(r=(0,k.domPS)(cur.topRow);r;r=(0,k.domPS)(r))cur.topRow.offsetTop>l&&(cur.topRow=r),r.unseen||(r.unseen=!0,u.push((0,V.postsGetRaws)(r)),(0,V.isAdWithShowOff)(r)&&Wall.triggerAdStat((0,k.domFC)(r),"show_off"));for(Page.postsUnseen(u),r=cur.topRow;r&&(t=c||r.offsetTop,!(t>=l+a));r=n)if(n=(0,k.domNS)(r),"feed_rows_next"==(n||{}).id&&(n=null),c=n?n.offsetTop:t+r.offsetHeight,c<l&&n&&(cur.topRow=n),LongView&&LongView.register(r,"feed"),q.longView.registerElement(r),i=r.bits||0,!(i>=3)){var _,p;if(cur.feedSeenPostHeight>0)cur.feedPostHeaderHeight=cur.feedPostHeaderHeight||(0,k.getH)(null==(p=r)||null==(_=p.querySelector)?void 0:_.call(p,".post_header, .js-PostHeader")),o=t+cur.feedPostHeaderHeight,s=o+cur.feedSeenPostHeight,r.postBottom||(r.postBottom=o+(0,k.getH)((0,k.geByClass1)("wall_text",r))),s=Math.min(s,r.postBottom),(0,k.geByClass1)("feed_friends_recomm",r)&&(s+=.35*r.clientHeight),i|=(o>=l&&o<l+a?1:0)|(s>=l&&s<l+a?2:0);else i|=(t>=l&&t<l+a?1:0)|(c>=l&&c<l+a?2:0);if(i&&(r.bits=i,3===i)){var f,h;let e=(0,V.postsGetRaws)(r);d=(0,ee.handleViewingPosts)({posts:d,postRaws:e,el:r}),(0,ee.handleViewingFeedBlocks)({el:r,index:null==(f=e)?void 0:f.index,ref:null==(h=e)?void 0:h.module})}}d=d.concat(q.longView.process(l,a)),LongView&&LongView.onScroll(l,a),Page.postsSeen(d);let g=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,ee.feedShowMoreButtonLoadedCount)(g,l,a)},searchUpdate:function(){if(cur.feedEls.search&&p.getLang("news_search")){let e;e=cur.section.indexOf("photos")?cur.section.indexOf("articles")?p.getLang("news_search"):p.getLang("news_articles_search"):p.getLang("news_photo_search"),cur.feedEls.search.setAttribute("placeholder",(0,L.clean)((0,M.unclean)(e))),(0,S.placeholderInit)(cur.feedEls.search,{reload:!0})}},go:function(e,t,o){if(e=e||{},cur._back_local){let m=cur._back_local;m.back?(0,g.showBackLink)(m.back[0],m.back[1],m.back[2]):(0,g.showBackLink)(!1),cur._back_local=!1}if(cur.feedReq)try{cur.feedReq.abort()}catch(b){(0,f.debugLog)(b)}cur.feedReqObj=null;let s=1,r=function(){cur.isFeedLoading=!1};(l.browser.msie||o)&&(s=!1,r=cur.onFrameBlocksDone),cur.wasScroll=!!o&&(0,y.scrollGetY)();let i=window.event&&window.event.target;if(i&&"search"===e.section&&!e._post){let v=nav.getPostParams(i);if(v.post_id&&v.post_click_type){function S(t,o){t&&!e[o]&&(e[o]=t)}S(v.post_id,"_post"),S(v.post_click_type,"_post_click_type"),S(v.post_click_url,"_post_click_url"),S(v.post_click_mention_id,"_post_click_mention_id"),S(v.post_click_cc_key,"_post_click_cc_key"),S(v.ad_data,"_post_ad_data"),S(v.ad_block_unique_id,"_post_ad_block_unique_id")}}let a=cur.feedReqObj={},c={},d=0;const p=()=>{if(!cur.feedReqObj||cur.feedReqObj!==a)return;if(++d>500)return;let e=!0,t={};(0,L.each)(c,(function(o){let s=(0,k.ge)(o);if(s&&(0,k.hasClass)(s,"feed_row"))return s.firstChild?void ie.onPostLoaded(s,!0):(t[o]=!0,void(e=!1))})),e||(c=t,setTimeout(p,100))},w=+new Date;cur.feedReq=ajax.post("al_feed.php",(0,L.extend)(e,{part:1}),{onDone:function(o,r,i,a,l){if(!cur.feedEls)return;if((0,_.revertLastInlineVideo)(),(0,k.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,window.tooltips&&tooltips.destroyAll((0,k.ge)("feed_rows")),boxQueue.hideAll(),layers.fullhide&&!cur.storyLayer&&layers.fullhide(!0),s&&ajax._framenext(),window.wall&&Wall.cancelEdit(),boxQueue.hideAll(),t?t(r||""):(0,k.val)(cur.rowsCont,r||""),ie.applyOptions(o,2),!e.norecom&&"notifications"!==e.section){(0,k.val)("feed_recommends",o.recommends||""),(0,k.toggle)("feed_recommends",!!o.recommends);let e="/al_feed.php#"+(0,n.toQueryString)({act:"recom"});ajaxCache[e]&&delete ajaxCache[e],(0,k.toggleClass)(cur.feedEls.wrap,"feed_asc_shown",(0,k.geByClass1)("feed_asc_block","feed_recommends"))}let d;if(i&&(0,C.evalWithLogging)(i),(0,h.checkPageBlocks)(),(0,y.scrollToTop)(0),(0,u.shortCurrency)(),cur.feedEls.wall)switch(d="clear_fix",cur.section){case"updates":d+=" page_block feed_updates";break;case"photos_search":d+=" page_block feed_found_photos";break;case"notifications":d+=" page_block feed_notifications";break;case"coronavirus":case"stayhome":d+=" feed_wall--with-header"}if((0,k.ge)("feed_wall").className=d,(0,k.toggle)("feed_recommends",(0,L.inArray)(cur.section,["news","recommended","videos"])),(0,k.val)("feed_app_widget",a||""),(0,k.toggle)("feed_app_widget",a),a&&l&&(0,C.evalWithLogging)(l),cur.rowsCont&&cur.rowsCont.children&&((0,L.each)(cur.rowsCont.children,(function(){let e=this;(0,k.hasClass)(e,"feed_row")&&(!e.id||e.firstChild?ie.onPostLoaded(e,!0):c[e.id]=!0)})),(0,M.isEmpty)(c)||setTimeout(p,10)),cur.q){const e="photos_search"===cur.section?A.servicePhotos:A.serviceNews,t=+new Date-w;(0,A.saveSearchAttemptStats)(e,0,cur.count,(0,k.val)(cur.feedEls.search),0,cur.event_bits,t,"",A.blockNameEmpty,"",!1,0,null,cur.sort),(0,W.updateCounters)(location.href,document.referrer)}setTimeout(ie.scrollCheck,200)},onFail:function(){return!1},showProgress:function(){cur.isFeedLoading=!0},frame:s,ads:1,hideProgress:r})},onFeedSearch:function(e,t,o,s){t||(0,A.removeSearchPositionTracker)("photos");let r,n,i=s||cur.section;if(i.indexOf("photos")?i.indexOf("trends")?i.indexOf("articles")?(r="search",n="news"):(r="articles_search",n="articles"):(r="trends_search",n="trends"):(r="photos_search",n="photos"),"search"==r||ie.hasSearchParams(ie.getSectionParams(r))){r!=cur.section&&ie.setSection(r,1);let o=ie.getSectionParams(r);cur.disableSort&&(o.disable_sort=1),ie.go(o),window.searcher&&x.searcher.highlightHotHashtag(t||(0,k.val)(e))}else ie.go(ie.getSectionParams(n));uiSearch.onChanged(e),uiSearch.showProgress(e)},onSearchChange:function(){return setTimeout(ie.onFeedSearch.pbind(cur.feedEls.search),0),!1},init:function(e){(0,c.feedLoadingStats)(e),setTimeout((function(){(0,L.each)((0,k.geByTag)("textarea",cur.rowsCont),(function(){(0,S.placeholderSetup)(this)})),cur.q&&(0,A.saveSearchAttemptStats)("photos_search"===cur.section?A.servicePhotos:A.serviceNews,0,cur.count,(0,k.val)(cur.feedEls.search),"0",cur.event_bits,"0","",A.blockNameEmpty,"",!1,0,null,cur.sort)}),200),(0,L.extend)(cur,{oid:e.user_id,postTo:e.user_id,phCache:{},phShown:{},subsections:{},feed_session_id:e.feed_session_id||"na",module:"feed",isFeedLoading:!1,customSearchChange:ie.onSearchChange,navParams:e.nav_params||{},isGamesInRightBlock:e.is_games_in_right_block,wallPostCb:function(){"news"==cur.section?setTimeout(ie.update.pbind(1),1e3):setTimeout(ie.switchSection.pbind("news"),1e3)},idleManager:function(){let e,t,o;const s={isIdle:!1,onIdle:null,onUnIdle:null,stop:function(){(0,v.removeEvent)(document,"mousemove keydown",e),(0,v.removeEvent)(window,"focus blur",o)},start:function(){l.browser.mobile||(e=function(){cur.idleManager&&s.isIdle&&(s.isIdle=!1,s.onUnIdle&&s.onUnIdle())},t=function(){cur.idleManager&&(s.isIdle=!0,s.onIdle&&s.onIdle())},o=function(o){"focus"==o.type?e():t()},(0,v.addEvent)(window,"focus blur",o))}};return s}(),currentModule:function(){return"videos"==cur.section?"feed_videos":cur.module},onFrameBlocksDone:function(){cur.isFeedLoading=!1,(0===cur.wasScroll||cur.wasScroll>0||!1===cur.wasScroll&&"search"==cur.section&&cur.q&&"#"==cur.q.substr(0,1))&&(cur.wasScroll=!1)},feedEntriesHTML:{},feedUnreadCount:0,feedInitialTitle:"",feedUnread:[],feedToSort:[],feedEls:{wrap:(0,k.ge)("main_feed"),wall:(0,k.ge)("feed_wall"),search:(0,k.ge)("search_query"),rmenu:(0,k.ge)("feed_rmenu"),newPosts:(0,k.ge)("feed_new_posts")}}),cur.nav.push((function(e,t,o,s){if(void 0!==e[0])return;let r=(0,L.clone)(o);if(delete r[0],void 0===e.section||(0,L.inArray)(cur.section,["notifications","replies"])==(0,L.inArray)(e.section,["notifications","replies"])){if("notifications"==cur.section)return ie.switchNotifyList(o.list||"all",(0,L.extend)(r,s.params||{})),!1;if(e.list)return ie.switchList(e.list),!1;if(void 0!==e.section&&ie.switchSection(e.section||"news",!1,!0),e.notify)return!1;if(e.q)return(0,k.val)(cur.feedEls.search,e.q),ie.onFeedSearch(cur.feedEls.search),!1;if(delete e.subsection,(0,M.isEmpty)(e)){let e=(0,k.geByClass1)("feed_section_"+(t.section||"news")+(t.list||""));e&&uiRightMenu.go(e,!1,!1)}return cur.likesTabTT&&cur.likesTabTT.destroy(),(0,ee.isFeedPostDurationStatsFixEnabled)()&&ie.onFeedPageLeaveHandler(),ie.go((0,L.extend)(r,s.params||{})),!1}})),cur.idleManager.onUnIdle=ie.updateTitle,cur.idleManager.onIdle=ie.reSortItems,cur.options=cur.options||{},(0,L.extend)(cur.options,e),ie.applyOptions(e,3),cur.rowsCont=e.wallCont=(0,k.ge)("feed_rows"),Wall.init(e),cur.rowsCont&&cur.rowsCont.children&&(0,L.each)(cur.rowsCont.children,(function(){let e=this;(0,k.hasClass)(e,"feed_row")&&e.firstChild&&ie.onPostLoaded(e,!0)})),cur._back={text:p.getLang("news_return_to_news"),show:[ie.startEvents],hide:[function(){clearInterval(cur.updateInt),(0,v.removeEvent)(window,"scroll",ie.scrollCheck),(0,v.removeEvent)(window,"resize",ie.scrollCheck),(0,ee.isFeedPostDurationStatsFixEnabled)()&&ie.onFeedPageLeaveHandler(),cur.idleManager.stop(),clearTimeout(cur.lp_error_to),window.cur.feedScrollCheckIntervalID&&clearInterval(window.cur.feedScrollCheckIntervalID),(0,se.feedViewStatsFactory)().then((e=>{var t;null==(t=e)||t.onNav()}))}],loc:!1},ie.startEvents(e),(0,$.initCheckValidationPhoneLoader)(),(0,R.friendsRecommLogSend)(!0),setTimeout((function(){ie._scrollCheck({type:"init"})}),200);try{const e=nav.objLoc.storybox;if(e){const t=JSON.parse(atob(e));t&&(0,te.storyPublisherInitAsync)([(0,s._)({photoUrl:t.url?t.url:t.blob,stickers:t.stickers,attachment:t.attachment,serviceInfo:t.service_info},t)])}}catch(e){console.log(e)}},startEvents:function(){var e,t;cur.idleManager.start(),cur.updateInt=setInterval((function(){ie.update(0)}),2e4),(0,v.addEvent)(window,"scroll",ie.scrollCheck),(0,v.addEvent)(window,"resize",ie.scrollCheck),(null==(t=cur)||null==(e=t.options)?void 0:e.pagination_time_interval_check_enabled)&&(0,d.feedPaginationIntervalCheckInit)((function(){ie._scrollCheck()}))},onFeedPageLeaveHandler:()=>{window.cur.topRow&&Page.postsUnseen([(0,V.postsGetRaws)(window.cur.topRow)])},mentionClick:function(e,t){let o=e,s=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];if(!s)return nav.go(e,t);for(s=s.split("_");e;e=e.parentNode){let r=(e.id||"").match(/^replies(-?\d+_topic\d+)$/);if(r){if(r[1].split("_")[0]==s[0])return Wall.showReply(o,r[1],s[0]+"topic_"+s[1],t);break}}return nav.go(e,t)},toggleCustomFeedTab:function(e,t){return(0,k.hasClass)(e,"feed_tab_link_hidden")?((0,k.removeClass)(e,"feed_tab_link_hidden"),(0,b.setCookie)("remixcustom_feed_added",t)):(0,P.lockButton)(e),ie.checkTabsFilter((0,k.geByClass1)("_feed_custom_"+t),t)},recomSubscribe:function(e,t,o){let s,r,n=o?t:(0,k.domPS)(t),i=o?(0,k.domNS)(t):t;o?(s="/al_feed.php",r={act:"subscr",oid:e,from:nav.objLoc.section,hash:(0,k.val)("feed_recom_hash")}):(s="/al_fans.php",r={act:"unsub",oid:e,hash:(0,k.val)("feed_recom_hash"),no_response:1}),ajax.post(s,r,{onDone:function(){(0,k.toggle)(n,!o),(0,k.toggle)(i,!!o),"recommended"!=nav.objLoc.section&&nav.go(nav.objLoc,!1,{params:{norecom:1}})},showProgress:()=>(0,P.lockButton)(t),hideProgress:()=>(0,P.unlockButton)(t)})},clickBlogReminder:function(e,t,o,s,r,n){if(ajax.post("blog.php",{act:"click_reminder",hash:s,nid:t,accept:1,target:n},{onDone:function(){}}),"_blank"!==(0,k.attr)(e,"target"))return(0,v.cancelEvent)(r),nav.go(o)},hideBlogReminder:function(e,t,o,s){o&&(0,v.cancelEvent)(o),(0,k.re)("feed_blog_reminder"),ajax.post("blog.php",{act:"hide_reminder",hash:e,nid:t,accept:0,target:s},{onDone:function(){}})},preloadVideos:function(e){function t(e){let t=new XMLHttpRequest;t.open("GET",e),t.send()}e&&cur.videoAutoplayScrollHandler&&(cur.videoAutoplayPreloaded=cur.videoAutoplayPreloaded||{},(0,L.each)(e,(function(e,o){t(o.index_url),t(o.index_url.replace(/index-(.+).m3u8/,"seg-1-$1.ts")),cur.videoAutoplayPreloaded[o.video]=o.quality})))},expandJoinedGroups:function(e,t){return(0,v.cancelEvent)(t),(0,k.show)((0,k.geByClass1)("feed_groups_hidden_list",e.parentNode)),(0,k.re)(e),!1},showAllFilters:function(e){(0,k.re)(e);let t=(0,k.geByClass)("hide",e.parentNode);for(let e=0;e<t.length;e++)(0,k.removeClass)(t[e],"hide")},toggleSubscription:function(e,t,o,s,r){let n=(0,k.domClosest)("_ui_menu_wrap",e);n&&uiActionsMenu.toggle(n,!(0,k.hasClass)(n,"shown")),Page.toggleSubscription(e,t,o,s,r,(function(e,t){(0,k.geByClass)("post",cur.rowsCont).forEach((function(o){let r=o.id.split("_"),n=+r[r.length-2].replace("post","");if(s!==n)return;let i=(0,k.geByClass1)("page_action_subscribe",o);(0,k.val)(i,e),(0,k.domData)(i,"act",t)}))}))},onPostLoaded:function(e,t){Wall.onPostLoaded(e,t),this.initPrettyCardGallery(e),t&&!(0,k.hasClass)(e,"_post")&&ie.initPhotoCarouselInPost((0,k.geByClass1)("_post",e))},openPostSuggest:function(e,t,o){if(t&&null!=t.type)switch(t.type){case 1:const r=t.postData,n=t.notHideByClick;let i=(0,k.ge)("post_field");return void((i?(0,L.trim)(i.innerHTML).replace("<br>",""):"")||cur.wallAddMedia&&cur.wallAddMedia.attachCount()?(0,E.showFastBox)({title:p.getLang("news_suggest_alert_title")},p.getLang("news_suggest_alert_text"),p.getLang("global_yes"),(function(){(0,m.curBox)().hide(),s(r,n)}),p.getLang("global_cancel")):s(r,n));case 4:return window.open(t.link),void ie.suggestionEvent(e,"open",o,t.notHideByClick)}function s(t,s=!1){cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),cur.options&&(cur.options.situational_suggest_id=e),t[0]=t[0].replace(/<br>/g,"\n");let r=cur.editing;delete cur.editing,Wall.setDraft(t),ie.suggestionEvent(e,"open",o,s),cur.editing=r}},suggestionEvent:(e,t,o,s)=>(ajax.post("al_feed.php",{act:"suggestion_event",suggest_id:e,event_type:t,not_hide_by_click:(0,L.intval)(s)}),s||(0,k.re)((0,k.geByClass1)("_post_suggest")),(0,v.cancelEvent)(o)),closePostSuggest(e,t,o){ie.suggestionEvent(e,t,o,!1)},hideRightBlock:oe.hideRightBlock,initPrettyCardGallery:function(e){if(!(0,k.geByClass1)("pretty-cards",e))return!1;window.PrettyCardGallery&&new window.PrettyCardGallery(e)},initPhotoCarouselInPost(e){e&&(0,H.initPhotoBlockInPostLoader)(e,ie.sendPhotoCarouselEvent.bind(ie)).then((t=>{(0,k.data)(e,"photo_carousel",t),(0,Z.pushNavDestroy)((()=>{(0,k.removeData)(e,"photo_carousel")}))}))},destroyPhotoCarouselByPost(e){const t=(0,k.data)(e,"photo_carousel");t&&t.destroy()},sendPhotoCarouselEvent(e,t,o=null){var s;if(!t)return;let r=null==(s=t.querySelector(".post_img"))?void 0:s.getAttribute("data-post-id");var n;(0,i.partConfigEnabled)("feed_photo_carousel_click_events_web")&&(r=null==(n=t)?void 0:n.getAttribute("data-post-id"));if(!r)return;let a="",l="",c=/(-?\d+)_p(\d+)/;(0,i.partConfigEnabled)("feed_photo_carousel_click_events_web")&&(c=/1_(-?\d+)_(\d+)/);const d=r.match(c);if(!d||!d[1]||!d[2])return;a=d[1],l=d[2];let u=t.getAttribute("data-photo-raw-id");const _=t.getAttribute("data-pseudopost-type"),p=t.getAttribute("data-post-creation-timestamp");if(!u&&"photo_group"===_&&o){const e=o.target;if(e&&e.href){const t=e.href.match(/\/photo(-?\d+_\d+)/);u=t&&t[1]}}const f=ie.getModuleRef();let h=null;(0,i.partConfigEnabled)("feed_photo_carousel_click_events_web")&&(h=(0,ne.getTrackCodeFromPost)(t));const g={event_type:e,content_type:_,post_owner_id:a,post_id:l,photo_raw_id:u,timestamp:p,ref:f};h&&Object.assign(g,{track_code:h}),(0,A.statlogsValueEvent)("feed_new_carousel_stat",g)},disablePhotoRecognizeBlock(e){const t=document.getElementById(`${j.BlockTypeIds.PhotoRecognize}`);t&&(cur.feedEntriesHTML[`${j.BlockTypeIds.PhotoRecognize}_ignored`]=(0,k.val)(t),ajax.post("al_feed.php",{act:"disable_recognize_block",hash:e},{onDone:e=>{(0,k.val)(t,e)}}))},enablePhotoRecognizeBlock(e){const t=document.getElementById(`${j.BlockTypeIds.PhotoRecognize}`);t&&ajax.post("al_feed.php",{act:"enable_recognize_block",hash:e},{onDone:()=>{(0,k.val)(t,cur.feedEntriesHTML[`${j.BlockTypeIds.PhotoRecognize}_ignored`])}})},initRightBlocks:e=>{(0,X.initFeedRightBlocksLoader)(e)}};ie.scrollCheck=(0,r.throttle)(ie._scrollCheck,50)},385295:(e,t,o)=>{o.d(t,{longView:()=>a});var s=o(829234),r=o(795558),n=o(82161);let i={tracking:[],viewed:{}};const a={process:(e,t)=>{const{tracking:o,viewed:a}=i;if(0===o.length)return[];let l=[];return(0,n.each)(o,(function(o,i){var c;let d=(0,r.domFC)(i),u=null==(c=d)?void 0:c.id;if(!d||!u)return;let _=(0,r.domData)(d,"ad-block-uid"),p=""+u;if(_&&(p+="_"+_),!a[p]&&document.body.contains(i))if((0,s.isElemViewable)(i,.5,e,t)){let e=Date.now();i.longViewStartedAt?e-i.longViewStartedAt>=1e3&&(a[p]=!0,l.push((0,n.extend)({},(0,s.postsGetRaws)(i),{long:1}))):i.longViewStartedAt=Date.now()}else i.longViewStartedAt=null})),l},registerElement:e=>!!e&&(!!e.longViewTracking||!e.longViewRegistered&&(e.longViewRegistered=!0,e.longViewTracking=(0,s.isAutoplayAd)(e)||(0,s.isAdWithLongImpression)(e)||(0,s.isAdWithLongImpressionOnly)(e),!!e.longViewTracking&&(i.tracking.push(e),!0)))}},719645:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{evalWithLogging:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(643897);const evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.logEvalError)(e,evalString)}}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,o,s)=>{if(!t){var r=1/0;for(l=0;l<deferred.length;l++){for(var[t,o,s]=deferred[l],n=!0,i=0;i<t.length;i++)(!1&s||r>=s)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[i])))?t.splice(i--,1):(n=!1,s<r&&(r=s));if(n){deferred.splice(l--,1);var a=o();void 0!==a&&(e=a)}}return e}s=s||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>s;l--)deferred[l]=deferred[l-1];deferred[l]=[t,o,s]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var s={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;"object"==typeof r&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,__webpack_require__.d(o,s),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,o)=>(__webpack_require__.f[o](e,t),t)),[])),__webpack_require__.u=e=>25394===e?"AudioLongtapModal.7e0dfcf5bfaeea74634a.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.ef06223020efb2b6ec6b.js":79852===e?"37d152adcd0dd111ce505d394803d701.async.f06867e3cb1f30e8925c.js":96816===e?"web-audio-lyrics-modal.1a211e52d789ac7fac77.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.3d45c322ccf50af43298.js":28872===e?"feed-client-nav-skeleton.93951c516f1e3f2a55ad.js":35953===e?"feed-client-nav-async-right-block.98e503ddcd7a638e1b63.js":59240===e?"performance-stats.59c5c96e7372abb54c8c.js":53290===e?"init_feed_right_blocks.4667ec8039f044934a44.js":63167===e?"video_live_blacklist_box.89294cdf230bf5514f58.js":37513===e?"init_check_validation_phone.d726dc623ab93f7e759d.js":15302===e?"init_photo_block_in_post.adec95403c70cbce0433.js":9202===e?"9202.be55f73a991e4eb41a2e.js":79118===e?e+".87b62f94f0e27cef52c4.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{25394:"5e3e105ffae6ba5c38a9",37513:"2b70e2cab2ef379cac40",53290:"b523c55b8e26d3b1a280",57468:"a2979e7d82457c1ea9fc",75980:"5bbee2c9f3e189193a73"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,o,s)=>{if(inProgress[e])inProgress[e].push(t);else{var r,n;if(void 0!==o)for(var i=document.getElementsByTagName("script"),a=0;a<i.length;a++){var l=i[a];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+o){r=l;break}}r||(n=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.setAttribute("data-webpack","vk:"+o),r.src=e),inProgress[e]=[t];var c=(t,o)=>{r.onerror=r.onload=null,clearTimeout(d);var s=inProgress[e];if(delete inProgress[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(o))),t)return t(o)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=c.bind(null,r.onerror),r.onload=c.bind(null,r.onload),n&&document.head.appendChild(r)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,o)=>{var s=__webpack_require__.miniCssF(e),r=__webpack_require__.p+s;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var r=(i=o[s]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){var i;if((r=(i=n[s]).getAttribute("data-href"))===e||r===t)return i}})(s,r))return t();((e,t,o,s)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=n=>{if(r.onerror=r.onload=null,"load"===n.type)o();else{var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=a,r.parentNode.removeChild(r),s(l)}},r.href=t,document.head.appendChild(r)})(e,r,t,o)})),installedCssChunks={12495:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{25394:1,37513:1,53290:1,57468:1,75980:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={12495:0};__webpack_require__.f.j=(t,o)=>{var s=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var r=new Promise(((o,r)=>s=e[t]=[o,r]));o.push(s[2]=r);var n=__webpack_require__.p+__webpack_require__.u(t),i=new Error;__webpack_require__.l(n,(o=>{if(__webpack_require__.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",i.name="ChunkLoadError",i.type=r,i.request=n,s[1](i)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var s,r,[n,i,a]=o,l=0;if(n.some((t=>0!==e[t]))){for(s in i)__webpack_require__.o(i,s)&&(__webpack_require__.m[s]=i[s]);if(a)var c=a(__webpack_require__)}for(t&&t(o);l<n.length;l++)r=n[l],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(c)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,76400,24509,40885,68592,21370,39211,88656],(()=>__webpack_require__(398986)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();